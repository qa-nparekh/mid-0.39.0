{"version":3,"file":"playwright\\index.mjs","sources":["webpack://@sqai/web/./src/playwright/index.ts"],"sourcesContent":["import { Agent as PageAgent } from '@sqai/core/agent';\r\nimport type { Page as PlaywrightPage } from 'playwright';\r\nimport { WebPage as PlaywrightWebPage } from './page';\r\n\r\nexport type { PlayWrightAiFixtureType } from './ai-fixture';\r\nexport { PlaywrightAiFixture } from './ai-fixture';\r\nexport { overrideAIConfig } from '@sqai/shared/env';\r\nexport { WebPage as PlaywrightWebPage } from './page';\r\nimport type { WebPageAgentOpt } from '@/web-element';\r\nimport { getDebug } from '@sqai/shared/logger';\r\nimport { forceClosePopup } from '../puppeteer/base-page';\r\n\r\nconst debug = getDebug('playwright:agent');\r\n\r\nexport class PlaywrightAgent extends PageAgent<PlaywrightWebPage> {\r\n  constructor(page: PlaywrightPage, opts?: WebPageAgentOpt) {\r\n    const webPage = new PlaywrightWebPage(page, opts);\r\n    super(webPage, opts);\r\n\r\n    const { forceSameTabNavigation = true } = opts ?? {};\r\n\r\n    if (forceSameTabNavigation) {\r\n      forceClosePopup(page, debug);\r\n    }\r\n  }\r\n\r\n  async waitForNetworkIdle(timeout = 1000) {\r\n    await this.page.underlyingPage.waitForLoadState('networkidle', { timeout });\r\n  }\r\n}\r\n"],"names":["debug","getDebug","PlaywrightAgent","PageAgent","timeout","page","opts","webPage","PlaywrightWebPage","forceSameTabNavigation","forceClosePopup"],"mappings":";;;;;;AAYA,MAAMA,QAAQC,SAAS;AAEhB,MAAMC,wBAAwBC;IAYnC,MAAM,mBAAmBC,UAAU,IAAI,EAAE;QACvC,MAAM,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,eAAe;YAAEA;QAAQ;IAC3E;IAbA,YAAYC,IAAoB,EAAEC,IAAsB,CAAE;QACxD,MAAMC,UAAU,IAAIC,QAAkBH,MAAMC;QAC5C,KAAK,CAACC,SAASD;QAEf,MAAM,EAAEG,yBAAyB,IAAI,EAAE,GAAGH,QAAQ,CAAC;QAEnD,IAAIG,wBACFC,gBAAgBL,MAAML;IAE1B;AAKF"}