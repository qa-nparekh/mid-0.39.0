{"version":3,"file":"static/js/index.5b405a8b.js","sources":["webpack://chrome-extension/./src/components/playground/index.tsx","webpack://chrome-extension/./src/icons/auto-connect.svg","webpack://chrome-extension/./src/icons/play.svg","webpack://chrome-extension/../../packages/web-integration/dist/es/web-element.mjs","webpack://chrome-extension/../../packages/web-integration/dist/es/web-page.mjs","webpack://chrome-extension/../../packages/web-integration/dist/es/chrome-extension/cdpInput.mjs","webpack://chrome-extension/../../packages/web-integration/dist/es/chrome-extension/dynamic-scripts.mjs","webpack://chrome-extension/../../packages/web-integration/dist/es/chrome-extension/page.mjs","webpack://chrome-extension/../../packages/web-integration/dist/es/bridge-mode/page-browser-side.mjs","webpack://chrome-extension/./src/utils/bridgeConnector.ts","webpack://chrome-extension/./src/utils/bridgeDB.ts","webpack://chrome-extension/./src/extension/misc.tsx","webpack://chrome-extension/./src/extension/bridge/index.tsx","webpack://chrome-extension/./src/utils/indexedDB.ts","webpack://chrome-extension/./src/store.tsx","webpack://chrome-extension/../../packages/recorder/dist/components/shiny-text.js","webpack://chrome-extension/../../packages/recorder/dist/RecordTimeline.js","webpack://chrome-extension/./src/utils/eventOptimizer.ts","webpack://chrome-extension/./src/extension/recorder/generators/shared/testGenerationUtils.ts","webpack://chrome-extension/./src/extension/recorder/generators/playwrightGenerator.ts","webpack://chrome-extension/./src/extension/recorder/generators/yamlGenerator.ts","webpack://chrome-extension/./src/extension/recorder/shared/exportControlsUtils.ts","webpack://chrome-extension/./src/extension/recorder/utils.ts","webpack://chrome-extension/./src/extension/recorder/components/ProgressModal/ThinkingProcessSection.tsx","webpack://chrome-extension/./src/extension/recorder/components/ProgressModal/confetti.ts","webpack://chrome-extension/./src/extension/recorder/components/ProgressModal/CodeBlock.tsx","webpack://chrome-extension/./src/extension/recorder/components/ProgressModal/StepList.tsx","webpack://chrome-extension/./src/extension/recorder/components/ProgressModal.tsx","webpack://chrome-extension/./src/extension/recorder/components/RecordDetail.tsx","webpack://chrome-extension/./src/extension/recorder/components/RecordList.tsx","webpack://chrome-extension/./src/extension/recorder/components/SessionModals.tsx","webpack://chrome-extension/./src/extension/recorder/hooks/useLifecycleCleanup.ts","webpack://chrome-extension/./src/extension/recorder/hooks/useRecordingControl.ts","webpack://chrome-extension/./src/extension/recorder/hooks/useRecordingSession.ts","webpack://chrome-extension/./src/extension/recorder/hooks/useTabMonitoring.ts","webpack://chrome-extension/./src/extension/recorder/index.tsx","webpack://chrome-extension/../../packages/web-integration/dist/es/chrome-extension/agent.mjs","webpack://chrome-extension/./src/extension/popup/index.tsx","webpack://chrome-extension/./src/extension/recorder/types.ts","webpack://chrome-extension/./src/App.css?bb07","webpack://chrome-extension/./src/index.tsx","webpack://chrome-extension/./src/App.tsx","webpack://chrome-extension/./src/utils/chrome.ts","webpack://chrome-extension/./src/App.css","webpack://chrome-extension/../../packages/visualizer/dist/es/component/blackboard/index.css","webpack://chrome-extension/../../packages/visualizer/dist/es/component/env-config-reminder/index.css","webpack://chrome-extension/../../packages/visualizer/dist/es/component/history-selector/index.css","webpack://chrome-extension/../../packages/visualizer/dist/es/component/nav-actions/style.css","webpack://chrome-extension/../../packages/visualizer/dist/es/component/player/index.css","webpack://chrome-extension/../../packages/visualizer/dist/es/component/playground-result/index.css","webpack://chrome-extension/../../packages/visualizer/dist/es/component/prompt-input/index.css","webpack://chrome-extension/../../packages/visualizer/dist/es/component/shiny-text/index.css","webpack://chrome-extension/../../packages/visualizer/dist/es/component/universal-playground/index.css","webpack://chrome-extension/../../packages/core/dist/es/ai-model/prompt/yaml-generator.mjs","webpack://chrome-extension/../../packages/core/dist/es/ai-model/prompt/playwright-generator.mjs","webpack://chrome-extension/../../packages/core/dist/es/ai-model/service-caller/index.mjs","webpack://chrome-extension/../../packages/core/dist/es/index.mjs","webpack://chrome-extension/../../packages/playground/dist/es/common.mjs","webpack://chrome-extension/../../packages/playground/dist/es/adapters/local-execution.mjs","webpack://chrome-extension/../../packages/playground/dist/es/adapters/remote-execution.mjs","webpack://chrome-extension/../../packages/playground/dist/es/sdk/index.mjs","webpack://chrome-extension/../../packages/shared/dist/es/baseDB.mjs","webpack://chrome-extension/../../packages/shared/dist/es/constants/example-code.mjs","webpack://chrome-extension/../../packages/shared/dist/es/constants/index.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/env-config-reminder/index.css?2d53","webpack://chrome-extension/../../packages/visualizer/dist/es/component/env-config-reminder/index.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/env-config/index.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/nav-actions/style.css?6d17","webpack://chrome-extension/../../packages/visualizer/dist/es/component/nav-actions/index.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/shiny-text/index.css?d584","webpack://chrome-extension/../../packages/visualizer/dist/es/component/shiny-text/index.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/utils/constants.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/utils/index.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/utils/replay-scripts.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/blackboard/index.css?d158","webpack://chrome-extension/../../packages/visualizer/dist/es/component/blackboard/index.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/misc/index.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/context-preview/index.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/player/index.css?b304","webpack://chrome-extension/../../packages/visualizer/dist/es/icons/global-perspective.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/icons/player-setting.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/icons/show-marker.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/utils/pixi-loader.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/player/index.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/playground-result/index.css?a26a","webpack://chrome-extension/../../packages/visualizer/dist/es/component/playground-result/index.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/universal-playground/index.css?eb8f","webpack://chrome-extension/../../packages/visualizer/dist/es/icons/avatar.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/prompt-input/index.css?7e09","webpack://chrome-extension/../../packages/visualizer/dist/es/store/history.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/types.mjs","webpack://chrome-extension/../../packages/web-integration/dist/es/static/static-agent.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/utils/playground-utils.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/icons/setting.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/config-selector/index.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/form-field/index.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/icons/close.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/icons/history.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/icons/magnifying-glass.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/history-selector/index.css?c1b9","webpack://chrome-extension/../../packages/visualizer/dist/es/component/history-selector/index.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/prompt-input/index.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/universal-playground/index.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/hooks/usePlaygroundState.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/hooks/usePlaygroundExecution.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/universal-playground/providers/storage-provider.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/component/universal-playground/providers/indexeddb-storage-provider.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/hooks/useSafeOverrideAIConfig.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/store/store.mjs","webpack://chrome-extension/../../packages/visualizer/dist/es/utils/color.mjs","webpack://chrome-extension/webpack/runtime/compat_get_default_export","webpack://chrome-extension/webpack/runtime/create_fake_namespace_object","webpack://chrome-extension/webpack/runtime/define_property_getters","webpack://chrome-extension/webpack/runtime/ensure_chunk","webpack://chrome-extension/webpack/runtime/get javascript chunk filename","webpack://chrome-extension/webpack/runtime/global","webpack://chrome-extension/webpack/runtime/has_own_property","webpack://chrome-extension/webpack/runtime/load_script","webpack://chrome-extension/webpack/runtime/make_namespace_object","webpack://chrome-extension/webpack/runtime/node_module_decorator","webpack://chrome-extension/webpack/runtime/nonce","webpack://chrome-extension/webpack/runtime/on_chunk_loaded","webpack://chrome-extension/webpack/runtime/public_path","webpack://chrome-extension/webpack/runtime/rspack_version","webpack://chrome-extension/webpack/runtime/jsonp_chunk_loading","webpack://chrome-extension/webpack/runtime/rspack_unique_id"],"sourcesContent":["import { PlaygroundSDK } from '@sqai/playground';\r\nimport {\r\n  UniversalPlayground,\r\n  createStorageProvider,\r\n  detectBestStorageType,\r\n} from '@sqai/visualizer';\r\nimport { useEnvConfig } from '@sqai/visualizer';\r\nimport { useCallback, useEffect, useMemo, useRef } from 'react';\r\nimport { getExtensionVersion } from '../../utils/chrome';\r\nimport './index.less';\r\n\r\ndeclare const __SDK_VERSION__: string;\r\n\r\nexport interface PlaygroundProps {\r\n  getAgent: (forceSameTabNavigation?: boolean) => any | null;\r\n  showContextPreview?: boolean;\r\n  dryMode?: boolean;\r\n}\r\n\r\n// Browser Extension Playground Component using Universal Playground\r\nexport function BrowserExtensionPlayground({\r\n  getAgent,\r\n  showContextPreview = true,\r\n  dryMode = false,\r\n}: PlaygroundProps) {\r\n  const extensionVersion = getExtensionVersion();\r\n  const { forceSameTabNavigation } = useEnvConfig((state) => ({\r\n    forceSameTabNavigation: state.forceSameTabNavigation,\r\n  }));\r\n\r\n  // Check if run button should be enabled - but DON'T call getAgent yet\r\n  const { config } = useEnvConfig();\r\n  const runEnabled = !!getAgent && Object.keys(config || {}).length >= 1;\r\n\r\n  // Create storage provider for persistence - use IndexedDB for better capacity\r\n  const storage = useMemo(() => {\r\n    const bestStorageType = detectBestStorageType();\r\n    console.log(`Chrome Extension Playground using ${bestStorageType} storage`);\r\n    return createStorageProvider(\r\n      bestStorageType,\r\n      'chrome-extension-playground',\r\n    );\r\n  }, []);\r\n\r\n  // Simplified agent tracking using a single ref for both agent and SDK\r\n  const agentInfoRef = useRef<{ agent: any; sdk: PlaygroundSDK } | null>(null);\r\n\r\n  // Helper function to detach all debuggers\r\n  const detachAllDebuggers = async () => {\r\n    try {\r\n      const targets = await chrome.debugger.getTargets();\r\n      for (const target of targets) {\r\n        if (target.attached && target.tabId) {\r\n          try {\r\n            await chrome.debugger.detach({ tabId: target.tabId });\r\n          } catch (e) {\r\n            // Ignore errors, debugger might already be detached\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('Failed to detach debuggers:', e);\r\n    }\r\n  };\r\n\r\n  // Helper to cleanup agent\r\n  const cleanupAgent = useCallback((agent: any) => {\r\n    if (agent) {\r\n      try {\r\n        agent.page?.destroy?.();\r\n        agent.destroy?.();\r\n      } catch (error) {\r\n        console.warn('Failed to cleanup agent:', error);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Create SDK when needed\r\n  const playgroundSDK = useMemo(() => {\r\n    if (!runEnabled) {\r\n      return null;\r\n    }\r\n\r\n    try {\r\n      const agent = getAgent(forceSameTabNavigation);\r\n      if (!agent) {\r\n        throw new Error('Please configure AI settings first');\r\n      }\r\n\r\n      // Check if we can reuse existing SDK\r\n      if (agentInfoRef.current && agentInfoRef.current.agent === agent) {\r\n        return agentInfoRef.current.sdk;\r\n      }\r\n\r\n      // Need to create new SDK\r\n      // Clean up previous agent if it exists\r\n      if (agentInfoRef.current) {\r\n        cleanupAgent(agentInfoRef.current.agent);\r\n      }\r\n\r\n      // Detach all debuggers before creating new SDK\r\n      detachAllDebuggers().then(() => {\r\n        console.log('[DEBUG] Detached all debuggers before creating SDK');\r\n      });\r\n\r\n      // Create new SDK\r\n      const newSdk = new PlaygroundSDK({\r\n        type: 'local-execution',\r\n        agent: agent,\r\n      });\r\n\r\n      // Store the new agent and SDK\r\n      agentInfoRef.current = { agent, sdk: newSdk };\r\n      return newSdk;\r\n    } catch (error) {\r\n      console.error('Failed to initialize PlaygroundSDK:', error);\r\n      return null;\r\n    }\r\n  }, [runEnabled, getAgent, forceSameTabNavigation, cleanupAgent]);\r\n\r\n  // Progress callback handling is now managed in usePlaygroundExecution hook\r\n  // No need to override onProgressUpdate here\r\n\r\n  // Context provider - delay creation until actually needed\r\n  const contextProvider = useMemo(() => {\r\n    if (!showContextPreview) {\r\n      return undefined;\r\n    }\r\n\r\n    // Return a lazy context provider that only creates agent when needed\r\n    return {\r\n      async getUIContext() {\r\n        try {\r\n          const agent = getAgent(forceSameTabNavigation);\r\n          if (!agent) {\r\n            throw new Error('Please configure AI settings first');\r\n          }\r\n          return agent.page.screenshot();\r\n        } catch (error) {\r\n          console.warn('Failed to get UI context:', error);\r\n          // Return null context instead of throwing to allow UI to initialize\r\n          return null;\r\n        }\r\n      },\r\n      async refreshContext() {\r\n        try {\r\n          const agent = getAgent(forceSameTabNavigation);\r\n          if (!agent) {\r\n            throw new Error('Please configure AI settings first');\r\n          }\r\n          return agent.page.screenshot();\r\n        } catch (error) {\r\n          console.warn('Failed to refresh context:', error);\r\n          // Return null context instead of throwing to allow UI to initialize\r\n          return null;\r\n        }\r\n      },\r\n    };\r\n  }, [showContextPreview, getAgent, forceSameTabNavigation]);\r\n\r\n  // Cleanup effect to detach chrome.debugger when component unmounts\r\n  useEffect(() => {\r\n    return () => {\r\n      // When component unmounts, clean up agent and detach all debuggers\r\n      if (agentInfoRef.current) {\r\n        cleanupAgent(agentInfoRef.current.agent);\r\n        agentInfoRef.current = null;\r\n      }\r\n    };\r\n  }, [cleanupAgent]);\r\n\r\n  return (\r\n    <UniversalPlayground\r\n      playgroundSDK={playgroundSDK}\r\n      storage={storage}\r\n      contextProvider={contextProvider}\r\n      config={{\r\n        showContextPreview,\r\n        layout: 'vertical',\r\n        showVersionInfo: true,\r\n        enableScrollToBottom: true,\r\n        showEnvConfigReminder: true,\r\n      }}\r\n      branding={{\r\n        title: 'Playground',\r\n        version: `${extensionVersion}(SDK v${__SDK_VERSION__})`,\r\n      }}\r\n      className=\"chrome-extension-playground\"\r\n      dryMode={dryMode}\r\n    />\r\n  );\r\n}\r\n\r\nexport default BrowserExtensionPlayground;\r\n","import * as React from \"react\";\nconst SvgAutoConnect = props => <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"none\" viewBox=\"0 0 16 16\" {...props}><path fill=\"#000\" d=\"M2 7.333c.368 0 .667.299.667.667a5.333 5.333 0 0 0 9.037 3.838.666.666 0 1 1 .926.959A6.65 6.65 0 0 1 8 14.667a6.66 6.66 0 0 1-5.333-2.666v1.332a.667.667 0 0 1-1.334 0V8c0-.368.299-.667.667-.667m8.362 3.213h-.984L8.956 9.29H7.043l-.42 1.256h-.985L7.43 5.454h1.138zM8 1.333a6.66 6.66 0 0 1 5.333 2.665V2.667a.667.667 0 0 1 1.334 0V8a.665.665 0 0 1-.667.667.665.665 0 0 1-.667-.667 5.333 5.333 0 0 0-9.17-3.704.666.666 0 1 1-.96-.926A6.65 6.65 0 0 1 8 1.333M7.291 8.55h1.416l-.688-2.051h-.04z\" /></svg>;\nexport default SvgAutoConnect;","import * as React from \"react\";\nconst SvgPlay = props => <svg xmlns=\"http://www.w3.org/2000/svg\" width={14} height={14} fill=\"none\" viewBox=\"0 0 14 14\" {...props}><path stroke=\"#fff\" strokeLinejoin=\"round\" strokeWidth={1.313} d=\"M3.467 2.057a.66.66 0 0 1 .656 0l7.578 4.375a.657.657 0 0 1 0 1.136l-7.578 4.375a.656.656 0 0 1-.984-.568v-8.75c0-.234.125-.451.328-.568Z\" /></svg>;\nexport default SvgPlay;","import { traverseTree } from \"@sqai/shared/extractor\";\nimport { getDebug } from \"@sqai/shared/logger\";\nimport { commonContextParser } from \"@sqai/core/agent\";\nfunction _define_property(obj, key, value) {\n    if (key in obj) Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n    });\n    else obj[key] = value;\n    return obj;\n}\nclass WebElementInfoImpl {\n    constructor({ content, rect, id, attributes, indexId, xpaths, isVisible }){\n        _define_property(this, \"content\", void 0);\n        _define_property(this, \"rect\", void 0);\n        _define_property(this, \"center\", void 0);\n        _define_property(this, \"id\", void 0);\n        _define_property(this, \"indexId\", void 0);\n        _define_property(this, \"attributes\", void 0);\n        _define_property(this, \"xpaths\", void 0);\n        _define_property(this, \"isVisible\", void 0);\n        this.content = content;\n        this.rect = rect;\n        this.center = [\n            Math.floor(rect.left + rect.width / 2),\n            Math.floor(rect.top + rect.height / 2)\n        ];\n        this.id = id;\n        this.attributes = attributes;\n        this.indexId = indexId;\n        this.xpaths = xpaths;\n        this.isVisible = isVisible;\n    }\n}\nconst debug = getDebug('web:parse-context');\nasync function WebPageContextParser(page, _opt) {\n    var _page_getElementsNodeTree;\n    const basicContext = await commonContextParser(page, {\n        uploadServerUrl: _opt.uploadServerUrl\n    });\n    debug('will traverse element tree');\n    const tree = await (null == (_page_getElementsNodeTree = page.getElementsNodeTree) ? void 0 : _page_getElementsNodeTree.call(page)) || {\n        node: null,\n        children: []\n    };\n    const webTree = traverseTree(tree, (elementInfo)=>{\n        const { rect, id, content, attributes, indexId, isVisible } = elementInfo;\n        return new WebElementInfoImpl({\n            rect,\n            id,\n            content,\n            attributes,\n            indexId,\n            isVisible\n        });\n    });\n    debug('traverse element tree end');\n    return {\n        ...basicContext,\n        tree: webTree\n    };\n}\nconst limitOpenNewTabScript = `\nif (!window.__MIDSCENE_NEW_TAB_INTERCEPTOR_INITIALIZED__) {\n  window.__MIDSCENE_NEW_TAB_INTERCEPTOR_INITIALIZED__ = true;\n\n  // Intercept the window.open method (only once)\n  window.open = function(url) {\n    console.log('Blocked window.open:', url);\n    window.location.href = url;\n    return null;\n  };\n\n  // Block all a tag clicks with target=\"_blank\" (only once)\n  document.addEventListener('click', function(e) {\n    const target = e.target.closest('a');\n    if (target && target.target === '_blank') {\n      e.preventDefault();\n      console.log('Blocked new tab:', target.href);\n      window.location.href = target.href;\n      target.removeAttribute('target');\n    }\n  }, true);\n}\n`;\nexport { WebElementInfoImpl, WebPageContextParser, limitOpenNewTabScript };\n\n//# sourceMappingURL=web-element.mjs.map","import node_assert from \"node:assert\";\nimport { AbstractInterface, defineActionClearInput, defineActionDoubleClick, defineActionDragAndDrop, defineActionHover, defineActionInput, defineActionKeyboardPress, defineActionLongPress, defineActionRightClick, defineActionScroll, defineActionSwipe, defineActionTap } from \"@sqai/core/device\";\nimport { sleep } from \"@sqai/core/utils\";\nimport { getDebug } from \"@sqai/shared/logger\";\nimport { transformHotkeyInput } from \"@sqai/shared/us-keyboard-layout\";\nconst debug = getDebug('web:page');\nfunction normalizeKeyInputs(value) {\n    const inputs = Array.isArray(value) ? value : [\n        value\n    ];\n    const result = [];\n    for (const input of inputs){\n        if ('string' != typeof input) {\n            result.push(input);\n            continue;\n        }\n        const trimmed = input.trim();\n        if (!trimmed) {\n            result.push(input);\n            continue;\n        }\n        let normalized = trimmed;\n        if (normalized.length > 1 && normalized.includes('+')) normalized = normalized.replace(/\\s*\\+\\s*/g, ' ');\n        if (/\\s/.test(normalized)) normalized = normalized.replace(/\\s+/g, ' ');\n        const transformed = transformHotkeyInput(normalized);\n        if (1 === transformed.length && '' === transformed[0] && '' !== trimmed) {\n            result.push(input);\n            continue;\n        }\n        if (0 === transformed.length) {\n            result.push(input);\n            continue;\n        }\n        result.push(...transformed);\n    }\n    return result;\n}\nfunction getKeyCommands(value) {\n    const keys = normalizeKeyInputs(value);\n    return keys.reduce((acc, k)=>{\n        const includeMeta = keys.includes('Meta') || keys.includes('Control');\n        if (includeMeta && ('a' === k || 'A' === k)) return acc.concat([\n            {\n                key: k,\n                command: 'SelectAll'\n            }\n        ]);\n        if (includeMeta && ('c' === k || 'C' === k)) return acc.concat([\n            {\n                key: k,\n                command: 'Copy'\n            }\n        ]);\n        if (includeMeta && ('v' === k || 'V' === k)) return acc.concat([\n            {\n                key: k,\n                command: 'Paste'\n            }\n        ]);\n        return acc.concat([\n            {\n                key: k\n            }\n        ]);\n    }, []);\n}\nclass AbstractWebPage extends AbstractInterface {\n    get mouse() {\n        return {\n            click: async (x, y, options)=>{},\n            wheel: async (deltaX, deltaY)=>{},\n            move: async (x, y)=>{},\n            drag: async (from, to)=>{}\n        };\n    }\n    get keyboard() {\n        return {\n            type: async (text)=>{},\n            press: async (action)=>{}\n        };\n    }\n    async clearInput(element) {}\n}\nconst commonWebActionsForWebPage = (page)=>[\n        defineActionTap(async (param)=>{\n            const element = param.locate;\n            node_assert(element, 'Element not found, cannot tap');\n            await page.mouse.click(element.center[0], element.center[1], {\n                button: 'left'\n            });\n        }),\n        defineActionRightClick(async (param)=>{\n            const element = param.locate;\n            node_assert(element, 'Element not found, cannot right click');\n            await page.mouse.click(element.center[0], element.center[1], {\n                button: 'right'\n            });\n        }),\n        defineActionDoubleClick(async (param)=>{\n            const element = param.locate;\n            node_assert(element, 'Element not found, cannot double click');\n            await page.mouse.click(element.center[0], element.center[1], {\n                button: 'left',\n                count: 2\n            });\n        }),\n        defineActionHover(async (param)=>{\n            const element = param.locate;\n            node_assert(element, 'Element not found, cannot hover');\n            await page.mouse.move(element.center[0], element.center[1]);\n        }),\n        defineActionInput(async (param)=>{\n            const element = param.locate;\n            if (element && 'append' !== param.mode) await page.clearInput(element);\n            if ('clear' === param.mode) return;\n            if (!param || !param.value) return;\n            await page.keyboard.type(param.value);\n        }),\n        defineActionKeyboardPress(async (param)=>{\n            const element = param.locate;\n            if (element) await page.mouse.click(element.center[0], element.center[1], {\n                button: 'left'\n            });\n            const keys = getKeyCommands(param.keyName);\n            await page.keyboard.press(keys);\n        }),\n        defineActionScroll(async (param)=>{\n            const element = param.locate;\n            const startingPoint = element ? {\n                left: element.center[0],\n                top: element.center[1]\n            } : void 0;\n            const scrollToEventName = null == param ? void 0 : param.scrollType;\n            if ('untilTop' === scrollToEventName) await page.scrollUntilTop(startingPoint);\n            else if ('untilBottom' === scrollToEventName) await page.scrollUntilBottom(startingPoint);\n            else if ('untilRight' === scrollToEventName) await page.scrollUntilRight(startingPoint);\n            else if ('untilLeft' === scrollToEventName) await page.scrollUntilLeft(startingPoint);\n            else if ('once' !== scrollToEventName && scrollToEventName) throw new Error(`Unknown scroll event type: ${scrollToEventName}, param: ${JSON.stringify(param)}`);\n            else {\n                if ((null == param ? void 0 : param.direction) !== 'down' && param && param.direction) if ('up' === param.direction) await page.scrollUp(param.distance || void 0, startingPoint);\n                else if ('left' === param.direction) await page.scrollLeft(param.distance || void 0, startingPoint);\n                else if ('right' === param.direction) await page.scrollRight(param.distance || void 0, startingPoint);\n                else throw new Error(`Unknown scroll direction: ${param.direction}`);\n                else await page.scrollDown((null == param ? void 0 : param.distance) || void 0, startingPoint);\n                await sleep(500);\n            }\n        }),\n        defineActionDragAndDrop(async (param)=>{\n            const from = param.from;\n            const to = param.to;\n            node_assert(from, 'missing \"from\" param for drag and drop');\n            node_assert(to, 'missing \"to\" param for drag and drop');\n            await page.mouse.drag({\n                x: from.center[0],\n                y: from.center[1]\n            }, {\n                x: to.center[0],\n                y: to.center[1]\n            });\n        }),\n        defineActionLongPress(async (param)=>{\n            const element = param.locate;\n            node_assert(element, 'Element not found, cannot long press');\n            const duration = null == param ? void 0 : param.duration;\n            await page.longPress(element.center[0], element.center[1], duration);\n        }),\n        defineActionSwipe(async (param)=>{\n            const { width, height } = await page.size();\n            const { start, end } = param;\n            const startPoint = start ? {\n                x: start.center[0],\n                y: start.center[1]\n            } : {\n                x: width / 2,\n                y: height / 2\n            };\n            let endPoint;\n            if (end) endPoint = {\n                x: end.center[0],\n                y: end.center[1]\n            };\n            else if (param.distance) {\n                const direction = param.direction;\n                if (!direction) throw new Error('direction is required for swipe gesture');\n                endPoint = {\n                    x: startPoint.x + ('right' === direction ? param.distance : 'left' === direction ? -param.distance : 0),\n                    y: startPoint.y + ('down' === direction ? param.distance : 'up' === direction ? -param.distance : 0)\n                };\n            } else throw new Error('Either end or distance must be specified for swipe gesture');\n            endPoint.x = Math.max(0, Math.min(endPoint.x, width));\n            endPoint.y = Math.max(0, Math.min(endPoint.y, height));\n            const duration = param.duration;\n            debug(`swipe from ${startPoint.x}, ${startPoint.y} to ${endPoint.x}, ${endPoint.y} with duration ${duration}ms, repeat is set to ${param.repeat}`);\n            let repeat = 'number' == typeof param.repeat ? param.repeat : 1;\n            if (0 === repeat) repeat = 10;\n            for(let i = 0; i < repeat; i++)await page.swipe(startPoint, endPoint, duration);\n        }),\n        defineActionClearInput(async (param)=>{\n            const element = param.locate;\n            node_assert(element, 'Element not found, cannot clear input');\n            await page.clearInput(element);\n        })\n    ];\nexport { AbstractWebPage, commonWebActionsForWebPage, getKeyCommands };\n\n//# sourceMappingURL=web-page.mjs.map","/*! For license information please see cdpInput.mjs.LICENSE.txt */\nimport { _keyDefinitions } from \"@sqai/shared/us-keyboard-layout\";\nimport { assert } from \"@sqai/shared/utils\";\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n * SPDX-License-Identifier: Apache-2.0\r\n */ function _check_private_redeclaration(obj, privateCollection) {\n    if (privateCollection.has(obj)) throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n}\nfunction _class_apply_descriptor_get(receiver, descriptor) {\n    if (descriptor.get) return descriptor.get.call(receiver);\n    return descriptor.value;\n}\nfunction _class_apply_descriptor_set(receiver, descriptor, value) {\n    if (descriptor.set) descriptor.set.call(receiver, value);\n    else {\n        if (!descriptor.writable) throw new TypeError(\"attempted to set read only private field\");\n        descriptor.value = value;\n    }\n}\nfunction _class_extract_field_descriptor(receiver, privateMap, action) {\n    if (!privateMap.has(receiver)) throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n    return privateMap.get(receiver);\n}\nfunction _class_private_field_get(receiver, privateMap) {\n    var descriptor = _class_extract_field_descriptor(receiver, privateMap, \"get\");\n    return _class_apply_descriptor_get(receiver, descriptor);\n}\nfunction _class_private_field_init(obj, privateMap, value) {\n    _check_private_redeclaration(obj, privateMap);\n    privateMap.set(obj, value);\n}\nfunction _class_private_field_set(receiver, privateMap, value) {\n    var descriptor = _class_extract_field_descriptor(receiver, privateMap, \"set\");\n    _class_apply_descriptor_set(receiver, descriptor, value);\n    return value;\n}\nfunction _class_private_method_get(receiver, privateSet, fn) {\n    if (!privateSet.has(receiver)) throw new TypeError(\"attempted to get private field on non-instance\");\n    return fn;\n}\nfunction _class_private_method_init(obj, privateSet) {\n    _check_private_redeclaration(obj, privateSet);\n    privateSet.add(obj);\n}\nfunction _define_property(obj, key, value) {\n    if (key in obj) Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n    });\n    else obj[key] = value;\n    return obj;\n}\nvar _pressedKeys = /*#__PURE__*/ new WeakMap(), _client = /*#__PURE__*/ new WeakMap(), _modifierBit = /*#__PURE__*/ new WeakSet(), _keyDescriptionForString = /*#__PURE__*/ new WeakSet();\nclass CdpKeyboard {\n    updateClient(client) {\n        _class_private_field_set(this, _client, client);\n    }\n    async down(key, options = {\n        text: void 0,\n        commands: []\n    }) {\n        const description = _class_private_method_get(this, _keyDescriptionForString, keyDescriptionForString).call(this, key);\n        const autoRepeat = _class_private_field_get(this, _pressedKeys).has(description.code);\n        _class_private_field_get(this, _pressedKeys).add(description.code);\n        this._modifiers |= _class_private_method_get(this, _modifierBit, modifierBit).call(this, description.key);\n        const text = void 0 === options.text ? description.text : options.text;\n        await _class_private_field_get(this, _client).send('Input.dispatchKeyEvent', {\n            type: text ? 'keyDown' : 'rawKeyDown',\n            modifiers: this._modifiers,\n            windowsVirtualKeyCode: description.keyCode,\n            code: description.code,\n            key: description.key,\n            text: text,\n            unmodifiedText: text,\n            autoRepeat,\n            location: description.location,\n            isKeypad: 3 === description.location,\n            commands: options.commands\n        });\n    }\n    async up(key) {\n        const description = _class_private_method_get(this, _keyDescriptionForString, keyDescriptionForString).call(this, key);\n        this._modifiers &= ~_class_private_method_get(this, _modifierBit, modifierBit).call(this, description.key);\n        _class_private_field_get(this, _pressedKeys).delete(description.code);\n        await _class_private_field_get(this, _client).send('Input.dispatchKeyEvent', {\n            type: 'keyUp',\n            modifiers: this._modifiers,\n            key: description.key,\n            windowsVirtualKeyCode: description.keyCode,\n            code: description.code,\n            location: description.location\n        });\n    }\n    async sendCharacter(char) {\n        await _class_private_field_get(this, _client).send('Input.insertText', {\n            text: char\n        });\n    }\n    charIsKey(char) {\n        return !!_keyDefinitions[char];\n    }\n    async type(text, options = {}) {\n        const delay = options.delay || void 0;\n        for (const char of text)if (this.charIsKey(char)) await this.press(char, {\n            delay\n        });\n        else {\n            if (delay) await new Promise((f)=>setTimeout(f, delay));\n            await this.sendCharacter(char);\n        }\n    }\n    async press(key, options = {}) {\n        const { delay = null } = options;\n        const keys = Array.isArray(key) ? key : [\n            key\n        ];\n        for (const k of keys)await this.down(k, options);\n        if (delay) await new Promise((f)=>setTimeout(f, options.delay));\n        for (const k of [\n            ...keys\n        ].reverse())await this.up(k);\n    }\n    constructor(client){\n        _class_private_method_init(this, _modifierBit);\n        _class_private_method_init(this, _keyDescriptionForString);\n        _class_private_field_init(this, _pressedKeys, {\n            writable: true,\n            value: new Set()\n        });\n        _class_private_field_init(this, _client, {\n            writable: true,\n            value: void 0\n        });\n        _define_property(this, \"_modifiers\", 0);\n        _class_private_field_set(this, _client, client);\n    }\n}\nfunction modifierBit(key) {\n    if ('Alt' === key) return 1;\n    if ('Control' === key) return 2;\n    if ('Meta' === key) return 4;\n    if ('Shift' === key) return 8;\n    return 0;\n}\nfunction keyDescriptionForString(keyString) {\n    const shift = 8 & this._modifiers;\n    const description = {\n        key: '',\n        keyCode: 0,\n        code: '',\n        text: '',\n        location: 0\n    };\n    const definition = _keyDefinitions[keyString];\n    assert(definition, `Unknown key: \"${keyString}\"`);\n    if (definition.key) description.key = definition.key;\n    if (shift && definition.shiftKey) description.key = definition.shiftKey;\n    if (definition.keyCode) description.keyCode = definition.keyCode;\n    if (shift && definition.shiftKeyCode) description.keyCode = definition.shiftKeyCode;\n    if (definition.code) description.code = definition.code;\n    if (definition.location) description.location = definition.location;\n    if (1 === description.key.length) description.text = description.key;\n    if (definition.text) description.text = definition.text;\n    if (shift && definition.shiftText) description.text = definition.shiftText;\n    if (-9 & this._modifiers) description.text = '';\n    return description;\n}\nexport { CdpKeyboard };\n\n//# sourceMappingURL=cdpInput.mjs.map","import node_fs from \"node:fs\";\nimport { ifInBrowser, ifInWorker } from \"@sqai/shared/utils\";\nlet scriptFileContentCache = null;\nconst getHtmlElementScript = async ()=>{\n    const scriptFileToRetrieve = chrome.runtime.getURL(\"scripts/htmlElement.js\");\n    if (scriptFileContentCache) return scriptFileContentCache;\n    if (ifInBrowser || ifInWorker) {\n        const script = await fetch(scriptFileToRetrieve);\n        scriptFileContentCache = await script.text();\n        return scriptFileContentCache;\n    }\n    return node_fs.readFileSync(scriptFileToRetrieve, 'utf8');\n};\nlet waterFlowScriptFileContentCache = null;\nconst injectWaterFlowAnimation = async ()=>{\n    const waterFlowScriptFileToRetrieve = chrome.runtime.getURL(\"scripts/water-flow.js\");\n    if (waterFlowScriptFileContentCache) return waterFlowScriptFileContentCache;\n    if (ifInBrowser || ifInWorker) {\n        const script = await fetch(waterFlowScriptFileToRetrieve);\n        waterFlowScriptFileContentCache = await script.text();\n        return waterFlowScriptFileContentCache;\n    }\n    return node_fs.readFileSync(waterFlowScriptFileToRetrieve, 'utf8');\n};\nlet stopWaterFlowScriptFileContentCache = null;\nconst injectStopWaterFlowAnimation = async ()=>{\n    const stopWaterFlowScriptFileToRetrieve = chrome.runtime.getURL(\"scripts/stop-water-flow.js\");\n    if (stopWaterFlowScriptFileContentCache) return stopWaterFlowScriptFileContentCache;\n    if (ifInBrowser || ifInWorker) {\n        const script = await fetch(stopWaterFlowScriptFileToRetrieve);\n        stopWaterFlowScriptFileContentCache = await script.text();\n        return stopWaterFlowScriptFileContentCache;\n    }\n    return node_fs.readFileSync(stopWaterFlowScriptFileToRetrieve, 'utf8');\n};\nexport { getHtmlElementScript, injectStopWaterFlowAnimation, injectWaterFlowAnimation };\n\n//# sourceMappingURL=dynamic-scripts.mjs.map","import { WebPageContextParser, limitOpenNewTabScript } from \"../web-element.mjs\";\nimport { treeToList } from \"@sqai/shared/extractor\";\nimport { createImgBase64ByFormat } from \"@sqai/shared/img\";\nimport { assert } from \"@sqai/shared/utils\";\nimport { commonWebActionsForWebPage } from \"../web-page.mjs\";\nimport { CdpKeyboard } from \"./cdpInput.mjs\";\nimport { getHtmlElementScript, injectStopWaterFlowAnimation, injectWaterFlowAnimation } from \"./dynamic-scripts.mjs\";\nfunction _define_property(obj, key, value) {\n    if (key in obj) Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n    });\n    else obj[key] = value;\n    return obj;\n}\nfunction sleep(ms) {\n    return new Promise((resolve)=>setTimeout(resolve, ms));\n}\nclass ChromeExtensionProxyPage {\n    actionSpace() {\n        return commonWebActionsForWebPage(this);\n    }\n    async setActiveTabId(tabId) {\n        if (this.activeTabId) throw new Error(`Active tab id is already set, which is ${this.activeTabId}, cannot set it to ${tabId}`);\n        await chrome.tabs.update(tabId, {\n            active: true\n        });\n        this.activeTabId = tabId;\n    }\n    async getActiveTabId() {\n        return this.activeTabId;\n    }\n    async getBrowserTabList() {\n        const tabs = await chrome.tabs.query({\n            currentWindow: true\n        });\n        return tabs.map((tab)=>({\n                id: `${tab.id}`,\n                title: tab.title,\n                url: tab.url,\n                currentActiveTab: tab.active\n            })).filter((tab)=>tab.id && tab.title && tab.url);\n    }\n    async getTabIdOrConnectToCurrentTab() {\n        if (this.activeTabId) return this.activeTabId;\n        const tabId = await chrome.tabs.query({\n            active: true,\n            currentWindow: true\n        }).then((tabs)=>{\n            var _tabs_;\n            return null == (_tabs_ = tabs[0]) ? void 0 : _tabs_.id;\n        });\n        this.activeTabId = tabId || 0;\n        return this.activeTabId;\n    }\n    async attachDebugger() {\n        assert(!this.destroyed, 'Page is destroyed');\n        if (this.attachingDebugger) return void await this.attachingDebugger;\n        this.attachingDebugger = (async ()=>{\n            const url = await this.url();\n            let error = null;\n            if (url.startsWith('chrome://')) throw new Error('Cannot attach debugger to chrome:// pages, please use Midscene in a normal page with http://, https:// or file://');\n            try {\n                const currentTabId = await this.getTabIdOrConnectToCurrentTab();\n                if (this.tabIdOfDebuggerAttached === currentTabId) return;\n                if (this.tabIdOfDebuggerAttached && this.tabIdOfDebuggerAttached !== currentTabId) {\n                    console.log('detach the previous tab', this.tabIdOfDebuggerAttached, '->', currentTabId);\n                    try {\n                        await this.detachDebugger(this.tabIdOfDebuggerAttached);\n                    } catch (error) {\n                        console.error('Failed to detach debugger', error);\n                    }\n                }\n                console.log('attaching debugger', currentTabId);\n                try {\n                    await chrome.debugger.attach({\n                        tabId: currentTabId\n                    }, '1.3');\n                } catch (e) {\n                    if (this._continueWhenFailedToAttachDebugger) console.warn(\"Failed to attach debugger, but the script will continue as if the debugger is attached since the _continueWhenFailedToAttachDebugger is true\", e);\n                    else throw e;\n                }\n                await sleep(500);\n                this.tabIdOfDebuggerAttached = currentTabId;\n                await this.enableWaterFlowAnimation();\n            } catch (e) {\n                console.error('Failed to attach debugger', e);\n                error = e;\n            } finally{\n                this.attachingDebugger = null;\n            }\n            if (error) throw error;\n        })();\n        await this.attachingDebugger;\n    }\n    async showMousePointer(x, y) {\n        const pointerScript = `(() => {\n      if(typeof window.midsceneWaterFlowAnimation !== 'undefined') {\n        window.midsceneWaterFlowAnimation.enable();\n        window.midsceneWaterFlowAnimation.showMousePointer(${x}, ${y});\n      } else {\n        console.log('midsceneWaterFlowAnimation is not defined');\n      }\n    })()`;\n        await this.sendCommandToDebugger('Runtime.evaluate', {\n            expression: `${pointerScript}`\n        });\n    }\n    async hideMousePointer() {\n        await this.sendCommandToDebugger('Runtime.evaluate', {\n            expression: `(() => {\n        if(typeof window.midsceneWaterFlowAnimation !== 'undefined') {\n          window.midsceneWaterFlowAnimation.hideMousePointer();\n        }\n      })()`\n        });\n    }\n    async detachDebugger(tabId) {\n        const tabIdToDetach = tabId || this.tabIdOfDebuggerAttached;\n        console.log('detaching debugger', tabIdToDetach);\n        if (!tabIdToDetach) return void console.warn('No tab id to detach');\n        try {\n            await this.disableWaterFlowAnimation(tabIdToDetach);\n            await sleep(200);\n        } catch (error) {\n            console.warn('Failed to disable water flow animation', error);\n        }\n        try {\n            await chrome.debugger.detach({\n                tabId: tabIdToDetach\n            });\n        } catch (error) {\n            console.warn('Failed to detach debugger', error);\n        }\n        this.tabIdOfDebuggerAttached = null;\n    }\n    async enableWaterFlowAnimation() {\n        if (this.forceSameTabNavigation) await chrome.debugger.sendCommand({\n            tabId: this.tabIdOfDebuggerAttached\n        }, 'Runtime.evaluate', {\n            expression: limitOpenNewTabScript\n        });\n        const script = await injectWaterFlowAnimation();\n        await chrome.debugger.sendCommand({\n            tabId: this.tabIdOfDebuggerAttached\n        }, 'Runtime.evaluate', {\n            expression: script\n        });\n    }\n    async disableWaterFlowAnimation(tabId) {\n        const script = await injectStopWaterFlowAnimation();\n        await chrome.debugger.sendCommand({\n            tabId\n        }, 'Runtime.evaluate', {\n            expression: script\n        });\n    }\n    async sendCommandToDebugger(command, params) {\n        await this.attachDebugger();\n        assert(this.tabIdOfDebuggerAttached, 'Debugger is not attached');\n        this.enableWaterFlowAnimation();\n        return await chrome.debugger.sendCommand({\n            tabId: this.tabIdOfDebuggerAttached\n        }, command, params);\n    }\n    async getPageContentByCDP() {\n        const script = await getHtmlElementScript();\n        await this.sendCommandToDebugger('Runtime.evaluate', {\n            expression: script\n        });\n        const expression = ()=>{\n            window.midscene_element_inspector.setNodeHashCacheListOnWindow();\n            const tree = window.midscene_element_inspector.webExtractNodeTree();\n            return {\n                tree,\n                size: {\n                    width: document.documentElement.clientWidth,\n                    height: document.documentElement.clientHeight,\n                    dpr: window.devicePixelRatio\n                }\n            };\n        };\n        const returnValue = await this.sendCommandToDebugger('Runtime.evaluate', {\n            expression: `(${expression.toString()})()`,\n            returnByValue: true\n        });\n        if (!returnValue.result.value) {\n            var _returnValue_exceptionDetails_exception, _returnValue_exceptionDetails;\n            const errorDescription = (null == (_returnValue_exceptionDetails = returnValue.exceptionDetails) ? void 0 : null == (_returnValue_exceptionDetails_exception = _returnValue_exceptionDetails.exception) ? void 0 : _returnValue_exceptionDetails_exception.description) || '';\n            if (!errorDescription) console.error('returnValue from cdp', returnValue);\n            throw new Error(`Failed to get page content from page, error: ${errorDescription}`);\n        }\n        return returnValue.result.value;\n    }\n    async evaluateJavaScript(script) {\n        return this.sendCommandToDebugger('Runtime.evaluate', {\n            expression: script\n        });\n    }\n    async beforeInvokeAction() {\n        try {\n            await this.waitUntilNetworkIdle();\n        } catch (error) {}\n    }\n    async waitUntilNetworkIdle() {\n        const timeout = 10000;\n        const startTime = Date.now();\n        let lastReadyState = '';\n        while(Date.now() - startTime < timeout){\n            const result = await this.sendCommandToDebugger('Runtime.evaluate', {\n                expression: 'document.readyState'\n            });\n            lastReadyState = result.result.value;\n            if ('complete' === lastReadyState) return void await new Promise((resolve)=>setTimeout(resolve, 300));\n            await new Promise((resolve)=>setTimeout(resolve, 300));\n        }\n        throw new Error(`Failed to wait until network idle, last readyState: ${lastReadyState}`);\n    }\n    async getElementsInfo() {\n        const tree = await this.getElementsNodeTree();\n        return treeToList(tree);\n    }\n    async getXpathsById(id) {\n        const script = await getHtmlElementScript();\n        await this.sendCommandToDebugger('Runtime.evaluate', {\n            expression: script\n        });\n        const result = await this.sendCommandToDebugger('Runtime.evaluate', {\n            expression: `window.midscene_element_inspector.getXpathsById(${JSON.stringify(id)})`,\n            returnByValue: true\n        });\n        return result.result.value;\n    }\n    async getXpathsByPoint(point, isOrderSensitive) {\n        const script = await getHtmlElementScript();\n        await this.sendCommandToDebugger('Runtime.evaluate', {\n            expression: script\n        });\n        const result = await this.sendCommandToDebugger('Runtime.evaluate', {\n            expression: `window.midscene_element_inspector.getXpathsByPoint({left: ${point.left}, top: ${point.top}}, ${isOrderSensitive})`,\n            returnByValue: true\n        });\n        return result.result.value;\n    }\n    async getElementInfoByXpath(xpath) {\n        const script = await getHtmlElementScript();\n        await this.sendCommandToDebugger('Runtime.evaluate', {\n            expression: script\n        });\n        const result = await this.sendCommandToDebugger('Runtime.evaluate', {\n            expression: `window.midscene_element_inspector.getElementInfoByXpath(${JSON.stringify(xpath)})`,\n            returnByValue: true\n        });\n        return result.result.value;\n    }\n    async getElementsNodeTree() {\n        await this.hideMousePointer();\n        const content = await this.getPageContentByCDP();\n        if (null == content ? void 0 : content.size) this.viewportSize = content.size;\n        return (null == content ? void 0 : content.tree) || {\n            node: null,\n            children: []\n        };\n    }\n    async getContext() {\n        return await WebPageContextParser(this, {});\n    }\n    async size() {\n        if (this.viewportSize) return this.viewportSize;\n        const content = await this.getPageContentByCDP();\n        return content.size;\n    }\n    async screenshotBase64() {\n        await this.hideMousePointer();\n        const format = 'jpeg';\n        const base64 = await this.sendCommandToDebugger('Page.captureScreenshot', {\n            format,\n            quality: 90\n        });\n        return createImgBase64ByFormat(format, base64.data);\n    }\n    async url() {\n        const tabId = await this.getTabIdOrConnectToCurrentTab();\n        const url = await chrome.tabs.get(tabId).then((tab)=>tab.url);\n        return url || '';\n    }\n    async scrollUntilTop(startingPoint) {\n        if (startingPoint) await this.mouse.move(startingPoint.left, startingPoint.top);\n        return this.mouse.wheel(0, -9999999);\n    }\n    async scrollUntilBottom(startingPoint) {\n        if (startingPoint) await this.mouse.move(startingPoint.left, startingPoint.top);\n        return this.mouse.wheel(0, 9999999);\n    }\n    async scrollUntilLeft(startingPoint) {\n        if (startingPoint) await this.mouse.move(startingPoint.left, startingPoint.top);\n        return this.mouse.wheel(-9999999, 0);\n    }\n    async scrollUntilRight(startingPoint) {\n        if (startingPoint) await this.mouse.move(startingPoint.left, startingPoint.top);\n        return this.mouse.wheel(9999999, 0);\n    }\n    async scrollUp(distance, startingPoint) {\n        const { height } = await this.size();\n        const scrollDistance = distance || 0.7 * height;\n        return this.mouse.wheel(0, -scrollDistance, null == startingPoint ? void 0 : startingPoint.left, null == startingPoint ? void 0 : startingPoint.top);\n    }\n    async scrollDown(distance, startingPoint) {\n        const { height } = await this.size();\n        const scrollDistance = distance || 0.7 * height;\n        return this.mouse.wheel(0, scrollDistance, null == startingPoint ? void 0 : startingPoint.left, null == startingPoint ? void 0 : startingPoint.top);\n    }\n    async scrollLeft(distance, startingPoint) {\n        const { width } = await this.size();\n        const scrollDistance = distance || 0.7 * width;\n        return this.mouse.wheel(-scrollDistance, 0, null == startingPoint ? void 0 : startingPoint.left, null == startingPoint ? void 0 : startingPoint.top);\n    }\n    async scrollRight(distance, startingPoint) {\n        const { width } = await this.size();\n        const scrollDistance = distance || 0.7 * width;\n        return this.mouse.wheel(scrollDistance, 0, null == startingPoint ? void 0 : startingPoint.left, null == startingPoint ? void 0 : startingPoint.top);\n    }\n    async clearInput(element) {\n        if (!element) return void console.warn('No element to clear input');\n        await this.mouse.click(element.center[0], element.center[1]);\n        await this.sendCommandToDebugger('Input.dispatchKeyEvent', {\n            type: 'keyDown',\n            commands: [\n                'selectAll'\n            ]\n        });\n        await this.sendCommandToDebugger('Input.dispatchKeyEvent', {\n            type: 'keyUp',\n            commands: [\n                'selectAll'\n            ]\n        });\n        await sleep(100);\n        await this.keyboard.press({\n            key: 'Backspace'\n        });\n    }\n    async destroy() {\n        this.activeTabId = null;\n        await this.detachDebugger();\n        this.destroyed = true;\n    }\n    async longPress(x, y, duration) {\n        duration = duration || 500;\n        const LONG_PRESS_THRESHOLD = 600;\n        const MIN_PRESS_THRESHOLD = 300;\n        if (duration > LONG_PRESS_THRESHOLD) duration = LONG_PRESS_THRESHOLD;\n        if (duration < MIN_PRESS_THRESHOLD) duration = MIN_PRESS_THRESHOLD;\n        await this.mouse.move(x, y);\n        if (null === this.isMobileEmulation) {\n            var _result_result;\n            const result = await this.sendCommandToDebugger('Runtime.evaluate', {\n                expression: `(() => {\n          return /Android|iPhone|iPad|iPod|Mobile/i.test(navigator.userAgent);\n        })()`,\n                returnByValue: true\n            });\n            this.isMobileEmulation = null == result ? void 0 : null == (_result_result = result.result) ? void 0 : _result_result.value;\n        }\n        if (this.isMobileEmulation) {\n            const touchPoints = [\n                {\n                    x: Math.round(x),\n                    y: Math.round(y)\n                }\n            ];\n            await this.sendCommandToDebugger('Input.dispatchTouchEvent', {\n                type: 'touchStart',\n                touchPoints,\n                modifiers: 0\n            });\n            await new Promise((res)=>setTimeout(res, duration));\n            await this.sendCommandToDebugger('Input.dispatchTouchEvent', {\n                type: 'touchEnd',\n                touchPoints: [],\n                modifiers: 0\n            });\n        } else {\n            await this.sendCommandToDebugger('Input.dispatchMouseEvent', {\n                type: 'mousePressed',\n                x,\n                y,\n                button: 'left',\n                clickCount: 1\n            });\n            await new Promise((res)=>setTimeout(res, duration));\n            await this.sendCommandToDebugger('Input.dispatchMouseEvent', {\n                type: 'mouseReleased',\n                x,\n                y,\n                button: 'left',\n                clickCount: 1\n            });\n        }\n        this.latestMouseX = x;\n        this.latestMouseY = y;\n    }\n    async swipe(from, to, duration) {\n        const LONG_PRESS_THRESHOLD = 500;\n        const MIN_PRESS_THRESHOLD = 150;\n        duration = duration || 300;\n        if (duration < MIN_PRESS_THRESHOLD) duration = MIN_PRESS_THRESHOLD;\n        if (duration > LONG_PRESS_THRESHOLD) duration = LONG_PRESS_THRESHOLD;\n        if (null === this.isMobileEmulation) {\n            var _result_result;\n            const result = await this.sendCommandToDebugger('Runtime.evaluate', {\n                expression: `(() => {\n          return /Android|iPhone|iPad|iPod|Mobile/i.test(navigator.userAgent);\n        })()`,\n                returnByValue: true\n            });\n            this.isMobileEmulation = null == result ? void 0 : null == (_result_result = result.result) ? void 0 : _result_result.value;\n        }\n        const steps = 30;\n        const delay = duration / steps;\n        if (this.isMobileEmulation) {\n            await this.sendCommandToDebugger('Input.dispatchTouchEvent', {\n                type: 'touchStart',\n                touchPoints: [\n                    {\n                        x: Math.round(from.x),\n                        y: Math.round(from.y)\n                    }\n                ],\n                modifiers: 0\n            });\n            for(let i = 1; i <= steps; i++){\n                const x = from.x + (to.x - from.x) * (i / steps);\n                const y = from.y + (to.y - from.y) * (i / steps);\n                await this.sendCommandToDebugger('Input.dispatchTouchEvent', {\n                    type: 'touchMove',\n                    touchPoints: [\n                        {\n                            x: Math.round(x),\n                            y: Math.round(y)\n                        }\n                    ],\n                    modifiers: 0\n                });\n                await new Promise((res)=>setTimeout(res, delay));\n            }\n            await this.sendCommandToDebugger('Input.dispatchTouchEvent', {\n                type: 'touchEnd',\n                touchPoints: [],\n                modifiers: 0\n            });\n        } else {\n            await this.mouse.move(from.x, from.y);\n            await this.sendCommandToDebugger('Input.dispatchMouseEvent', {\n                type: 'mousePressed',\n                x: from.x,\n                y: from.y,\n                button: 'left',\n                clickCount: 1\n            });\n            for(let i = 1; i <= steps; i++){\n                const x = from.x + (to.x - from.x) * (i / steps);\n                const y = from.y + (to.y - from.y) * (i / steps);\n                await this.mouse.move(x, y);\n                await new Promise((res)=>setTimeout(res, delay));\n            }\n            await this.sendCommandToDebugger('Input.dispatchMouseEvent', {\n                type: 'mouseReleased',\n                x: to.x,\n                y: to.y,\n                button: 'left',\n                clickCount: 1\n            });\n        }\n        this.latestMouseX = to.x;\n        this.latestMouseY = to.y;\n    }\n    constructor(forceSameTabNavigation){\n        _define_property(this, \"interfaceType\", 'chrome-extension-proxy');\n        _define_property(this, \"forceSameTabNavigation\", void 0);\n        _define_property(this, \"viewportSize\", void 0);\n        _define_property(this, \"activeTabId\", null);\n        _define_property(this, \"tabIdOfDebuggerAttached\", null);\n        _define_property(this, \"attachingDebugger\", null);\n        _define_property(this, \"destroyed\", false);\n        _define_property(this, \"isMobileEmulation\", null);\n        _define_property(this, \"_continueWhenFailedToAttachDebugger\", false);\n        _define_property(this, \"latestMouseX\", 100);\n        _define_property(this, \"latestMouseY\", 100);\n        _define_property(this, \"mouse\", {\n            click: async (x, y, options)=>{\n                const { button = 'left', count = 1 } = options || {};\n                await this.mouse.move(x, y);\n                if (null === this.isMobileEmulation) {\n                    var _result_result;\n                    const result = await this.sendCommandToDebugger('Runtime.evaluate', {\n                        expression: `(() => {\n            return /Android|iPhone|iPad|iPod|Mobile/i.test(navigator.userAgent);\n          })()`,\n                        returnByValue: true\n                    });\n                    this.isMobileEmulation = null == result ? void 0 : null == (_result_result = result.result) ? void 0 : _result_result.value;\n                }\n                if (this.isMobileEmulation && 'left' === button) {\n                    const touchPoints = [\n                        {\n                            x: Math.round(x),\n                            y: Math.round(y)\n                        }\n                    ];\n                    await this.sendCommandToDebugger('Input.dispatchTouchEvent', {\n                        type: 'touchStart',\n                        touchPoints,\n                        modifiers: 0\n                    });\n                    await this.sendCommandToDebugger('Input.dispatchTouchEvent', {\n                        type: 'touchEnd',\n                        touchPoints: [],\n                        modifiers: 0\n                    });\n                } else for(let i = 0; i < count; i++){\n                    await this.sendCommandToDebugger('Input.dispatchMouseEvent', {\n                        type: 'mousePressed',\n                        x,\n                        y,\n                        button,\n                        clickCount: 1\n                    });\n                    await this.sendCommandToDebugger('Input.dispatchMouseEvent', {\n                        type: 'mouseReleased',\n                        x,\n                        y,\n                        button,\n                        clickCount: 1\n                    });\n                    await sleep(50);\n                }\n            },\n            wheel: async (deltaX, deltaY, startX, startY)=>{\n                const finalX = startX || this.latestMouseX;\n                const finalY = startY || this.latestMouseY;\n                await this.showMousePointer(finalX, finalY);\n                await this.sendCommandToDebugger('Input.dispatchMouseEvent', {\n                    type: 'mouseWheel',\n                    x: finalX,\n                    y: finalY,\n                    deltaX,\n                    deltaY\n                });\n                this.latestMouseX = finalX;\n                this.latestMouseY = finalY;\n            },\n            move: async (x, y)=>{\n                await this.showMousePointer(x, y);\n                await this.sendCommandToDebugger('Input.dispatchMouseEvent', {\n                    type: 'mouseMoved',\n                    x,\n                    y\n                });\n                this.latestMouseX = x;\n                this.latestMouseY = y;\n            },\n            drag: async (from, to)=>{\n                await this.mouse.move(from.x, from.y);\n                await sleep(200);\n                await this.sendCommandToDebugger('Input.dispatchMouseEvent', {\n                    type: 'mousePressed',\n                    x: from.x,\n                    y: from.y,\n                    button: 'left',\n                    clickCount: 1\n                });\n                await sleep(300);\n                await this.sendCommandToDebugger('Input.dispatchMouseEvent', {\n                    type: 'mouseMoved',\n                    x: to.x,\n                    y: to.y\n                });\n                await sleep(500);\n                await this.sendCommandToDebugger('Input.dispatchMouseEvent', {\n                    type: 'mouseReleased',\n                    x: to.x,\n                    y: to.y,\n                    button: 'left',\n                    clickCount: 1\n                });\n                await sleep(200);\n                await this.mouse.move(to.x, to.y);\n            }\n        });\n        _define_property(this, \"keyboard\", {\n            type: async (text)=>{\n                const cdpKeyboard = new CdpKeyboard({\n                    send: this.sendCommandToDebugger.bind(this)\n                });\n                await cdpKeyboard.type(text, {\n                    delay: 0\n                });\n            },\n            press: async (action)=>{\n                const cdpKeyboard = new CdpKeyboard({\n                    send: this.sendCommandToDebugger.bind(this)\n                });\n                const keys = Array.isArray(action) ? action : [\n                    action\n                ];\n                for (const k of keys){\n                    const commands = k.command ? [\n                        k.command\n                    ] : [];\n                    await cdpKeyboard.down(k.key, {\n                        commands\n                    });\n                }\n                for (const k of [\n                    ...keys\n                ].reverse())await cdpKeyboard.up(k.key);\n            }\n        });\n        this.forceSameTabNavigation = forceSameTabNavigation;\n    }\n}\nexport { ChromeExtensionProxyPage as default };\n\n//# sourceMappingURL=page.mjs.map","import { assert } from \"@sqai/shared/utils\";\nimport page from \"../chrome-extension/page.mjs\";\nimport { BridgeEvent, DefaultBridgeServerPort, KeyboardEvent, MouseEvent } from \"./common.mjs\";\nimport { BridgeClient } from \"./io-client.mjs\";\nfunction _define_property(obj, key, value) {\n    if (key in obj) Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n    });\n    else obj[key] = value;\n    return obj;\n}\nclass ExtensionBridgePageBrowserSide extends page {\n    async setupBridgeClient() {\n        this.bridgeClient = new BridgeClient(`ws://localhost:${DefaultBridgeServerPort}`, async (method, args)=>{\n            console.log('bridge call from cli side', method, args);\n            if (method === BridgeEvent.ConnectNewTabWithUrl) return this.connectNewTabWithUrl.apply(this, args);\n            if (method === BridgeEvent.GetBrowserTabList) return this.getBrowserTabList.apply(this, args);\n            if (method === BridgeEvent.SetActiveTabId) return this.setActiveTabId.apply(this, args);\n            if (method === BridgeEvent.ConnectCurrentTab) return this.connectCurrentTab.apply(this, args);\n            if (method === BridgeEvent.UpdateAgentStatus) return this.onLogMessage(args[0], 'status');\n            const tabId = await this.getActiveTabId();\n            if (!tabId || 0 === tabId) throw new Error('no tab is connected');\n            if (method.startsWith(MouseEvent.PREFIX)) {\n                const actionName = method.split('.')[1];\n                return this.mouse[actionName].apply(this.mouse, args);\n            }\n            if (method.startsWith(KeyboardEvent.PREFIX)) {\n                const actionName = method.split('.')[1];\n                return this.keyboard[actionName].apply(this.keyboard, args);\n            }\n            if (!this[method]) return void console.warn('method not found', method);\n            try {\n                const result = await this[method](...args);\n                return result;\n            } catch (e) {\n                const errorMessage = e instanceof Error ? e.message : 'Unknown error';\n                console.error('error calling method', method, args, e);\n                this.onLogMessage(`Error calling method: ${method}, ${errorMessage}`, 'log');\n                throw new Error(errorMessage, {\n                    cause: e\n                });\n            }\n        }, ()=>this.destroy());\n        await this.bridgeClient.connect();\n        this.onLogMessage(`Bridge connected, cli-side version v${this.bridgeClient.serverVersion}, browser-side version v0.30.9`, 'log');\n    }\n    async connect() {\n        return await this.setupBridgeClient();\n    }\n    async connectNewTabWithUrl(url, options = {\n        forceSameTabNavigation: true\n    }) {\n        const tab = await chrome.tabs.create({\n            url\n        });\n        const tabId = tab.id;\n        assert(tabId, 'failed to get tabId after creating a new tab');\n        this.onLogMessage(`Creating new tab: ${url}`, 'log');\n        this.newlyCreatedTabIds.push(tabId);\n        if (null == options ? void 0 : options.forceSameTabNavigation) this.forceSameTabNavigation = true;\n        await this.setActiveTabId(tabId);\n    }\n    async connectCurrentTab(options = {\n        forceSameTabNavigation: true\n    }) {\n        var _tabs_, _tabs_1;\n        const tabs = await chrome.tabs.query({\n            active: true,\n            currentWindow: true\n        });\n        const tabId = null == (_tabs_ = tabs[0]) ? void 0 : _tabs_.id;\n        assert(tabId, 'failed to get tabId');\n        this.onLogMessage(`Connected to current tab: ${null == (_tabs_1 = tabs[0]) ? void 0 : _tabs_1.url}`, 'log');\n        if (null == options ? void 0 : options.forceSameTabNavigation) this.forceSameTabNavigation = true;\n        await this.setActiveTabId(tabId);\n    }\n    async setDestroyOptions(options) {\n        this.destroyOptions = options;\n    }\n    async destroy() {\n        var _this_destroyOptions;\n        if ((null == (_this_destroyOptions = this.destroyOptions) ? void 0 : _this_destroyOptions.closeTab) && this.newlyCreatedTabIds.length > 0) {\n            this.onLogMessage('Closing all newly created tabs by bridge...', 'log');\n            for (const tabId of this.newlyCreatedTabIds)await chrome.tabs.remove(tabId);\n            this.newlyCreatedTabIds = [];\n        }\n        await super.destroy();\n        if (this.bridgeClient) {\n            this.bridgeClient.disconnect();\n            this.bridgeClient = null;\n            this.onDisconnect();\n        }\n    }\n    constructor(onDisconnect = ()=>{}, onLogMessage = ()=>{}, forceSameTabNavigation = true){\n        super(forceSameTabNavigation), _define_property(this, \"onDisconnect\", void 0), _define_property(this, \"onLogMessage\", void 0), _define_property(this, \"bridgeClient\", void 0), _define_property(this, \"destroyOptions\", void 0), _define_property(this, \"newlyCreatedTabIds\", void 0), this.onDisconnect = onDisconnect, this.onLogMessage = onLogMessage, this.bridgeClient = null, this.newlyCreatedTabIds = [];\n    }\n}\nexport { ExtensionBridgePageBrowserSide };\n\n//# sourceMappingURL=page-browser-side.mjs.map","import { ExtensionBridgePageBrowserSide } from '@sqai/web/bridge-mode-browser';\r\n\r\nexport type BridgeStatus =\r\n  | 'listening'\r\n  | 'connected'\r\n  | 'disconnected'\r\n  | 'closed';\r\n\r\nexport class BridgeConnector {\r\n  private activeBridgePage: ExtensionBridgePageBrowserSide | null = null;\r\n  private status: BridgeStatus = 'closed';\r\n  private connectRetryInterval = 300;\r\n\r\n  constructor(\r\n    private onMessage: (\r\n      message: string,\r\n      type: 'log' | 'status',\r\n    ) => void = () => {},\r\n    private onStatusChange: (status: BridgeStatus) => void = () => {},\r\n  ) {}\r\n\r\n  private setStatus(status: BridgeStatus) {\r\n    this.status = status;\r\n    this.onStatusChange(status);\r\n  }\r\n\r\n  async connect(): Promise<void> {\r\n    if (this.status === 'listening' || this.status === 'connected') {\r\n      return;\r\n    }\r\n\r\n    this.setStatus('listening');\r\n\r\n    const connectLoop = async () => {\r\n      while (true) {\r\n        if (this.status === 'connected') {\r\n          await new Promise((resolve) => setTimeout(resolve, 1000));\r\n          continue;\r\n        }\r\n\r\n        if (this.status === 'closed') {\r\n          break;\r\n        }\r\n\r\n        if (this.status !== 'listening' && this.status !== 'disconnected') {\r\n          throw new Error(`unexpected status: ${this.status}`);\r\n        }\r\n\r\n        let activeBridgePage: ExtensionBridgePageBrowserSide | null = null;\r\n        try {\r\n          activeBridgePage = new ExtensionBridgePageBrowserSide(() => {\r\n            if (this.status !== 'closed') {\r\n              this.setStatus('disconnected');\r\n              this.activeBridgePage = null;\r\n            }\r\n          }, this.onMessage);\r\n\r\n          await activeBridgePage.connect();\r\n          this.activeBridgePage = activeBridgePage;\r\n          this.setStatus('connected');\r\n        } catch (e) {\r\n          this.activeBridgePage?.destroy();\r\n          this.activeBridgePage = null;\r\n          console.warn('failed to setup connection', e);\r\n          await new Promise((resolve) =>\r\n            setTimeout(resolve, this.connectRetryInterval),\r\n          );\r\n        }\r\n      }\r\n    };\r\n\r\n    connectLoop();\r\n  }\r\n\r\n  async disconnect(): Promise<void> {\r\n    if (this.status === 'closed') {\r\n      console.warn('Cannot stop connection if not connected');\r\n      return;\r\n    }\r\n\r\n    if (this.activeBridgePage) {\r\n      await this.activeBridgePage.destroy();\r\n      this.activeBridgePage = null;\r\n    }\r\n\r\n    this.setStatus('closed');\r\n  }\r\n\r\n  getStatus(): BridgeStatus {\r\n    return this.status;\r\n  }\r\n}\r\n","import { IndexedDBManager, withErrorHandling } from '@sqai/shared/baseDB';\r\n\r\n// Database configuration\r\nconst DB_NAME = 'midscene_bridge';\r\nconst DB_VERSION = 1;\r\nconst BRIDGE_MESSAGES_STORE = 'bridge_messages';\r\n\r\n// Bridge message interface\r\nexport interface IndexedDBBridgeMessage {\r\n  id: string;\r\n  type: string;\r\n  content: string;\r\n  timestamp: number;\r\n  time?: string;\r\n}\r\n\r\n// Bridge message result interface for external use\r\nexport interface BridgeMessage {\r\n  id: string;\r\n  type: string;\r\n  content: string;\r\n  timestamp: Date;\r\n  time?: string;\r\n}\r\n\r\n// Database manager instance\r\nconst bridgeDbManager = new IndexedDBManager(DB_NAME, DB_VERSION, [\r\n  { name: BRIDGE_MESSAGES_STORE, keyPath: 'id' },\r\n]);\r\n\r\n// get bridge messages from IndexedDB\r\nexport const getBridgeMsgsFromStorage = async (): Promise<BridgeMessage[]> => {\r\n  return (\r\n    (await withErrorHandling(\r\n      async () => {\r\n        const messages = await bridgeDbManager.getAll<IndexedDBBridgeMessage>(\r\n          BRIDGE_MESSAGES_STORE,\r\n          true,\r\n        );\r\n\r\n        return messages.map((msg) => ({\r\n          id: msg.id,\r\n          type: msg.type,\r\n          content: msg.content,\r\n          timestamp: new Date(msg.timestamp),\r\n          time: msg.time,\r\n        }));\r\n      },\r\n      'Failed to get bridge messages from IndexedDB',\r\n      [],\r\n    )) ?? []\r\n  );\r\n};\r\n\r\n// store bridge messages to IndexedDB\r\nexport const storeBridgeMsgsToStorage = async (\r\n  messageList: any[],\r\n): Promise<void> => {\r\n  await withErrorHandling(async () => {\r\n    // Clear existing bridge messages first\r\n    await bridgeDbManager.clear(BRIDGE_MESSAGES_STORE);\r\n\r\n    const msgs = messageList\r\n      .filter((item) => item.type === 'system' || item.type === 'status')\r\n      .map((item) => ({\r\n        id: item.id,\r\n        type: item.type,\r\n        content: item.content,\r\n        timestamp: item.timestamp,\r\n        time: item.time,\r\n      }));\r\n\r\n    // Store each bridge message\r\n    await Promise.all(\r\n      msgs.map((msg, index) => {\r\n        const data: IndexedDBBridgeMessage = {\r\n          id: msg.id || `bridge-msg-${index}`,\r\n          type: msg.type,\r\n          content: msg.content,\r\n          timestamp: msg.timestamp\r\n            ? msg.timestamp.getTime()\r\n            : Date.now() + index,\r\n          time: msg.time,\r\n        };\r\n\r\n        return bridgeDbManager.put(BRIDGE_MESSAGES_STORE, data);\r\n      }),\r\n    );\r\n  }, 'Failed to store bridge messages');\r\n};\r\n\r\n// clear stored bridge messages\r\nexport const clearStoredBridgeMessages = async (): Promise<void> => {\r\n  await withErrorHandling(\r\n    () => bridgeDbManager.clear(BRIDGE_MESSAGES_STORE),\r\n    'Failed to clear bridge messages from IndexedDB',\r\n  );\r\n};\r\n\r\n// get bridge message count\r\nexport const getBridgeMessageCount = async (): Promise<number> => {\r\n  return (\r\n    (await withErrorHandling(\r\n      () => bridgeDbManager.count(BRIDGE_MESSAGES_STORE),\r\n      'Failed to get bridge message count',\r\n      0,\r\n    )) ?? 0\r\n  );\r\n};\r\n","import {\r\n  ArrowRightOutlined,\r\n  CheckOutlined,\r\n  ClockCircleOutlined,\r\n  CloseOutlined,\r\n  LogoutOutlined,\r\n  MinusOutlined,\r\n  WarningOutlined,\r\n} from '@ant-design/icons';\r\n\r\nexport const iconForStatus = (status: string): JSX.Element => {\r\n  switch (status) {\r\n    case 'finished':\r\n    case 'passed':\r\n    case 'success':\r\n    case 'connected':\r\n      return (\r\n        <span style={{ color: '#52C41A' }}>\r\n          <CheckOutlined />\r\n        </span>\r\n      );\r\n\r\n    case 'finishedWithWarning':\r\n      return (\r\n        <span style={{ color: '#f7bb05' }}>\r\n          <WarningOutlined />\r\n        </span>\r\n      );\r\n    case 'failed':\r\n    case 'closed':\r\n    case 'timedOut':\r\n    case 'interrupted':\r\n      return (\r\n        <span style={{ color: '#FF0A0A' }}>\r\n          <CloseOutlined />\r\n        </span>\r\n      );\r\n    case 'pending':\r\n      return <ClockCircleOutlined />;\r\n    case 'cancelled':\r\n    case 'skipped':\r\n      return <LogoutOutlined />;\r\n    case 'running':\r\n      return <ArrowRightOutlined />;\r\n    default:\r\n      return <MinusOutlined />;\r\n  }\r\n};\r\n","import {\r\n  ApiOutlined,\r\n  ArrowDownOutlined,\r\n  ClearOutlined,\r\n  LoadingOutlined,\r\n} from '@ant-design/icons';\r\nimport { Button, List, Spin, Switch } from 'antd';\r\nimport dayjs from 'dayjs';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport AutoConnectIcon from '../../icons/auto-connect.svg?react';\r\nimport PlayIcon from '../../icons/play.svg?react';\r\nimport {\r\n  BridgeConnector,\r\n  type BridgeStatus,\r\n} from '../../utils/bridgeConnector';\r\nimport {\r\n  clearStoredBridgeMessages,\r\n  getBridgeMsgsFromStorage,\r\n  storeBridgeMsgsToStorage,\r\n} from '../../utils/bridgeDB';\r\nimport { iconForStatus } from '../misc';\r\n\r\nimport './index.less';\r\n\r\ninterface BridgeMessageItem {\r\n  id: string;\r\n  type: 'system' | 'status';\r\n  content: string;\r\n  timestamp: Date;\r\n  time: string;\r\n}\r\n\r\nconst AUTO_CONNECT_STORAGE_KEY = 'midscene-bridge-auto-connect';\r\n\r\nexport default function Bridge() {\r\n  const [bridgeStatus, setBridgeStatus] = useState<BridgeStatus>('closed');\r\n  const [messageList, setMessageList] = useState<BridgeMessageItem[]>([]);\r\n  const [showScrollToBottomButton, setShowScrollToBottomButton] =\r\n    useState(false);\r\n  const [autoConnect, setAutoConnect] = useState<boolean>(() => {\r\n    const saved = localStorage.getItem(AUTO_CONNECT_STORAGE_KEY);\r\n    return saved === 'true';\r\n  });\r\n  const messageListRef = useRef<HTMLDivElement>(null);\r\n  // useRef to track the ID of the connection status message\r\n  const connectionStatusMessageId = useRef<string | null>(null);\r\n\r\n  // load messages from storage on component mount\r\n  useEffect(() => {\r\n    const loadMessages = async () => {\r\n      try {\r\n        const messages = await getBridgeMsgsFromStorage();\r\n        setMessageList(messages as BridgeMessageItem[]);\r\n      } catch (error) {\r\n        console.error('Failed to load bridge messages from storage:', error);\r\n      }\r\n    };\r\n\r\n    loadMessages();\r\n  }, []);\r\n\r\n  // restore connectionStatusMessageId when initializing\r\n  useEffect(() => {\r\n    if (messageList.length > 0) {\r\n      // find the last status message as the current connection status message\r\n      const lastStatusMessage = messageList\r\n        .slice()\r\n        .reverse()\r\n        .find((msg) => msg.type === 'status');\r\n\r\n      // only restore ID when there is an unfinished connection session\r\n      // check if the last message indicates the connection has ended\r\n      if (lastStatusMessage) {\r\n        const lastContent = lastStatusMessage.content.toLowerCase();\r\n        const isConnectionEnded =\r\n          lastContent.includes('closed') ||\r\n          lastContent.includes('stopped') ||\r\n          lastContent.includes('disconnect');\r\n\r\n        if (!isConnectionEnded) {\r\n          connectionStatusMessageId.current = lastStatusMessage.id;\r\n        }\r\n      }\r\n    }\r\n  }, [messageList]);\r\n\r\n  // save messages to localStorage\r\n  useEffect(() => {\r\n    storeBridgeMsgsToStorage(messageList);\r\n  }, [messageList]);\r\n\r\n  const appendBridgeMessage = (content: string) => {\r\n    // if there is a connection status message, append all messages to the existing message\r\n    if (connectionStatusMessageId.current) {\r\n      setMessageList((prev) =>\r\n        prev.map((msg) =>\r\n          msg.id === connectionStatusMessageId.current\r\n            ? {\r\n                ...msg,\r\n                content: `${msg.content}\\n${dayjs().format('HH:mm:ss.SSS')} - ${content}`,\r\n                timestamp: new Date(),\r\n                time: dayjs().format('HH:mm:ss.SSS'),\r\n              }\r\n            : msg,\r\n        ),\r\n      );\r\n    } else {\r\n      // create a new message (only when there is no active connection)\r\n      const newMessage: BridgeMessageItem = {\r\n        id: `message-${Date.now()}`,\r\n        type: 'status', // connection session messages are unified as status type\r\n        content: `${dayjs().format('HH:mm:ss.SSS')} - ${content}`,\r\n        timestamp: new Date(),\r\n        time: dayjs().format('HH:mm:ss.SSS'),\r\n      };\r\n\r\n      // set the connection status message ID, all subsequent messages will be appended to this message\r\n      connectionStatusMessageId.current = newMessage.id;\r\n      setMessageList((prev) => [...prev, newMessage]);\r\n    }\r\n  };\r\n\r\n  const bridgeConnectorRef = useRef<BridgeConnector | null>(\r\n    new BridgeConnector(\r\n      (message, type) => {\r\n        appendBridgeMessage(message);\r\n        if (type === 'status') {\r\n          console.log('status tip changed event', type, message);\r\n        }\r\n      },\r\n      (status) => {\r\n        console.log('status changed event', status);\r\n        setBridgeStatus(status);\r\n\r\n        if (status !== 'connected') {\r\n          appendBridgeMessage(`Bridge status changed to ${status}`);\r\n        }\r\n      },\r\n    ),\r\n  );\r\n\r\n  useEffect(() => {\r\n    // Auto-connect on component mount if enabled\r\n    if (autoConnect && bridgeStatus === 'closed') {\r\n      startConnection();\r\n    }\r\n\r\n    return () => {\r\n      bridgeConnectorRef.current?.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const stopConnection = () => {\r\n    bridgeConnectorRef.current?.disconnect();\r\n  };\r\n\r\n  const startConnection = async () => {\r\n    // only reset the connection status message ID when starting a new connection\r\n    if (bridgeStatus === 'closed') {\r\n      connectionStatusMessageId.current = null;\r\n    }\r\n    bridgeConnectorRef.current?.connect();\r\n  };\r\n\r\n  const handleAutoConnectChange = (checked: boolean) => {\r\n    setAutoConnect(checked);\r\n    localStorage.setItem(AUTO_CONNECT_STORAGE_KEY, String(checked));\r\n  };\r\n\r\n  // clear the message list\r\n  const clearMessageList = () => {\r\n    setMessageList([]);\r\n    connectionStatusMessageId.current = null;\r\n    clearStoredBridgeMessages();\r\n  };\r\n\r\n  // scroll to bottom when component first mounts (if there are messages from localStorage)\r\n  useEffect(() => {\r\n    if (messageList.length > 0 && messageListRef.current) {\r\n      messageListRef.current.scrollTop = messageListRef.current.scrollHeight;\r\n    }\r\n  }, []); // only run once on mount\r\n\r\n  // check if scrolled to bottom\r\n  const checkIfScrolledToBottom = () => {\r\n    if (messageListRef.current) {\r\n      const { scrollTop, scrollHeight, clientHeight } = messageListRef.current;\r\n\r\n      // if content height is less than or equal to container height, no need to scroll, hide button\r\n      if (scrollHeight <= clientHeight) {\r\n        setShowScrollToBottomButton(false);\r\n        return;\r\n      }\r\n\r\n      const isAtBottom = scrollTop + clientHeight >= scrollHeight - 10; // 10px tolerance\r\n      setShowScrollToBottomButton(!isAtBottom);\r\n    }\r\n  };\r\n\r\n  // scroll to bottom when message list updated\r\n  useEffect(() => {\r\n    if (messageList.length > 0) {\r\n      if (messageListRef.current) {\r\n        messageListRef.current.scrollTop = messageListRef.current.scrollHeight;\r\n      }\r\n      // check status after scroll\r\n      checkIfScrolledToBottom();\r\n    }\r\n  }, [messageList]);\r\n\r\n  // listen to scroll event\r\n  useEffect(() => {\r\n    const container = messageListRef.current;\r\n    if (container) {\r\n      container.addEventListener('scroll', checkIfScrolledToBottom);\r\n      // initial check\r\n      checkIfScrolledToBottom();\r\n      return () => {\r\n        container.removeEventListener('scroll', checkIfScrolledToBottom);\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  // manually scroll to bottom\r\n  const handleScrollToBottom = () => {\r\n    if (messageListRef.current) {\r\n      messageListRef.current.scrollTo({\r\n        top: messageListRef.current.scrollHeight,\r\n        behavior: 'smooth',\r\n      });\r\n      setShowScrollToBottomButton(false);\r\n    }\r\n  };\r\n\r\n  let statusIcon;\r\n  let statusTip: string;\r\n  let statusBtn;\r\n  if (bridgeStatus === 'closed') {\r\n    statusIcon = iconForStatus('closed');\r\n    statusTip = 'Closed';\r\n    statusBtn = (\r\n      <Button\r\n        type=\"primary\"\r\n        onClick={() => {\r\n          startConnection();\r\n        }}\r\n      >\r\n        Allow connection\r\n      </Button>\r\n    );\r\n  } else if (bridgeStatus === 'listening' || bridgeStatus === 'disconnected') {\r\n    statusIcon = (\r\n      <Spin\r\n        className=\"status-loading-icon\"\r\n        indicator={<LoadingOutlined spin />}\r\n        size=\"small\"\r\n      />\r\n    );\r\n    statusTip = 'Listening for connection';\r\n    statusBtn = (\r\n      <Button className=\"stop-button\" onClick={stopConnection}>\r\n        Stop\r\n      </Button>\r\n    );\r\n  } else if (bridgeStatus === 'connected') {\r\n    statusIcon = iconForStatus('connected');\r\n    statusTip = 'Connected';\r\n\r\n    statusBtn = (\r\n      <Button\r\n        className=\"stop-button\"\r\n        onClick={() => {\r\n          stopConnection();\r\n        }}\r\n      >\r\n        Stop\r\n      </Button>\r\n    );\r\n  } else {\r\n    statusIcon = iconForStatus('failed');\r\n    statusTip = `Unknown Status - ${bridgeStatus}`;\r\n    statusBtn = null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"bridge-mode-container\">\r\n      <div className=\"playground-form-container\">\r\n        <div className=\"form-part\" />\r\n        {messageList.length > 0 && (\r\n          <div className=\"clear-button-container\">\r\n            <Button\r\n              size=\"small\"\r\n              icon={<ClearOutlined />}\r\n              onClick={clearMessageList}\r\n              type=\"text\"\r\n              className=\"clear-button\"\r\n            />\r\n          </div>\r\n        )}\r\n        {/* middle dialog area */}\r\n        <div className=\"middle-dialog-area\">\r\n          <div ref={messageListRef} className=\"info-list-container\">\r\n            <div className=\"mode-header\">\r\n              <div className=\"mode-icon\">\r\n                <ApiOutlined style={{ fontSize: '12px' }} />\r\n              </div>\r\n              <h2 className=\"mode-title\">Bridge Mode</h2>\r\n            </div>\r\n            <p className=\"bridge-mode-description\">\r\n              In Bridge Mode, you can control this browser by the Midscene SDK\r\n              running in the local terminal. This is useful for interacting both\r\n              through scripts and manually, or to reuse cookies.{' '}\r\n              <a\r\n                href=\"https://www.midscenejs.com/bridge-mode-by-chrome-extension\"\r\n                target=\"_blank\"\r\n                rel=\"noreferrer\"\r\n              >\r\n                More about bridge mode\r\n              </a>\r\n            </p>\r\n            {messageList.length > 0 && (\r\n              <List\r\n                itemLayout=\"vertical\"\r\n                dataSource={messageList}\r\n                renderItem={(item) => (\r\n                  <List.Item key={item.id} className=\"list-item\">\r\n                    <div className=\"system-message-container\">\r\n                      <div className=\"mode-header\">\r\n                        <div className=\"mode-icon\">\r\n                          <ApiOutlined style={{ fontSize: '12px' }} />\r\n                        </div>\r\n                        <span className=\"mode-title\">Bridge Mode</span>\r\n                      </div>\r\n                      <div className=\"system-message-content\">\r\n                        <div className=\"message-body\">\r\n                          <div className=\"system-message-text\">\r\n                            {item.content}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </List.Item>\r\n                )}\r\n              />\r\n            )}\r\n          </div>\r\n          {/* scroll to bottom button */}\r\n          {messageList.length > 0 && showScrollToBottomButton && (\r\n            <Button\r\n              className=\"scroll-to-bottom-button\"\r\n              type=\"primary\"\r\n              shape=\"circle\"\r\n              icon={<ArrowDownOutlined />}\r\n              onClick={handleScrollToBottom}\r\n              size=\"large\"\r\n            />\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* bottom buttons */}\r\n      <div className=\"bottom-button-container\">\r\n        {bridgeStatus === 'closed' ? (\r\n          <>\r\n            <div className=\"auto-connect-container\">\r\n              <span className=\"auto-connect-icon\">\r\n                <AutoConnectIcon />\r\n              </span>\r\n              <span className=\"auto-connect-label\">\r\n                Auto allow in Bridge Mode\r\n              </span>\r\n              <Switch\r\n                checked={autoConnect}\r\n                onChange={handleAutoConnectChange}\r\n                size=\"default\"\r\n              />\r\n            </div>\r\n            <Button\r\n              type=\"primary\"\r\n              className=\"bottom-action-button\"\r\n              icon={<PlayIcon />}\r\n              onClick={() => {\r\n                startConnection();\r\n              }}\r\n            >\r\n              Allow Connection\r\n            </Button>\r\n          </>\r\n        ) : (\r\n          <div className=\"bottom-status-bar\">\r\n            <div className=\"bottom-status-text\">\r\n              <span className=\"bottom-status-icon\">{statusIcon}</span>\r\n              <span className=\"bottom-status-tip\">{statusTip}</span>\r\n            </div>\r\n            <div className=\"bottom-status-divider\" />\r\n            <div className=\"bottom-status-btn\">{statusBtn}</div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import type { RecordingSession } from '../store';\r\n\r\nconst DB_NAME = 'midscene-recorder';\r\nconst DB_VERSION = 2;\r\nconst SESSIONS_STORE = 'recording-sessions';\r\nconst CONFIG_STORE = 'config';\r\n\r\n// Session limit configuration\r\nconst MAX_SESSIONS = 5;\r\n\r\ninterface DBConfig {\r\n  currentSessionId: string | null;\r\n  isRecording: boolean;\r\n  // Navigation recovery fields\r\n  wasRecordingBeforeNavigation?: boolean;\r\n  lastRecordingTabId?: number;\r\n  lastRecordingUrl?: string;\r\n  lastRecordingSessionId?: string;\r\n  lastNavigationTime?: number;\r\n}\r\n\r\nclass IndexedDBManager {\r\n  private db: IDBDatabase | null = null;\r\n  private initPromise: Promise<void> | null = null;\r\n  private isInitialized = false;\r\n  private isHealthy = true;\r\n\r\n  async init(): Promise<void> {\r\n    // Prevent duplicate initialization\r\n    if (this.isInitialized && this.isHealthy) {\r\n      return;\r\n    }\r\n\r\n    // If already initializing, return existing Promise\r\n    if (this.initPromise) {\r\n      return this.initPromise;\r\n    }\r\n\r\n    this.initPromise = this._doInit();\r\n    try {\r\n      await this.initPromise;\r\n      this.isInitialized = true;\r\n      this.isHealthy = true;\r\n    } catch (error) {\r\n      // Reset Promise on failure for retry\r\n      this.initPromise = null;\r\n      this.isHealthy = false;\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Health check method\r\n  private async healthCheck(): Promise<boolean> {\r\n    if (!this.db || !this.isInitialized) {\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      // Simple read test\r\n      await this.getConfig();\r\n      this.isHealthy = true;\r\n      return true;\r\n    } catch (error) {\r\n      console.warn('IndexedDB health check failed:', error);\r\n      this.isHealthy = false;\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private async _doInit(): Promise<void> {\r\n    return new Promise((resolve, reject) => {\r\n      const request = indexedDB.open(DB_NAME, DB_VERSION);\r\n\r\n      request.onerror = () => {\r\n        console.error('IndexedDB open error:', request.error);\r\n        reject(request.error);\r\n      };\r\n\r\n      request.onsuccess = () => {\r\n        this.db = request.result;\r\n\r\n        // Add database error handling\r\n        this.db.onerror = (event) => {\r\n          console.error('IndexedDB error:', event);\r\n        };\r\n\r\n        resolve();\r\n      };\r\n\r\n      request.onupgradeneeded = (event) => {\r\n        const db = (event.target as IDBOpenDBRequest).result;\r\n\r\n        // Create sessions store\r\n        if (!db.objectStoreNames.contains(SESSIONS_STORE)) {\r\n          const sessionsStore = db.createObjectStore(SESSIONS_STORE, {\r\n            keyPath: 'id',\r\n          });\r\n          sessionsStore.createIndex('createdAt', 'createdAt', {\r\n            unique: false,\r\n          });\r\n          sessionsStore.createIndex('updatedAt', 'updatedAt', {\r\n            unique: false,\r\n          });\r\n        }\r\n\r\n        // Create config store\r\n        if (!db.objectStoreNames.contains(CONFIG_STORE)) {\r\n          db.createObjectStore(CONFIG_STORE, { keyPath: 'key' });\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  private async ensureDB(): Promise<IDBDatabase> {\r\n    await this.init();\r\n    if (!this.db || !this.isInitialized || !this.isHealthy) {\r\n      throw new Error(\r\n        'Database not initialized or unhealthy. Call init() first.',\r\n      );\r\n    }\r\n    return this.db;\r\n  }\r\n\r\n  // Safe database operation wrapper\r\n  private async safeDBOperation<T>(\r\n    operation: () => Promise<T>,\r\n    fallback: T,\r\n  ): Promise<T> {\r\n    try {\r\n      // Health check\r\n      if (!this.isHealthy) {\r\n        const isHealthy = await this.healthCheck();\r\n        if (!isHealthy) {\r\n          throw new Error('Database is unhealthy');\r\n        }\r\n      }\r\n\r\n      return await operation();\r\n    } catch (error) {\r\n      console.error('Database operation failed:', error);\r\n      this.isHealthy = false;\r\n      return fallback;\r\n    }\r\n  }\r\n\r\n  // Create Promise wrapper with timeout\r\n  private createTimeoutPromise<T>(\r\n    promiseExecutor: (\r\n      resolve: (value: T) => void,\r\n      reject: (reason?: any) => void,\r\n    ) => void,\r\n    timeoutMs = 10000,\r\n  ): Promise<T> {\r\n    return new Promise<T>((resolve, reject) => {\r\n      // Set timeout\r\n      const timeoutId = setTimeout(() => {\r\n        reject(new Error(`IndexedDB operation timeout after ${timeoutMs}ms`));\r\n      }, timeoutMs);\r\n\r\n      // Wrap original resolve and reject\r\n      const wrappedResolve = (value: T) => {\r\n        clearTimeout(timeoutId);\r\n        resolve(value);\r\n      };\r\n\r\n      const wrappedReject = (reason?: any) => {\r\n        clearTimeout(timeoutId);\r\n        reject(reason);\r\n      };\r\n\r\n      try {\r\n        promiseExecutor(wrappedResolve, wrappedReject);\r\n      } catch (error) {\r\n        clearTimeout(timeoutId);\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Session management\r\n  async getAllSessions(): Promise<RecordingSession[]> {\r\n    return this.safeDBOperation(async () => {\r\n      const db = await this.ensureDB();\r\n\r\n      return this.createTimeoutPromise<RecordingSession[]>(\r\n        (resolve, reject) => {\r\n          const transaction = db.transaction([SESSIONS_STORE], 'readonly');\r\n\r\n          // Add transaction error handling\r\n          transaction.onerror = () => {\r\n            console.error(\r\n              'Transaction error in getAllSessions:',\r\n              transaction.error,\r\n            );\r\n            reject(transaction.error);\r\n          };\r\n\r\n          transaction.onabort = () => {\r\n            console.error('Transaction aborted in getAllSessions');\r\n            reject(new Error('Transaction aborted'));\r\n          };\r\n\r\n          const store = transaction.objectStore(SESSIONS_STORE);\r\n          const index = store.index('updatedAt');\r\n          const request = index.getAll();\r\n\r\n          request.onsuccess = () => {\r\n            try {\r\n              // Sort by updatedAt descending (newest first)\r\n              const sessions = request.result.sort(\r\n                (a, b) => b.updatedAt - a.updatedAt,\r\n              );\r\n              resolve(sessions);\r\n            } catch (error) {\r\n              reject(error);\r\n            }\r\n          };\r\n\r\n          request.onerror = () => {\r\n            console.error('Request error in getAllSessions:', request.error);\r\n            reject(request.error);\r\n          };\r\n        },\r\n      );\r\n    }, []);\r\n  }\r\n\r\n  async getSession(id: string): Promise<RecordingSession | null> {\r\n    return this.safeDBOperation(async () => {\r\n      const db = await this.ensureDB();\r\n\r\n      return this.createTimeoutPromise<RecordingSession | null>(\r\n        (resolve, reject) => {\r\n          const transaction = db.transaction([SESSIONS_STORE], 'readonly');\r\n\r\n          transaction.onerror = () => {\r\n            console.error(\r\n              'Transaction error in getSession:',\r\n              transaction.error,\r\n            );\r\n            reject(transaction.error);\r\n          };\r\n\r\n          transaction.onabort = () => {\r\n            console.error('Transaction aborted in getSession');\r\n            reject(new Error('Transaction aborted'));\r\n          };\r\n\r\n          const store = transaction.objectStore(SESSIONS_STORE);\r\n          const request = store.get(id);\r\n\r\n          request.onsuccess = () => resolve(request.result || null);\r\n          request.onerror = () => {\r\n            console.error('Request error in getSession:', request.error);\r\n            reject(request.error);\r\n          };\r\n        },\r\n      );\r\n    }, null);\r\n  }\r\n\r\n  async addSession(session: RecordingSession): Promise<void> {\r\n    const db = await this.ensureDB();\r\n\r\n    // First, check if we need to remove old sessions\r\n    const sessions = await this.getAllSessions();\r\n    if (sessions.length >= MAX_SESSIONS) {\r\n      // Remove oldest sessions to make room\r\n      const sessionsToRemove = sessions\r\n        .slice(MAX_SESSIONS - 1)\r\n        .map((s) => s.id);\r\n\r\n      for (const sessionId of sessionsToRemove) {\r\n        await this.deleteSession(sessionId);\r\n      }\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      const transaction = db.transaction([SESSIONS_STORE], 'readwrite');\r\n      const store = transaction.objectStore(SESSIONS_STORE);\r\n      const request = store.add(session);\r\n\r\n      request.onsuccess = () => resolve();\r\n      request.onerror = () => reject(request.error);\r\n    });\r\n  }\r\n\r\n  async updateSession(\r\n    sessionId: string,\r\n    updates: Partial<RecordingSession>,\r\n  ): Promise<void> {\r\n    const db = await this.ensureDB();\r\n    let existingSession = await this.getSession(sessionId);\r\n\r\n    // If session doesn't exist, create a basic session structure\r\n    if (!existingSession) {\r\n      console.warn(\r\n        `Session ${sessionId} not found, creating new session with updates`,\r\n      );\r\n      existingSession = {\r\n        id: sessionId,\r\n        name: `Session ${new Date().toLocaleString()}`,\r\n        createdAt: Date.now(),\r\n        updatedAt: Date.now(),\r\n        events: [],\r\n        status: 'idle' as const,\r\n        ...updates, // Apply the updates to the new session\r\n      };\r\n    } else {\r\n      // Merge updates with existing session\r\n      existingSession = {\r\n        ...existingSession,\r\n        ...updates,\r\n        updatedAt: Date.now(),\r\n      };\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      const transaction = db.transaction([SESSIONS_STORE], 'readwrite');\r\n      const store = transaction.objectStore(SESSIONS_STORE);\r\n      const request = store.put(existingSession);\r\n\r\n      request.onsuccess = () => resolve();\r\n      request.onerror = () => reject(request.error);\r\n    });\r\n  }\r\n\r\n  async deleteSession(sessionId: string): Promise<void> {\r\n    try {\r\n      const db = await this.ensureDB();\r\n      return new Promise((resolve, reject) => {\r\n        setTimeout(() => {\r\n          const transaction = db.transaction([SESSIONS_STORE], 'readwrite');\r\n          const store = transaction.objectStore(SESSIONS_STORE);\r\n          const request = store.delete(sessionId);\r\n          request.onsuccess = () => {\r\n            resolve();\r\n          };\r\n          request.onerror = () => {\r\n            reject(request.error);\r\n          };\r\n        }, 300);\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to delete session:', error);\r\n    }\r\n  }\r\n\r\n  // Config management\r\n  async getConfig(): Promise<DBConfig> {\r\n    try {\r\n      const db = await this.ensureDB();\r\n      return new Promise((resolve, reject) => {\r\n        const transaction = db.transaction([CONFIG_STORE], 'readonly');\r\n        const store = transaction.objectStore(CONFIG_STORE);\r\n        const request = store.get('config');\r\n\r\n        request.onsuccess = () => {\r\n          const result = request.result;\r\n          resolve(\r\n            result?.value || {\r\n              currentSessionId: null,\r\n              isRecording: false,\r\n              wasRecordingBeforeNavigation: false,\r\n              lastRecordingTabId: undefined,\r\n              lastRecordingUrl: undefined,\r\n              lastRecordingSessionId: undefined,\r\n              lastNavigationTime: undefined,\r\n            },\r\n          );\r\n        };\r\n        request.onerror = () => reject(request.error);\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to get config:', error);\r\n      return {\r\n        currentSessionId: null,\r\n        isRecording: false,\r\n        wasRecordingBeforeNavigation: false,\r\n        lastRecordingTabId: undefined,\r\n        lastRecordingUrl: undefined,\r\n        lastRecordingSessionId: undefined,\r\n        lastNavigationTime: undefined,\r\n      };\r\n    }\r\n  }\r\n\r\n  async setConfig(config: Partial<DBConfig>): Promise<void> {\r\n    try {\r\n      const db = await this.ensureDB();\r\n      const currentConfig = await this.getConfig();\r\n      const newConfig = { ...currentConfig, ...config };\r\n\r\n      return new Promise((resolve, reject) => {\r\n        const transaction = db.transaction([CONFIG_STORE], 'readwrite');\r\n        const store = transaction.objectStore(CONFIG_STORE);\r\n        const request = store.put({ key: 'config', value: newConfig });\r\n\r\n        request.onsuccess = () => resolve();\r\n        request.onerror = () => reject(request.error);\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to set config:', error);\r\n    }\r\n  }\r\n\r\n  async getCurrentSessionId(): Promise<string | null> {\r\n    const config = await this.getConfig();\r\n    return config.currentSessionId;\r\n  }\r\n\r\n  async setCurrentSessionId(sessionId: string | null): Promise<void> {\r\n    await this.setConfig({ currentSessionId: sessionId });\r\n  }\r\n\r\n  async getRecordingState(): Promise<boolean> {\r\n    const config = await this.getConfig();\r\n    return config.isRecording;\r\n  }\r\n\r\n  async setRecordingState(isRecording: boolean): Promise<void> {\r\n    await this.setConfig({ isRecording });\r\n  }\r\n\r\n  // Clear navigation recovery state\r\n  async clearNavigationRecoveryState(): Promise<void> {\r\n    await this.setConfig({\r\n      wasRecordingBeforeNavigation: false,\r\n      lastRecordingTabId: undefined,\r\n      lastRecordingUrl: undefined,\r\n      lastRecordingSessionId: undefined,\r\n      lastNavigationTime: undefined,\r\n    });\r\n  }\r\n\r\n  // Recording events management (temporary storage during recording)\r\n  async getRecordingEvents(): Promise<any[]> {\r\n    return this.safeDBOperation(async () => {\r\n      const db = await this.ensureDB();\r\n\r\n      return this.createTimeoutPromise<any[]>((resolve, reject) => {\r\n        const transaction = db.transaction([CONFIG_STORE], 'readonly');\r\n\r\n        transaction.onerror = () => {\r\n          console.error(\r\n            'Transaction error in getRecordingEvents:',\r\n            transaction.error,\r\n          );\r\n          reject(transaction.error);\r\n        };\r\n\r\n        const store = transaction.objectStore(CONFIG_STORE);\r\n        const request = store.get('recording-events');\r\n\r\n        request.onsuccess = () => {\r\n          const result = request.result;\r\n          resolve(result?.value || []);\r\n        };\r\n        request.onerror = () => {\r\n          console.error('Request error in getRecordingEvents:', request.error);\r\n          reject(request.error);\r\n        };\r\n      });\r\n    }, []);\r\n  }\r\n\r\n  async setRecordingEvents(events: any[]): Promise<void> {\r\n    try {\r\n      const db = await this.ensureDB();\r\n\r\n      return this.createTimeoutPromise<void>((resolve, reject) => {\r\n        const transaction = db.transaction([CONFIG_STORE], 'readwrite');\r\n\r\n        // Add transaction error handling\r\n        transaction.onerror = () => {\r\n          console.error(\r\n            'Transaction error in setRecordingEvents:',\r\n            transaction.error,\r\n          );\r\n          reject(transaction.error);\r\n        };\r\n\r\n        transaction.onabort = () => {\r\n          console.error('Transaction aborted in setRecordingEvents');\r\n          reject(new Error('Transaction aborted'));\r\n        };\r\n\r\n        const store = transaction.objectStore(CONFIG_STORE);\r\n        const request = store.put({ key: 'recording-events', value: events });\r\n\r\n        request.onsuccess = () => resolve();\r\n        request.onerror = () => {\r\n          console.error('Request error in setRecordingEvents:', request.error);\r\n          reject(request.error);\r\n        };\r\n      }, 5000); // Shorter timeout for events during navigation\r\n    } catch (error) {\r\n      console.error('Failed to set recording events:', error);\r\n      // Don't throw error during navigation to prevent hanging\r\n    }\r\n  }\r\n\r\n  // Emergency method for saving events during navigation with minimal timeout\r\n  async emergencySetRecordingEvents(events: any[]): Promise<void> {\r\n    try {\r\n      const db = await this.ensureDB();\r\n\r\n      return this.createTimeoutPromise<void>((resolve, reject) => {\r\n        const transaction = db.transaction([CONFIG_STORE], 'readwrite');\r\n\r\n        // Immediate resolution on transaction complete for faster response\r\n        transaction.oncomplete = () => resolve();\r\n        transaction.onerror = () => reject(transaction.error);\r\n        transaction.onabort = () => reject(new Error('Transaction aborted'));\r\n\r\n        const store = transaction.objectStore(CONFIG_STORE);\r\n        const request = store.put({ key: 'recording-events', value: events });\r\n\r\n        request.onerror = () => reject(request.error);\r\n      }, 2000); // Very short timeout for emergency saves\r\n    } catch (error) {\r\n      console.error('Failed to emergency save recording events:', error);\r\n      // Fail silently during navigation\r\n    }\r\n  }\r\n\r\n  async clearRecordingEvents(): Promise<void> {\r\n    try {\r\n      const db = await this.ensureDB();\r\n\r\n      return new Promise((resolve, reject) => {\r\n        const transaction = db.transaction([CONFIG_STORE], 'readwrite');\r\n        const store = transaction.objectStore(CONFIG_STORE);\r\n        const request = store.delete('recording-events');\r\n\r\n        request.onsuccess = () => resolve();\r\n        request.onerror = () => reject(request.error);\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to clear recording events:', error);\r\n    }\r\n  }\r\n}\r\n\r\n// Singleton instance\r\nexport const dbManager = new IndexedDBManager();\r\n\r\n// Global initialization state tracking\r\nlet isGloballyInitialized = false;\r\nlet globalInitPromise: Promise<void> | null = null;\r\n\r\n// Initialize the database\r\nexport const initializeDB = async (): Promise<void> => {\r\n  // Prevent duplicate initialization\r\n  if (isGloballyInitialized) {\r\n    return;\r\n  }\r\n\r\n  // If already initializing, return existing Promise\r\n  if (globalInitPromise) {\r\n    return globalInitPromise;\r\n  }\r\n\r\n  globalInitPromise = (async () => {\r\n    try {\r\n      await dbManager.init();\r\n      // Only execute migration on first initialization\r\n      if (!isGloballyInitialized) {\r\n        isGloballyInitialized = true;\r\n      }\r\n    } catch (error) {\r\n      // Reset state on initialization failure for retry\r\n      globalInitPromise = null;\r\n      console.error('Failed to initialize IndexedDB:', error);\r\n      throw error;\r\n    }\r\n  })();\r\n\r\n  return globalInitPromise;\r\n};\r\n","import type { ChromeRecordedEvent } from '@sqai/recorder';\r\n// import { createStore } from 'zustand/vanilla';\r\nimport * as Z from 'zustand';\r\nimport { recordLogger } from './extension/recorder/logger';\r\nimport { dbManager, initializeDB } from './utils/indexedDB';\r\n\r\nconst { create } = Z;\r\nexport const useBlackboardPreference = create<{\r\n  markerVisible: boolean;\r\n  elementsVisible: boolean;\r\n  setMarkerVisible: (visible: boolean) => void;\r\n  setTextsVisible: (visible: boolean) => void;\r\n}>((set) => ({\r\n  markerVisible: true,\r\n  elementsVisible: true,\r\n  setMarkerVisible: (visible: boolean) => {\r\n    set({ markerVisible: visible });\r\n  },\r\n  setTextsVisible: (visible: boolean) => {\r\n    set({ elementsVisible: visible });\r\n  },\r\n}));\r\n\r\n// Recording session interface\r\nexport interface RecordingSession {\r\n  id: string;\r\n  name: string;\r\n  description?: string;\r\n  createdAt: number;\r\n  updatedAt: number;\r\n  events: ChromeRecordedEvent[];\r\n  status: 'idle' | 'recording' | 'completed';\r\n  duration?: number; // in milliseconds\r\n  url?: string; // The URL where recording started\r\n  generatedCode?: {\r\n    playwright?: string;\r\n    yaml?: string;\r\n    lastGenerated?: number; // timestamp of last generation\r\n  };\r\n}\r\n\r\n// Storage keys\r\nconst RECORDING_SESSIONS_KEY = 'midscene-recording-sessions';\r\nconst CURRENT_SESSION_ID_KEY = 'midscene-current-session-id';\r\nconst RECORDING_STATE_KEY = 'midscene-recording-state';\r\n\r\n// Helper functions for persistence with IndexedDB\r\nconst loadSessionsFromStorage = async (): Promise<RecordingSession[]> => {\r\n  try {\r\n    // initializeDB is now idempotent, safe to call\r\n    return await dbManager.getAllSessions();\r\n  } catch (error) {\r\n    console.error('Failed to load sessions from IndexedDB:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveSessionsToStorage = async (sessions: RecordingSession[]) => {\r\n  // This function is now handled by individual session operations in IndexedDB\r\n  // Keeping for compatibility but no longer used\r\n};\r\n\r\nconst loadCurrentSessionIdFromStorage = async (): Promise<string | null> => {\r\n  try {\r\n    return await dbManager.getCurrentSessionId();\r\n  } catch (error) {\r\n    console.error('Failed to load current session ID from IndexedDB:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\nconst saveCurrentSessionIdToStorage = async (sessionId: string | null) => {\r\n  try {\r\n    await dbManager.setCurrentSessionId(sessionId);\r\n  } catch (error) {\r\n    console.error('Failed to save current session ID to IndexedDB:', error);\r\n  }\r\n};\r\n\r\n// Helper functions for recording state persistence with IndexedDB\r\nconst loadRecordingStateFromStorage = async (): Promise<boolean> => {\r\n  try {\r\n    return await dbManager.getRecordingState();\r\n  } catch (error) {\r\n    console.error('Failed to load recording state from IndexedDB:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\nconst saveRecordingStateToStorage = async (isRecording: boolean) => {\r\n  try {\r\n    await dbManager.setRecordingState(isRecording);\r\n  } catch (error) {\r\n    console.error('Failed to save recording state to IndexedDB:', error);\r\n  }\r\n};\r\n\r\nexport const useRecordingSessionStore = create<{\r\n  sessions: RecordingSession[];\r\n  currentSessionId: string | null;\r\n  isInitialized: boolean;\r\n  initializeStore: () => Promise<void>;\r\n  addSession: (session: RecordingSession) => Promise<void>;\r\n  updateSession: (\r\n    sessionId: string,\r\n    updates: Partial<RecordingSession>,\r\n  ) => Promise<void>;\r\n  deleteSession: (sessionId: string) => Promise<void>;\r\n  setCurrentSession: (sessionId: string | null) => Promise<void>;\r\n  getCurrentSession: () => RecordingSession | null;\r\n}>((set, get) => ({\r\n  sessions: [],\r\n  currentSessionId: null,\r\n  isInitialized: false,\r\n  initializeStore: async () => {\r\n    // Prevent duplicate initialization\r\n    const currentState = get();\r\n    if (currentState.isInitialized) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Ensure database initialization\r\n      await initializeDB();\r\n      const [sessions, currentSessionId] = await Promise.all([\r\n        loadSessionsFromStorage(),\r\n        loadCurrentSessionIdFromStorage(),\r\n      ]);\r\n      set({ sessions, currentSessionId, isInitialized: true });\r\n    } catch (error) {\r\n      console.error('Failed to initialize recording session store:', error);\r\n      set({ isInitialized: true });\r\n    }\r\n  },\r\n  addSession: async (session) => {\r\n    try {\r\n      await dbManager.addSession(session);\r\n      const sessions = await dbManager.getAllSessions();\r\n      set({ sessions });\r\n    } catch (error) {\r\n      console.error('Failed to add session:', error);\r\n    }\r\n  },\r\n  updateSession: async (sessionId, updates) => {\r\n    try {\r\n      recordLogger.info('Updating session', { sessionId, updates });\r\n      await dbManager.updateSession(sessionId, updates);\r\n      const sessions = await dbManager.getAllSessions();\r\n      set({ sessions });\r\n    } catch (error) {\r\n      console.error('Failed to update session:', error);\r\n      // Try to recover by ensuring the session exists in memory\r\n      const { sessions } = get();\r\n      const sessionInMemory = sessions.find((s) => s.id === sessionId);\r\n      if (sessionInMemory) {\r\n        const updatedSession = {\r\n          ...sessionInMemory,\r\n          ...updates,\r\n          updatedAt: Date.now(),\r\n        };\r\n        const newSessions = sessions.map((s) =>\r\n          s.id === sessionId ? updatedSession : s,\r\n        );\r\n        set({ sessions: newSessions });\r\n      }\r\n    }\r\n  },\r\n  deleteSession: async (sessionId) => {\r\n    try {\r\n      await dbManager.deleteSession(sessionId);\r\n      const sessions = await dbManager.getAllSessions();\r\n      set({ sessions });\r\n    } catch (error) {\r\n      console.error('Failed to delete session:', error);\r\n    }\r\n  },\r\n  setCurrentSession: async (sessionId) => {\r\n    try {\r\n      await saveCurrentSessionIdToStorage(sessionId);\r\n      set({ currentSessionId: sessionId });\r\n    } catch (error) {\r\n      console.error('Failed to set current session:', error);\r\n    }\r\n  },\r\n  getCurrentSession: () => {\r\n    const state = get();\r\n    return state.sessions.find((s) => s.id === state.currentSessionId) || null;\r\n  },\r\n}));\r\n\r\n// Helper functions for events persistence with IndexedDB\r\nconst loadEventsFromStorage = async (): Promise<ChromeRecordedEvent[]> => {\r\n  try {\r\n    return await dbManager.getRecordingEvents();\r\n  } catch (error) {\r\n    console.error('Failed to load events from IndexedDB:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nfunction mergeEvents(\r\n  oldEvents: ChromeRecordedEvent[],\r\n  newEvents: ChromeRecordedEvent[],\r\n): ChromeRecordedEvent[] {\r\n  const mergedEventsMap = new Map<string, ChromeRecordedEvent>();\r\n\r\n  // Add old events to map, prioritizing them initially\r\n  for (const event of oldEvents) {\r\n    if (event.hashId) {\r\n      mergedEventsMap.set(event.hashId, event);\r\n    }\r\n  }\r\n\r\n  // Add new events to map, replacing old ones if hashId matches\r\n  for (const event of newEvents) {\r\n    if (event.hashId) {\r\n      mergedEventsMap.set(event.hashId, event);\r\n    }\r\n  }\r\n\r\n  const mergedArray = Array.from(mergedEventsMap.values());\r\n  // Sort events by timestamp in ascending order\r\n  mergedArray.sort((a, b) => (a.timestamp || 0) - (b.timestamp || 0));\r\n  return mergedArray;\r\n}\r\n\r\nconst saveEventsToStorage = async (events: ChromeRecordedEvent[]) => {\r\n  try {\r\n    const existingEvents = await dbManager.getRecordingEvents();\r\n    const combinedEvents = mergeEvents(existingEvents, events);\r\n    await dbManager.setRecordingEvents(combinedEvents);\r\n  } catch (error) {\r\n    console.error('Failed to save events to IndexedDB:', error);\r\n  }\r\n};\r\n\r\nconst clearEventsFromStorage = async () => {\r\n  try {\r\n    await dbManager.clearRecordingEvents();\r\n  } catch (error) {\r\n    console.error('Failed to clear events from IndexedDB:', error);\r\n  }\r\n};\r\n\r\nexport const useRecordStore = create<{\r\n  isRecording: boolean;\r\n  events: ChromeRecordedEvent[];\r\n  isInitialized: boolean;\r\n  initialize: () => Promise<void>;\r\n  setIsRecording: (recording: boolean) => Promise<void>;\r\n  updateEvent: (event: ChromeRecordedEvent) => Promise<void>;\r\n  addEvent: (event: ChromeRecordedEvent) => Promise<void>;\r\n  setEvents: (events: ChromeRecordedEvent[]) => Promise<void>;\r\n  clearEvents: () => Promise<void>;\r\n  emergencySaveEvents: (events?: ChromeRecordedEvent[]) => Promise<void>;\r\n}>((set, get) => ({\r\n  isRecording: false,\r\n  events: [],\r\n  isInitialized: false,\r\n  initialize: async () => {\r\n    // Prevent duplicate initialization\r\n    const currentState = get();\r\n    if (currentState.isInitialized) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Ensure database initialization\r\n      await initializeDB();\r\n      const isRecording = await loadRecordingStateFromStorage();\r\n      const events = isRecording ? await loadEventsFromStorage() : [];\r\n      set({ isRecording, events, isInitialized: true });\r\n    } catch (error) {\r\n      console.error('Failed to initialize record store:', error);\r\n      set({ isInitialized: true });\r\n    }\r\n  },\r\n  setIsRecording: async (recording: boolean) => {\r\n    try {\r\n      await saveRecordingStateToStorage(recording);\r\n      set({ isRecording: recording });\r\n      // Clear events from storage when stopping recording\r\n      if (!recording) {\r\n        await clearEventsFromStorage();\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to set recording state:', error);\r\n    }\r\n  },\r\n  addEvent: async (event: ChromeRecordedEvent) => {\r\n    const state = get();\r\n    const newEvents = [...state.events, event];\r\n    set({ events: newEvents });\r\n    if (state.isRecording) {\r\n      const sessionId = useRecordingSessionStore.getState().currentSessionId;\r\n      if (sessionId) {\r\n        await dbManager.updateSession(sessionId, {\r\n          events: newEvents,\r\n          updatedAt: Date.now(),\r\n        });\r\n      }\r\n      await saveEventsToStorage(newEvents);\r\n    }\r\n  },\r\n  updateEvent: async (event: ChromeRecordedEvent) => {\r\n    const state = get();\r\n    const newEvents = mergeEvents(state.events, [event]);\r\n    set({ events: newEvents });\r\n    if (state.isRecording) {\r\n      const sessionId = useRecordingSessionStore.getState().currentSessionId;\r\n      if (sessionId) {\r\n        await dbManager.updateSession(sessionId, {\r\n          events: newEvents,\r\n          updatedAt: Date.now(),\r\n        });\r\n      }\r\n    }\r\n  },\r\n  setEvents: async (events: ChromeRecordedEvent[]) => {\r\n    const state = get();\r\n    const newEvents = mergeEvents(state.events, events);\r\n    set({ events: newEvents });\r\n    recordLogger.info('Setting events', {\r\n      events: newEvents,\r\n      newEvents,\r\n      eventsCount: newEvents.length,\r\n    });\r\n    if (state.isRecording) {\r\n      const sessionId = useRecordingSessionStore.getState().currentSessionId;\r\n      if (sessionId) {\r\n        await dbManager.updateSession(sessionId, {\r\n          events: newEvents,\r\n          updatedAt: Date.now(),\r\n        });\r\n      }\r\n    }\r\n  },\r\n  clearEvents: async () => {\r\n    await clearEventsFromStorage();\r\n    const sessionId = useRecordingSessionStore.getState().currentSessionId;\r\n    if (sessionId) {\r\n      // Get current session\r\n      const currentSession = useRecordingSessionStore\r\n        .getState()\r\n        .sessions.find((s) => s.id === sessionId);\r\n      await dbManager.updateSession(sessionId, {\r\n        events: [],\r\n        updatedAt: Date.now(),\r\n        // Clear generatedCode as well\r\n        generatedCode: undefined,\r\n      });\r\n    }\r\n    set({ events: [] });\r\n  },\r\n  emergencySaveEvents: async (events?: ChromeRecordedEvent[]) => {\r\n    const state = get();\r\n    const eventsToSave = events || state.events;\r\n    if (eventsToSave.length > 0) {\r\n      try {\r\n        await dbManager.emergencySetRecordingEvents(eventsToSave);\r\n      } catch (error) {\r\n        console.error('Emergency save failed:', error);\r\n      }\r\n    }\r\n  },\r\n}));\r\n\r\nconst CONFIG_KEY = 'midscene-env-config';\r\n\r\n/**\r\n * Service Mode\r\n *\r\n * - Server: use a node server to run the code\r\n * - In-Browser: use browser's fetch API to run the code\r\n * - In-Browser-Extension: use browser's fetch API to run the code, but the page is running in the extension context\r\n */\r\nexport type ServiceModeType = 'Server' | 'In-Browser' | 'In-Browser-Extension'; // | 'Extension';\r\n","import { jsx } from \"react/jsx-runtime\";\nimport \"./shiny-text.css\";\nconst ShinyText = ({ text, disabled = false, speed = 5, className = '' })=>{\n    const style = {\n        '--animation-duration': `${speed}s`\n    };\n    return /*#__PURE__*/ jsx(\"div\", {\n        className: `shiny-text ${disabled ? 'disabled' : ''} ${className}`,\n        style: style,\n        children: text\n    });\n};\nexport { ShinyText };\n","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport { AimOutlined, CompassOutlined, CopyOutlined, EditOutlined, KeyOutlined, VerticalAlignTopOutlined } from \"@ant-design/icons\";\nimport { Button, Card, Image, Space, Timeline, Typography, message } from \"antd\";\nimport { useEffect, useState } from \"react\";\nimport { ShinyText } from \"./components/shiny-text.js\";\nimport \"./RecordTimeline.css\";\nconst { Text } = Typography;\nconst RecordTimeline = ({ events, onEventClick })=>{\n    const [expandedEvents, setExpandedEvents] = useState(new Set());\n    console.log('events', events);\n    useEffect(()=>{\n        if (events.length > 0) {\n            const timeline = document.querySelector('.ant-timeline');\n            if (timeline) timeline.scrollIntoView({\n                behavior: 'smooth',\n                block: 'end'\n            });\n        }\n    }, [\n        events.length\n    ]);\n    const toggleEventExpansion = (index)=>{\n        const newExpanded = new Set(expandedEvents);\n        if (newExpanded.has(index)) newExpanded.delete(index);\n        else newExpanded.add(index);\n        setExpandedEvents(newExpanded);\n    };\n    const truncateJsonStrings = (obj, maxLength = 30)=>{\n        if ('string' == typeof obj) return obj.length > maxLength ? `${obj.substring(0, maxLength)}...` : obj;\n        if (Array.isArray(obj)) return obj.map((item)=>truncateJsonStrings(item, maxLength));\n        if (obj && 'object' == typeof obj) {\n            const truncated = {};\n            for(const key in obj)if (Object.prototype.hasOwnProperty.call(obj, key)) truncated[key] = truncateJsonStrings(obj[key], maxLength);\n            return truncated;\n        }\n        return obj;\n    };\n    const copyToClipboard = (text)=>{\n        navigator.clipboard.writeText(text).then(()=>{\n            message.success('JSON copied to clipboard');\n        }).catch(()=>{\n            message.error('Copy failed');\n        });\n    };\n    const getEventIcon = (type)=>{\n        switch(type){\n            case 'click':\n                return /*#__PURE__*/ jsx(AimOutlined, {\n                    style: {\n                        color: '#1890ff'\n                    }\n                });\n            case 'input':\n                return /*#__PURE__*/ jsx(EditOutlined, {\n                    style: {\n                        color: '#52c41a'\n                    }\n                });\n            case 'scroll':\n                return /*#__PURE__*/ jsx(VerticalAlignTopOutlined, {\n                    style: {\n                        color: '#faad14'\n                    }\n                });\n            case 'navigation':\n                return /*#__PURE__*/ jsx(CompassOutlined, {\n                    style: {\n                        color: '#722ed1'\n                    }\n                });\n            case 'setViewport':\n                return /*#__PURE__*/ jsx(CompassOutlined, {\n                    style: {\n                        color: '#eb2f96'\n                    }\n                });\n            case 'keydown':\n                return /*#__PURE__*/ jsx(KeyOutlined, {\n                    style: {\n                        color: '#fa8c16'\n                    }\n                });\n            default:\n                return /*#__PURE__*/ jsx(AimOutlined, {\n                    style: {\n                        color: '#d9d9d9'\n                    }\n                });\n        }\n    };\n    const getEventColor = (type)=>{\n        switch(type){\n            case 'click':\n                return '#1890ff';\n            case 'input':\n                return '#52c41a';\n            case 'scroll':\n                return '#faad14';\n            case 'navigation':\n                return '#722ed1';\n            case 'setViewport':\n                return '#eb2f96';\n            case 'keydown':\n                return '#fa8c16';\n            default:\n                return '#d9d9d9';\n        }\n    };\n    const getEventTitle = (event)=>{\n        switch(event.type){\n            case 'click':\n                if ('BUTTON' === event.targetTagName) return 'Click Button';\n                if (event.value) return `Click Element \"${event.value}\"`;\n                return 'Click';\n            case 'input':\n                return 'Input';\n            case 'scroll':\n                return 'Scroll';\n            case 'navigation':\n                return 'Navigate';\n            case 'setViewport':\n                return 'Set viewport';\n            case 'keydown':\n                return 'Key down';\n            default:\n                return event.type;\n        }\n    };\n    const getEventDescription = (event)=>{\n        const eventTitle = getEventTitle(event);\n        switch(event.type){\n            case 'click':\n                if (true === event.descriptionLoading && event.elementRect?.x !== void 0 && event.elementRect?.y !== void 0) return /*#__PURE__*/ jsxs(\"span\", {\n                    style: {\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '4px'\n                    },\n                    children: [\n                        /*#__PURE__*/ jsxs(Text, {\n                            children: [\n                                eventTitle,\n                                \" - \"\n                            ]\n                        }),\n                        /*#__PURE__*/ jsx(ShinyText, {\n                            text: `(${event.elementRect.x}, ${event.elementRect.y})`,\n                            disabled: false,\n                            speed: 3,\n                            className: \"step-title-shiny\"\n                        })\n                    ]\n                });\n                if (false === event.descriptionLoading && event.elementDescription) return /*#__PURE__*/ jsxs(Text, {\n                    className: \"\",\n                    children: [\n                        eventTitle,\n                        \" - \",\n                        event.elementDescription\n                    ]\n                });\n                return /*#__PURE__*/ jsx(Text, {\n                    children: eventTitle\n                });\n            case 'input':\n                if (false === event.descriptionLoading && event.elementDescription) return /*#__PURE__*/ jsxs(Text, {\n                    children: [\n                        eventTitle,\n                        \" - \",\n                        event.elementDescription\n                    ]\n                });\n                return /*#__PURE__*/ jsxs(\"span\", {\n                    style: {\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '4px'\n                    },\n                    children: [\n                        /*#__PURE__*/ jsxs(Text, {\n                            children: [\n                                eventTitle,\n                                \" - \"\n                            ]\n                        }),\n                        /*#__PURE__*/ jsx(ShinyText, {\n                            text: event.value ? `\"${event.value}\"` : '',\n                            disabled: false,\n                            speed: 3,\n                            className: \"step-title-shiny\"\n                        })\n                    ]\n                });\n            case 'scroll':\n                if (event.elementDescription) return /*#__PURE__*/ jsxs(Text, {\n                    children: [\n                        eventTitle,\n                        \" - \",\n                        event.value?.split(' ')[0] || ''\n                    ]\n                });\n                return /*#__PURE__*/ jsxs(Text, {\n                    children: [\n                        eventTitle,\n                        \" - Position: (\",\n                        event.elementRect?.x || 0,\n                        \",\",\n                        ' ',\n                        event.elementRect?.y || 0,\n                        \")\"\n                    ]\n                });\n            case 'navigation':\n                {\n                    const truncatedUrl = event.url && event.url.length > 50 ? `${event.url.substring(0, 50)}...` : event.url;\n                    return /*#__PURE__*/ jsxs(Text, {\n                        children: [\n                            eventTitle,\n                            \" - \",\n                            truncatedUrl\n                        ]\n                    });\n                }\n            case 'setViewport':\n                return /*#__PURE__*/ jsxs(Text, {\n                    children: [\n                        eventTitle,\n                        \" - Desktop 964x992 px\"\n                    ]\n                });\n            case 'keydown':\n                return /*#__PURE__*/ jsxs(Text, {\n                    children: [\n                        eventTitle,\n                        \" - Key: \",\n                        event.value || 'Unknown'\n                    ]\n                });\n            default:\n                return /*#__PURE__*/ jsx(Text, {\n                    children: eventTitle\n                });\n        }\n    };\n    const timelineItems = events.map((event, index)=>{\n        const boxedImage = event.screenshotWithBox;\n        const afterImage = event.screenshotAfter;\n        const isExpanded = expandedEvents.has(index);\n        return {\n            dot: getEventIcon(event.type),\n            color: getEventColor(event.type),\n            children: /*#__PURE__*/ jsx(\"div\", {\n                children: /*#__PURE__*/ jsxs(Card, {\n                    size: \"small\",\n                    bordered: false,\n                    style: {\n                        marginBottom: isExpanded ? 8 : 8,\n                        cursor: 'pointer'\n                    },\n                    onClick: ()=>{\n                        toggleEventExpansion(index);\n                        onEventClick?.(event, index);\n                    },\n                    styles: {\n                        body: {\n                            padding: '8px 12px',\n                            backgroundColor: '#F2F4F7',\n                            borderRadius: '8px'\n                        }\n                    },\n                    children: [\n                        /*#__PURE__*/ jsxs(Space, {\n                            style: {\n                                width: '100%',\n                                justifyContent: 'space-between',\n                                alignItems: 'center',\n                                color: 'rgba(0, 0, 0, 0.85)'\n                            },\n                            children: [\n                                /*#__PURE__*/ jsx(Space, {\n                                    style: {\n                                        flex: 1,\n                                        minWidth: 0\n                                    },\n                                    children: getEventDescription(event)\n                                }),\n                                /*#__PURE__*/ jsx(Space, {\n                                    children: (boxedImage || afterImage) && /*#__PURE__*/ jsxs(\"div\", {\n                                        style: {\n                                            display: 'flex',\n                                            alignItems: 'center'\n                                        },\n                                        children: [\n                                            boxedImage && /*#__PURE__*/ jsx(\"div\", {\n                                                style: {\n                                                    width: '24px',\n                                                    height: '24px',\n                                                    borderRadius: '4px',\n                                                    overflow: 'hidden',\n                                                    boxShadow: '1px 1px 1px 1px #00000014',\n                                                    cursor: 'pointer',\n                                                    transition: 'all 0.2s ease-in-out',\n                                                    zIndex: 2\n                                                },\n                                                onMouseEnter: (e)=>{\n                                                    const target = e.currentTarget;\n                                                    target.style.transform = 'scale(1.2)';\n                                                    target.style.boxShadow = `0 2px 8px ${getEventColor(event.type)}60`;\n                                                },\n                                                onMouseLeave: (e)=>{\n                                                    const target = e.currentTarget;\n                                                    target.style.transform = 'scale(1)';\n                                                    target.style.boxShadow = '1px 1px 1px 1px #00000014';\n                                                },\n                                                onClick: (e)=>{\n                                                    e.stopPropagation();\n                                                },\n                                                children: /*#__PURE__*/ jsx(Image, {\n                                                    src: boxedImage,\n                                                    width: \"100%\",\n                                                    height: \"100%\",\n                                                    style: {\n                                                        objectFit: 'cover',\n                                                        display: 'block'\n                                                    },\n                                                    preview: {\n                                                        mask: false\n                                                    }\n                                                })\n                                            }),\n                                            afterImage && /*#__PURE__*/ jsx(\"div\", {\n                                                style: {\n                                                    width: '24px',\n                                                    height: '24px',\n                                                    borderRadius: '4px',\n                                                    overflow: 'hidden',\n                                                    boxShadow: '1px 1px 1px 1px #00000014',\n                                                    cursor: 'pointer',\n                                                    transition: 'all 0.2s ease-in-out',\n                                                    marginLeft: boxedImage ? '-8px' : '0',\n                                                    zIndex: 1\n                                                },\n                                                onMouseEnter: (e)=>{\n                                                    const target = e.currentTarget;\n                                                    target.style.transform = 'scale(1.2)';\n                                                    target.style.boxShadow = '0 2px 8px #52c41a60';\n                                                },\n                                                onMouseLeave: (e)=>{\n                                                    const target = e.currentTarget;\n                                                    target.style.transform = 'scale(1)';\n                                                    target.style.boxShadow = '1px 1px 1px 1px #00000014';\n                                                },\n                                                onClick: (e)=>{\n                                                    e.stopPropagation();\n                                                },\n                                                children: /*#__PURE__*/ jsx(Image, {\n                                                    src: afterImage,\n                                                    width: \"100%\",\n                                                    height: \"100%\",\n                                                    style: {\n                                                        objectFit: 'cover',\n                                                        display: 'block'\n                                                    },\n                                                    preview: {\n                                                        mask: false\n                                                    }\n                                                })\n                                            })\n                                        ]\n                                    })\n                                })\n                            ]\n                        }),\n                        isExpanded && /*#__PURE__*/ jsx(\"div\", {\n                            style: {\n                                marginTop: 8,\n                                marginBottom: 8\n                            },\n                            children: /*#__PURE__*/ jsx(Card, {\n                                size: \"small\",\n                                style: {\n                                    backgroundColor: '#f5f5f5'\n                                },\n                                bodyStyle: {\n                                    padding: '0px'\n                                },\n                                children: /*#__PURE__*/ jsxs(\"div\", {\n                                    style: {\n                                        position: 'relative'\n                                    },\n                                    children: [\n                                        /*#__PURE__*/ jsx(\"pre\", {\n                                            style: {\n                                                fontSize: '12px',\n                                                margin: 0,\n                                                whiteSpace: 'pre-wrap',\n                                                backgroundColor: '#ffffff',\n                                                padding: '12px',\n                                                borderRadius: '8px',\n                                                maxHeight: '250px',\n                                                overflow: 'auto'\n                                            },\n                                            children: JSON.stringify(truncateJsonStrings(event), null, 2)\n                                        }),\n                                        /*#__PURE__*/ jsx(Button, {\n                                            type: \"text\",\n                                            size: \"small\",\n                                            icon: /*#__PURE__*/ jsx(CopyOutlined, {}),\n                                            onClick: (e)=>{\n                                                e.stopPropagation();\n                                                copyToClipboard(JSON.stringify(event, null, 2));\n                                            },\n                                            style: {\n                                                position: 'absolute',\n                                                top: '8px',\n                                                right: '8px',\n                                                background: 'rgba(255, 255, 255, 0.9)',\n                                                border: '1px solid #d9d9d9'\n                                            },\n                                            title: \"Copy JSON\"\n                                        })\n                                    ]\n                                })\n                            })\n                        })\n                    ]\n                })\n            })\n        };\n    });\n    return /*#__PURE__*/ jsx(\"div\", {\n        style: {\n            padding: '3px'\n        },\n        children: /*#__PURE__*/ jsx(Space, {\n            direction: \"vertical\",\n            size: \"large\",\n            style: {\n                width: '100%'\n            },\n            children: /*#__PURE__*/ jsx(Timeline, {\n                mode: \"left\",\n                className: \"timeline-scrollable\",\n                items: timelineItems,\n                style: {\n                    paddingTop: 16\n                }\n            })\n        })\n    });\n};\nexport { RecordTimeline };\n","import Insight from '@sqai/core';\r\nimport type { BaseElement, Rect, UIContext } from '@sqai/core';\r\nimport type { RecordedEvent } from '@sqai/recorder';\r\nimport { globalModelConfigManager } from '@sqai/shared/env';\r\nimport { compositeElementInfoImg } from '@sqai/shared/img';\r\n\r\n// Caches for element descriptions and boxed screenshots to improve performance\r\nconst MAX_CACHE_SIZE = 100;\r\nconst descriptionCache = new Map<string, string>();\r\nconst boxedScreenshotCache = new Map<string, string>();\r\nconst cacheKeyOrder: string[] = [];\r\n\r\n// Track ongoing AI description generation requests\r\nconst ongoingDescriptionRequests = new Map<string, Promise<string>>();\r\nconst pendingCallbacks = new Map<string, (description: string) => void>();\r\n\r\n// Debounce mechanism for AI description generation\r\nconst debounceTimeouts = new Map<string, NodeJS.Timeout>();\r\n\r\n// Add an item to cache with size limiting\r\nconst addToCache = (\r\n  cache: Map<string, string>,\r\n  key: string,\r\n  value: string,\r\n): void => {\r\n  const existingIndex = cacheKeyOrder.indexOf(key);\r\n  if (existingIndex >= 0) {\r\n    cacheKeyOrder.splice(existingIndex, 1);\r\n  }\r\n\r\n  if (cache.size >= MAX_CACHE_SIZE && cacheKeyOrder.length > 0) {\r\n    const oldestKey = cacheKeyOrder.shift();\r\n    if (oldestKey) {\r\n      descriptionCache.delete(oldestKey);\r\n      boxedScreenshotCache.delete(oldestKey);\r\n    }\r\n  }\r\n\r\n  cache.set(key, value);\r\n  cacheKeyOrder.push(key);\r\n};\r\n\r\n// Clear all caches and ongoing operations\r\nexport const clearDescriptionCache = (): void => {\r\n  descriptionCache.clear();\r\n  boxedScreenshotCache.clear();\r\n  cacheKeyOrder.length = 0;\r\n  ongoingDescriptionRequests.clear();\r\n  pendingCallbacks.clear();\r\n  debounceTimeouts.forEach((timeout) => clearTimeout(timeout));\r\n  debounceTimeouts.clear();\r\n  console.log('All caches and ongoing operations cleared');\r\n};\r\n\r\n// Generate fallback description for events when AI fails\r\nexport const generateFallbackDescription = (): string => {\r\n  return 'failed to generate element description';\r\n};\r\n\r\n// Check if event has valid rect information\r\nconst hasValidRect = (event: RecordedEvent): boolean => {\r\n  return Boolean(\r\n    ((event.elementRect?.left || event.elementRect?.top) &&\r\n      event.elementRect?.width &&\r\n      event.elementRect?.height) ||\r\n      event.elementRect?.x ||\r\n      event.elementRect?.y,\r\n  );\r\n};\r\n\r\n// Generate AI description asynchronously\r\nexport const generateAIDescription = async (\r\n  event: RecordedEvent,\r\n  hashId: string,\r\n): Promise<string> => {\r\n  if (!event.screenshotBefore || !hasValidRect(event)) {\r\n    return generateFallbackDescription();\r\n  }\r\n\r\n  if (ongoingDescriptionRequests.has(hashId)) {\r\n    return ongoingDescriptionRequests.get(hashId)!;\r\n  }\r\n\r\n  // New addition: describe call with retry\r\n  async function describeWithRetry(\r\n    insight: Insight,\r\n    rect: Rect | [number, number],\r\n    maxRetries = 3,\r\n  ) {\r\n    let lastError;\r\n    for (let attempt = 1; attempt <= maxRetries; attempt++) {\r\n      try {\r\n        const modelConfig = globalModelConfigManager.getModelConfig('default');\r\n        return await insight.describe(rect, modelConfig);\r\n      } catch (err) {\r\n        lastError = err;\r\n        if (attempt < maxRetries) {\r\n          // Optional: Wait for a while and then try again\r\n          await new Promise((res) => setTimeout(res, 200));\r\n        }\r\n      }\r\n    }\r\n    throw lastError;\r\n  }\r\n\r\n  const descriptionPromise = (async () => {\r\n    try {\r\n      const mockContext: UIContext<BaseElement> = {\r\n        screenshotBase64: event.screenshotBefore as string,\r\n        size: { width: event.pageInfo.width, height: event.pageInfo.height },\r\n        tree: { node: null, children: [] },\r\n      };\r\n\r\n      const insight = new Insight(mockContext);\r\n      const rect =\r\n        event.elementRect?.x && event.elementRect?.y\r\n          ? ([event.elementRect.x, event.elementRect.y] as [number, number])\r\n          : {\r\n              left: event.elementRect?.left!,\r\n              top: event.elementRect?.top!,\r\n              width: event.elementRect?.width!,\r\n              height: event.elementRect?.height!,\r\n            };\r\n\r\n      // Modify it to a call with retry\r\n      const { description } = await describeWithRetry(insight, rect, 3);\r\n      addToCache(descriptionCache, hashId, description);\r\n      return description;\r\n    } catch (error) {\r\n      console.error('Failed to generate AI description:', error);\r\n      const fallbackDescription = generateFallbackDescription();\r\n      addToCache(descriptionCache, hashId, fallbackDescription);\r\n      return fallbackDescription;\r\n    } finally {\r\n      ongoingDescriptionRequests.delete(hashId);\r\n      pendingCallbacks.delete(hashId);\r\n    }\r\n  })();\r\n\r\n  ongoingDescriptionRequests.set(hashId, descriptionPromise);\r\n  return descriptionPromise;\r\n};\r\n\r\n// Generate boxed image for event\r\nexport const generateBoxedImage = async (\r\n  event: RecordedEvent,\r\n): Promise<string | undefined> => {\r\n  try {\r\n    if (!event.screenshotBefore) {\r\n      return undefined;\r\n    }\r\n\r\n    const hashId = event.hashId;\r\n    if (boxedScreenshotCache.has(hashId)) {\r\n      return boxedScreenshotCache.get(hashId);\r\n    }\r\n\r\n    const elementsPositionInfo = [];\r\n    if (hasValidRect(event) && event.elementRect) {\r\n      // Check if we have left/top/width/height properties\r\n      if (\r\n        event.elementRect.width &&\r\n        event.elementRect.height &&\r\n        (event.elementRect.left !== undefined ||\r\n          event.elementRect.top !== undefined)\r\n      ) {\r\n        elementsPositionInfo.push({\r\n          rect: {\r\n            left: event.elementRect.left || 0,\r\n            top: event.elementRect.top || 0,\r\n            width: event.elementRect.width,\r\n            height: event.elementRect.height,\r\n          },\r\n          indexId: 1,\r\n        });\r\n      }\r\n      // Check if we have x/y coordinates\r\n      else if (\r\n        event.elementRect.x !== undefined &&\r\n        event.elementRect.y !== undefined\r\n      ) {\r\n        elementsPositionInfo.push({\r\n          rect: {\r\n            left: event.elementRect.x,\r\n            top: event.elementRect.y,\r\n            width: 4,\r\n            height: 4,\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    const boxedImageBase64 = await compositeElementInfoImg({\r\n      inputImgBase64: event.screenshotBefore,\r\n      size: { width: event.pageInfo.width, height: event.pageInfo.height },\r\n      elementsPositionInfo,\r\n      borderThickness: 3,\r\n      annotationPadding: 2,\r\n    });\r\n\r\n    if (\r\n      event.elementRect?.width &&\r\n      event.elementRect?.height &&\r\n      event.elementRect.width > 0 &&\r\n      event.elementRect.height > 0\r\n    ) {\r\n      addToCache(boxedScreenshotCache, hashId, boxedImageBase64);\r\n    }\r\n\r\n    return boxedImageBase64;\r\n  } catch (error) {\r\n    console.error(\r\n      '[generateBoxedImage] Failed to generate boxed image:',\r\n      error,\r\n    );\r\n    return undefined;\r\n  }\r\n};\r\n\r\n// Main function to optimize event with AI description and boxed image\r\nexport const optimizeEvent = async (\r\n  event: RecordedEvent,\r\n  updateCallback: (updatedEvent: RecordedEvent) => void,\r\n): Promise<RecordedEvent> => {\r\n  try {\r\n    const boxedImageBase64 = await generateBoxedImage(event);\r\n    if (boxedImageBase64) {\r\n      event.screenshotWithBox = boxedImageBase64;\r\n    }\r\n\r\n    const hashId = event.hashId;\r\n    const eventWithDescription = { ...event };\r\n\r\n    // Set initial loading state\r\n    eventWithDescription.elementDescription = 'AI is analyzing element...';\r\n    eventWithDescription.descriptionLoading = true;\r\n    updateCallback(eventWithDescription);\r\n\r\n    // Check cache first\r\n    if (descriptionCache.has(hashId)) {\r\n      const cachedDescription = descriptionCache.get(hashId)!;\r\n      eventWithDescription.elementDescription = cachedDescription;\r\n      eventWithDescription.descriptionLoading = false;\r\n      updateCallback(eventWithDescription);\r\n      return eventWithDescription;\r\n    }\r\n\r\n    // Generate description with debouncing\r\n    generateAIDescription(event, hashId)\r\n      .then((description) => {\r\n        updateCallback({\r\n          ...event,\r\n          elementDescription: description,\r\n          descriptionLoading: false,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.error(\r\n          '[optimizeEvent] Error in AI description generation:',\r\n          error,\r\n        );\r\n        updateCallback({\r\n          ...event,\r\n          elementDescription: generateFallbackDescription(),\r\n          descriptionLoading: false,\r\n        });\r\n      });\r\n    return eventWithDescription;\r\n  } catch (error) {\r\n    console.error('[optimizeEvent] Error processing event:', error);\r\n    return {\r\n      ...event,\r\n      elementDescription: generateFallbackDescription(),\r\n      descriptionLoading: false,\r\n    };\r\n  }\r\n};\r\n","import type { ChromeRecordedEvent } from '@sqai/recorder';\r\nimport { recordLogger } from '../../logger';\r\nimport type {\r\n  EventCounts,\r\n  EventSummary,\r\n  FilteredEvents,\r\n  InputDescription,\r\n  ProcessedEvent,\r\n  TestGenerationOptions,\r\n} from './types';\r\n\r\n/**\r\n * Get screenshots from events for LLM context\r\n * Centralized implementation to replace duplicated functions\r\n */\r\nexport const getScreenshotsForLLM = (\r\n  events: ChromeRecordedEvent[],\r\n  maxScreenshots = 1,\r\n): string[] => {\r\n  // Find events with screenshots, prioritizing navigation and click events\r\n  const eventsWithScreenshots = events.filter(\r\n    (event) =>\r\n      event.screenshotBefore ||\r\n      event.screenshotAfter ||\r\n      event.screenshotWithBox,\r\n  );\r\n\r\n  // Sort them by priority (navigation first, then clicks, then others)\r\n  const sortedEvents = [...eventsWithScreenshots].sort((a, b) => {\r\n    if (a.type === 'navigation' && b.type !== 'navigation') return -1;\r\n    if (a.type !== 'navigation' && b.type === 'navigation') return 1;\r\n    if (a.type === 'click' && b.type !== 'click') return -1;\r\n    if (a.type !== 'click' && b.type === 'click') return 1;\r\n    return 0;\r\n  });\r\n\r\n  // Extract up to maxScreenshots screenshots\r\n  const screenshots: string[] = [];\r\n  for (const event of sortedEvents) {\r\n    // Prefer the most informative screenshot\r\n    const screenshot =\r\n      event.screenshotWithBox ||\r\n      event.screenshotAfter ||\r\n      event.screenshotBefore;\r\n    if (screenshot && !screenshots.includes(screenshot)) {\r\n      screenshots.push(screenshot);\r\n      if (screenshots.length >= maxScreenshots) break;\r\n    }\r\n  }\r\n\r\n  return screenshots;\r\n};\r\n\r\n/**\r\n * Filter events by type for easier processing\r\n */\r\nexport const filterEventsByType = (\r\n  events: ChromeRecordedEvent[],\r\n): FilteredEvents => {\r\n  return {\r\n    navigationEvents: events.filter((event) => event.type === 'navigation'),\r\n    clickEvents: events.filter((event) => event.type === 'click'),\r\n    inputEvents: events.filter((event) => event.type === 'input'),\r\n    scrollEvents: events.filter((event) => event.type === 'scroll'),\r\n  };\r\n};\r\n\r\n/**\r\n * Create event counts summary\r\n */\r\nexport const createEventCounts = (\r\n  filteredEvents: FilteredEvents,\r\n  totalEvents: number,\r\n): EventCounts => {\r\n  return {\r\n    navigation: filteredEvents.navigationEvents.length,\r\n    click: filteredEvents.clickEvents.length,\r\n    input: filteredEvents.inputEvents.length,\r\n    scroll: filteredEvents.scrollEvents.length,\r\n    total: totalEvents,\r\n  };\r\n};\r\n\r\n/**\r\n * Extract input descriptions from input events\r\n */\r\nexport const extractInputDescriptions = (\r\n  inputEvents: ChromeRecordedEvent[],\r\n): InputDescription[] => {\r\n  return inputEvents\r\n    .map((event) => ({\r\n      description: event.elementDescription || '',\r\n      value: event.value || '',\r\n    }))\r\n    .filter((item) => item.description && item.value);\r\n};\r\n\r\n/**\r\n * Process events for LLM consumption\r\n */\r\nexport const processEventsForLLM = (\r\n  events: ChromeRecordedEvent[],\r\n): ProcessedEvent[] => {\r\n  return events.map((event) => ({\r\n    type: event.type,\r\n    timestamp: event.timestamp,\r\n    url: event.url,\r\n    title: event.title,\r\n    elementDescription: event.elementDescription,\r\n    value: event.value,\r\n    pageInfo: event.pageInfo,\r\n    elementRect: event.elementRect,\r\n  }));\r\n};\r\n\r\n/**\r\n * Prepare comprehensive event summary for LLM\r\n */\r\nexport const prepareEventSummary = (\r\n  events: ChromeRecordedEvent[],\r\n  options: TestGenerationOptions = {},\r\n): EventSummary => {\r\n  const filteredEvents = filterEventsByType(events);\r\n  const eventCounts = createEventCounts(filteredEvents, events.length);\r\n\r\n  // Extract useful information from events\r\n  const startUrl =\r\n    filteredEvents.navigationEvents.length > 0\r\n      ? filteredEvents.navigationEvents[0].url || ''\r\n      : '';\r\n\r\n  const pageTitles = filteredEvents.navigationEvents\r\n    .map((event) => event.title)\r\n    .filter((title): title is string => Boolean(title))\r\n    .slice(0, 5);\r\n\r\n  const clickDescriptions = filteredEvents.clickEvents\r\n    .map((event) => event.elementDescription)\r\n    .filter((desc): desc is string => Boolean(desc))\r\n    .slice(0, 10);\r\n\r\n  const inputDescriptions = extractInputDescriptions(\r\n    filteredEvents.inputEvents,\r\n  ).slice(0, 10);\r\n\r\n  const urls = filteredEvents.navigationEvents\r\n    .map((e) => e.url)\r\n    .filter((url): url is string => Boolean(url))\r\n    .slice(0, 5);\r\n\r\n  const processedEvents = processEventsForLLM(events);\r\n\r\n  return {\r\n    testName: options.testName || 'Automated test from recorded events',\r\n    startUrl,\r\n    eventCounts,\r\n    pageTitles,\r\n    urls,\r\n    clickDescriptions,\r\n    inputDescriptions,\r\n    events: processedEvents,\r\n  };\r\n};\r\n\r\n/**\r\n * Create message content for LLM with optional screenshots\r\n */\r\nexport const createMessageContent = (\r\n  promptText: string,\r\n  screenshots: string[] = [],\r\n  includeScreenshots = true,\r\n): Array<string | Record<string, any>> => {\r\n  const messageContent: Array<string | Record<string, any>> = [\r\n    {\r\n      type: 'text',\r\n      text: promptText,\r\n    },\r\n  ];\r\n\r\n  // Add screenshots if available and requested\r\n  if (includeScreenshots && screenshots.length > 0) {\r\n    messageContent.unshift({\r\n      type: 'text',\r\n      text: 'Here are screenshots from the recording session to help you understand the context:',\r\n    });\r\n\r\n    screenshots.forEach((screenshot) => {\r\n      messageContent.push({\r\n        type: 'image_url',\r\n        image_url: {\r\n          url: screenshot,\r\n        },\r\n      });\r\n    });\r\n  }\r\n\r\n  return messageContent;\r\n};\r\n\r\n/**\r\n * Handle test generation errors with consistent logging\r\n */\r\nexport const handleTestGenerationError = (\r\n  error: any,\r\n  context: string,\r\n  eventsCount?: number,\r\n): Error => {\r\n  recordLogger.error(`Error generating ${context}`, { eventsCount }, error);\r\n  return new Error(`Failed to generate ${context}: ${error}`);\r\n};\r\n\r\n/**\r\n * Validate events before processing\r\n */\r\nexport const validateEvents = (events: ChromeRecordedEvent[]): void => {\r\n  if (!events.length) {\r\n    throw new Error('No events provided for test generation');\r\n  }\r\n};\r\n","// import { generatePlaywrightTest as coreGeneratePlaywrightTest } from '@sqai/core/ai-model';\r\nimport type { ChromeRecordedEvent } from '@sqai/recorder';\r\n\r\nimport type {\r\n  StreamingAIResponse,\r\n  StreamingCodeGenerationOptions,\r\n} from '@sqai/core';\r\n// Note: Streaming support will be added once the core package exports are updated\r\nimport { generatePlaywrightTestStream as coreGeneratePlaywrightTestStream } from '@sqai/core/ai-model';\r\nimport type { IModelConfig } from '@sqai/shared/env';\r\nimport { recordLogger } from '../logger';\r\nimport { handleTestGenerationError } from './shared/testGenerationUtils';\r\n\r\n/**\r\n * Extracts navigation and viewport information from events\r\n */\r\nexport const extractNavigationAndViewportInfo = (\r\n  events: ChromeRecordedEvent[],\r\n) => {\r\n  const navigationEvents = events.filter(\r\n    (event) => event.type === 'navigation',\r\n  );\r\n  const allViewportSizes = events\r\n    .map((event) => event.pageInfo)\r\n    .filter(Boolean);\r\n\r\n  return {\r\n    urls: navigationEvents.map((event) => event.url).filter(Boolean),\r\n    titles: navigationEvents.map((event) => event.title).filter(Boolean),\r\n    initialViewport: allViewportSizes[0],\r\n  };\r\n};\r\n\r\n/**\r\n * Generates Playwright test code from recorded events\r\n * Uses the core package implementation with extension-specific logging\r\n */\r\n// export const generatePlaywrightTest = async (\r\n//   events: ChromeRecordedEvent[],\r\n// ): Promise<string> => {\r\n//   try {\r\n//     recordLogger.info('Starting Playwright test generation', {\r\n//       eventsCount: events.length,\r\n//     });\r\n\r\n//     // Extract navigation and viewport information\r\n//     const navigationInfo = extractNavigationAndViewportInfo(events);\r\n\r\n//     recordLogger.info('Navigation and viewport info extracted', {\r\n//       eventsCount: events.length,\r\n//     });\r\n\r\n//     // Merge navigation and viewport info into options\r\n//     const enhancedOptions = {\r\n//       navigationInfo,\r\n//       // Set initial viewport if not already specified\r\n//       viewportSize: navigationInfo.initialViewport,\r\n//     };\r\n\r\n//     const result = await coreGeneratePlaywrightTest(events, enhancedOptions);\r\n\r\n//     recordLogger.success('Playwright test generated successfully', {\r\n//       eventsCount: events.length,\r\n//     });\r\n\r\n//     return result;\r\n//   } catch (error) {\r\n//     throw handleTestGenerationError(error, 'Playwright test', events.length);\r\n//   }\r\n// };\r\n\r\n// TODO: Add streaming support once core package exports are updated\r\nexport const generatePlaywrightTestStream = async (\r\n  events: ChromeRecordedEvent[],\r\n  options: StreamingCodeGenerationOptions,\r\n  modelConfig: IModelConfig,\r\n): Promise<StreamingAIResponse> => {\r\n  try {\r\n    recordLogger.info('Starting streaming Playwright test generation', {\r\n      eventsCount: events.length,\r\n    });\r\n\r\n    // Extract navigation and viewport information\r\n    const navigationInfo = extractNavigationAndViewportInfo(events);\r\n\r\n    recordLogger.info('Navigation and viewport info extracted', {\r\n      eventsCount: events.length,\r\n    });\r\n\r\n    // Merge navigation and viewport info into options\r\n    const enhancedOptions = {\r\n      ...options,\r\n      navigationInfo,\r\n      // Set initial viewport if not already specified\r\n      viewportSize: navigationInfo.initialViewport,\r\n    };\r\n\r\n    const result = await coreGeneratePlaywrightTestStream(\r\n      events,\r\n      enhancedOptions,\r\n      modelConfig,\r\n    );\r\n\r\n    recordLogger.success('Streaming Playwright test generated successfully', {\r\n      eventsCount: events.length,\r\n    });\r\n\r\n    return result;\r\n  } catch (error) {\r\n    throw handleTestGenerationError(error, 'Playwright test', events.length);\r\n  }\r\n};\r\n","import type {\r\n  StreamingAIResponse,\r\n  StreamingCodeGenerationOptions,\r\n} from '@sqai/core';\r\nimport {\r\n  generateYamlTest as generateYamlTestCore,\r\n  generateYamlTestStream as generateYamlTestStreamCore,\r\n} from '@sqai/core/ai-model';\r\nimport type { ChromeRecordedEvent } from '@sqai/recorder';\r\nimport type { IModelConfig } from '@sqai/shared/env';\r\nimport { recordLogger } from '../logger';\r\nimport { extractNavigationAndViewportInfo } from './playwrightGenerator';\r\nimport { handleTestGenerationError } from './shared/testGenerationUtils';\r\nimport type { YamlGenerationOptions } from './shared/types';\r\n\r\n/**\r\n * Generates YAML test configuration from recorded events using AI\r\n * Uses the core package implementation\r\n */\r\nexport const generateYamlTest = async (\r\n  events: ChromeRecordedEvent[],\r\n  options: YamlGenerationOptions,\r\n  modelConfig: IModelConfig,\r\n): Promise<string> => {\r\n  try {\r\n    // Extract navigation and viewport information\r\n    const navigationInfo = extractNavigationAndViewportInfo(events);\r\n\r\n    recordLogger.info('Starting AI-powered YAML test generation', {\r\n      eventsCount: events.length,\r\n      events,\r\n      navigationInfo,\r\n    });\r\n\r\n    // Merge navigation and viewport info into options\r\n    const enhancedOptions = {\r\n      ...options,\r\n      navigationInfo,\r\n    };\r\n\r\n    const yamlContent = await generateYamlTestCore(\r\n      events,\r\n      enhancedOptions,\r\n      modelConfig,\r\n    );\r\n\r\n    recordLogger.success('AI-powered YAML test generated successfully', {\r\n      eventsCount: events.length,\r\n      events,\r\n      yamlContent,\r\n    });\r\n\r\n    return yamlContent;\r\n  } catch (error) {\r\n    throw handleTestGenerationError(error, 'YAML test', events.length);\r\n  }\r\n};\r\n\r\n/**\r\n * Export events as YAML file using AI generation\r\n */\r\nexport const exportEventsToYaml = async (\r\n  events: ChromeRecordedEvent[],\r\n  sessionName: string,\r\n  modelConfig: IModelConfig,\r\n  options: YamlGenerationOptions = {},\r\n): Promise<void> => {\r\n  try {\r\n    recordLogger.info('Exporting events to AI-generated YAML', {\r\n      eventsCount: events.length,\r\n    });\r\n\r\n    const yamlContent = await generateYamlTest(\r\n      events,\r\n      {\r\n        testName: sessionName,\r\n        description: `Test session recorded on ${new Date().toLocaleDateString()}`,\r\n        ...options,\r\n      },\r\n      modelConfig,\r\n    );\r\n\r\n    const dataBlob = new Blob([yamlContent], {\r\n      type: 'application/x-yaml',\r\n    });\r\n    const url = URL.createObjectURL(dataBlob);\r\n\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `${sessionName}-test.yaml`;\r\n    link.click();\r\n\r\n    URL.revokeObjectURL(url);\r\n    recordLogger.success(\r\n      `AI-generated YAML file exported: ${sessionName}-test.yaml`,\r\n    );\r\n  } catch (error) {\r\n    recordLogger.error('Error exporting events to YAML', undefined, error);\r\n    throw new Error(`Failed to export YAML: ${error}`);\r\n  }\r\n};\r\n\r\n/**\r\n * Generates YAML test configuration from recorded events using AI with streaming support\r\n * Uses the core package implementation\r\n */\r\nexport const generateYamlTestStream = async (\r\n  events: ChromeRecordedEvent[],\r\n  options: YamlGenerationOptions & StreamingCodeGenerationOptions,\r\n  modelConfig: IModelConfig,\r\n): Promise<StreamingAIResponse> => {\r\n  try {\r\n    // Extract navigation and viewport information\r\n    const navigationInfo = extractNavigationAndViewportInfo(events);\r\n\r\n    recordLogger.info(\r\n      'Starting AI-powered YAML test generation with streaming',\r\n      {\r\n        eventsCount: events.length,\r\n        events,\r\n        navigationInfo,\r\n      },\r\n    );\r\n\r\n    // Merge navigation and viewport info into options\r\n    const enhancedOptions = {\r\n      ...options,\r\n      navigationInfo,\r\n    };\r\n\r\n    const result = await generateYamlTestStreamCore(\r\n      events,\r\n      enhancedOptions,\r\n      modelConfig,\r\n    );\r\n\r\n    recordLogger.success(\r\n      'AI-powered YAML test generated successfully with streaming',\r\n      {\r\n        eventsCount: events.length,\r\n        events,\r\n        yamlContent: result.content,\r\n      },\r\n    );\r\n\r\n    return result;\r\n  } catch (error) {\r\n    throw handleTestGenerationError(error, 'YAML test', events.length);\r\n  }\r\n};\r\n","import type { ChromeRecordedEvent } from '@sqai/recorder';\r\nimport { message } from 'antd';\r\nimport { useRecordStore, useRecordingSessionStore } from '../../../store';\r\nimport { recordLogger } from '../logger';\r\n\r\n/**\r\n * Utility functions for export controls to eliminate code duplication\r\n */\r\n\r\n/**\r\n * Get the most current events with AI descriptions\r\n */\r\nexport const getLatestEvents = (sessionId?: string): ChromeRecordedEvent[] => {\r\n  const currentLiveEvents = useRecordStore.getState().events;\r\n  const { isRecording } = useRecordStore.getState();\r\n\r\n  // If currently recording, always use live events as they have the most up-to-date AI descriptions\r\n  if (isRecording && currentLiveEvents.length > 0) {\r\n    // recordLogger.info('Using live events during recording', {\r\n    //   events: currentLiveEvents\r\n    // });\r\n    return currentLiveEvents;\r\n  }\r\n\r\n  // If not recording, compare live events and session events to find the most complete data\r\n  if (sessionId) {\r\n    const session = useRecordingSessionStore\r\n      .getState()\r\n      .sessions.find((s) => s.id === sessionId);\r\n    const sessionEvents = session?.events || [];\r\n\r\n    // If we have live events, prefer them as they are more up-to-date\r\n    if (\r\n      currentLiveEvents.length > 0 &&\r\n      currentLiveEvents.length >= sessionEvents.length\r\n    ) {\r\n      return currentLiveEvents;\r\n    }\r\n\r\n    return sessionEvents;\r\n  }\r\n\r\n  // Fallback to live events or provided events\r\n  throw new Error('No events found');\r\n};\r\n\r\n/**\r\n * Check if all elements have descriptions generated\r\n */\r\nexport const checkElementDescriptions = (\r\n  events: ChromeRecordedEvent[],\r\n): boolean => {\r\n  const eventsNeedingDescriptions = events.filter(\r\n    (event: ChromeRecordedEvent) =>\r\n      event.type === 'click' ||\r\n      event.type === 'input' ||\r\n      event.type === 'scroll',\r\n  );\r\n\r\n  return eventsNeedingDescriptions.every(\r\n    (event: ChromeRecordedEvent) => !event.descriptionLoading,\r\n  );\r\n};\r\n\r\n/**\r\n * Wait for all element descriptions to be generated\r\n */\r\nexport const waitForElementDescriptions = (\r\n  getEvents: () => ChromeRecordedEvent[],\r\n): Promise<void> => {\r\n  return new Promise((resolve) => {\r\n    const checkInterval = setInterval(() => {\r\n      if (checkElementDescriptions(getEvents())) {\r\n        clearInterval(checkInterval);\r\n        resolve();\r\n      }\r\n    }, 200); // Check every 200ms\r\n\r\n    // Timeout after 30 seconds\r\n    setTimeout(() => {\r\n      clearInterval(checkInterval);\r\n      resolve();\r\n    }, 30000);\r\n  });\r\n};\r\n\r\n/**\r\n * Stop recording if currently recording and wait for completion\r\n */\r\nexport const stopRecordingIfActive = async (\r\n  onStopRecording?: () => void | Promise<void>,\r\n): Promise<void> => {\r\n  const { isRecording } = useRecordStore.getState();\r\n\r\n  if (isRecording && onStopRecording) {\r\n    recordLogger.info('Stopping recording before export operation');\r\n    message.loading('Stopping recording...', 0);\r\n    await Promise.resolve(onStopRecording());\r\n    message.destroy();\r\n    recordLogger.success('Recording stopped, proceeding with export operation');\r\n\r\n    // Small delay to ensure events are fully saved to session\r\n    await new Promise((resolve) => setTimeout(resolve, 500));\r\n  }\r\n};\r\n\r\n/**\r\n * Get the current session name from store if available, fallback to provided name\r\n */\r\nexport const resolveSessionName = (\r\n  defaultName: string,\r\n  sessionId?: string,\r\n): string => {\r\n  if (sessionId) {\r\n    const session = useRecordingSessionStore\r\n      .getState()\r\n      .sessions.find((s) => s.id === sessionId);\r\n    if (session) {\r\n      return session.name;\r\n    }\r\n  }\r\n  return defaultName;\r\n};\r\n","import {\r\n  AIActionType,\r\n  type AIArgs,\r\n  callAIWithObjectResponse,\r\n  callAIWithStringResponse,\r\n} from '@sqai/core/ai-model';\r\nimport type { ChromeRecordedEvent } from '@sqai/recorder';\r\nimport type { IModelConfig } from '@sqai/shared/env';\r\nimport { message } from 'antd';\r\nimport { saveAs } from 'file-saver';\r\nimport JSZip from 'jszip';\r\nimport type { ChatCompletionContentPart } from 'openai/resources/index';\r\nimport type { RecordingSession } from '../../store';\r\nimport { recordLogger } from './logger';\r\nimport { isChromeExtension, safeChromeAPI } from './types';\r\n\r\n// Generate default session name with current time\r\nexport const generateDefaultSessionName = () => {\r\n  const now = new Date();\r\n  const dateStr = now\r\n    .toLocaleString('zh-CN', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      second: '2-digit',\r\n      hour12: false,\r\n    })\r\n    .replace(/\\//g, '-');\r\n  const ms = String(now.getMilliseconds()).padStart(3, '0');\r\n  return `${dateStr}-${ms}`;\r\n};\r\n\r\n// Check if content script is injected\r\nexport const checkContentScriptInjected = async (\r\n  tabId: number,\r\n): Promise<boolean> => {\r\n  if (!isChromeExtension()) return false;\r\n\r\n  try {\r\n    const response = await safeChromeAPI.tabs.sendMessage(tabId, {\r\n      action: 'ping',\r\n    });\r\n    const isInjected = response?.success === true;\r\n    if (!isInjected) {\r\n      recordLogger.warn('Content script not injected', { tabId });\r\n    }\r\n    return isInjected;\r\n  } catch (error: any) {\r\n    // More specific error handling for common scenarios\r\n    const errorMsg = error?.message || '';\r\n\r\n    if (errorMsg.includes('Receiving end does not exist')) {\r\n      recordLogger.debug(\r\n        'Content script not available - tab may be refreshing or on restricted page',\r\n        { tabId },\r\n      );\r\n    } else if (errorMsg.includes('Cannot access')) {\r\n      recordLogger.debug('Cannot access tab - may be Chrome internal page', {\r\n        tabId,\r\n      });\r\n    } else {\r\n      recordLogger.warn('Content script check failed', {\r\n        tabId,\r\n        error: errorMsg,\r\n      });\r\n    }\r\n    return false;\r\n  }\r\n};\r\n\r\n// Re-inject script if needed\r\nexport const ensureScriptInjected = async (\r\n  currentTab: chrome.tabs.Tab | null,\r\n) => {\r\n  if (!isChromeExtension() || !currentTab?.id) {\r\n    recordLogger.error(\r\n      'Cannot ensure script injection - invalid environment or tab',\r\n    );\r\n    return false;\r\n  }\r\n\r\n  const isInjected = await checkContentScriptInjected(currentTab.id);\r\n\r\n  if (!isInjected) {\r\n    recordLogger.info('Injecting script', { tabId: currentTab.id });\r\n    await injectScript(currentTab);\r\n  }\r\n  return true;\r\n};\r\n\r\n// Inject content script\r\nexport const injectScript = async (currentTab: chrome.tabs.Tab | null) => {\r\n  if (!isChromeExtension()) {\r\n    message.error('Chrome extension environment required for script injection');\r\n    return;\r\n  }\r\n\r\n  if (!currentTab?.id) {\r\n    message.error('No active tab found');\r\n    return;\r\n  }\r\n\r\n  try {\r\n    // Inject the record script first\r\n    await safeChromeAPI.scripting.executeScript({\r\n      target: { tabId: currentTab.id },\r\n      files: ['scripts/recorder-iife.js'],\r\n    });\r\n\r\n    // Then inject the content script wrapper\r\n    await safeChromeAPI.scripting.executeScript({\r\n      target: { tabId: currentTab.id },\r\n      files: ['scripts/event-recorder-bridge.js'],\r\n    });\r\n\r\n    recordLogger.success('Script injected', { tabId: currentTab.id });\r\n  } catch (error) {\r\n    recordLogger.error(\r\n      'Failed to inject script',\r\n      { tabId: currentTab.id },\r\n      error,\r\n    );\r\n    if (error instanceof Error && error.message.includes('Cannot access')) {\r\n      message.error(\r\n        'Cannot inject script on this page (Chrome internal pages are restricted)',\r\n      );\r\n    } else if (\r\n      error instanceof Error &&\r\n      error.message.includes('chrome-extension://')\r\n    ) {\r\n      message.error('Cannot inject script on Chrome extension pages');\r\n    } else if (error instanceof Error && error.message.includes('chrome://')) {\r\n      message.error('Cannot inject script on Chrome system pages');\r\n    } else {\r\n      message.error(`Failed to inject recording script: ${error}`);\r\n    }\r\n  }\r\n};\r\n\r\n// Export session events to file\r\nexport const exportEventsToFile = (\r\n  events: ChromeRecordedEvent[],\r\n  sessionName: string,\r\n) => {\r\n  if (events.length === 0) {\r\n    message.warning('No events to export');\r\n    return;\r\n  }\r\n\r\n  const dataStr = JSON.stringify(events, null, 2);\r\n  const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n  const url = URL.createObjectURL(dataBlob);\r\n\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  link.download = `${sessionName}-${new Date().toISOString().slice(0, 19)}.json`;\r\n  link.click();\r\n\r\n  URL.revokeObjectURL(url);\r\n  message.success(`Events from \"${sessionName}\" exported successfully`);\r\n};\r\n\r\nexport const generateSessionName = () => {\r\n  const now = new Date();\r\n  const dateStr = now\r\n    .toLocaleString('zh-CN', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      second: '2-digit',\r\n      hour12: false,\r\n    })\r\n    .replace(/\\//g, '-');\r\n  const ms = String(now.getMilliseconds()).padStart(3, '0');\r\n  return `${dateStr}-${ms}`;\r\n};\r\n\r\n// Function to get screenshots from events\r\nconst getScreenshotsForLLM = (\r\n  events: ChromeRecordedEvent[],\r\n  maxScreenshots = 1,\r\n): string[] => {\r\n  // Find events with screenshots, prioritizing navigation and click events\r\n  const eventsWithScreenshots = events.filter(\r\n    (event) =>\r\n      event.screenshotBefore ||\r\n      event.screenshotAfter ||\r\n      event.screenshotWithBox,\r\n  );\r\n\r\n  // Sort them by priority (navigation first, then clicks, then others)\r\n  const sortedEvents = [...eventsWithScreenshots].sort((a, b) => {\r\n    if (a.type === 'navigation' && b.type !== 'navigation') return -1;\r\n    if (a.type !== 'navigation' && b.type === 'navigation') return 1;\r\n    if (a.type === 'click' && b.type !== 'click') return -1;\r\n    if (a.type !== 'click' && b.type === 'click') return 1;\r\n    return 0;\r\n  });\r\n\r\n  // Extract up to maxScreenshots screenshots\r\n  const screenshots: string[] = [];\r\n  for (const event of sortedEvents) {\r\n    // Prefer the most informative screenshot\r\n    const screenshot =\r\n      event.screenshotWithBox ||\r\n      event.screenshotAfter ||\r\n      event.screenshotBefore;\r\n    if (screenshot && !screenshots.includes(screenshot)) {\r\n      screenshots.push(screenshot);\r\n      if (screenshots.length >= maxScreenshots) break;\r\n    }\r\n  }\r\n\r\n  return screenshots;\r\n};\r\n\r\n// Generate a title and description for recording using AI based on events\r\nexport const generateRecordTitle = async (\r\n  events: ChromeRecordedEvent[],\r\n  modelConfig: IModelConfig,\r\n): Promise<{\r\n  title?: string;\r\n  description?: string;\r\n}> => {\r\n  try {\r\n    // Only proceed if we have events\r\n    if (!events.length) {\r\n      return {};\r\n    }\r\n\r\n    // If there's very little data, use simple fallback\r\n    // if (events.length < 5) {\r\n    //   return {\r\n    //     title: generateSessionName(),\r\n    //     description: `Recording with ${events.length} action${events.length === 1 ? '' : 's'}`,\r\n    //   };\r\n    // }\r\n\r\n    // Prepare data for LLM\r\n    const navigationEvents = events.filter(\r\n      (event) => event.type === 'navigation',\r\n    );\r\n    const clickEvents = events.filter((event) => event.type === 'click');\r\n    const inputEvents = events.filter((event) => event.type === 'input');\r\n\r\n    // Extract page titles and URLs from navigation events\r\n    const pageTitles = navigationEvents\r\n      .map((event) => event.title)\r\n      .filter(Boolean);\r\n    const urls = navigationEvents.map((event) => event.url).filter(Boolean);\r\n\r\n    // Extract element descriptions from click and input events\r\n    const clickDescriptions = clickEvents\r\n      .map((event) => event.elementDescription)\r\n      .filter(Boolean);\r\n\r\n    const inputDescriptions = inputEvents\r\n      .map((event) => `Input \"${event.value}\" in ${event.elementDescription}`)\r\n      .filter(Boolean);\r\n\r\n    // Create a summary object for LLM\r\n    const summary = {\r\n      pageCount: navigationEvents.length,\r\n      pageTitles: pageTitles.slice(0, 3),\r\n      urls: urls.slice(0, 3),\r\n      clickCount: clickEvents.length,\r\n      inputCount: inputEvents.length,\r\n      totalActions: events.length,\r\n      clickDescriptions: clickDescriptions.slice(0, 5),\r\n      inputDescriptions: inputDescriptions.slice(0, 5),\r\n      firstUrl: urls[0] || '',\r\n      lastUrl: urls[urls.length - 1] || '',\r\n    };\r\n\r\n    try {\r\n      // Get screenshots for visual context\r\n      const screenshots = getScreenshotsForLLM(events);\r\n\r\n      // Create the message content\r\n      const messageContent: ChatCompletionContentPart[] = [\r\n        {\r\n          type: 'text',\r\n          text: `Generate a concise title (5-7 words) and brief description (1-2 sentences) for a browser recording session with the following events:\\n\\n${JSON.stringify(summary, null, 2)}\\n\\nRespond with a JSON object containing \"title\" and \"description\" fields. The title should be action-oriented and highlight the main task accomplished. The description should provide slightly more detail about what was done.`,\r\n        },\r\n      ];\r\n\r\n      // Add screenshots if available\r\n      if (screenshots.length > 0) {\r\n        messageContent.unshift({\r\n          type: 'text',\r\n          text: 'Here are screenshots from the recording session to help you understand the context:',\r\n        });\r\n\r\n        screenshots.forEach((screenshot) => {\r\n          messageContent.unshift({\r\n            type: 'image_url',\r\n            image_url: {\r\n              url: screenshot,\r\n            },\r\n          });\r\n        });\r\n      }\r\n\r\n      // Use LLM to generate title and description\r\n      const prompt = [\r\n        {\r\n          role: 'system',\r\n          content:\r\n            'You are an AI that generates concise, descriptive titles and descriptions for browser recording sessions. Your goal is to capture the essence of what the user accomplished in a clear, task-oriented way.',\r\n        },\r\n        {\r\n          role: 'user',\r\n          content: messageContent,\r\n        },\r\n      ] as const;\r\n\r\n      const response = await callAIWithObjectResponse<{\r\n        title: string;\r\n        description: string;\r\n      }>([prompt[0], prompt[1]], AIActionType.EXTRACT_DATA, modelConfig);\r\n      if (response?.content) {\r\n        return {\r\n          title: response.content.title as string,\r\n          description: response.content.description as string,\r\n        };\r\n      }\r\n    } catch (llmError) {\r\n      console.error('Error using LLM for title generation:', llmError);\r\n    }\r\n\r\n    // Fallback return if LLM fails\r\n    return {\r\n      title: generateSessionName(),\r\n      description: '',\r\n    };\r\n  } catch (error) {\r\n    console.error('Error generating recording title:', error);\r\n    return {\r\n      title: generateSessionName(),\r\n      description: '',\r\n    };\r\n  }\r\n};\r\n\r\n// Cleanup previous recording sessions by sending stop messages to all tabs\r\nexport const cleanupPreviousRecordings = async () => {\r\n  if (!isChromeExtension()) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    recordLogger.info('Cleaning up previous recordings');\r\n\r\n    // Get all tabs\r\n    const tabs = await new Promise<chrome.tabs.Tab[]>((resolve) => {\r\n      safeChromeAPI.tabs.query({}, resolve);\r\n    });\r\n\r\n    // Send cleanup message to all tabs\r\n    const cleanupPromises = tabs.map(async (tab) => {\r\n      if (!tab.id) return;\r\n\r\n      try {\r\n        await safeChromeAPI.tabs.sendMessage(tab.id, {\r\n          action: 'stop',\r\n        });\r\n      } catch (error) {\r\n        // Ignore errors for tabs that don't have our content script\r\n      }\r\n    });\r\n\r\n    await Promise.allSettled(cleanupPromises);\r\n  } catch (error) {\r\n    recordLogger.error('Error during recording cleanup', undefined, error);\r\n  }\r\n};\r\nexport const diagnoseRecordingChain = async (\r\n  currentTab: chrome.tabs.Tab | null,\r\n): Promise<{ issues: string[]; info: string[] }> => {\r\n  recordLogger.info('Starting recording chain diagnosis');\r\n\r\n  const issues: string[] = [];\r\n  const info: string[] = [];\r\n\r\n  // Check 1: Extension environment\r\n  if (!isChromeExtension()) {\r\n    issues.push('Not in Chrome extension environment');\r\n    return { issues, info };\r\n  }\r\n  info.push(' Chrome extension environment detected');\r\n\r\n  // Check 2: Current tab\r\n  if (!currentTab || !currentTab.id) {\r\n    issues.push('No active tab or invalid tab ID');\r\n    return { issues, info };\r\n  }\r\n  info.push(` Active tab found: ${currentTab.url} (ID: ${currentTab.id})`);\r\n\r\n  // Check 3: Tab URL validity - more detailed checking\r\n  if (currentTab.url?.startsWith('chrome://')) {\r\n    issues.push('Cannot record on Chrome internal pages (chrome://)');\r\n    return { issues, info };\r\n  }\r\n  if (currentTab.url?.startsWith('chrome-extension://')) {\r\n    issues.push('Cannot record on Chrome extension pages');\r\n    return { issues, info };\r\n  }\r\n  if (currentTab.url?.startsWith('moz-extension://')) {\r\n    issues.push('Cannot record on Firefox extension pages');\r\n    return { issues, info };\r\n  }\r\n  if (!currentTab.url || currentTab.url === 'about:blank') {\r\n    issues.push('Tab has no URL or is blank page');\r\n    return { issues, info };\r\n  }\r\n  info.push(' Tab URL is recordable');\r\n\r\n  // Check 4: Tab loading status\r\n  if (currentTab.status === 'loading') {\r\n    issues.push('Tab is still loading - wait for page to complete loading');\r\n    return { issues, info };\r\n  }\r\n  info.push(' Tab has finished loading');\r\n\r\n  // Check 5: Content script injection\r\n  try {\r\n    recordLogger.debug('Checking content script injection for tab', {\r\n      tabId: currentTab.id,\r\n    });\r\n    const isInjected = await checkContentScriptInjected(currentTab.id);\r\n    if (isInjected) {\r\n      info.push(' Content script is injected and responding');\r\n    } else {\r\n      issues.push('Content script not injected or not responding');\r\n\r\n      // Try to inject\r\n      try {\r\n        recordLogger.debug('Attempting to inject content script');\r\n        await injectScript(currentTab);\r\n        info.push(' Content script injection attempted');\r\n\r\n        // Check again after injection with longer wait\r\n        await new Promise((resolve) => setTimeout(resolve, 2000)); // Wait 2 seconds\r\n        const isInjectedAfter = await checkContentScriptInjected(currentTab.id);\r\n        if (isInjectedAfter) {\r\n          info.push(' Content script injection successful');\r\n        } else {\r\n          issues.push(\r\n            'Content script injection failed or not responding after injection. Try refreshing the page.',\r\n          );\r\n        }\r\n      } catch (error: any) {\r\n        const errorMsg = error?.message || error;\r\n        if (errorMsg.includes('Cannot access')) {\r\n          issues.push(\r\n            'Cannot inject script: Page access denied (may be protected page)',\r\n          );\r\n        } else if (errorMsg.includes('chrome-extension://')) {\r\n          issues.push('Cannot inject script on extension pages');\r\n        } else {\r\n          issues.push(`Content script injection failed: ${errorMsg}`);\r\n        }\r\n      }\r\n    }\r\n  } catch (error: any) {\r\n    issues.push(`Error checking content script: ${error?.message || error}`);\r\n  }\r\n\r\n  recordLogger.info('Diagnosis complete');\r\n\r\n  return { issues, info };\r\n};\r\n\r\n// Generate AI-powered mindmap based on session events\r\nconst generateAIMindmap = async (\r\n  sessions: RecordingSession[],\r\n  modelConfig: IModelConfig,\r\n): Promise<string> => {\r\n  try {\r\n    // Prepare detailed sequential event data for AI\r\n    const sequentialSessionData = sessions.map((session) => {\r\n      // Create a detailed sequential list of events with full descriptions\r\n      const detailedEventSequence = session.events.map((event, index) => {\r\n        const eventNumber = index + 1;\r\n        let detailedDescription = '';\r\n        let shortNodeName = '';\r\n\r\n        switch (event.type) {\r\n          case 'navigation':\r\n            detailedDescription = `Navigate to \"${event.title || 'Page'}\" at URL: ${event.url}`;\r\n            shortNodeName = `Navigate to ${(event.title || 'Page').slice(0, 15)}`;\r\n            break;\r\n          case 'click':\r\n            detailedDescription = `Click on element \"${event.elementDescription || 'element'}\" on page \"${event.title || event.url}\"`;\r\n            shortNodeName = `Click ${(event.elementDescription || 'Element').slice(0, 20)}`;\r\n            break;\r\n          case 'input':\r\n            detailedDescription = `Input text \"${event.value || ''}\" into field \"${event.elementDescription || 'field'}\" on page \"${event.title || event.url}\"`;\r\n            shortNodeName = `Input ${event.value ? `\"${event.value.slice(0, 15)}\"` : 'text'} in ${(event.elementDescription || 'field').slice(0, 15)}`;\r\n            break;\r\n          default:\r\n            detailedDescription = `Perform ${event.type} action on \"${event.elementDescription || 'element'}\" on page \"${event.title || event.url}\"`;\r\n            shortNodeName = `${event.type} ${(event.elementDescription || 'Element').slice(0, 15)}`;\r\n        }\r\n\r\n        return {\r\n          sequenceNumber: eventNumber,\r\n          eventType: event.type,\r\n          detailedDescription,\r\n          shortNodeName: shortNodeName.replace(/[^a-zA-Z0-9\\s\\-_\"]/g, ''),\r\n          pageName: event.title || event.url,\r\n          timestamp: event.timestamp || new Date().toISOString(),\r\n          // Additional context for AI\r\n          elementDescription: event.elementDescription,\r\n          inputValue: event.value,\r\n          url: event.url,\r\n          title: event.title,\r\n        };\r\n      });\r\n\r\n      // Create page transition flow\r\n      const pageFlow: {\r\n        step: number;\r\n        pageName: string;\r\n        eventIndex: number;\r\n      }[] = [];\r\n      let currentPage = '';\r\n      session.events.forEach((event, index) => {\r\n        const pageName = event.title || event.url || 'Unknown Page';\r\n        if (pageName !== currentPage) {\r\n          pageFlow.push({\r\n            step: pageFlow.length + 1,\r\n            pageName,\r\n            eventIndex: index + 1,\r\n          });\r\n          currentPage = pageName;\r\n        }\r\n      });\r\n\r\n      return {\r\n        sessionName: session.name,\r\n        sessionDescription: session.description || '',\r\n        totalEvents: session.events.length,\r\n        createdAt: session.createdAt,\r\n        // Sequential event data with full details\r\n        eventSequence: detailedEventSequence,\r\n        // Page transition flow\r\n        pageTransitionFlow: pageFlow,\r\n        // Summary statistics\r\n        eventTypeCounts: {\r\n          navigation: session.events.filter((e) => e.type === 'navigation')\r\n            .length,\r\n          clicks: session.events.filter((e) => e.type === 'click').length,\r\n          inputs: session.events.filter((e) => e.type === 'input').length,\r\n          other: session.events.filter(\r\n            (e) => !['navigation', 'click', 'input'].includes(e.type),\r\n          ).length,\r\n        },\r\n      };\r\n    });\r\n\r\n    const prompt: AIArgs = [\r\n      {\r\n        role: 'system',\r\n        content: `You are an expert test automation analyst who creates detailed Mermaid mindmaps that preserve the complete sequence and details of user interactions.\r\n\r\n    CRITICAL REQUIREMENTS:\r\n    1. PRESERVE ALL EVENT DETAILS: Include complete descriptions from detailedDescription field\r\n    2. MAINTAIN SEQUENTIAL ORDER: Events must follow the exact chronological sequence (1234...)\r\n    3. SHOW PROGRESSION: Each event should logically connect to the next event\r\n    4. DETAILED NODE NAMES: Use full descriptive names, not abbreviated versions\r\n    5. HIERARCHICAL FLOW: Organize by session  page transitions  detailed event sequence\r\n\r\n    Mindmap Structure:\r\n    - Root: Main test scenario\r\n      \\s- Level 1: Session name\r\n      \\s\\s- Level 2: Page sections (when page changes)\r\n      \\s\\s\\s- Level 3: Sequential detailed events with full descriptions\r\n      \\s\\s\\s\\s- Level 4: Sub-actions if needed\r\n\r\n    Syntax Guidelines:\r\n    - Use parentheses for root: root(Test Scenario)\r\n    - Use descriptive text for events: Navigate to Login Page\r\n    - Preserve sequence numbers: Step 1 Navigate to Homepage\r\n    - Keep full element descriptions and input values\r\n    - Show clear progression between events\r\n    -\r\n\r\n    IMPORTANT: Do not summarize or abbreviate event details. Include the full action descriptions to maintain test documentation value.`,\r\n      },\r\n      {\r\n        role: 'user',\r\n        content: `Create a detailed Mermaid mindmap that preserves ALL event details and maintains exact sequential order:\r\n\r\n    ${JSON.stringify(sequentialSessionData, null, 2)}\r\n\r\n    Requirements:\r\n    1. Use the detailedDescription field for event nodes (preserve full descriptions)\r\n    2. Maintain exact sequential order from eventSequence array\r\n    3. Show page transitions clearly using pageTransitionFlow\r\n    4. Include input values, element descriptions, and page contexts\r\n    5. Create a hierarchical flow: Session  Page  Sequential Events\r\n    6. Use meaningful, descriptive node names\r\n    7. Ensure proper Mermaid mindmap syntax with correct indentation\r\n\r\n    Example structure:\r\n    mindmap\r\n      root(User Journey Test)\r\n        Session Name Here\r\n          Homepage Section\r\n            Step 1 Navigate to Homepage URL\r\n            \\s\\s  Step 2 Click Login Button Element\r\n            \\s\\s\\s  Step 3 Input Username into Email Field\r\n            \\s\\s\\s\\s  Login Page Section\r\n            \\s\\s\\s\\s\\s  Step 4 Navigate to Login Page\r\n            \\s\\s\\s\\s\\s\\s  Step 5 Input Password into Password Field\r\n            \\s\\s\\s\\s\\s\\s\\s  Step 6 Click Submit Button Element\r\n\r\n    Return ONLY the Mermaid mindmap syntax. Include ALL detailed descriptions and maintain sequential order.`,\r\n      },\r\n    ];\r\n\r\n    const response = await callAIWithStringResponse(\r\n      prompt,\r\n      AIActionType.EXTRACT_DATA,\r\n      modelConfig,\r\n    );\r\n\r\n    if (response?.content && typeof response.content === 'string') {\r\n      return response.content as string;\r\n    }\r\n\r\n    // Fallback to enhanced sequential static mindmap if AI fails\r\n    console.warn(\r\n      'AI mindmap generation failed, using detailed sequential fallback',\r\n    );\r\n    return generateDetailedSequentialMindmap(sessions);\r\n  } catch (error) {\r\n    console.error('Error generating AI mindmap:', error);\r\n    // Fallback to detailed sequential mindmap\r\n    return generateDetailedSequentialMindmap(sessions);\r\n  }\r\n};\r\n\r\n// Enhanced detailed sequential mindmap generation (preserves all event details and order)\r\nconst generateDetailedSequentialMindmap = (\r\n  sessions: RecordingSession[],\r\n): string => {\r\n  let mermaid = 'mindmap\\n  root(Detailed Test Execution Flow)\\n';\r\n\r\n  sessions.forEach((session, sessionIndex) => {\r\n    if (session.events.length === 0) return;\r\n\r\n    // Clean session name for use as node\r\n    const sessionNodeName = session.name.replace(/[^a-zA-Z0-9\\s]/g, '');\r\n    mermaid += `    ${sessionNodeName}\\n`;\r\n\r\n    // Track page transitions for better organization\r\n    let currentPage = '';\r\n    let indentLevel = 2; // Start at level 2 (after session)\r\n\r\n    session.events.forEach((event, eventIndex) => {\r\n      const eventNumber = eventIndex + 1;\r\n      const pageName = event.title || event.url || '';\r\n\r\n      // Add page section when page changes and pageName is not empty\r\n      if (pageName !== currentPage && pageName) {\r\n        currentPage = pageName;\r\n        const cleanPageName = pageName\r\n          .replace(/[^a-zA-Z0-9\\s]/g, '')\r\n          .slice(0, 25);\r\n        indentLevel++; // Increase indent level for events under this page\r\n        const pageIndentation = '  '.repeat(indentLevel);\r\n        mermaid += `${pageIndentation}${cleanPageName}\\n`;\r\n      }\r\n\r\n      indentLevel++; // Increase indent level for events under this page\r\n      // Generate detailed event description\r\n      let detailedEventDescription = '';\r\n      switch (event.type) {\r\n        case 'navigation':\r\n          detailedEventDescription = `Step ${eventNumber} Navigate to ${event.title || 'Page'}`;\r\n          break;\r\n        case 'click':\r\n          detailedEventDescription = `Step ${eventNumber} Click ${event.elementDescription || 'element'}`;\r\n          break;\r\n        case 'input': {\r\n          const inputValue = event.value\r\n            ? ` \"${event.value.slice(0, 20)}${event.value.length > 20 ? '...' : ''}\"`\r\n            : ' text';\r\n          detailedEventDescription = `Step ${eventNumber} Input${inputValue} into ${event.elementDescription || 'field'}`;\r\n          break;\r\n        }\r\n        default:\r\n          detailedEventDescription = `Step ${eventNumber} ${event.type} on ${event.elementDescription || 'element'}`;\r\n      }\r\n\r\n      // Clean the description for Mermaid syntax\r\n      const cleanDescription = detailedEventDescription.replace(\r\n        /[^a-zA-Z0-9\\s\\-_\"()]/g,\r\n        '',\r\n      );\r\n\r\n      // Add event with current indent level using colon format\r\n      const eventIndentation = '  '.repeat(indentLevel);\r\n      mermaid += `${eventIndentation}${cleanDescription}\\n`;\r\n    });\r\n  });\r\n\r\n  return mermaid;\r\n};\r\n\r\n// Generate markdown table for event details\r\nconst generateEventsMarkdownTable = (sessions: RecordingSession[]): string => {\r\n  let markdown = '# Test Events Report\\n\\n';\r\n\r\n  sessions.forEach((session, sessionIndex) => {\r\n    if (session.events.length === 0) return;\r\n\r\n    markdown += `## ${session.name}\\n\\n`;\r\n    if (session.description) {\r\n      markdown += `**Description:** ${session.description}\\n\\n`;\r\n    }\r\n    markdown += `**Created:** ${new Date(session.createdAt).toLocaleString()}\\n\\n`;\r\n\r\n    markdown += '| Page | Screenshot Before | Screenshot After | Action |\\n';\r\n    markdown += '|------|------------|------------|--------|\\n';\r\n\r\n    session.events.forEach((event, eventIndex) => {\r\n      let expected = 'N/A';\r\n      const page = event.title || event.url || '';\r\n      const screenshotBefore = event.screenshotBefore\r\n        ? `![](./images/screenshot_${sessionIndex}_${eventIndex}_before.png)`\r\n        : 'N/A';\r\n      const screenshotAfter = event.screenshotAfter\r\n        ? `![](./images/screenshot_${sessionIndex}_${eventIndex}_after.png)`\r\n        : 'N/A';\r\n      if (event.type === 'navigation') {\r\n        expected = `Navigate to ${event.url}`;\r\n      }\r\n\r\n      let action = '';\r\n      switch (event.type) {\r\n        case 'click':\r\n          action = `Click on ${event.elementDescription || 'element'}`;\r\n          break;\r\n        case 'input':\r\n          action = `Input \"${event.value}\" into ${event.elementDescription || 'field'}`;\r\n          break;\r\n        case 'navigation':\r\n          action = `Navigate to ${event.url}`;\r\n          break;\r\n        default:\r\n          action = `${event.type} on ${event.elementDescription || 'element'}`;\r\n      }\r\n\r\n      markdown += `| ${page} | ${screenshotBefore} | ${screenshotAfter} | ${action} |\\n`;\r\n    });\r\n\r\n    if (session.generatedCode?.yaml || session.generatedCode?.playwright) {\r\n      markdown += '## Generated Code\\n\\n';\r\n      if (session.generatedCode?.yaml) {\r\n        markdown += '### YAML\\n\\n';\r\n        markdown += `\\`\\`\\`yaml\\n${session.generatedCode.yaml}\\n\\`\\`\\`\\n\\n`;\r\n      }\r\n      if (session.generatedCode?.playwright) {\r\n        markdown += '### Playwright\\n\\n';\r\n        markdown += `\\`\\`\\`playwright\\n${session.generatedCode.playwright}\\n\\`\\`\\`\\n\\n`;\r\n      }\r\n    }\r\n\r\n    markdown += '\\n\\n\\n';\r\n  });\r\n\r\n  return markdown;\r\n};\r\n\r\n// Convert base64 to blob\r\nconst base64ToBlob = (base64: string, mimeType: string): Blob => {\r\n  const byteCharacters = atob(base64.split(',')[1]);\r\n  const byteNumbers = new Array(byteCharacters.length);\r\n  for (let i = 0; i < byteCharacters.length; i++) {\r\n    byteNumbers[i] = byteCharacters.charCodeAt(i);\r\n  }\r\n  const byteArray = new Uint8Array(byteNumbers);\r\n  return new Blob([byteArray], { type: mimeType });\r\n};\r\n\r\n// Export all sessions with events to ZIP file\r\nexport const exportAllEventsToZip = async (sessions: RecordingSession[]) => {\r\n  try {\r\n    const zip = new JSZip();\r\n\r\n    // Filter sessions that have events\r\n    const sessionsWithEvents = sessions.filter(\r\n      (session) => session.events.length > 0,\r\n    );\r\n\r\n    if (sessionsWithEvents.length === 0) {\r\n      message.warning('No sessions with events to export');\r\n      return;\r\n    }\r\n\r\n    // Add images folder\r\n    const imagesFolder = zip.folder('images');\r\n\r\n    // Process each session and extract images\r\n    sessionsWithEvents.forEach((session, sessionIndex) => {\r\n      session.events.forEach((event, eventIndex) => {\r\n        const ext = 'png';\r\n        if (event.screenshotBefore) {\r\n          const fileName = `screenshot_${sessionIndex}_${eventIndex}_before.${ext}`;\r\n          const blob = base64ToBlob(event.screenshotBefore, `image/${ext}`);\r\n          imagesFolder?.file(fileName, blob);\r\n        }\r\n        if (event.screenshotAfter) {\r\n          const fileName = `screenshot_${sessionIndex}_${eventIndex}_after.${ext}`;\r\n          const blob = base64ToBlob(event.screenshotAfter, `image/${ext}`);\r\n          imagesFolder?.file(fileName, blob);\r\n        }\r\n      });\r\n    });\r\n\r\n    // Generate and add markdown table\r\n    const markdownContent = generateEventsMarkdownTable(sessionsWithEvents);\r\n\r\n    // Generate AI-powered mindmap\r\n    const aiMindmap =\r\n      await generateDetailedSequentialMindmap(sessionsWithEvents);\r\n\r\n    // Combine mindmap and table in automation-story.md\r\n    const combinedContent = `# Test Events Report\r\n\r\n## Test Flow Mindmap\r\n\r\n\\`\\`\\`mermaid\r\n${aiMindmap}\r\n\\`\\`\\`\r\n\r\n${markdownContent.replace('# Test Events Report\\n\\n', '')}`;\r\n\r\n    zip.file('automation-story.md', combinedContent);\r\n\r\n    // Generate ZIP file\r\n    const zipBlob = await zip.generateAsync({ type: 'blob' });\r\n\r\n    // Download ZIP file\r\n    const timestamp = new Date().toISOString().slice(0, 19).replace(/:/g, '-');\r\n    saveAs(zipBlob, `midscene-test-events-${timestamp}.zip`);\r\n\r\n    message.success('All events exported successfully!');\r\n  } catch (error) {\r\n    console.error('Error exporting all events:', error);\r\n    message.error('Failed to export events');\r\n  }\r\n};\r\n","import { DownOutlined } from '@ant-design/icons';\r\nimport { Typography } from 'antd';\r\nimport type React from 'react';\r\nimport { useEffect, useRef, useState } from 'react';\r\n\r\nconst { Text } = Typography;\r\n\r\ninterface ThinkingProcessSectionProps {\r\n  accumulatedThinking: string;\r\n  isStreaming: boolean;\r\n  actualCode: string;\r\n  themeColor?: 'blue' | 'green';\r\n}\r\n\r\nexport const ThinkingProcessSection: React.FC<ThinkingProcessSectionProps> = ({\r\n  accumulatedThinking,\r\n  isStreaming,\r\n  actualCode,\r\n  themeColor = 'blue',\r\n}) => {\r\n  const [showThinking, setShowThinking] = useState(true);\r\n  const hasThinking = accumulatedThinking.length > 0;\r\n  const contentRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Detect if thinking process has ended - when actual code content appears, thinking is finished\r\n  useEffect(() => {\r\n    if (actualCode) {\r\n      // Actual code content appeared, thinking process has ended, collapse immediately\r\n      setShowThinking(false);\r\n    } else {\r\n      setShowThinking(true);\r\n    }\r\n  }, [actualCode]);\r\n\r\n  // scroll to latest thinking content\r\n  useEffect(() => {\r\n    if (showThinking && contentRef.current) {\r\n      contentRef.current.scrollTop = contentRef.current.scrollHeight;\r\n    }\r\n  }, [accumulatedThinking, showThinking]);\r\n\r\n  if (!hasThinking) return null;\r\n\r\n  return accumulatedThinking ? (\r\n    <div\r\n      className=\"rounded-[8px] min-h-[40px] mb-4\"\r\n      style={{\r\n        background: showThinking\r\n          ? 'linear-gradient(180deg, rgba(43, 131, 255, 0.1) 0%, rgba(43, 131, 255, 0.024) 23.04%, rgba(43, 131, 255, 0) 100%)'\r\n          : 'linear-gradient(0deg, #FFFFFF, #FFFFFF)',\r\n        border: showThinking\r\n          ? '1px solid rgba(43, 131, 255, 0.16)'\r\n          : '1px solid rgba(0, 0, 0, 0.06)',\r\n      }}\r\n    >\r\n      <div\r\n        className={'flex items-center gap-2 cursor-pointer p-2 bg-transparent'}\r\n        onClick={() => setShowThinking(!showThinking)}\r\n        // style={{ borderBottom: showThinking ? '1px solid rgba(43, 131, 255, 0.16)' : 'none' }}\r\n      >\r\n        <div\r\n          className={' text-sm font-medium '}\r\n          style={{ color: 'rgba(0, 0, 0, 0.85)' }}\r\n        >\r\n           AI Thingking Process\r\n        </div>\r\n        <div\r\n          className={`transform transition-transform ml-auto mr-1 ${showThinking ? 'rotate-180' : ''}`}\r\n        >\r\n          <DownOutlined\r\n            className={'text-blue-400 text-xs'}\r\n            style={{ color: 'rgba(128, 128, 128, 1)' }}\r\n          />\r\n        </div>\r\n      </div>\r\n      {showThinking && (\r\n        <div\r\n          ref={contentRef}\r\n          className={\r\n            'p-3 bg-blue-25 max-h-[139px]  rounded-b text-sm text-gray-400 whitespace-pre-wrap'\r\n          }\r\n          style={{ overflowY: 'auto' }}\r\n        >\r\n          {accumulatedThinking ||\r\n            'AI is analyzing the recorded events and planning the test structure...'}\r\n        </div>\r\n      )}\r\n    </div>\r\n  ) : null;\r\n};\r\n","// @ts-ignore\r\nimport confetti from 'canvas-confetti';\r\n\r\nexport const triggerConfetti = () => {\r\n  // Create a celebratory confetti effect\r\n  const count = 200;\r\n  const defaults = {\r\n    origin: { y: 0.7 },\r\n  };\r\n\r\n  function fire(particleRatio: number, opts: any) {\r\n    confetti({\r\n      zIndex: 999999,\r\n      ...defaults,\r\n      ...opts,\r\n      particleCount: Math.floor(count * particleRatio),\r\n    });\r\n  }\r\n\r\n  fire(0.25, {\r\n    spread: 26,\r\n    startVelocity: 55,\r\n  });\r\n\r\n  fire(0.2, {\r\n    spread: 60,\r\n  });\r\n\r\n  fire(0.35, {\r\n    spread: 100,\r\n    decay: 0.91,\r\n    scalar: 0.8,\r\n  });\r\n\r\n  fire(0.1, {\r\n    spread: 120,\r\n    startVelocity: 25,\r\n    decay: 0.92,\r\n    scalar: 1.2,\r\n  });\r\n\r\n  fire(0.1, {\r\n    spread: 120,\r\n    startVelocity: 45,\r\n  });\r\n};\r\n","import {\r\n  CopyOutlined,\r\n  DownloadOutlined,\r\n  FileTextOutlined,\r\n  ReloadOutlined,\r\n} from '@ant-design/icons';\r\nimport { Button, Typography } from 'antd';\r\nimport type React from 'react';\r\nimport { useEffect, useRef } from 'react';\r\nimport { ThinkingProcessSection } from './ThinkingProcessSection';\r\nimport { triggerConfetti } from './confetti';\r\nimport './CodeBlock.css';\r\n//@ts-ignore\r\nimport Highlight from 'react-highlight';\r\n\r\nimport 'highlight.js/styles/github.css';\r\n\r\nconst { Text } = Typography;\r\n\r\ninterface CodeBlockProps {\r\n  type: 'yaml' | 'playwright';\r\n  code: string;\r\n\r\n  loading: boolean;\r\n  onCopy?: () => void;\r\n  onDownload?: () => void;\r\n  onRegenerate?: () => void;\r\n  stepDisplay: boolean;\r\n  isStreaming?: boolean;\r\n  streamingContent?: string;\r\n  thinkingProcess?: string;\r\n  actualCode?: string;\r\n  accumulatedThinking?: string;\r\n}\r\n\r\nfunction CodeBlockContainer({\r\n  language,\r\n  code,\r\n  accumulatedThinking,\r\n}: {\r\n  language: 'yaml' | 'javascript';\r\n  code: string;\r\n  accumulatedThinking?: string;\r\n  isStreaming: boolean;\r\n}) {\r\n  return (\r\n    <pre\r\n      className={`bg-gray-50 rounded-[8px] border text-sm overflow-auto font-mono border-radius-[8px] border-[#F2F4F7] ${accumulatedThinking ? 'max-h-[calc(100vh-380px)]' : 'max-h-[calc(100vh-340px)]'} !mt-0 !p-0`}\r\n    >\r\n      <Highlight className={`language-${language} !mt-0`}>{code}</Highlight>\r\n    </pre>\r\n  );\r\n}\r\n\r\nexport const CodeBlock: React.FC<CodeBlockProps> = ({\r\n  type,\r\n  code,\r\n  isStreaming = false,\r\n  streamingContent = '',\r\n  actualCode = '',\r\n  accumulatedThinking = '',\r\n  stepDisplay,\r\n}) => {\r\n  let displayContent = isStreaming ? actualCode || streamingContent : code;\r\n  displayContent = displayContent\r\n    .replace(/```typescript/g, '')\r\n    .replace(/```/g, '')\r\n    .trim();\r\n  const hasContent = displayContent.length > 0;\r\n  const wasStreamingRef = useRef(false);\r\n\r\n  // Monitor code generation completion, trigger confetti effect\r\n  useEffect(() => {\r\n    // If it was streaming before, now stopped, and has code content, trigger confetti effect\r\n    if (wasStreamingRef.current && !isStreaming && hasContent) {\r\n      triggerConfetti();\r\n    }\r\n    wasStreamingRef.current = isStreaming;\r\n  }, [isStreaming, hasContent]);\r\n\r\n  return (\r\n    <div className=\"flex flex-col mt-5\">\r\n      {/* Thinking Process Section */}\r\n      <ThinkingProcessSection\r\n        accumulatedThinking={accumulatedThinking}\r\n        isStreaming={isStreaming}\r\n        actualCode={actualCode}\r\n        themeColor=\"green\"\r\n      />\r\n      {stepDisplay && (\r\n        <div className=\"relative flex-1\">\r\n          {!displayContent && isStreaming && (\r\n            <pre\r\n              // {(<pre\r\n              className={\r\n                'relative bg-gray-50 rounded-[8px] border text-sm overflow-auto max-h-128 font-mono border-radius-[8px] p-4 border-[#F2F4F7]'\r\n              }\r\n            >\r\n              <code>Generating code...</code>\r\n\r\n              <div className=\"absolute bottom-3 right-2 bg-[#2B83FF1F] text-[#2B83FF] px-2 py-1 rounded-full text-xs\">\r\n                Analyzing...\r\n              </div>\r\n            </pre>\r\n          )}\r\n\r\n          {displayContent && (\r\n            <CodeBlockContainer\r\n              accumulatedThinking={accumulatedThinking}\r\n              language={type === 'playwright' ? 'javascript' : 'yaml'}\r\n              code={displayContent}\r\n              isStreaming={isStreaming}\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {code && (\r\n        <div className=\"mt-3 text-center\">\r\n          <Text type=\"secondary\" className=\"text-xs\">\r\n            {type === 'playwright' ? (\r\n              <>\r\n                 Learn how to integrate Playwright with Midscene.js\r\n                <a\r\n                  target=\"_blank\"\r\n                  href=\"https://midscenejs.com/integrate-with-playwright.html\"\r\n                  rel=\"noreferrer\"\r\n                >\r\n                  {' '}\r\n                  here\r\n                </a>\r\n                .\r\n              </>\r\n            ) : (\r\n              <>\r\n                 Learn how to integrate YAML scripts with Midscene.js\r\n                <a\r\n                  target=\"_blank\"\r\n                  href=\"https://midscenejs.com/automate-with-scripts-in-yaml.html\"\r\n                  rel=\"noreferrer\"\r\n                >\r\n                  {' '}\r\n                  here\r\n                </a>\r\n                .\r\n              </>\r\n            )}\r\n          </Text>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import { CheckCircleOutlined, LoadingOutlined } from '@ant-design/icons';\r\nimport { ShinyText } from '@sqai/visualizer';\r\nimport { Progress, Typography } from 'antd';\r\nimport type React from 'react';\r\nimport type { ProgressStep } from '../ProgressModal';\r\n\r\nconst { Text } = Typography;\r\n\r\ninterface StepListProps {\r\n  steps: ProgressStep[];\r\n  completedSteps: Set<string>;\r\n  slidingOutSteps: Set<string>;\r\n  getStepIcon: (step: ProgressStep) => React.ReactNode;\r\n  getStepColor: (step: ProgressStep) => string;\r\n}\r\n\r\nexport const StepList: React.FC<StepListProps> = ({\r\n  steps,\r\n  completedSteps,\r\n  slidingOutSteps,\r\n  getStepIcon,\r\n  getStepColor,\r\n}) => {\r\n  return (\r\n    <div className=\"py-5\">\r\n      {steps.map((step, index, filteredSteps) => {\r\n        const isSliding = slidingOutSteps.has(step.id);\r\n        return (\r\n          <div key={step.id}>\r\n            <div className=\"flex items-center mb-2\">\r\n              <div className=\"mr-3 min-w-[20px]\">{getStepIcon(step)}</div>\r\n              <div className=\"flex-1 border border-[rgba(0,0,0,0.06)] p-[12px] rounded-[12px]\">\r\n                {step.status === 'loading' ? (\r\n                  <div className=\"font-semibold text-[14px] leading-[22px] min-h-[22px] flex items-center\">\r\n                    <ShinyText\r\n                      text={step.title}\r\n                      disabled={false}\r\n                      speed={3}\r\n                      // className=\"step-title-shiny\"\r\n                    />\r\n                  </div>\r\n                ) : (\r\n                  <div>\r\n                    <Text\r\n                      strong\r\n                      className=\"!text-[rgba(0,0,0,1)] text-[14px]\"\r\n                      style={{\r\n                        color:\r\n                          step.status === 'completed' ? '#52c41a' : undefined,\r\n                        lineHeight: '22px',\r\n                        minHeight: '22px',\r\n                        display: 'inline-flex',\r\n                        alignItems: 'center',\r\n                      }}\r\n                    >\r\n                      {step.title}\r\n                    </Text>\r\n                  </div>\r\n                )}\r\n                <Text type=\"secondary\" className=\"text-xs text-[12px]\">\r\n                  {step.description}\r\n                </Text>\r\n                {step.details && (\r\n                  <>\r\n                    <br />\r\n                    <Text className=\"text-[11px] !text-[rgba(0, 0, 0, 0.9)]\">\r\n                      {step.details}\r\n                    </Text>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n            {/* {step.status === 'loading' && step.progress !== undefined && (\r\n              <div className=\"ml-8\">\r\n                <Progress\r\n                  percent={step.progress}\r\n                  size=\"small\"\r\n                  strokeColor={getStepColor(step)}\r\n                  showInfo={false}\r\n                />\r\n              </div>\r\n            )} */}\r\n            {index < filteredSteps.length - 1 && (\r\n              <div\r\n                className={`${step.status === 'completed' ? 'bg-green-500' : 'bg-gray-200'} ml-2 w-0.5 h-5 mt-2`}\r\n              />\r\n            )}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n","import {\r\n  CheckCircleOutlined,\r\n  CheckOutlined,\r\n  CodeOutlined,\r\n  CopyOutlined,\r\n  DownOutlined,\r\n  DownloadOutlined,\r\n  FileTextOutlined,\r\n  LoadingOutlined,\r\n  PushpinFilled,\r\n  PushpinOutlined,\r\n  ReloadOutlined,\r\n} from '@ant-design/icons';\r\nimport type { CodeGenerationChunk, StreamingCallback } from '@sqai/core';\r\nimport type { ChromeRecordedEvent } from '@sqai/recorder';\r\nimport { globalModelConfigManager } from '@sqai/shared/env';\r\nimport { Button, Select, Tooltip, Typography, message } from 'antd';\r\nimport type React from 'react';\r\nimport { useEffect, useState } from 'react';\r\nimport { useRecordingSessionStore } from '../../../store';\r\nimport { generateAIDescription } from '../../../utils/eventOptimizer';\r\nimport {\r\n  generatePlaywrightTestStream,\r\n  generateYamlTestStream,\r\n} from '../generators';\r\nimport { recordLogger } from '../logger';\r\nimport {\r\n  getLatestEvents,\r\n  resolveSessionName,\r\n  stopRecordingIfActive,\r\n} from '../shared/exportControlsUtils';\r\nimport { generateRecordTitle } from '../utils';\r\nimport { CodeBlock } from './ProgressModal/CodeBlock';\r\nimport { StepList } from './ProgressModal/StepList';\r\n\r\nexport interface ProgressStep {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  status: 'pending' | 'loading' | 'completed' | 'error';\r\n  progress?: number;\r\n  details?: string;\r\n}\r\n\r\nexport type CodeGenerationType = 'yaml' | 'playwright' | 'none';\r\n\r\ninterface ProgressModalProps {\r\n  eventsCount?: number;\r\n  sessionName?: string;\r\n  events?: ChromeRecordedEvent[];\r\n  sessionId?: string;\r\n  onStopRecording?: () => void | Promise<void>;\r\n  isFromStopRecording?: boolean;\r\n}\r\n\r\nexport const ProgressModal: React.FC<ProgressModalProps> = ({\r\n  eventsCount = 0,\r\n  sessionName = '',\r\n  events = [],\r\n  sessionId,\r\n  onStopRecording,\r\n  isFromStopRecording,\r\n}) => {\r\n  const [selectedType, setSelectedType] = useState<CodeGenerationType>('yaml');\r\n\r\n  // Initialize defaultType from localStorage\r\n  const [defaultType, setDefaultType] = useState<CodeGenerationType>(() => {\r\n    try {\r\n      const stored = localStorage.getItem('midscene-default-code-type');\r\n      if (stored && ['yaml', 'playwright', 'none'].includes(stored)) {\r\n        return stored as CodeGenerationType;\r\n      }\r\n    } catch (error) {\r\n      console.warn(\r\n        'Failed to read default code type from localStorage:',\r\n        error,\r\n      );\r\n    }\r\n    return 'yaml'; // fallback default\r\n  });\r\n  const [completedSteps, setCompletedSteps] = useState<Set<string>>(new Set());\r\n  const [slidingOutSteps, setSlidingOutSteps] = useState<Set<string>>(\r\n    new Set(),\r\n  );\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n  const [generatedTest, setGeneratedTest] = useState('');\r\n  const [generatedYaml, setGeneratedYaml] = useState('');\r\n  const [steps, setSteps] = useState<ProgressStep[]>([]);\r\n  const [showGeneratedCode, setShowGeneratedCode] = useState(false);\r\n\r\n  // Streaming states\r\n  const [isStreaming, setIsStreaming] = useState(false);\r\n  const [streamingContent, setStreamingContent] = useState('');\r\n  const [thinkingProcess, setThinkingProcess] = useState('');\r\n  const [actualCode, setActualCode] = useState('');\r\n  const [accumulatedThinking, setAccumulatedThinking] = useState('');\r\n\r\n  const { updateSession } = useRecordingSessionStore();\r\n  // Function to update defaultType and persist to localStorage\r\n  const updateDefaultType = (newType: CodeGenerationType) => {\r\n    setDefaultType(newType);\r\n    try {\r\n      localStorage.setItem('midscene-default-code-type', newType);\r\n    } catch (error) {\r\n      console.warn('Failed to save default code type to localStorage:', error);\r\n    }\r\n  };\r\n\r\n  // Get current session helper\r\n  const getCurrentSession = () => {\r\n    if (!sessionId) return null;\r\n    return (\r\n      useRecordingSessionStore\r\n        .getState()\r\n        .sessions.find((s) => s.id === sessionId) || null\r\n    );\r\n  };\r\n\r\n  // Get the latest events with AI descriptions\r\n  const getCurrentEvents = (): ChromeRecordedEvent[] => {\r\n    if (sessionId) {\r\n      return getLatestEvents(sessionId);\r\n    }\r\n    return events;\r\n  };\r\n\r\n  // Merge: load persisted code and handle auto-generation/display logic\r\n  useEffect(() => {\r\n    const session = getCurrentSession();\r\n\r\n    // If this is from stop recording, use the pinned default type\r\n    if (isFromStopRecording && eventsCount > 0) {\r\n      setSelectedType(defaultType);\r\n      // Only generate code if the pinned default is not 'none'\r\n      if (defaultType === 'playwright' || defaultType === 'yaml') {\r\n        handleGenerateCode(defaultType);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // If the pinned default is 'none', set selected type to 'none' and don't generate anything\r\n    if (defaultType === 'none') {\r\n      setSelectedType('none');\r\n      return;\r\n    }\r\n\r\n    // Prefer loading persisted code from session\r\n    if (session?.generatedCode) {\r\n      if (session.generatedCode.playwright && !generatedTest) {\r\n        setGeneratedTest(session.generatedCode.playwright);\r\n      }\r\n      if (session.generatedCode.yaml && !generatedYaml) {\r\n        setGeneratedYaml(session.generatedCode.yaml);\r\n      }\r\n    }\r\n\r\n    // Check if the pinned default type has generated code\r\n    const hasDefaultTypeCode =\r\n      defaultType === 'yaml'\r\n        ? generatedYaml || session?.generatedCode?.yaml\r\n        : defaultType === 'playwright'\r\n          ? generatedTest || session?.generatedCode?.playwright\r\n          : false;\r\n\r\n    // If the pinned default type has code, show it directly\r\n    if (hasDefaultTypeCode) {\r\n      setSelectedType(defaultType);\r\n      setShowGeneratedCode(true);\r\n      return;\r\n    }\r\n\r\n    // If the pinned default type doesn't have code and we have events, generate it\r\n    if (\r\n      eventsCount > 0 &&\r\n      (defaultType === 'playwright' || defaultType === 'yaml')\r\n    ) {\r\n      setSelectedType(defaultType);\r\n      handleGenerateCode(defaultType);\r\n    } else {\r\n      // Set selected type to the pinned default (even if it's a valid type but no events)\r\n      setSelectedType(defaultType);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [sessionId, isFromStopRecording]);\r\n\r\n  // Helper function to update progress step\r\n  const updateProgressStep = (\r\n    stepIndex: number,\r\n    updates: Partial<ProgressStep>,\r\n  ) => {\r\n    setSteps((prevSteps) =>\r\n      prevSteps.map((step, index) =>\r\n        index === stepIndex ? { ...step, ...updates } : step,\r\n      ),\r\n    );\r\n  };\r\n\r\n  const defaultModelConfig = globalModelConfigManager.getModelConfig('default');\r\n\r\n  // Generate session title and description using AI\r\n  const generateSessionTitleAndDescription = async (\r\n    finalEvents: ChromeRecordedEvent[],\r\n    stepIndex: number,\r\n  ): Promise<string> => {\r\n    let currentSessionName = sessionName; // Default to the original prop\r\n\r\n    if (sessionId) {\r\n      const session = useRecordingSessionStore\r\n        .getState()\r\n        .sessions.find((s) => s.id === sessionId);\r\n\r\n      if (\r\n        session &&\r\n        (!session.name || session.name.includes('-') || !session.description)\r\n      ) {\r\n        // Update progress: Step 1 in progress\r\n        updateProgressStep(stepIndex, {\r\n          status: 'loading',\r\n          details: 'Analyzing session content...',\r\n        });\r\n\r\n        const { title, description } = await generateRecordTitle(\r\n          finalEvents,\r\n          defaultModelConfig,\r\n        );\r\n\r\n        if (title || description) {\r\n          updateSession(sessionId, {\r\n            name: title || session.name,\r\n            description: description || session.description,\r\n          });\r\n\r\n          // Update the session name to use for export\r\n          currentSessionName = title || session.name;\r\n        }\r\n\r\n        // Update progress: Step 1 completed\r\n        updateProgressStep(stepIndex, {\r\n          status: 'completed',\r\n          details: `Generated: \"${currentSessionName}\"`,\r\n        });\r\n      } else if (session) {\r\n        // Use the current session name from the store in case it was updated elsewhere\r\n        currentSessionName = session.name;\r\n\r\n        // Update progress: Step 1 completed (skipped)\r\n        updateProgressStep(stepIndex, {\r\n          status: 'completed',\r\n          details: `Using existing: \"${currentSessionName}\"`,\r\n        });\r\n      }\r\n    } else {\r\n      // Update progress: Step 1 completed (no session)\r\n      updateProgressStep(stepIndex, {\r\n        status: 'completed',\r\n        details: `Using provided: \"${currentSessionName}\"`,\r\n      });\r\n    }\r\n\r\n    return currentSessionName;\r\n  };\r\n\r\n  // Generate element descriptions for events that need them\r\n  const generateElementDescriptions = async (\r\n    events: ChromeRecordedEvent[],\r\n    stepIndex: number,\r\n  ): Promise<ChromeRecordedEvent[]> => {\r\n    const eventsNeedingDescriptions = events.filter(\r\n      (event: ChromeRecordedEvent) =>\r\n        event.type !== 'navigation' && event.type !== 'scroll',\r\n    );\r\n\r\n    if (eventsNeedingDescriptions.length === 0) {\r\n      updateProgressStep(stepIndex, {\r\n        status: 'completed',\r\n        details: 'All elements already have descriptions',\r\n      });\r\n      return events;\r\n    }\r\n\r\n    updateProgressStep(stepIndex, {\r\n      status: 'loading',\r\n      progress: 0,\r\n      details: `Generating descriptions for ${eventsNeedingDescriptions.length} elements...`,\r\n    });\r\n\r\n    let completedCount = 0;\r\n    // const finalEvents = [...events];\r\n\r\n    recordLogger.info('eventsNeedingDescriptions', {\r\n      eventsNeedingDescriptions,\r\n      events,\r\n    });\r\n\r\n    // Process events in parallel with progress tracking\r\n    const optimizePromises = events.map(async (event, index) => {\r\n      if (event.type === 'navigation' || event.type === 'scroll') {\r\n        event.elementDescription = 'navigation or scroll';\r\n        event.descriptionLoading = false;\r\n        return;\r\n      }\r\n\r\n      try {\r\n        let description = '';\r\n        if (event.elementDescription && event.descriptionLoading === false) {\r\n          description = event.elementDescription;\r\n        } else {\r\n          description = await generateAIDescription(event, event.hashId);\r\n        }\r\n\r\n        event.elementDescription = description;\r\n        event.descriptionLoading = false;\r\n\r\n        completedCount++;\r\n\r\n        const progress = Math.round(\r\n          (completedCount / eventsNeedingDescriptions.length) * 100,\r\n        );\r\n        updateProgressStep(stepIndex, {\r\n          status: 'loading',\r\n          progress,\r\n          details: `Generated ${completedCount}/${eventsNeedingDescriptions.length} element descriptions`,\r\n        });\r\n      } catch (error) {\r\n        console.error('Failed to optimize event:', error);\r\n        event.elementDescription = 'failed to generate element description';\r\n        event.descriptionLoading = false;\r\n        completedCount++;\r\n      }\r\n    });\r\n\r\n    await Promise.all(optimizePromises);\r\n\r\n    // Update session with new event descriptions if sessionId exists\r\n    if (sessionId) {\r\n      updateSession(sessionId, {\r\n        events,\r\n        updatedAt: Date.now(),\r\n      });\r\n    }\r\n\r\n    updateProgressStep(stepIndex, {\r\n      status: 'completed',\r\n      progress: 100,\r\n      details: `Generated descriptions for ${events.length} elements`,\r\n    });\r\n\r\n    return events;\r\n  };\r\n\r\n  // Streaming callback handler factory\r\n  const createStreamingChunkHandler =\r\n    (targetType: 'playwright' | 'yaml'): StreamingCallback =>\r\n    (chunk: CodeGenerationChunk) => {\r\n      setStreamingContent(chunk.accumulated);\r\n      const code = chunk.accumulated;\r\n      const thinking = chunk.reasoning_content;\r\n\r\n      // Accumulate thinking process content\r\n      if (thinking) {\r\n        setAccumulatedThinking((prev) => prev + thinking);\r\n      }\r\n\r\n      setThinkingProcess(thinking);\r\n      setActualCode(code);\r\n\r\n      if (chunk.isComplete) {\r\n        setIsStreaming(false);\r\n\r\n        // Use the actual code for final result\r\n        const finalCode = code || chunk.accumulated;\r\n\r\n        // Set the final generated code based on the target type, not current selectedType\r\n        if (targetType === 'playwright') {\r\n          setGeneratedTest(finalCode);\r\n        } else if (targetType === 'yaml') {\r\n          setGeneratedYaml(finalCode);\r\n        }\r\n\r\n        // Update session with final code\r\n        if (sessionId) {\r\n          updateSession(sessionId, {\r\n            generatedCode: {\r\n              ...getCurrentSession()?.generatedCode,\r\n              [targetType]: finalCode,\r\n            },\r\n            updatedAt: Date.now(),\r\n          });\r\n        }\r\n      }\r\n    };\r\n\r\n  // Common function to handle code generation with streaming support\r\n  const handleCodeGeneration = async (type: 'playwright' | 'yaml') => {\r\n    // Get the most current events\r\n    const currentEvents = getCurrentEvents();\r\n\r\n    if (currentEvents.length === 0) {\r\n      message.warning(`No events to generate ${type} from`);\r\n      return;\r\n    }\r\n\r\n    setIsGenerating(true);\r\n    setIsStreaming(true);\r\n    setStreamingContent('');\r\n    setThinkingProcess('');\r\n    setActualCode('');\r\n    setAccumulatedThinking('');\r\n\r\n    // Initialize progress steps\r\n    const progressSteps: ProgressStep[] = [\r\n      {\r\n        id: 'descriptions',\r\n        title: 'Generate Element Descriptions',\r\n        description: 'Analyzing UI elements and generating descriptions',\r\n        status: 'pending',\r\n      },\r\n      {\r\n        id: 'title',\r\n        title: 'Generate Title & Description',\r\n        description: 'Creating session title and description using AI',\r\n        status: 'pending',\r\n      },\r\n      {\r\n        id: type,\r\n        title:\r\n          type === 'playwright'\r\n            ? 'Generate Playwright Code'\r\n            : 'Generate YAML Configuration',\r\n        description:\r\n          type === 'playwright'\r\n            ? 'Creating executable Playwright test code'\r\n            : 'Creating YAML configuration',\r\n        status: 'pending',\r\n      },\r\n    ];\r\n\r\n    setSteps(progressSteps);\r\n    // Reset completed states\r\n    setCompletedSteps(new Set());\r\n    setSlidingOutSteps(new Set());\r\n    // Hide code generation area when starting new generation\r\n    setShowGeneratedCode(false);\r\n    // Only clear the code that we're about to regenerate, preserve the other type\r\n    if (type === 'playwright') {\r\n      setGeneratedTest('');\r\n    } else {\r\n      setGeneratedYaml('');\r\n    }\r\n\r\n    try {\r\n      // Step 0: Stop recording if currently recording\r\n      await stopRecordingIfActive(onStopRecording);\r\n\r\n      // After stopping recording, get the latest events from session\r\n      let finalEvents = getCurrentEvents();\r\n      recordLogger.info('start generating code', {\r\n        finalEvents,\r\n        sessionId,\r\n      });\r\n\r\n      // Step 1: Generate element descriptions\r\n      updateProgressStep(0, { status: 'loading' });\r\n      finalEvents = await generateElementDescriptions(finalEvents, 0);\r\n      recordLogger.info('Generated element descriptions', {\r\n        finalEvents,\r\n        sessionId,\r\n      });\r\n\r\n      await new Promise((resolve) => setTimeout(resolve, 500));\r\n\r\n      // Step 2: Generate session title and description if not already generated\r\n      updateProgressStep(1, { status: 'loading' });\r\n\r\n      finalEvents = getCurrentEvents();\r\n      const currentSessionName = await generateSessionTitleAndDescription(\r\n        finalEvents,\r\n        1,\r\n      );\r\n\r\n      await new Promise((resolve) => setTimeout(resolve, 500));\r\n\r\n      recordLogger.info('Generated session title and description', {\r\n        finalEvents,\r\n        sessionId,\r\n        currentSessionName,\r\n      });\r\n\r\n      // Step 3: Generate code with streaming support\r\n      updateProgressStep(2, {\r\n        status: 'loading',\r\n        details:\r\n          type === 'playwright'\r\n            ? 'Generating Playwright test code...'\r\n            : 'Generating YAML configuration...',\r\n      });\r\n\r\n      finalEvents = getCurrentEvents();\r\n\r\n      // Show the code generation area immediately when streaming starts\r\n      setShowGeneratedCode(true);\r\n\r\n      let generatedCode: string;\r\n\r\n      if (type === 'playwright') {\r\n        // Use streaming for Playwright\r\n        const streamingResult = await generatePlaywrightTestStream(\r\n          finalEvents,\r\n          {\r\n            stream: true,\r\n            onChunk: createStreamingChunkHandler(type),\r\n          },\r\n          defaultModelConfig,\r\n        );\r\n        generatedCode = streamingResult.content;\r\n      } else {\r\n        // Use streaming for YAML\r\n        const streamingResult = await generateYamlTestStream(\r\n          finalEvents,\r\n          {\r\n            stream: true,\r\n            onChunk: createStreamingChunkHandler(type),\r\n            testName: currentSessionName,\r\n            description: `Test session recorded on ${new Date().toLocaleDateString()}`,\r\n            includeTimestamps: true,\r\n          },\r\n          defaultModelConfig,\r\n        );\r\n        generatedCode = streamingResult.content;\r\n      }\r\n\r\n      // Update session with generated code if sessionId exists\r\n      if (sessionId) {\r\n        updateSession(sessionId, {\r\n          generatedCode: {\r\n            ...getCurrentSession()?.generatedCode,\r\n            [type]: generatedCode,\r\n          },\r\n          updatedAt: Date.now(),\r\n        });\r\n      }\r\n\r\n      // Set the generated code in state\r\n      if (type === 'playwright') {\r\n        setGeneratedTest(generatedCode);\r\n      } else {\r\n        setGeneratedYaml(generatedCode);\r\n      }\r\n\r\n      // Mark all steps as completed\r\n      progressSteps.forEach((_, index) => {\r\n        updateProgressStep(index, { status: 'completed' });\r\n      });\r\n\r\n      // Show the generated code after generation is complete\r\n      setShowGeneratedCode(true);\r\n\r\n      // Show success message\r\n      message.success(\r\n        `AI ${type === 'playwright' ? 'Playwright test' : 'YAML configuration'} generated successfully!`,\r\n      );\r\n    } catch (error) {\r\n      recordLogger.error(`Failed to generate ${type}`, undefined, error);\r\n\r\n      // Update current step to error status\r\n      const currentStep = steps.findIndex((step) => step.status === 'loading');\r\n      if (currentStep >= 0) {\r\n        updateProgressStep(currentStep, {\r\n          status: 'error',\r\n          details: `Error: ${error instanceof Error ? error.message : 'Unknown error'}`,\r\n        });\r\n      }\r\n\r\n      setTimeout(() => {\r\n        message.error(\r\n          `Failed to generate ${type}: ${error instanceof Error ? error.message : 'Unknown error'}`,\r\n        );\r\n      }, 2000);\r\n    } finally {\r\n      setIsGenerating(false);\r\n      setIsStreaming(false);\r\n    }\r\n  };\r\n\r\n  // Function to handle code generation from dropdown\r\n  const handleGenerateCode = async (type: CodeGenerationType) => {\r\n    if (getCurrentEvents().length === 0 || type === 'none') {\r\n      return;\r\n    }\r\n\r\n    await handleCodeGeneration(type);\r\n  };\r\n\r\n  // Copy generated test to clipboard\r\n  const handleCopyTest = () => {\r\n    navigator.clipboard.writeText(generatedTest);\r\n    message.success('Test copied to clipboard');\r\n  };\r\n\r\n  // Copy generated YAML to clipboard\r\n  const handleCopyYaml = () => {\r\n    navigator.clipboard.writeText(generatedYaml);\r\n    message.success('YAML copied to clipboard');\r\n  };\r\n\r\n  // Download generated test as a TypeScript file\r\n  const handleDownloadTest = () => {\r\n    const downloadSessionName = resolveSessionName(sessionName, sessionId);\r\n\r\n    const dataBlob = new Blob([generatedTest], {\r\n      type: 'application/typescript',\r\n    });\r\n    const url = URL.createObjectURL(dataBlob);\r\n\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `${downloadSessionName}-playwright-test.ts`;\r\n    link.click();\r\n\r\n    URL.revokeObjectURL(url);\r\n    message.success(\r\n      `Playwright script for \"${downloadSessionName}\" downloaded successfully`,\r\n    );\r\n  };\r\n\r\n  // Download generated YAML as a YAML file\r\n  const handleDownloadYaml = () => {\r\n    const downloadSessionName = resolveSessionName(sessionName, sessionId);\r\n\r\n    const dataBlob = new Blob([generatedYaml], {\r\n      type: 'application/x-yaml',\r\n    });\r\n    const url = URL.createObjectURL(dataBlob);\r\n\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `${downloadSessionName}-test.yaml`;\r\n    link.click();\r\n\r\n    URL.revokeObjectURL(url);\r\n    message.success(\r\n      `YAML script for \"${downloadSessionName}\" downloaded successfully`,\r\n    );\r\n  };\r\n\r\n  // Regenerate Playwright test\r\n  const handleRegenerateTest = async () => {\r\n    await handleCodeGeneration('playwright');\r\n  };\r\n\r\n  // Regenerate YAML test\r\n  const handleRegenerateYaml = async () => {\r\n    await handleCodeGeneration('yaml');\r\n  };\r\n\r\n  // Monitor step completion state changes, add sliding animation\r\n  useEffect(() => {\r\n    steps.forEach((step) => {\r\n      if (step.status === 'completed' && !completedSteps.has(step.id)) {\r\n        // Mark as sliding out state\r\n        setSlidingOutSteps((prev) => new Set([...prev, step.id]));\r\n\r\n        // Mark as completed after 500ms (remove from DOM)\r\n        setTimeout(() => {\r\n          setCompletedSteps((prev) => new Set([...prev, step.id]));\r\n          setSlidingOutSteps((prev) => {\r\n            const newSet = new Set(prev);\r\n            newSet.delete(step.id);\r\n            return newSet;\r\n          });\r\n        }, 500);\r\n      }\r\n    });\r\n  }, [steps, completedSteps]);\r\n\r\n  // Reset state when starting new generation\r\n  const handleSelectChange = (value: CodeGenerationType) => {\r\n    console.log('handleSelectChange', value);\r\n    setSelectedType(value);\r\n\r\n    if (value === 'playwright') {\r\n      // Don't clear yaml code, just check if playwright code exists\r\n      if (generatedTest) {\r\n        setShowGeneratedCode(true);\r\n      } else {\r\n        setShowGeneratedCode(false);\r\n        if (!isGenerating) {\r\n          handleGenerateCode(value);\r\n        }\r\n      }\r\n    } else if (value === 'yaml') {\r\n      // Don't clear playwright code, just check if yaml code exists\r\n      if (generatedYaml) {\r\n        setShowGeneratedCode(true);\r\n      } else {\r\n        setShowGeneratedCode(false);\r\n        if (!isGenerating) {\r\n          handleGenerateCode(value);\r\n        }\r\n      }\r\n    } else if (value === 'none') {\r\n      setShowGeneratedCode(false);\r\n      // Don't clear generated code when selecting 'none', preserve it for future switches\r\n    } else {\r\n      setShowGeneratedCode(false);\r\n    }\r\n  };\r\n\r\n  const codeTypeOptions = [\r\n    {\r\n      label: (\r\n        <>\r\n          <CodeOutlined className=\"text-blue-500\" /> Playwright\r\n        </>\r\n      ),\r\n      value: 'playwright' as const,\r\n    },\r\n    {\r\n      label: (\r\n        <>\r\n          <FileTextOutlined className=\"text-green-500\" /> YAML\r\n        </>\r\n      ),\r\n      value: 'yaml' as const,\r\n    },\r\n    { label: 'None', value: 'none' as const },\r\n  ];\r\n\r\n  const getStepIcon = (step: ProgressStep) => {\r\n    switch (step.status) {\r\n      case 'loading':\r\n        return <LoadingOutlined style={{ color: '#1890ff' }} />;\r\n      case 'completed':\r\n        return <CheckCircleOutlined style={{ color: '#52c41a' }} />;\r\n      case 'error':\r\n        return <CheckCircleOutlined style={{ color: '#ff4d4f' }} />;\r\n      default:\r\n        return (\r\n          <div\r\n            style={{\r\n              width: 14,\r\n              height: 14,\r\n              borderRadius: '50%',\r\n              backgroundColor: '#d9d9d9',\r\n            }}\r\n          />\r\n        );\r\n    }\r\n  };\r\n\r\n  const getStepColor = (step: ProgressStep) => {\r\n    switch (step.status) {\r\n      case 'loading':\r\n        return '#1890ff';\r\n      case 'completed':\r\n        return '#52c41a';\r\n      case 'error':\r\n        return '#ff4d4f';\r\n      default:\r\n        return '#d9d9d9';\r\n    }\r\n  };\r\n\r\n  const thirdStepStarted =\r\n    steps.length >= 3 &&\r\n    (steps[2].status === 'loading' ||\r\n      steps[2].status === 'completed' ||\r\n      steps[2].status === 'error');\r\n\r\n  return (\r\n    <>\r\n      {eventsCount === 0 ? (\r\n        <div className=\"text-center text-gray-400 py-5\">\r\n          <div className=\"text-lg mb-2\">No events to generate code from</div>\r\n          <div className=\"text-sm\">Record some interactions first</div>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <div className=\"flex items-center gap-4\">\r\n            <Select\r\n              value={selectedType}\r\n              onChange={(value) => {\r\n                // Prevent selecting \"None\" directly - only allow through pin icon\r\n                if (value === 'none') {\r\n                  return;\r\n                }\r\n                handleSelectChange(value);\r\n              }}\r\n              className=\"w-60\"\r\n              size=\"middle\"\r\n              suffixIcon={<DownOutlined />}\r\n              disabled={isGenerating}\r\n            >\r\n              {codeTypeOptions.map((option) => (\r\n                <Select.Option\r\n                  key={option.value}\r\n                  value={option.value}\r\n                  disabled={option.value === 'none'}\r\n                >\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span\r\n                      className={option.value === 'none' ? 'text-gray-400' : ''}\r\n                    >\r\n                      {option.label}\r\n                    </span>\r\n                    <div className=\"flex items-center gap-1\">\r\n                      <Tooltip\r\n                        title={\r\n                          option.value === 'none'\r\n                            ? 'Click to set None as default (no auto-generation)'\r\n                            : 'Pin as default code generation type'\r\n                        }\r\n                      >\r\n                        {defaultType === option.value ? (\r\n                          <PushpinFilled\r\n                            className=\"text-blue-500 cursor-pointer hover:text-blue-600 ml-1\"\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              updateDefaultType(option.value);\r\n                              // If pinning \"None\", also set it as selected type\r\n                              if (option.value === 'none') {\r\n                                setSelectedType('none');\r\n                                handleSelectChange('none');\r\n                              }\r\n                            }}\r\n                          />\r\n                        ) : (\r\n                          <PushpinOutlined\r\n                            className=\"text-gray-400 cursor-pointer hover:text-gray-600 ml-1\"\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              updateDefaultType(option.value);\r\n                              // If pinning \"None\", also set it as selected type\r\n                              if (option.value === 'none') {\r\n                                setSelectedType('none');\r\n                                handleSelectChange('none');\r\n                              }\r\n                            }}\r\n                          />\r\n                        )}\r\n                      </Tooltip>\r\n                    </div>\r\n                  </div>\r\n                </Select.Option>\r\n              ))}\r\n            </Select>\r\n            {(selectedType === 'playwright' || selectedType === 'yaml') &&\r\n              (showGeneratedCode || isStreaming) && (\r\n                <div className=\"flex gap-0.2 ml-auto\">\r\n                  <Button\r\n                    size=\"small\"\r\n                    icon={<CopyOutlined />}\r\n                    onClick={\r\n                      selectedType === 'playwright'\r\n                        ? handleCopyTest\r\n                        : handleCopyYaml\r\n                    }\r\n                    className=\"!border-none !bg-none !shadow-none\"\r\n                    disabled={\r\n                      isStreaming ||\r\n                      (selectedType === 'playwright'\r\n                        ? !generatedTest\r\n                        : !generatedYaml)\r\n                    }\r\n                    title=\"Copy to clipboard\"\r\n                  />\r\n                  <Button\r\n                    size=\"small\"\r\n                    icon={<ReloadOutlined />}\r\n                    onClick={\r\n                      selectedType === 'playwright'\r\n                        ? handleRegenerateTest\r\n                        : handleRegenerateYaml\r\n                    }\r\n                    disabled={isGenerating || isStreaming}\r\n                    className=\"!border-none !bg-none !shadow-none\"\r\n                    title=\"Regenerate code\"\r\n                  />\r\n                  <Button\r\n                    size=\"small\"\r\n                    icon={<DownloadOutlined />}\r\n                    className=\"!border-none !bg-none !shadow-none\"\r\n                    onClick={\r\n                      selectedType === 'playwright'\r\n                        ? handleDownloadTest\r\n                        : handleDownloadYaml\r\n                    }\r\n                    disabled={\r\n                      isStreaming ||\r\n                      (selectedType === 'playwright'\r\n                        ? !generatedTest\r\n                        : !generatedYaml)\r\n                    }\r\n                    title={\r\n                      selectedType === 'playwright'\r\n                        ? 'Download as .ts file'\r\n                        : 'Download as .yaml file'\r\n                    }\r\n                  />\r\n                </div>\r\n              )}\r\n          </div>\r\n          {selectedType === 'none' && (\r\n            <div className=\"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded text-yellow-800 text-sm\">\r\n              <div className=\"font-semibold mb-1\">\r\n                No Code Generation Selected\r\n              </div>\r\n              <div>\r\n                Selecting <b>None</b> means no code will be generated\r\n                automatically.\r\n              </div>\r\n              <div className=\"mt-1\">\r\n                To auto-generate <b>YAML</b> or <b>Playwright</b> code, set it\r\n                as the default (click the pin icon on the right).\r\n                <br />\r\n                When you stop recording, the system will automatically generate\r\n                code for the default type.\r\n              </div>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* Steps for selectedType only */}\r\n      {steps.length > 0 &&\r\n        // !steps.every((step) => step.status === 'completed') &&\r\n        (() => {\r\n          // Hide step display if the third step has started\r\n          if (thirdStepStarted) {\r\n            return null;\r\n          }\r\n\r\n          return (\r\n            <StepList\r\n              steps={steps}\r\n              completedSteps={completedSteps}\r\n              slidingOutSteps={slidingOutSteps}\r\n              getStepIcon={getStepIcon}\r\n              getStepColor={getStepColor}\r\n            />\r\n          );\r\n        })()}\r\n\r\n      {/* Code block for selectedType only */}\r\n      {(showGeneratedCode || isStreaming) && (\r\n        <>\r\n          {selectedType === 'playwright' &&\r\n            (generatedTest ||\r\n              (isStreaming && selectedType === 'playwright')) && (\r\n              <CodeBlock\r\n                key={'playwright'}\r\n                code={generatedTest}\r\n                type={'playwright'}\r\n                loading={isGenerating}\r\n                isStreaming={isStreaming && selectedType === 'playwright'}\r\n                streamingContent={streamingContent}\r\n                thinkingProcess={thinkingProcess}\r\n                actualCode={actualCode}\r\n                accumulatedThinking={accumulatedThinking}\r\n                stepDisplay={thirdStepStarted || steps.length === 0}\r\n              />\r\n            )}\r\n          {selectedType === 'yaml' &&\r\n            (generatedYaml || (isStreaming && selectedType === 'yaml')) && (\r\n              <CodeBlock\r\n                key={'yaml'}\r\n                code={generatedYaml}\r\n                type={'yaml'}\r\n                loading={isGenerating}\r\n                isStreaming={isStreaming && selectedType === 'yaml'}\r\n                streamingContent={streamingContent}\r\n                thinkingProcess={thinkingProcess}\r\n                actualCode={actualCode}\r\n                accumulatedThinking={accumulatedThinking}\r\n                stepDisplay={thirdStepStarted || steps.length === 0}\r\n              />\r\n            )}\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import {\r\n  ArrowLeftOutlined,\r\n  ClearOutlined,\r\n  CloseOutlined,\r\n  CodeOutlined,\r\n  ControlOutlined,\r\n  LoadingOutlined,\r\n  PlayCircleOutlined,\r\n  RightOutlined,\r\n} from '@ant-design/icons';\r\nimport { RecordTimeline } from '@sqai/recorder';\r\nimport { Alert, Button, Empty, Spin } from 'antd';\r\nimport type React from 'react';\r\nimport { useEffect, useState } from 'react';\r\nimport { useRecordStore, useRecordingSessionStore } from '../../../store';\r\n\r\nimport { ProgressModal } from './ProgressModal';\r\n\r\ninterface RecordDetailProps {\r\n  sessionId: string;\r\n  isRecording: boolean;\r\n  currentTab: chrome.tabs.Tab | null;\r\n  // events: ChromeRecordedEvent[];\r\n  onBack: () => void;\r\n  onStartRecording: (id: string) => void;\r\n  onStopRecording: () => void;\r\n  onClearEvents: () => void;\r\n  isExtensionMode: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const RecordDetail: React.FC<RecordDetailProps> = ({\r\n  sessionId,\r\n  isRecording,\r\n  // events = [],\r\n  onBack,\r\n  onStartRecording,\r\n  onStopRecording,\r\n  onClearEvents,\r\n  onClose,\r\n}) => {\r\n  // useState must be called at the top level of the component, not after conditional statements\r\n  const [tab, setTab] = useState<'timeline' | 'code'>('timeline');\r\n  const [isFromStopRecording, setIsFromStopRecording] = useState(false);\r\n  const { events } = useRecordStore();\r\n\r\n  // Get the session directly from the store to ensure we always have the latest data\r\n  const { sessions } = useRecordingSessionStore();\r\n  const session = sessions.find((s) => s.id === sessionId);\r\n\r\n  // reset tab when sessionId changes\r\n  useEffect(() => {\r\n    setTab('timeline');\r\n    setIsFromStopRecording(false);\r\n  }, [sessionId]);\r\n\r\n  // If session is not found, show error\r\n  if (!session) {\r\n    return (\r\n      <div className=\"record-detail-view\">\r\n        <Alert\r\n          message=\"Session Not Found\"\r\n          description=\"The requested session could not be found.\"\r\n          type=\"error\"\r\n          showIcon\r\n          style={{ marginBottom: '16px' }}\r\n        />\r\n        <Button\r\n          type=\"text\"\r\n          icon={<ArrowLeftOutlined />}\r\n          onClick={onBack}\r\n          className=\"back-button\"\r\n        >\r\n          Back to Sessions\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Wrap onStopRecording, switch to code tab after stopping recording\r\n  const handleStopRecording = () => {\r\n    onStopRecording();\r\n    setIsFromStopRecording(true);\r\n    setTab('code');\r\n  };\r\n\r\n  // Reset isFromStopRecording state when manually switching to code tab\r\n  const handleTabChange = (newTab: 'timeline' | 'code') => {\r\n    if (newTab === 'timeline') {\r\n      setIsFromStopRecording(false);\r\n    }\r\n    setTab(newTab);\r\n  };\r\n\r\n  return (\r\n    <div className=\"record-detail-view flex flex-col h-full\">\r\n      {/* Header bar */}\r\n      <div className=\"flex items-center\">\r\n        {/* Recording status */}\r\n        <div className=\"flex items-center mr-2\">\r\n          {isRecording ? (\r\n            <div\r\n              className=\"flex items-center gap-[4px] h-[20px] px-[7px] py-[4px] rounded-[23px] cursor-pointer hover:opacity-80 transition-opacity\"\r\n              style={{\r\n                background: 'rgba(255, 17, 17, 0.08)',\r\n                // Transparent red background\r\n              }}\r\n              onClick={handleStopRecording}\r\n              title=\"Click to stop recording\"\r\n            >\r\n              <span\r\n                className=\"inline-block rec-dot-pulse\"\r\n                style={{\r\n                  width: 6,\r\n                  height: 6,\r\n                  borderRadius: '50%',\r\n                  background: '#FF1111',\r\n                }}\r\n              />\r\n              <span\r\n                className=\"text-[10px] font-medium\"\r\n                style={{\r\n                  color: '#FF1111',\r\n                  fontFamily: 'Inter, -apple-system, sans-serif',\r\n                  lineHeight: '2em',\r\n                  fontWeight: 700,\r\n                }}\r\n              >\r\n                REC\r\n              </span>\r\n              <style>{`\r\n                @keyframes rec-dot-pulse {\r\n                  0% { \r\n                    transform: scale(1);\r\n                    opacity: 1;\r\n                  }\r\n                  50% { \r\n                    transform: scale(1.3);\r\n                    opacity: 0.7;\r\n                  }\r\n                  100% { \r\n                    transform: scale(1);\r\n                    opacity: 1;\r\n                  }\r\n                }\r\n                .rec-dot-pulse {\r\n                  animation: rec-dot-pulse 1.5s infinite ease-in-out;\r\n                }\r\n              `}</style>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex items-center gap-[4px] h-[20px] px-[7px] py-[4px] rounded-[23px] bg-[#EFFFE0]\">\r\n              <span className=\"w-[6px] h-[6px] rounded-full bg-[#00C700] inline-block\" />\r\n              <span\r\n                className=\"text-[#12A902] text-[10px] font-medium leading-[2em]\"\r\n                style={{\r\n                  fontFamily: 'PingFang SC, -apple-system, sans-serif',\r\n                  fontWeight: 700,\r\n                }}\r\n              >\r\n                Ready\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n        {/* Title */}\r\n        <span\r\n          className=\"text-[12px] font-medium text-[rgba(0,0,0,0.9)] leading-[1.67em] truncate flex-1\"\r\n          style={{ fontFamily: 'PingFang SC, -apple-system, sans-serif' }}\r\n        >\r\n          {session.name}\r\n        </span>\r\n        {/* Action buttons */}\r\n        <div className=\"flex items-center gap-2 ml-2\">\r\n          <Button\r\n            icon={<ClearOutlined />}\r\n            onClick={() => {\r\n              setTab('timeline');\r\n              setIsFromStopRecording(false);\r\n              onClearEvents();\r\n            }}\r\n            disabled={events.length === 0 || isRecording}\r\n            size=\"small\"\r\n            type=\"text\"\r\n            title=\"Clear all events\"\r\n            className=\"text-[#333333]\"\r\n          />\r\n          <Button\r\n            icon={<CloseOutlined />}\r\n            onClick={onClose}\r\n            size=\"small\"\r\n            type=\"text\"\r\n            title=\"Close\"\r\n            className=\"text-[#333333]\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Figma-style Tabs */}\r\n      <div\r\n        className=\"px-2 py-0  my-[20px]\"\r\n        style={{\r\n          background: '#F2F4F7',\r\n          borderRadius: '8px',\r\n          height: '41px',\r\n          display: 'flex',\r\n          alignItems: 'stretch',\r\n        }}\r\n      >\r\n        <div className=\"flex gap-2 w-full items-stretch !text-[12px]\">\r\n          <button\r\n            type=\"button\"\r\n            className={\r\n              'flex items-center justify-center gap-1.5 flex-1 transition-colors !font-medium !leading-[1.83em] !bg-transparent !rounded-lg !py-2 !px-0 !border-none !cursor-pointer text-[rgba(0,0,0,0.85)]'\r\n            }\r\n            style={{\r\n              fontFamily: 'Inter, -apple-system, sans-serif',\r\n            }}\r\n            onClick={() => handleTabChange('timeline')}\r\n          >\r\n            {/* Timeline icon */}\r\n            <div className=\"w-4 h-4 flex items-center justify-center !rounded-none\">\r\n              <ControlOutlined />\r\n            </div>\r\n            Record Timeline\r\n          </button>\r\n\r\n          {/* Divider */}\r\n          <div className=\"flex items-center\">\r\n            <RightOutlined className=\"text-xs w-3 h-3 \" />\r\n          </div>\r\n\r\n          <button\r\n            type=\"button\"\r\n            className={`flex items-center justify-center gap-1.5 flex-1 transition-colors !font-medium !leading-[1.83em] !bg-transparent !rounded-lg !py-2 !px-0 !border-none !cursor-pointer ${\r\n              tab === 'code'\r\n                ? 'text-[rgba(0,0,0,0.85)]'\r\n                : 'text-[rgba(0,0,0,0.25)]'\r\n            } ${events.length === 0 ? '!text-gray-300 !cursor-not-allowed' : ''}`}\r\n            style={{\r\n              fontFamily: 'Inter, -apple-system, sans-serif',\r\n            }}\r\n            onClick={() => events.length > 0 && handleTabChange('code')}\r\n            disabled={events.length === 0}\r\n            title={events.length === 0 ? 'Record some events first' : undefined}\r\n          >\r\n            {/* Code icon */}\r\n            <div className=\"w-4 h-4 flex items-center justify-center !rounded-none\">\r\n              <CodeOutlined className=\"!bg-transparent\" />\r\n            </div>\r\n            Generate code\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tab content area */}\r\n      <div className=\"flex-1 overflow-auto\">\r\n        {tab === 'timeline' ? (\r\n          events.length === 0 ? (\r\n            <Empty description=\"No events recorded yet\" />\r\n          ) : (\r\n            <div className=\"p-[16px 0]\">\r\n              <RecordTimeline events={events} />\r\n            </div>\r\n          )\r\n        ) : (\r\n          <ProgressModal\r\n            eventsCount={events.length}\r\n            sessionName={session.name}\r\n            events={events}\r\n            sessionId={session.id}\r\n            onStopRecording={handleStopRecording}\r\n            isFromStopRecording={isFromStopRecording}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {/* Fixed bottom action bar - only shown in timeline tab */}\r\n      {tab === 'timeline' && (\r\n        <div className=\"px-4 py-6 flex justify-center\">\r\n          {!isRecording ? (\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<PlayCircleOutlined />}\r\n              onClick={() => onStartRecording(sessionId)}\r\n              disabled={isRecording}\r\n              className=\"!fixed bottom-4 left-1/2 transform -translate-x-1/2 z-[1000] !h-[40px] !py-[12px] !px-[12px] !rounded-[48px]\"\r\n              style={{ fontFamily: 'Inter, -apple-system, sans-serif' }}\r\n            >\r\n              {events.length > 0 ? 'Resume Recording' : 'Start Recording'}\r\n            </Button>\r\n          ) : (\r\n            <div\r\n              className=\"relative\"\r\n              style={{ maxWidth: '304px', width: '100%' }}\r\n            >\r\n              {/* Gradient border background */}\r\n              <div\r\n                className=\"absolute inset-0 rounded-xl p-[1px] rec-breath-border\"\r\n                style={{\r\n                  background:\r\n                    'linear-gradient(45deg, #538CFF, #0066FF, #7B02C5, #FF7D3C, #FFA53C)',\r\n                  boxShadow: '0px 0px 0px 3px rgba(217, 233, 255, 1)',\r\n                }}\r\n              >\r\n                <div className=\"w-full h-full bg-white rounded-xl\" />\r\n                <style>{`\r\n                  @keyframes rec-breath {\r\n                    0%   { filter: brightness(1) opacity(1); }\r\n                    50%  { filter: brightness(1.08) opacity(0.88); }\r\n                    100% { filter: brightness(1) opacity(1); }\r\n                  }\r\n                  .rec-breath-border {\r\n                    animation: rec-breath 2s infinite ease-in-out;\r\n                  }\r\n                `}</style>\r\n              </div>\r\n\r\n              {/* Content container */}\r\n              <div className=\"relative flex items-center px-4 py-3\">\r\n                {/* Recording status */}\r\n                <div className=\"flex items-center gap-2.5 flex-1\">\r\n                  <Spin\r\n                    size=\"small\"\r\n                    indicator={\r\n                      <LoadingOutlined spin style={{ fontSize: 15 }} />\r\n                    }\r\n                    style={{\r\n                      color: '#2B83FF',\r\n                      fontSize: '16px',\r\n                    }}\r\n                  />\r\n                  <span\r\n                    className=\"text-[14px] font-medium text-[rgba(0,0,0,0.85)]\"\r\n                    style={{\r\n                      fontFamily: 'Inter, -apple-system, sans-serif',\r\n                      lineHeight: '1.21',\r\n                    }}\r\n                  >\r\n                    Recording\r\n                  </span>\r\n                </div>\r\n\r\n                {/* Divider */}\r\n                <div\r\n                  className=\"border-l mx-4\"\r\n                  style={{\r\n                    width: '0px',\r\n                    height: '15px',\r\n                    borderLeftColor: 'rgba(0,0,0,0.08)',\r\n                    borderLeftWidth: '1px',\r\n                  }}\r\n                />\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleStopRecording}\r\n                  disabled={!isRecording}\r\n                  className=\"flex items-center gap-1 hover:opacity-80 transition-opacity bg-transparent border-none p-0 cursor-pointer\"\r\n                  style={{ background: 'none' }}\r\n                >\r\n                  <div\r\n                    className=\"bg-[#151414] w-3 h-3\"\r\n                    style={{\r\n                      borderRadius: '2px',\r\n                    }}\r\n                  />\r\n                  <span\r\n                    className=\"text-sm font-medium text-[rgba(0,0,0,0.85)]\"\r\n                    style={{\r\n                      fontFamily: 'Inter, -apple-system, sans-serif',\r\n                      lineHeight: '1.21',\r\n                    }}\r\n                  >\r\n                    Stop\r\n                  </span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import {\r\n  DeleteOutlined,\r\n  DownloadOutlined,\r\n  EditOutlined,\r\n  PlusOutlined,\r\n} from '@ant-design/icons';\r\nimport { Alert, Button, Empty, List, Popconfirm } from 'antd';\r\nimport type React from 'react';\r\nimport type { RecordingSession } from '../../../store';\r\nimport './RecordList.less';\r\nimport { EnvConfigReminder, useEnvConfig } from '@sqai/visualizer';\r\n\r\ninterface RecordListProps {\r\n  sessions: RecordingSession[];\r\n  currentSessionId: string | null;\r\n  onEditSession: (session: RecordingSession) => void;\r\n  onDeleteSession: (sessionId: string) => void;\r\n  onExportSession: (session: RecordingSession) => void;\r\n  onExportAllEvents: () => void;\r\n  onViewDetail: (session: RecordingSession) => void;\r\n  isExtensionMode: boolean;\r\n  handleCreateNewSession: () => void;\r\n}\r\n\r\nexport const RecordList: React.FC<RecordListProps> = ({\r\n  sessions,\r\n  currentSessionId,\r\n  onEditSession,\r\n  onDeleteSession,\r\n  onExportSession,\r\n  onExportAllEvents,\r\n  onViewDetail,\r\n  isExtensionMode,\r\n  handleCreateNewSession,\r\n}) => {\r\n  const { config } = useEnvConfig();\r\n\r\n  const runButtonEnabled = Object.keys(config || {}).length >= 1;\r\n  const hasEventsToExport = sessions.some(\r\n    (session) => session.events.length > 0,\r\n  );\r\n\r\n  return (\r\n    <div className=\"record-list-view relative\">\r\n      {/* Environment setup reminder */}\r\n      <EnvConfigReminder />\r\n\r\n      {/* Export All Events Button */}\r\n      {hasEventsToExport && (\r\n        <div className=\"h-[30px] font-bold text-[14px] p-[5px]\">\r\n          <span>Record All</span>\r\n          <DownloadOutlined\r\n            onClick={onExportAllEvents}\r\n            className=\"cursor-pointer float-right\"\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {!isExtensionMode && (\r\n        <Alert\r\n          message=\"Limited Functionality\"\r\n          description=\"Recording features require Chrome extension environment. Only session management and event viewing are available.\"\r\n          type=\"info\"\r\n          showIcon\r\n          className=\"mb-4\"\r\n        />\r\n      )}\r\n\r\n      {sessions.length === 0 ? (\r\n        <Empty\r\n          className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\"\r\n          image={Empty.PRESENTED_IMAGE_SIMPLE}\r\n          description=\"Start your first recording\"\r\n        />\r\n      ) : (\r\n        <List\r\n          className=\"session-list\"\r\n          grid={{ gutter: 16, column: 1 }}\r\n          dataSource={[...sessions].sort((a, b) => b.updatedAt - a.updatedAt)}\r\n          renderItem={(session) => (\r\n            <List.Item className=\"session-item\">\r\n              <div\r\n                className={`w-full bg-[#F4F6F9] rounded-lg cursor-pointer transition-all duration-200 overflow-hidden hover:shadow-md ${\r\n                  session.id === currentSessionId\r\n                    ? 'border-2 border-[#F4F6F9] bg-blue-50'\r\n                    : ''\r\n                }`}\r\n                onClick={() => onViewDetail(session)}\r\n              >\r\n                {/* Main content area */}\r\n                <div className=\"bg-white border border-[#F2F4F7] rounded-[8px] p-3 flex flex-col gap-2\">\r\n                  <div className=\"font-medium text-sm leading-[1.21] text-black w-full\">\r\n                    {session.name}\r\n                  </div>\r\n                  {session.description && (\r\n                    <div className=\"font-normal text-xs leading-[1.67] text-[#595959] max-h-10 overflow-hidden line-clamp-2\">\r\n                      {session.description}\r\n                    </div>\r\n                  )}\r\n                  <div className=\"font-normal text-xs leading-[1.67] text-[#595959]\">\r\n                    {session.url &&\r\n                      `URL: ${session.url.slice(0, 50)}${session.url.length > 50 ? '...' : ''}`}\r\n                  </div>\r\n                  <div className=\"font-normal text-xs leading-[1.67] text-[#595959]\">\r\n                    {new Date(session.createdAt).toLocaleString()}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Action bar */}\r\n                <div className=\"h-10 bg-[#F2F4F7] rounded-b-lg flex items-center justify-between px-3\">\r\n                  <div className=\"flex items-center justify-center flex-1\">\r\n                    <Button\r\n                      type=\"text\"\r\n                      icon={<EditOutlined />}\r\n                      size=\"small\"\r\n                      className=\"!w-4 !h-4 !p-0 !border-0 !bg-transparent !text-[#595959] hover:!text-blue-500 hover:!bg-transparent focus:!bg-transparent !shadow-none\"\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        onEditSession(session);\r\n                      }}\r\n                    />\r\n                  </div>\r\n                  <div className=\"w-px h-5 bg-[rgba(0, 0, 0, 0.04)]\" />\r\n                  <div className=\"flex items-center justify-center flex-1\">\r\n                    <Button\r\n                      type=\"text\"\r\n                      icon={<DownloadOutlined />}\r\n                      size=\"small\"\r\n                      className=\"!w-4 !h-4 !p-0 !border-0 !bg-transparent !text-[#595959] hover:!text-blue-500 hover:!bg-transparent focus:!bg-transparent !shadow-none disabled:!text-gray-300\"\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        onExportSession(session);\r\n                      }}\r\n                      disabled={session.events.length === 0}\r\n                    />\r\n                  </div>\r\n                  <div className=\"w-px h-5 bg-[rgba(0, 0, 0, 0.04)]\" />\r\n                  <div className=\"flex items-center justify-center flex-1\">\r\n                    <Popconfirm\r\n                      title=\"Delete session\"\r\n                      description=\"Are you sure you want to delete this session?\"\r\n                      onConfirm={(e) => {\r\n                        e?.stopPropagation();\r\n                        onDeleteSession(session.id);\r\n                      }}\r\n                      onCancel={(e) => e?.stopPropagation()}\r\n                    >\r\n                      <Button\r\n                        type=\"text\"\r\n                        danger\r\n                        icon={<DeleteOutlined />}\r\n                        size=\"small\"\r\n                        className=\"!w-4 !h-4 !p-0 !border-0 !bg-transparent !text-[#595959] hover:!text-red-500 hover:!bg-transparent focus:!bg-transparent !shadow-none\"\r\n                        onClick={(e) => e.stopPropagation()}\r\n                      />\r\n                    </Popconfirm>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </List.Item>\r\n          )}\r\n        />\r\n      )}\r\n\r\n      <Button\r\n        type=\"primary\"\r\n        className=\"!fixed bottom-4 left-1/2 transform -translate-x-1/2 z-[1000] !h-[40px] !py-[12px] !px-[16px] !rounded-[48px]\"\r\n        disabled={!runButtonEnabled}\r\n        // className=\"!fixed bottom-4 left-1/2 transform -translate-x-1/2 z-[1000] flex items-center justify-center gap-[10px] text-[14px] text-white w-[172px] h-[40px] rounded-[48px] border py-[12px] px-[16px]\"\r\n        icon={<PlusOutlined className=\"stroke-[2]\" />}\r\n        onClick={handleCreateNewSession}\r\n      >\r\n        New Recording\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n","import { Button, Form, Input, Modal, Space } from 'antd';\r\nimport type React from 'react';\r\nimport type { RecordingSession } from '../../../store';\r\nimport { generateDefaultSessionName } from '../utils';\r\n\r\ninterface SessionModalsProps {\r\n  // Create modal\r\n  // isCreateModalVisible: boolean;\r\n  // setIsCreateModalVisible: (visible: boolean) => void;\r\n  // onCreateSession: (values: { name: string; description?: string }) => void;\r\n  // createForm: any;\r\n\r\n  // Edit modal\r\n  isEditModalVisible: boolean;\r\n  setIsEditModalVisible: (visible: boolean) => void;\r\n  onUpdateSession: (values: { name: string; description?: string }) => void;\r\n  editForm: any;\r\n  // editingSession: RecordingSession | null;\r\n  setEditingSession: (session: RecordingSession | null) => void;\r\n}\r\n\r\nexport const SessionModals: React.FC<SessionModalsProps> = ({\r\n  isEditModalVisible,\r\n  setIsEditModalVisible,\r\n  onUpdateSession,\r\n  editForm,\r\n  setEditingSession,\r\n}) => {\r\n  return (\r\n    <>\r\n      {/* Edit Session Modal */}\r\n      <Modal\r\n        title=\"Edit Recording Session\"\r\n        open={isEditModalVisible}\r\n        onCancel={() => {\r\n          setIsEditModalVisible(false);\r\n          setEditingSession(null);\r\n          editForm.resetFields();\r\n        }}\r\n        footer={null}\r\n        className=\"session-modal\"\r\n      >\r\n        <Form form={editForm} layout=\"vertical\" onFinish={onUpdateSession}>\r\n          <Form.Item\r\n            name=\"name\"\r\n            label=\"Session Name\"\r\n            rules={[{ required: true, message: 'Please enter a session name' }]}\r\n          >\r\n            <Input placeholder=\"Enter session name\" />\r\n          </Form.Item>\r\n          <Form.Item name=\"description\" label=\"Description (Optional)\">\r\n            <Input.TextArea placeholder=\"Enter session description\" rows={3} />\r\n          </Form.Item>\r\n          <Form.Item style={{ marginBottom: 0, textAlign: 'right' }}>\r\n            <Space>\r\n              <Button\r\n                onClick={() => {\r\n                  setIsEditModalVisible(false);\r\n                  setEditingSession(null);\r\n                  editForm.resetFields();\r\n                }}\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                Update Session\r\n              </Button>\r\n            </Space>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n","import type { ChromeRecordedEvent } from '@sqai/recorder';\r\nimport { message } from 'antd';\r\nimport { useEffect } from 'react';\r\nimport type { RecordingSession } from '../../../store';\r\nimport { recordLogger } from '../logger';\r\n\r\nexport const useLifecycleCleanup = (\r\n  isRecording: boolean,\r\n  stopRecording: () => Promise<void>,\r\n  setIsRecording: (recording: boolean) => Promise<void>,\r\n  currentSessionId: string | null,\r\n  getCurrentSession: () => RecordingSession | null,\r\n  updateSession: (\r\n    sessionId: string,\r\n    updates: Partial<RecordingSession>,\r\n  ) => void,\r\n  events: ChromeRecordedEvent[], // Add events parameter to save current events\r\n  emergencySaveEvents: (events?: ChromeRecordedEvent[]) => Promise<void>, // Add emergency save function\r\n) => {\r\n  // Monitor visibility changes for the extension popup\r\n  useEffect(() => {\r\n    if (!isRecording) return;\r\n\r\n    // Handle when user navigates away from extension popup\r\n    const handleVisibilityChange = () => {\r\n      if (document.visibilityState === 'hidden' && isRecording) {\r\n        recordLogger.info('Extension popup hidden, stopping recording');\r\n        stopRecording().then(() => {\r\n          message.warning('Recording stopped - left extension popup');\r\n        });\r\n      }\r\n    };\r\n\r\n    document.addEventListener('visibilitychange', handleVisibilityChange);\r\n\r\n    // Handle potential popup window close\r\n    const handleBeforeUnload = () => {\r\n      if (isRecording) {\r\n        recordLogger.info(\r\n          'Extension popup closing, stopping recording synchronously and saving events',\r\n        );\r\n        // For unload events, we need to stop synchronously and save immediately\r\n        setIsRecording(false).catch(console.error);\r\n\r\n        // Emergency save current events\r\n        emergencySaveEvents(events).catch(console.error);\r\n\r\n        if (currentSessionId) {\r\n          const session = getCurrentSession();\r\n          if (session) {\r\n            // Save current events before closing\r\n            updateSession(currentSessionId, {\r\n              status: 'completed',\r\n              events: [...events], // Save current recording events\r\n              updatedAt: Date.now(),\r\n            });\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener('beforeunload', handleBeforeUnload);\r\n\r\n    return () => {\r\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n      window.removeEventListener('beforeunload', handleBeforeUnload);\r\n    };\r\n  }, [\r\n    isRecording,\r\n    stopRecording,\r\n    setIsRecording,\r\n    currentSessionId,\r\n    getCurrentSession,\r\n    updateSession,\r\n  ]);\r\n\r\n  // Cleanup on component unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      // Clean up any ongoing recording when component unmounts\r\n      if (isRecording) {\r\n        recordLogger.info(\r\n          'Component unmounting, cleaning up recording and saving events',\r\n        );\r\n        setIsRecording(false).catch(console.error);\r\n\r\n        // Emergency save current events\r\n        emergencySaveEvents(events).catch(console.error);\r\n\r\n        if (currentSessionId) {\r\n          const session = getCurrentSession();\r\n          if (session) {\r\n            // Save current events before unmounting\r\n            updateSession(currentSessionId, {\r\n              status: 'completed',\r\n              events: [...events], // Save current recording events\r\n              updatedAt: Date.now(),\r\n            });\r\n          }\r\n        }\r\n      }\r\n    };\r\n  }, []); // Empty dependency array means this runs only on unmount\r\n};\r\n","import type { ChromeRecordedEvent } from '@sqai/recorder';\r\nimport { globalModelConfigManager } from '@sqai/shared/env';\r\nimport { message } from 'antd';\r\nimport { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { type RecordingSession, useRecordStore } from '../../../store';\r\nimport {\r\n  clearDescriptionCache,\r\n  optimizeEvent,\r\n} from '../../../utils/eventOptimizer';\r\nimport { dbManager } from '../../../utils/indexedDB';\r\nimport { recordLogger } from '../logger';\r\nimport { type RecordMessage, isChromeExtension, safeChromeAPI } from '../types';\r\nimport {\r\n  cleanupPreviousRecordings,\r\n  ensureScriptInjected,\r\n  exportEventsToFile,\r\n  generateRecordTitle,\r\n  generateSessionName,\r\n} from '../utils';\r\n\r\n/**\r\n * Hook to manage recording controls and handle recording events\r\n */\r\nexport const useRecordingControl = (\r\n  currentTab: chrome.tabs.Tab | null,\r\n  currentSessionId: string | null,\r\n  getCurrentSession: () => RecordingSession | null,\r\n  updateSession: (\r\n    sessionId: string,\r\n    updates: Partial<RecordingSession>,\r\n  ) => void,\r\n  createNewSession: (sessionName?: string) => RecordingSession,\r\n) => {\r\n  const {\r\n    isRecording,\r\n    events,\r\n    setIsRecording,\r\n    addEvent,\r\n    updateEvent,\r\n    clearEvents,\r\n    setEvents,\r\n    emergencySaveEvents,\r\n  } = useRecordStore();\r\n\r\n  const isExtensionMode = isChromeExtension();\r\n  const recordContainerRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Real-time event persistence during recording\r\n  const persistEventToSession = useCallback(\r\n    async (event: ChromeRecordedEvent) => {\r\n      if (!currentSessionId || !isRecording) return;\r\n\r\n      try {\r\n        const session = getCurrentSession();\r\n        if (session) {\r\n          const updatedEvents = [...session.events, event];\r\n          updateSession(currentSessionId, {\r\n            events: updatedEvents,\r\n            updatedAt: Date.now(),\r\n          });\r\n        }\r\n      } catch (error) {\r\n        recordLogger.error(\r\n          'Failed to persist event to session',\r\n          undefined,\r\n          error,\r\n        );\r\n      }\r\n    },\r\n    [currentSessionId, isRecording, getCurrentSession, updateSession],\r\n  );\r\n\r\n  // Define stopRecording early using useCallback\r\n  const stopRecording = useCallback(async () => {\r\n    recordLogger.info('Stopping recording', {\r\n      sessionId: currentSessionId || undefined,\r\n      tabId: currentTab?.id,\r\n      events,\r\n      session: getCurrentSession(),\r\n    });\r\n\r\n    if (!isExtensionMode) {\r\n      await setIsRecording(false);\r\n      return;\r\n    }\r\n\r\n    if (!currentTab?.id) {\r\n      recordLogger.error('No active tab found for stopping recording');\r\n      message.error('No active tab found');\r\n      return;\r\n    }\r\n\r\n    // Set isRecording to false immediately to prevent UI from showing recording state\r\n    await setIsRecording(false);\r\n\r\n    try {\r\n      // Check if content script is still available before sending message\r\n      try {\r\n        // Send message to content script to stop recording\r\n        await safeChromeAPI.tabs.sendMessage(currentTab.id, {\r\n          action: 'stop',\r\n          sessionId: currentSessionId,\r\n        });\r\n      } catch (error: any) {\r\n        // If content script is not available, just stop recording on our side\r\n        if (error.message?.includes('Receiving end does not exist')) {\r\n          message.warning('Recording stopped (page may have been refreshed)');\r\n        } else {\r\n          recordLogger.error('Error sending stop message', undefined, error);\r\n          throw error;\r\n        }\r\n      }\r\n\r\n      // Update session with final events and status\r\n      if (currentSessionId) {\r\n        const session = getCurrentSession();\r\n        if (session) {\r\n          const duration =\r\n            events.length > 0\r\n              ? events[events.length - 1].timestamp - events[0].timestamp\r\n              : 0;\r\n\r\n          // Generate title and description if we have events\r\n          const updateData: Partial<RecordingSession> = {\r\n            status: 'completed',\r\n            events: [...events],\r\n            duration,\r\n            updatedAt: Date.now(),\r\n          };\r\n\r\n          // Generate AI title and description if we have events\r\n          if (events.length > 3 && !session.name && !session.description) {\r\n            recordLogger.info('Generating AI title', {\r\n              eventsCount: events.length,\r\n            });\r\n            const hideLoadingMessage = message.loading(\r\n              'Generating recording title and description...',\r\n              0,\r\n            );\r\n            try {\r\n              const { title, description } = await generateRecordTitle(\r\n                events,\r\n                globalModelConfigManager.getModelConfig('default'),\r\n              );\r\n\r\n              if (title) {\r\n                updateData.name = title;\r\n                recordLogger.success('AI title generated');\r\n              }\r\n              if (description) {\r\n                updateData.description = description;\r\n              }\r\n            } catch (error) {\r\n              recordLogger.error(\r\n                'Failed to generate title/description',\r\n                undefined,\r\n                error,\r\n              );\r\n            } finally {\r\n              hideLoadingMessage();\r\n            }\r\n          }\r\n\r\n          updateSession(currentSessionId, updateData);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      recordLogger.error('Failed to stop recording', undefined, error);\r\n      message.error(`Failed to stop recording: ${error}`);\r\n      // Still stop recording on our side even if there was an error\r\n      await setIsRecording(false);\r\n    }\r\n  }, [\r\n    isExtensionMode,\r\n    currentTab,\r\n    setIsRecording,\r\n    currentSessionId,\r\n    getCurrentSession,\r\n    events,\r\n    updateSession,\r\n  ]);\r\n\r\n  // Monitor tab updates for page refresh/navigation detection\r\n  useEffect(() => {\r\n    if (!currentTab?.id || !isRecording) return;\r\n\r\n    const handleTabUpdate = async (\r\n      tabId: number,\r\n      changeInfo: chrome.tabs.TabChangeInfo,\r\n    ) => {\r\n      if (\r\n        currentTab?.id === tabId &&\r\n        changeInfo.status === 'loading' &&\r\n        isRecording\r\n      ) {\r\n        // Page is starting to load - prepare for potential event loss\r\n        recordLogger.info(\r\n          'Navigation loading detected, preparing event buffer',\r\n          {\r\n            tabId,\r\n            url: changeInfo.url,\r\n            currentEvents: events.length,\r\n          },\r\n        );\r\n\r\n        const session = getCurrentSession();\r\n        if (session) {\r\n          if (currentTab?.id) {\r\n            await ensureScriptInjected(currentTab);\r\n            await safeChromeAPI.tabs.sendMessage(currentTab.id, {\r\n              action: 'start',\r\n              sessionId: session.id,\r\n            });\r\n            recordLogger.info('Recording re-established after navigation');\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    safeChromeAPI.tabs.onUpdated.addListener(handleTabUpdate);\r\n\r\n    return () => {\r\n      safeChromeAPI.tabs.onUpdated.removeListener(handleTabUpdate);\r\n    };\r\n  }, [\r\n    currentTab,\r\n    isRecording,\r\n    stopRecording,\r\n    getCurrentSession,\r\n    events.length,\r\n    addEvent,\r\n  ]);\r\n\r\n  // Start recording\r\n  const startRecording = useCallback(\r\n    async (sessionId: string) => {\r\n      recordLogger.info('Starting recording', {\r\n        tabId: currentTab?.id,\r\n        sessionId,\r\n      });\r\n\r\n      if (!isExtensionMode) {\r\n        recordLogger.error('Not in extension environment');\r\n        message.error(\r\n          'Recording is only available in Chrome extension environment',\r\n        );\r\n        return;\r\n      }\r\n\r\n      // Check if there's a current session or use provided sessionId\r\n      let sessionToUse: RecordingSession | null = null;\r\n\r\n      // Use the specific session ID provided\r\n      const specificSession = await dbManager.getSession(sessionId);\r\n      if (specificSession) {\r\n        sessionToUse = specificSession;\r\n      } else {\r\n        recordLogger.error('Specified session not found', { sessionId });\r\n        message.error('Specified session not found');\r\n        return;\r\n      }\r\n\r\n      // Update session status to recording\r\n      updateSession(sessionToUse.id, {\r\n        status: 'recording',\r\n        url: currentTab?.url,\r\n        updatedAt: Date.now(),\r\n      });\r\n\r\n      if (!currentTab?.id) {\r\n        recordLogger.error('No active tab found for starting recording');\r\n        message.error('No active tab found');\r\n        return;\r\n      }\r\n\r\n      // Always ensure script is injected before starting\r\n      await ensureScriptInjected(currentTab);\r\n\r\n      try {\r\n        // Clean up any previous recording instances first\r\n        await cleanupPreviousRecordings();\r\n\r\n        // Clear the AI description cache to avoid using old descriptions\r\n        clearDescriptionCache();\r\n\r\n        // Send message to content script to start recording\r\n        await safeChromeAPI.tabs.sendMessage(currentTab.id, {\r\n          action: 'start',\r\n          sessionId: sessionToUse.id,\r\n        });\r\n        await setIsRecording(true);\r\n\r\n        // Only clear events if this is a new session or if the session has no existing events\r\n        // This allows resuming recording on existing sessions without losing previous events\r\n        if (sessionToUse.events.length === 0) {\r\n          clearEvents(); // Clear previous events for new recording\r\n        } else {\r\n          // Load existing events for continuation\r\n          setEvents(sessionToUse.events);\r\n        }\r\n        message.success('Recording started');\r\n      } catch (error) {\r\n        recordLogger.error('Failed to start recording', undefined, error);\r\n        message.error(\r\n          'Failed to start recording. Please ensure you are on a regular web page (not Chrome internal pages) and try again.',\r\n        );\r\n      }\r\n    },\r\n    [\r\n      isExtensionMode,\r\n      getCurrentSession,\r\n      createNewSession,\r\n      updateSession,\r\n      currentTab,\r\n      setIsRecording,\r\n      clearEvents,\r\n      setEvents,\r\n    ],\r\n  );\r\n\r\n  // Export current events\r\n  const exportEvents = useCallback(() => {\r\n    if (events.length === 0) {\r\n      message.warning('No events to export');\r\n      return;\r\n    }\r\n\r\n    const currentSession = getCurrentSession();\r\n    const sessionName = currentSession\r\n      ? currentSession.name\r\n      : 'current-recording';\r\n\r\n    exportEventsToFile(events, sessionName);\r\n  }, [events, getCurrentSession]);\r\n\r\n  // Auto-scroll to bottom when new events are added during recording\r\n  useEffect(() => {\r\n    if (isRecording && recordContainerRef.current && events.length > 0) {\r\n      const container = recordContainerRef.current;\r\n\r\n      // Use requestAnimationFrame for smoother animation\r\n      const smoothScrollToBottom = () => {\r\n        const targetScrollTop = container.scrollHeight - container.clientHeight;\r\n        const currentScrollTop = container.scrollTop;\r\n        const distance = targetScrollTop - currentScrollTop;\r\n\r\n        if (Math.abs(distance) < 1) {\r\n          container.scrollTop = targetScrollTop;\r\n          return;\r\n        }\r\n\r\n        // Smooth scroll animation\r\n        container.scrollTo({\r\n          top: targetScrollTop,\r\n          behavior: 'smooth',\r\n        });\r\n      };\r\n\r\n      // Use multiple RAF to ensure DOM is fully updated\r\n      requestAnimationFrame(() => {\r\n        requestAnimationFrame(smoothScrollToBottom);\r\n      });\r\n    }\r\n  }, [events.length, isRecording]);\r\n\r\n  // Set up message listener for content script with enhanced error handling\r\n  useEffect(() => {\r\n    let port: chrome.runtime.Port | null = null;\r\n    let reconnectTimer: NodeJS.Timeout | null = null;\r\n    let eventBuffer: ChromeRecordedEvent[] = [];\r\n    let isConnected = false;\r\n\r\n    const connectToServiceWorker = () => {\r\n      try {\r\n        // Connect to service worker for receiving events\r\n        port = safeChromeAPI.runtime.connect({\r\n          name: 'record-events',\r\n        }) as chrome.runtime.Port;\r\n        isConnected = true;\r\n\r\n        if (\r\n          port &&\r\n          'onDisconnect' in port &&\r\n          typeof port.onDisconnect?.addListener === 'function'\r\n        ) {\r\n          port.onDisconnect.addListener(() => {\r\n            isConnected = false;\r\n            if (chrome.runtime.lastError) {\r\n              recordLogger.error(\r\n                'Port disconnect error',\r\n                undefined,\r\n                chrome.runtime.lastError,\r\n              );\r\n            }\r\n\r\n            // recordLogger.warn(\r\n            //   'Service worker port disconnected, attempting reconnection',\r\n            // );\r\n\r\n            // Attempt to reconnect after a delay\r\n            if (isRecording && currentSessionId) {\r\n              reconnectTimer = setTimeout(() => {\r\n                recordLogger.info('Attempting to reconnect to service worker');\r\n                connectToServiceWorker();\r\n              }, 1000);\r\n            }\r\n          });\r\n        }\r\n\r\n        const processEventData = async (eventData: any) => {\r\n          const { element, ...cleanEventData } = eventData;\r\n          return await optimizeEvent(\r\n            cleanEventData as ChromeRecordedEvent,\r\n            updateEvent,\r\n          );\r\n        };\r\n\r\n        const handleMessage = async (message: RecordMessage) => {\r\n          // Validate session ID - only process events from current recording session\r\n          if (\r\n            message.sessionId &&\r\n            currentSessionId &&\r\n            message.sessionId !== currentSessionId\r\n          ) {\r\n            recordLogger.warn(\r\n              'Received event from different session, ignoring',\r\n              {\r\n                messageSessionId: message.sessionId,\r\n                currentSessionId,\r\n              },\r\n            );\r\n            return;\r\n          }\r\n\r\n          if (message.action === 'events' && Array.isArray(message.data)) {\r\n            const eventsData = await Promise.all(\r\n              message.data.map(processEventData),\r\n            );\r\n\r\n            // If we have buffered events, merge them\r\n            if (eventBuffer.length > 0) {\r\n              recordLogger.info('Merging buffered events with new events', {\r\n                bufferedCount: eventBuffer.length,\r\n                newCount: eventsData.length,\r\n              });\r\n              const mergedEvents = [...eventBuffer, ...eventsData];\r\n              setEvents(mergedEvents);\r\n              eventBuffer = [];\r\n            } else {\r\n              setEvents(eventsData);\r\n            }\r\n          } else if (\r\n            message.action === 'event' &&\r\n            message.data &&\r\n            !Array.isArray(message.data)\r\n          ) {\r\n            const optimizedEvent = await processEventData(message.data);\r\n\r\n            if (isConnected) {\r\n              addEvent(optimizedEvent);\r\n              // Real-time persistence during recording\r\n              await persistEventToSession(optimizedEvent);\r\n            } else {\r\n              // Buffer events if not connected\r\n              recordLogger.info('Buffering event due to disconnected port');\r\n              eventBuffer.push(optimizedEvent);\r\n            }\r\n          } else {\r\n            recordLogger.warn('Unhandled message format', {\r\n              action: message.action,\r\n            });\r\n          }\r\n        };\r\n\r\n        // Listen to messages via port\r\n        if (port && 'onMessage' in port) {\r\n          port.onMessage.addListener(handleMessage);\r\n        }\r\n      } catch (error) {\r\n        recordLogger.error(\r\n          'Failed to connect to service worker',\r\n          undefined,\r\n          error,\r\n        );\r\n        isConnected = false;\r\n\r\n        // Retry connection\r\n        if (isRecording && currentSessionId) {\r\n          reconnectTimer = setTimeout(connectToServiceWorker, 2000);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Initial connection\r\n    connectToServiceWorker();\r\n\r\n    return () => {\r\n      isConnected = false;\r\n      if (port && 'disconnect' in port) {\r\n        port.disconnect();\r\n      }\r\n      if (reconnectTimer) {\r\n        clearTimeout(reconnectTimer);\r\n      }\r\n\r\n      // Save any remaining buffered events\r\n      if (eventBuffer.length > 0) {\r\n        recordLogger.info('Saving buffered events on cleanup', {\r\n          bufferedCount: eventBuffer.length,\r\n        });\r\n        eventBuffer.forEach((event) => addEvent(event));\r\n      }\r\n    };\r\n  }, [\r\n    addEvent,\r\n    setEvents,\r\n    updateEvent,\r\n    currentSessionId,\r\n    isRecording,\r\n    persistEventToSession,\r\n  ]);\r\n\r\n  return {\r\n    // State\r\n    isRecording,\r\n    events,\r\n    isExtensionMode,\r\n    recordContainerRef,\r\n\r\n    // Actions\r\n    startRecording,\r\n    stopRecording,\r\n    clearEvents,\r\n    exportEvents,\r\n    setIsRecording,\r\n    setEvents,\r\n    emergencySaveEvents,\r\n  };\r\n};\r\n","import { message } from 'antd';\r\nimport { useCallback } from 'react';\r\nimport {\r\n  type RecordingSession,\r\n  useRecordStore,\r\n  useRecordingSessionStore,\r\n} from '../../../store';\r\nimport { recordLogger } from '../logger';\r\nimport {\r\n  exportAllEventsToZip,\r\n  exportEventsToFile,\r\n  generateDefaultSessionName,\r\n} from '../utils';\r\n\r\nexport const useRecordingSession = (currentTab: chrome.tabs.Tab | null) => {\r\n  const {\r\n    sessions,\r\n    currentSessionId,\r\n    addSession,\r\n    updateSession,\r\n    deleteSession,\r\n    setCurrentSession,\r\n    getCurrentSession,\r\n  } = useRecordingSessionStore();\r\n\r\n  const { clearEvents } = useRecordStore();\r\n\r\n  // Create session utility function\r\n  const createNewSession = useCallback(\r\n    (sessionName?: string) => {\r\n      const name = sessionName || generateDefaultSessionName();\r\n      recordLogger.info('Creating new session', { action: 'create' });\r\n\r\n      // Pause other active sessions\r\n      sessions.forEach((session) => {\r\n        if (session.status === 'recording') {\r\n          updateSession(session.id, { status: 'idle' });\r\n          recordLogger.info('Paused session', { sessionId: session.id });\r\n        }\r\n      });\r\n\r\n      const newSession: RecordingSession = {\r\n        id: `session-${Date.now()}`,\r\n        name,\r\n        createdAt: Date.now(),\r\n        updatedAt: Date.now(),\r\n        events: [],\r\n        status: 'idle',\r\n        url: currentTab?.url,\r\n      };\r\n\r\n      addSession(newSession);\r\n      setCurrentSession(newSession.id);\r\n      clearEvents();\r\n\r\n      recordLogger.success('Session created', { sessionId: newSession.id });\r\n      return newSession;\r\n    },\r\n    [\r\n      currentTab,\r\n      addSession,\r\n      setCurrentSession,\r\n      clearEvents,\r\n      sessions,\r\n      updateSession,\r\n    ],\r\n  );\r\n\r\n  // Create new session with form data\r\n  const handleCreateSession = useCallback(\r\n    async (values: {\r\n      name: string;\r\n      description?: string;\r\n    }) => {\r\n      recordLogger.info('Creating session with form data', {\r\n        action: 'create',\r\n      });\r\n\r\n      // Pause other active sessions\r\n      sessions.forEach((session) => {\r\n        if (session.status === 'recording') {\r\n          updateSession(session.id, { status: 'idle' });\r\n          recordLogger.info('Paused session', { sessionId: session.id });\r\n        }\r\n      });\r\n\r\n      const newSession: RecordingSession = {\r\n        id: `session-${Date.now()}`,\r\n        name: values.name,\r\n        description: values.description,\r\n        createdAt: Date.now(),\r\n        updatedAt: Date.now(),\r\n        events: [],\r\n        status: 'idle',\r\n        url: currentTab?.url,\r\n      };\r\n\r\n      addSession(newSession);\r\n      setCurrentSession(newSession.id);\r\n      clearEvents();\r\n      recordLogger.success('Session created from form', {\r\n        sessionId: newSession.id,\r\n      });\r\n      return newSession;\r\n    },\r\n    [\r\n      currentTab,\r\n      addSession,\r\n      setCurrentSession,\r\n      clearEvents,\r\n      sessions,\r\n      updateSession,\r\n    ],\r\n  );\r\n\r\n  // Update session\r\n  const handleUpdateSession = useCallback(\r\n    (sessionId: string, updates: Partial<RecordingSession>) => {\r\n      recordLogger.info('Updating session', {\r\n        sessionId,\r\n        events: updates.events,\r\n        eventsCount: updates.events?.length,\r\n      });\r\n\r\n      updateSession(sessionId, {\r\n        ...updates,\r\n        updatedAt: Date.now(),\r\n      });\r\n    },\r\n    [updateSession],\r\n  );\r\n\r\n  // Delete session\r\n  const handleDeleteSession = useCallback(\r\n    (sessionId: string) => {\r\n      const isCurrentSession = currentSessionId === sessionId;\r\n      recordLogger.info('Deleting session', {\r\n        sessionId,\r\n        action: isCurrentSession ? 'delete-current' : 'delete',\r\n      });\r\n\r\n      deleteSession(sessionId);\r\n      if (isCurrentSession) {\r\n        setCurrentSession(null);\r\n        clearEvents();\r\n      }\r\n      // message.success('Session deleted successfully');\r\n    },\r\n    [deleteSession, currentSessionId, setCurrentSession, clearEvents],\r\n  );\r\n\r\n  // Select session (set as current)\r\n  const handleSelectSession = useCallback(\r\n    (session: RecordingSession) => {\r\n      recordLogger.info('Selecting session', {\r\n        sessionId: session.id,\r\n        eventsCount: session.events.length,\r\n      });\r\n\r\n      setCurrentSession(session.id);\r\n    },\r\n    [setCurrentSession],\r\n  );\r\n\r\n  // Export session events\r\n  const handleExportSession = useCallback((session: RecordingSession) => {\r\n    if (session.events.length === 0) {\r\n      recordLogger.warn('No events to export', { sessionId: session.id });\r\n      message.warning('No events to export in this session');\r\n      return;\r\n    }\r\n\r\n    recordLogger.info('Exporting session', {\r\n      sessionId: session.id,\r\n      eventsCount: session.events.length,\r\n    });\r\n    exportEventsToFile(session.events, session.name);\r\n  }, []);\r\n\r\n  // Export all sessions events to ZIP\r\n  const handleExportAllEvents = useCallback(async () => {\r\n    recordLogger.info('Exporting all events', {\r\n      sessionsCount: sessions.length,\r\n    });\r\n    const hideLoading = message.loading(\r\n      'Exporting all events to ZIP file...',\r\n      0,\r\n    );\r\n    try {\r\n      await exportAllEventsToZip(sessions);\r\n      message.success('Export all events to ZIP file successfully');\r\n    } catch (error) {\r\n      message.error('Failed to export all events to ZIP file');\r\n      throw error;\r\n    } finally {\r\n      hideLoading();\r\n    }\r\n  }, [sessions]);\r\n\r\n  return {\r\n    // State\r\n    sessions,\r\n    currentSessionId,\r\n    getCurrentSession,\r\n    setCurrentSession,\r\n\r\n    // Actions\r\n    createNewSession,\r\n    handleCreateSession,\r\n    handleUpdateSession,\r\n    handleDeleteSession,\r\n    handleSelectSession,\r\n    handleExportSession,\r\n    handleExportAllEvents,\r\n  };\r\n};\r\n","import { useCallback, useEffect, useState } from 'react';\r\nimport { dbManager } from '../../../utils/indexedDB';\r\nimport { recordLogger } from '../logger';\r\nimport { safeChromeAPI } from '../types';\r\n\r\nexport const useTabMonitoring = () => {\r\n  const [currentTab, setCurrentTab] = useState<chrome.tabs.Tab | null>(null);\r\n  const [navigationState, setNavigationState] = useState<{\r\n    isNavigating: boolean;\r\n    lastUrl: string | null;\r\n    lastTabId: number | null;\r\n    wasRecordingBeforeNavigation: boolean;\r\n  }>({\r\n    isNavigating: false,\r\n    lastUrl: null,\r\n    lastTabId: null,\r\n    wasRecordingBeforeNavigation: false,\r\n  });\r\n\r\n  // Save recording state before navigation\r\n  const saveRecordingStateBeforeNavigation = useCallback(\r\n    async (tabId: number, url?: string) => {\r\n      try {\r\n        const isRecording = await dbManager.getRecordingState();\r\n        const currentSessionId = await dbManager.getCurrentSessionId();\r\n\r\n        if (isRecording && currentSessionId) {\r\n          recordLogger.info('Saving recording state before navigation', {\r\n            tabId,\r\n            url,\r\n            sessionId: currentSessionId,\r\n          });\r\n\r\n          // Save navigation context for recovery\r\n          await dbManager.setConfig({\r\n            wasRecordingBeforeNavigation: true,\r\n            lastRecordingTabId: tabId,\r\n            lastRecordingUrl: url,\r\n            lastRecordingSessionId: currentSessionId,\r\n            lastNavigationTime: Date.now(),\r\n          });\r\n\r\n          setNavigationState((prev) => ({\r\n            ...prev,\r\n            isNavigating: true,\r\n            lastUrl: url || null,\r\n            lastTabId: tabId,\r\n            wasRecordingBeforeNavigation: true,\r\n          }));\r\n        }\r\n      } catch (error) {\r\n        recordLogger.error(\r\n          'Failed to save recording state before navigation',\r\n          undefined,\r\n          error,\r\n        );\r\n      }\r\n    },\r\n    [],\r\n  );\r\n\r\n  // Check for recording recovery after navigation\r\n  const checkRecordingRecovery = useCallback(async (tab: chrome.tabs.Tab) => {\r\n    try {\r\n      const config = await dbManager.getConfig();\r\n      const timeSinceNavigation = Date.now() - (config.lastNavigationTime || 0);\r\n\r\n      // Only attempt recovery within 30 seconds of navigation and if flag is set\r\n      if (\r\n        config.wasRecordingBeforeNavigation &&\r\n        config.lastRecordingSessionId &&\r\n        timeSinceNavigation < 30000 &&\r\n        timeSinceNavigation > 100 // Avoid immediate triggers\r\n      ) {\r\n        recordLogger.info('Potential recording recovery detected', {\r\n          sessionId: config.lastRecordingSessionId,\r\n          timeSinceNavigation,\r\n          currentUrl: tab.url,\r\n          lastUrl: config.lastRecordingUrl,\r\n        });\r\n\r\n        return {\r\n          canRecover: true,\r\n          sessionId: config.lastRecordingSessionId,\r\n          lastUrl: config.lastRecordingUrl,\r\n          timeSinceNavigation,\r\n        };\r\n      }\r\n    } catch (error) {\r\n      recordLogger.error(\r\n        'Failed to check recording recovery',\r\n        undefined,\r\n        error,\r\n      );\r\n    }\r\n\r\n    return { canRecover: false };\r\n  }, []);\r\n\r\n  // Get current active tab and set up listeners for tab changes\r\n  useEffect(() => {\r\n    const updateCurrentTab = async () => {\r\n      safeChromeAPI.tabs.query(\r\n        { active: true, currentWindow: true },\r\n        async (tabs) => {\r\n          if (tabs[0]) {\r\n            recordLogger.info('Current tab found', {\r\n              tabId: tabs[0].id,\r\n              url: tabs[0].url,\r\n            });\r\n            setCurrentTab(tabs[0]);\r\n          } else {\r\n            recordLogger.warn('No active tab found');\r\n            setCurrentTab(null);\r\n          }\r\n        },\r\n      );\r\n    };\r\n\r\n    // Initial query for current tab\r\n    updateCurrentTab();\r\n\r\n    // Listen for tab activation changes\r\n    const handleTabActivated = (activeInfo: chrome.tabs.TabActiveInfo) => {\r\n      recordLogger.info('Tab activated', { tabId: activeInfo.tabId });\r\n      updateCurrentTab();\r\n    };\r\n\r\n    // Listen for tab updates (URL changes, etc.)\r\n    const handleTabUpdated = async (\r\n      tabId: number,\r\n      changeInfo: chrome.tabs.TabChangeInfo,\r\n      tab: chrome.tabs.Tab,\r\n    ) => {\r\n      // Enhanced navigation detection for recording state preservation\r\n      if (tab.active && changeInfo.status === 'loading' && changeInfo.url) {\r\n        recordLogger.info('Navigation detected, saving recording state', {\r\n          tabId,\r\n          url: changeInfo.url,\r\n          fromUrl: tab.url,\r\n        });\r\n        await saveRecordingStateBeforeNavigation(tabId, changeInfo.url);\r\n\r\n        // Set navigation state immediately\r\n        setNavigationState((prev) => ({\r\n          ...prev,\r\n          isNavigating: true,\r\n          lastUrl: changeInfo.url || null,\r\n          lastTabId: tabId,\r\n        }));\r\n      }\r\n\r\n      // Only update if it's the currently active tab and has completed loading\r\n      if (tab.active && changeInfo.status === 'complete') {\r\n        recordLogger.info('Navigation completed', {\r\n          tabId,\r\n          url: tab.url,\r\n          wasNavigating: navigationState.isNavigating,\r\n        });\r\n\r\n        setCurrentTab(tab);\r\n\r\n        // Reset navigation state when navigation completes\r\n        setNavigationState((prev) => ({\r\n          ...prev,\r\n          isNavigating: false,\r\n        }));\r\n\r\n        // Check for potential recording recovery after a short delay\r\n        setTimeout(async () => {\r\n          const recoveryInfo = await checkRecordingRecovery(tab);\r\n          if (recoveryInfo.canRecover) {\r\n            recordLogger.info(\r\n              'Recording recovery opportunity detected',\r\n              recoveryInfo,\r\n            );\r\n          }\r\n        }, 1000);\r\n      }\r\n    };\r\n\r\n    // Listen for window focus changes\r\n    const handleWindowFocusChanged = (windowId: number) => {\r\n      if (windowId !== chrome.windows.WINDOW_ID_NONE) {\r\n        updateCurrentTab();\r\n      }\r\n    };\r\n\r\n    // Add listeners\r\n    safeChromeAPI.tabs.onActivated.addListener(handleTabActivated);\r\n    safeChromeAPI.tabs.onUpdated.addListener(handleTabUpdated);\r\n    safeChromeAPI.windows.onFocusChanged.addListener(handleWindowFocusChanged);\r\n\r\n    // Cleanup listeners on unmount\r\n    return () => {\r\n      safeChromeAPI.tabs.onActivated.removeListener(handleTabActivated);\r\n      safeChromeAPI.tabs.onUpdated.removeListener(handleTabUpdated);\r\n      safeChromeAPI.windows.onFocusChanged.removeListener(\r\n        handleWindowFocusChanged,\r\n      );\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    currentTab,\r\n    setCurrentTab,\r\n    navigationState,\r\n    saveRecordingStateBeforeNavigation,\r\n    checkRecordingRecovery,\r\n  };\r\n};\r\n","/// <reference types=\"chrome\" />\r\nimport { Form, Modal } from 'antd';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport type { RecordingSession } from '../../store';\r\nimport { useRecordStore, useRecordingSessionStore } from '../../store';\r\nimport { RecordDetail } from './components/RecordDetail';\r\nimport { RecordList } from './components/RecordList';\r\nimport { SessionModals } from './components/SessionModals';\r\nimport { useLifecycleCleanup } from './hooks/useLifecycleCleanup';\r\nimport { useRecordingControl } from './hooks/useRecordingControl';\r\nimport { useRecordingSession } from './hooks/useRecordingSession';\r\nimport { useTabMonitoring } from './hooks/useTabMonitoring';\r\nimport { recordLogger } from './logger';\r\nimport type { ViewMode } from './types';\r\nimport './recorder.less';\r\nimport { useEnvConfig } from '@sqai/visualizer';\r\nimport { generateDefaultSessionName } from './utils';\r\n\r\nexport default function Recorder() {\r\n  // Local initialization state\r\n  const [isStoreInitialized, setIsStoreInitialized] = useState(false);\r\n\r\n  // Get stores\r\n  const sessionStore = useRecordingSessionStore();\r\n  const recordStore = useRecordStore();\r\n\r\n  // Environment configuration check\r\n  const { config } = useEnvConfig();\r\n  const configAlreadySet = Object.keys(config || {}).length >= 1;\r\n\r\n  // Initialize stores on component mount\r\n  useEffect(() => {\r\n    let isMounted = true; // Prevent state updates after component unmount\r\n\r\n    const initializeStores = async () => {\r\n      try {\r\n        // Initialize both stores concurrently\r\n        await Promise.all([\r\n          sessionStore.initializeStore(),\r\n          recordStore.initialize(),\r\n        ]);\r\n\r\n        // Only update state if component is still mounted\r\n        if (isMounted) {\r\n          setIsStoreInitialized(true);\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to initialize stores in Recorder:', error);\r\n        // Still set as initialized to prevent blocking the UI\r\n        if (isMounted) {\r\n          setIsStoreInitialized(true);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Initialize only on first mount to avoid infinite loop\r\n    initializeStores();\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []); // Empty dependency array, run only once on component mount\r\n\r\n  // View state management\r\n  const [viewMode, setViewMode] = useState<ViewMode>('list');\r\n\r\n  // Modal state management\r\n  const [isEditModalVisible, setIsEditModalVisible] = useState(false);\r\n  const [editingSession, setEditingSession] = useState<RecordingSession | null>(\r\n    null,\r\n  );\r\n  const [editForm] = Form.useForm();\r\n\r\n  // Initialize tab monitoring to get currentTab\r\n  const { currentTab } = useTabMonitoring();\r\n\r\n  // Initialize recording session management with currentTab\r\n  const sessionHooks = useRecordingSession(currentTab);\r\n  const {\r\n    sessions,\r\n    currentSessionId,\r\n    getCurrentSession,\r\n    setCurrentSession,\r\n    createNewSession,\r\n    handleUpdateSession,\r\n    handleDeleteSession,\r\n    handleExportSession,\r\n    handleExportAllEvents,\r\n  } = sessionHooks;\r\n\r\n  // Initialize recording control with currentTab\r\n  const controlHooks = useRecordingControl(\r\n    currentTab,\r\n    currentSessionId,\r\n    getCurrentSession,\r\n    (sessionId: string, updates: Partial<RecordingSession>) => {\r\n      sessionHooks.handleUpdateSession(sessionId, updates);\r\n    },\r\n    createNewSession,\r\n  );\r\n  const {\r\n    isRecording,\r\n    events,\r\n    isExtensionMode,\r\n    recordContainerRef,\r\n    startRecording,\r\n    stopRecording,\r\n    clearEvents,\r\n    setIsRecording,\r\n    setEvents,\r\n    emergencySaveEvents,\r\n  } = controlHooks;\r\n\r\n  // Initialize lifecycle cleanup\r\n  useLifecycleCleanup(\r\n    isRecording,\r\n    stopRecording,\r\n    setIsRecording,\r\n    currentSessionId,\r\n    getCurrentSession,\r\n    (sessionId: string, updates: Partial<RecordingSession>) => {\r\n      sessionHooks.handleUpdateSession(sessionId, updates);\r\n    },\r\n    events, // Pass current events to save them during cleanup\r\n    emergencySaveEvents, // Pass emergency save function\r\n  );\r\n\r\n  // Load current session events when switching sessions\r\n  useEffect(() => {\r\n    const currentSession = getCurrentSession();\r\n    if (currentSession && currentSession.events.length > 0) {\r\n      setEvents(currentSession.events);\r\n    } else {\r\n      clearEvents();\r\n    }\r\n  }, [currentSessionId, getCurrentSession, setEvents, clearEvents]);\r\n\r\n  // Edit session handler\r\n  const handleEditSession = (session: RecordingSession) => {\r\n    setEditingSession(session);\r\n    editForm.setFieldsValue({\r\n      name: session.name,\r\n      description: session.description,\r\n    });\r\n    setIsEditModalVisible(true);\r\n  };\r\n\r\n  // Update session handler\r\n  const handleUpdateSessionWrapper = async (values: {\r\n    name: string;\r\n    description?: string;\r\n  }) => {\r\n    if (!editingSession) return;\r\n\r\n    handleUpdateSession(editingSession.id, {\r\n      name: values.name,\r\n      description: values.description,\r\n    });\r\n\r\n    setIsEditModalVisible(false);\r\n    setEditingSession(null);\r\n    editForm.resetFields();\r\n  };\r\n\r\n  // Delete session handler\r\n  const handleDeleteSessionWrapper = (sessionId: string) => {\r\n    handleDeleteSession(sessionId);\r\n  };\r\n\r\n  // View session detail handler\r\n  const handleViewDetail = useCallback(\r\n    (session: RecordingSession) => {\r\n      recordLogger.info('Viewing session detail', {\r\n        sessionId: session.id,\r\n        session,\r\n      });\r\n      setCurrentSession(session.id);\r\n      setViewMode('detail');\r\n    },\r\n    [currentSessionId],\r\n  );\r\n\r\n  // Go back to list view handler\r\n  const handleBackToList = useCallback(async () => {\r\n    recordLogger.info('Navigating back to list view');\r\n\r\n    // Auto-stop recording when leaving detail view\r\n    if (isRecording) {\r\n      recordLogger.info('Auto-stopping recording when leaving detail view');\r\n      await stopRecording();\r\n    }\r\n\r\n    setViewMode('list');\r\n  }, [isRecording, stopRecording]);\r\n\r\n  // Create session handler\r\n  const handleCreateNewSession = () => {\r\n    const sessionName = generateDefaultSessionName();\r\n    const newSession = createNewSession(sessionName);\r\n\r\n    setTimeout(() => {\r\n      startRecording(newSession.id);\r\n    }, 300);\r\n\r\n    // Switch to detail view\r\n    setViewMode('detail');\r\n\r\n    setCurrentSession(newSession.id);\r\n  };\r\n\r\n  // Show loading state while stores are initializing\r\n  if (!isStoreInitialized) {\r\n    return (\r\n      <div\r\n        className=\"popup-record-container\"\r\n        style={{\r\n          display: 'flex',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n          height: '200px',\r\n        }}\r\n      >\r\n        <div>Loading sessions...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div ref={recordContainerRef} className=\"popup-record-container\">\r\n      <RecordList\r\n        sessions={sessions}\r\n        currentSessionId={currentSessionId}\r\n        onEditSession={handleEditSession}\r\n        onDeleteSession={handleDeleteSessionWrapper}\r\n        onExportSession={handleExportSession}\r\n        onExportAllEvents={handleExportAllEvents}\r\n        onViewDetail={handleViewDetail}\r\n        isExtensionMode={isExtensionMode}\r\n        handleCreateNewSession={handleCreateNewSession}\r\n      />\r\n\r\n      {/* Recording Detail Modal */}\r\n      <Modal\r\n        open={viewMode === 'detail' && currentSessionId !== null}\r\n        onCancel={handleBackToList}\r\n        footer={null}\r\n        closable={false}\r\n        width=\"100%\"\r\n        centered={false}\r\n        className=\"recording-detail-modal\"\r\n        transitionName=\"\"\r\n        maskTransitionName=\"\"\r\n        styles={{\r\n          body: {\r\n            padding: 0,\r\n            height: 'calc(100vh * 9 / 10)',\r\n            overflow: 'hidden',\r\n          },\r\n          content: {\r\n            position: 'fixed',\r\n            bottom: 0,\r\n            left: 0,\r\n            right: 0,\r\n            // height: 'calc(100vh * 9 / 10)',\r\n            margin: 0,\r\n            borderRadius: '16px 16px 0 0',\r\n            maxWidth: 'none',\r\n            width: '100%',\r\n            padding: '20px',\r\n          },\r\n          mask: { backgroundColor: 'rgba(0, 0, 0, 0.3)' },\r\n        }}\r\n      >\r\n        {currentSessionId && (\r\n          <RecordDetail\r\n            key={currentSessionId}\r\n            sessionId={currentSessionId}\r\n            isRecording={isRecording}\r\n            // events={events}\r\n            currentTab={currentTab}\r\n            onBack={handleBackToList}\r\n            onStartRecording={startRecording}\r\n            onStopRecording={stopRecording}\r\n            onClearEvents={clearEvents}\r\n            isExtensionMode={isExtensionMode}\r\n            onClose={handleBackToList}\r\n          />\r\n        )}\r\n      </Modal>\r\n\r\n      <SessionModals\r\n        isEditModalVisible={isEditModalVisible}\r\n        setIsEditModalVisible={setIsEditModalVisible}\r\n        onUpdateSession={handleUpdateSessionWrapper}\r\n        editForm={editForm}\r\n        setEditingSession={setEditingSession}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import { Agent } from \"@sqai/core/agent\";\nclass ChromeExtensionProxyPageAgent extends Agent {\n    constructor(page, opts){\n        super(page, opts);\n    }\n}\nexport { ChromeExtensionProxyPageAgent };\n\n//# sourceMappingURL=agent.mjs.map","/// <reference types=\"chrome\" />\r\nimport {\r\n  ApiOutlined,\r\n  MenuOutlined,\r\n  SendOutlined,\r\n  VideoCameraOutlined,\r\n} from '@ant-design/icons';\r\nimport {\r\n  NavActions,\r\n  globalThemeConfig,\r\n  useEnvConfig,\r\n} from '@sqai/visualizer';\r\nimport { ConfigProvider, Dropdown, Typography } from 'antd';\r\nimport { useEffect, useState } from 'react';\r\nimport { BrowserExtensionPlayground } from '../../components/playground';\r\nimport Bridge from '../bridge';\r\nimport Recorder from '../recorder';\r\nimport './index.less';\r\nimport { OPENAI_API_KEY } from '@sqai/shared/env';\r\nimport { safeOverrideAIConfig } from '@sqai/visualizer';\r\nimport {\r\n  ChromeExtensionProxyPage,\r\n  ChromeExtensionProxyPageAgent,\r\n} from '@sqai/web/chrome-extension';\r\n// remember to destroy the agent when the tab is destroyed: agent.page.destroy()\r\nconst extensionAgentForTab = (forceSameTabNavigation = true) => {\r\n  const page = new ChromeExtensionProxyPage(forceSameTabNavigation);\r\n  return new ChromeExtensionProxyPageAgent(page);\r\n};\r\n\r\nconst STORAGE_KEY = 'midscene-popup-mode';\r\n\r\nexport function PlaygroundPopup() {\r\n  const { setPopupTab } = useEnvConfig();\r\n  const [currentMode, setCurrentMode] = useState<\r\n    'playground' | 'bridge' | 'recorder'\r\n  >(() => {\r\n    const savedMode = localStorage.getItem(STORAGE_KEY);\r\n    return (savedMode as 'playground' | 'bridge' | 'recorder') || 'playground';\r\n  });\r\n\r\n  const { config } = useEnvConfig();\r\n\r\n  // Sync popupTab with saved mode on mount\r\n  useEffect(() => {\r\n    setPopupTab(currentMode);\r\n  }, []);\r\n\r\n  // Override AI configuration\r\n  useEffect(() => {\r\n    console.log('Chrome Extension - Overriding AI config:', config);\r\n    console.log('OPENAI_API_KEY exists:', !!OPENAI_API_KEY);\r\n\r\n    if (config && Object.keys(config).length >= 1) {\r\n      safeOverrideAIConfig(config);\r\n    }\r\n  }, [config]);\r\n\r\n  const menuItems = [\r\n    {\r\n      key: 'playground',\r\n      icon: <SendOutlined />,\r\n      label: 'Playground',\r\n      onClick: () => {\r\n        setCurrentMode('playground');\r\n        setPopupTab('playground');\r\n        localStorage.setItem(STORAGE_KEY, 'playground');\r\n      },\r\n    },\r\n    {\r\n      key: 'recorder',\r\n      label: 'Recorder (Preview)',\r\n      icon: <VideoCameraOutlined />,\r\n      onClick: () => {\r\n        setCurrentMode('recorder');\r\n        setPopupTab('recorder');\r\n        localStorage.setItem(STORAGE_KEY, 'recorder');\r\n      },\r\n    },\r\n    {\r\n      key: 'bridge',\r\n      icon: <ApiOutlined />,\r\n      label: 'Bridge Mode',\r\n      onClick: () => {\r\n        setCurrentMode('bridge');\r\n        setPopupTab('bridge');\r\n        localStorage.setItem(STORAGE_KEY, 'bridge');\r\n      },\r\n    },\r\n  ];\r\n\r\n  const renderContent = () => {\r\n    if (currentMode === 'bridge') {\r\n      return (\r\n        <div className=\"popup-content bridge-mode\">\r\n          <div className=\"bridge-container\">\r\n            <Bridge />\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    if (currentMode === 'recorder') {\r\n      return (\r\n        <div className=\"popup-content recorder-mode\">\r\n          <Recorder />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // Check if configuration is ready\r\n    const configReady = config && Object.keys(config).length >= 1;\r\n    console.log('Playground mode - config:', {\r\n      config,\r\n      configReady,\r\n    });\r\n\r\n    return (\r\n      <div className=\"popup-content\">\r\n        {/* Playground Component */}\r\n        <div className=\"playground-component\">\r\n          <BrowserExtensionPlayground\r\n            getAgent={(forceSameTabNavigation?: boolean) => {\r\n              console.log(\r\n                'getAgent called with forceSameTabNavigation:',\r\n                forceSameTabNavigation,\r\n              );\r\n              return extensionAgentForTab(forceSameTabNavigation);\r\n            }}\r\n            showContextPreview={false}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <ConfigProvider theme={globalThemeConfig()}>\r\n      <div className=\"popup-wrapper\">\r\n        {/* top navigation bar */}\r\n        <div className=\"popup-nav\">\r\n          <div className=\"nav-left\">\r\n            <Dropdown\r\n              menu={{ items: menuItems }}\r\n              trigger={['click']}\r\n              placement=\"bottomLeft\"\r\n              overlayClassName=\"mode-selector-dropdown\"\r\n            >\r\n              <MenuOutlined className=\"nav-icon menu-trigger\" />\r\n            </Dropdown>\r\n            <span className=\"nav-title\">\r\n              {currentMode === 'playground'\r\n                ? 'Playground'\r\n                : currentMode === 'recorder'\r\n                  ? 'Recorder'\r\n                  : 'Bridge Mode'}\r\n            </span>\r\n          </div>\r\n          <div className=\"nav-right\">\r\n            <NavActions showTooltipWhenEmpty={false} showModelName={false} />\r\n          </div>\r\n        </div>\r\n\r\n        {/* main content area */}\r\n        {renderContent()}\r\n      </div>\r\n    </ConfigProvider>\r\n  );\r\n}\r\n","/// <reference types=\"chrome\" />\r\n\r\n// View modes\r\nexport type ViewMode = 'list' | 'detail';\r\n\r\n// Message types for content script communication\r\nexport interface RecordMessage {\r\n  action: 'start' | 'stop' | 'event' | 'events';\r\n  data?: any;\r\n  sessionId?: string;\r\n}\r\n\r\n// Chrome API safety check\r\nexport const isChromeExtension = (): boolean => {\r\n  try {\r\n    return !!(\r\n      typeof chrome !== 'undefined' &&\r\n      chrome.runtime &&\r\n      chrome.runtime.id &&\r\n      chrome.tabs &&\r\n      chrome.windows &&\r\n      chrome.scripting\r\n    );\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n};\r\n\r\n// Safe Chrome API wrappers\r\nexport const safeChromeAPI = {\r\n  tabs: {\r\n    query: (\r\n      queryInfo: chrome.tabs.QueryInfo,\r\n      callback: (tabs: chrome.tabs.Tab[]) => void,\r\n    ) => {\r\n      if (isChromeExtension()) {\r\n        chrome.tabs.query(queryInfo, callback);\r\n      } else {\r\n        // Mock tab for non-extension environment\r\n        callback([\r\n          {\r\n            id: 1,\r\n            title: 'Mock Tab (Chrome Extension Required)',\r\n            url: window.location.href,\r\n            active: true,\r\n            highlighted: false,\r\n            pinned: false,\r\n            audible: false,\r\n            discarded: false,\r\n            autoDiscardable: true,\r\n            mutedInfo: { muted: false },\r\n            incognito: false,\r\n            width: window.innerWidth,\r\n            height: window.innerHeight,\r\n            status: 'complete' as const,\r\n            index: 0,\r\n            windowId: 1,\r\n            groupId: -1,\r\n            openerTabId: undefined,\r\n            favIconUrl: undefined,\r\n            sessionId: undefined,\r\n            pendingUrl: undefined,\r\n            selected: false,\r\n          } as chrome.tabs.Tab,\r\n        ]);\r\n      }\r\n    },\r\n    sendMessage: async (tabId: number, message: any): Promise<any> => {\r\n      if (isChromeExtension()) {\r\n        return chrome.tabs.sendMessage(tabId, message);\r\n      } else {\r\n        throw new Error('Chrome extension API not available');\r\n      }\r\n    },\r\n    onUpdated: {\r\n      addListener: (\r\n        callback: (\r\n          tabId: number,\r\n          changeInfo: chrome.tabs.TabChangeInfo,\r\n          tab: chrome.tabs.Tab,\r\n        ) => void,\r\n      ) => {\r\n        if (isChromeExtension()) {\r\n          chrome.tabs.onUpdated.addListener(callback);\r\n        }\r\n      },\r\n      removeListener: (\r\n        callback: (\r\n          tabId: number,\r\n          changeInfo: chrome.tabs.TabChangeInfo,\r\n          tab: chrome.tabs.Tab,\r\n        ) => void,\r\n      ) => {\r\n        if (isChromeExtension()) {\r\n          chrome.tabs.onUpdated.removeListener(callback);\r\n        }\r\n      },\r\n    },\r\n    onActivated: {\r\n      addListener: (\r\n        callback: (activeInfo: chrome.tabs.TabActiveInfo) => void,\r\n      ) => {\r\n        if (isChromeExtension()) {\r\n          chrome.tabs.onActivated.addListener(callback);\r\n        }\r\n      },\r\n      removeListener: (\r\n        callback: (activeInfo: chrome.tabs.TabActiveInfo) => void,\r\n      ) => {\r\n        if (isChromeExtension()) {\r\n          chrome.tabs.onActivated.removeListener(callback);\r\n        }\r\n      },\r\n    },\r\n  },\r\n  windows: {\r\n    onFocusChanged: {\r\n      addListener: (callback: (windowId: number) => void) => {\r\n        if (isChromeExtension()) {\r\n          chrome.windows.onFocusChanged.addListener(callback);\r\n        }\r\n      },\r\n      removeListener: (callback: (windowId: number) => void) => {\r\n        if (isChromeExtension()) {\r\n          chrome.windows.onFocusChanged.removeListener(callback);\r\n        }\r\n      },\r\n    },\r\n  },\r\n  runtime: {\r\n    connect: (connectInfo?: chrome.runtime.ConnectInfo) => {\r\n      if (isChromeExtension()) {\r\n        return chrome.runtime.connect(connectInfo);\r\n      } else {\r\n        // Mock port for non-extension environment\r\n        return {\r\n          onMessage: {\r\n            addListener: () => {},\r\n            removeListener: () => {},\r\n          },\r\n          disconnect: () => {},\r\n          postMessage: () => {},\r\n        };\r\n      }\r\n    },\r\n    onMessage: {\r\n      addListener: (\r\n        callback: (\r\n          message: any,\r\n          sender: chrome.runtime.MessageSender,\r\n          sendResponse: (response?: any) => void,\r\n        ) => void,\r\n      ) => {\r\n        if (isChromeExtension()) {\r\n          chrome.runtime.onMessage.addListener(callback);\r\n        }\r\n      },\r\n      removeListener: (\r\n        callback: (\r\n          message: any,\r\n          sender: chrome.runtime.MessageSender,\r\n          sendResponse: (response?: any) => void,\r\n        ) => void,\r\n      ) => {\r\n        if (isChromeExtension()) {\r\n          chrome.runtime.onMessage.removeListener(callback);\r\n        }\r\n      },\r\n    },\r\n  },\r\n  scripting: {\r\n    executeScript: async (injection: any): Promise<any[]> => {\r\n      if (isChromeExtension()) {\r\n        return chrome.scripting.executeScript(injection);\r\n      } else {\r\n        throw new Error('Chrome extension API not available');\r\n      }\r\n    },\r\n  },\r\n};\r\n","\n      import API from \"!../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./App.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./App.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport App from './App';\r\n\r\nconst rootEl = document.getElementById('root');\r\nif (rootEl) {\r\n  const root = ReactDOM.createRoot(rootEl);\r\n  root.render(<App />);\r\n}\r\n","import './App.css';\r\nimport { PlaygroundPopup } from './extension/popup';\r\n\r\nexport default function App() {\r\n  return <PlaygroundPopup />;\r\n}\r\n","/// <reference types=\"chrome\" />\r\n\r\nexport function getExtensionVersion() {\r\n  return chrome.runtime?.getManifest?.()?.version || 'unknown';\r\n}\r\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-border-style:solid;--tw-leading:initial;--tw-font-weight:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-outline-style:solid;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-duration:initial;--tw-ease:initial}::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-border-style:solid;--tw-leading:initial;--tw-font-weight:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-outline-style:solid;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-duration:initial;--tw-ease:initial}}}@layer theme{:root,:host{--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace;--color-red-500:#fb2c36;--color-yellow-50:#fefce8;--color-yellow-200:#fff085;--color-yellow-800:#874b00;--color-green-500:#00c758;--color-blue-50:#eff6ff;--color-blue-400:#54a2ff;--color-blue-500:#3080ff;--color-blue-600:#155dfc;--color-gray-50:#f9fafb;--color-gray-200:#e5e7eb;--color-gray-300:#d1d5dc;--color-gray-400:#99a1af;--color-gray-600:#4a5565;--color-black:#000;--color-white:#fff;--spacing:.25rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--font-weight-normal:400;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--radius-lg:.5rem;--radius-xl:.75rem;--ease-in:cubic-bezier(.4,0,1,1);--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1)}@supports (color:color(display-p3 0 0 0)){:root,:host{--color-red-500:color(display-p3 .903738 .262579 .253307);--color-yellow-50:color(display-p3 .994197 .988062 .917538);--color-yellow-200:color(display-p3 .988789 .943116 .579188);--color-yellow-800:color(display-p3 .503181 .30478 .075537);--color-green-500:color(display-p3 .308734 .774754 .374307);--color-blue-50:color(display-p3 .941826 .963151 .995385);--color-blue-400:color(display-p3 .397443 .62813 .992116);--color-blue-500:color(display-p3 .266422 .491219 .988624);--color-blue-600:color(display-p3 .174493 .358974 .950247);--color-gray-50:color(display-p3 .977213 .98084 .985102);--color-gray-200:color(display-p3 .899787 .906171 .92106);--color-gray-300:color(display-p3 .822033 .835264 .858521);--color-gray-400:color(display-p3 .605734 .630385 .680158);--color-gray-600:color(display-p3 .297358 .332176 .39043)}}@supports (color:lab(0% 0 0)){:root,:host{--color-red-500:lab(55.4814% 75.0732 48.8528);--color-yellow-50:lab(98.6846% -1.79058 9.77662);--color-yellow-200:lab(94.3433% -5.00426 52.9663);--color-yellow-800:lab(38.7484% 23.5833 51.4916);--color-green-500:lab(70.5521% -66.5147 45.8072);--color-blue-50:lab(96.492% -1.14647 -5.11479);--color-blue-400:lab(65.0361% -1.42062 -56.9803);--color-blue-500:lab(54.1736% 13.3368 -74.6839);--color-blue-600:lab(44.0605% 29.0279 -86.0352);--color-gray-50:lab(98.2596% -.247031 -.706708);--color-gray-200:lab(91.6229% -.159085 -2.26791);--color-gray-300:lab(85.1236% -.612259 -3.7138);--color-gray-400:lab(65.9269% -.832707 -8.17474);--color-gray-600:lab(35.6337% -1.58697 -10.8425)}}}@layer base,components;@layer utilities{.collapse{visibility:collapse}.visible{visibility:visible}.\\\\!fixed{position:fixed!important}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.inset-0{inset:calc(var(--spacing)*0)}.top-1\\\\/2{top:50%}.right-2{right:calc(var(--spacing)*2)}.bottom-3{bottom:calc(var(--spacing)*3)}.bottom-4{bottom:calc(var(--spacing)*4)}.left-1\\\\/2{left:50%}.z-\\\\[1000\\\\]{z-index:1000}.float-right{float:right}.container{width:100%}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}.mx-4{margin-inline:calc(var(--spacing)*4)}.my-\\\\[20px\\\\]{margin-block-start:20px;margin-block-end:20px}.\\\\!mt-0{margin-top:calc(var(--spacing)*0)!important}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-3{margin-top:calc(var(--spacing)*3)}.mt-5{margin-top:calc(var(--spacing)*5)}.mr-1{margin-right:calc(var(--spacing)*1)}.mr-2{margin-right:calc(var(--spacing)*2)}.mr-3{margin-right:calc(var(--spacing)*3)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.ml-1{margin-left:calc(var(--spacing)*1)}.ml-2{margin-left:calc(var(--spacing)*2)}.ml-8{margin-left:calc(var(--spacing)*8)}.ml-auto{margin-left:auto}.line-clamp-2{-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}.block{display:block}.contents{display:contents}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.list-item{display:list-item}.table{display:table}.\\\\!h-4{height:calc(var(--spacing)*4)!important}.\\\\!h-\\\\[40px\\\\]{height:40px!important}.h-3{height:calc(var(--spacing)*3)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-10{height:calc(var(--spacing)*10)}.h-\\\\[6px\\\\]{height:6px}.h-\\\\[20px\\\\]{height:20px}.h-\\\\[30px\\\\]{height:30px}.h-\\\\[40px\\\\]{height:40px}.h-full{height:100%}.max-h-10{max-height:calc(var(--spacing)*10)}.max-h-128{max-height:calc(var(--spacing)*128)}.max-h-\\\\[139px\\\\]{max-height:139px}.max-h-\\\\[calc\\\\(100vh-340px\\\\)\\\\]{max-height:calc(100vh - 340px)}.max-h-\\\\[calc\\\\(100vh-380px\\\\)\\\\]{max-height:calc(100vh - 380px)}.min-h-\\\\[22px\\\\]{min-height:22px}.min-h-\\\\[40px\\\\]{min-height:40px}.\\\\!w-4{width:calc(var(--spacing)*4)!important}.w-0\\\\.5{width:calc(var(--spacing)*.5)}.w-3{width:calc(var(--spacing)*3)}.w-4{width:calc(var(--spacing)*4)}.w-60{width:calc(var(--spacing)*60)}.w-\\\\[6px\\\\]{width:6px}.w-\\\\[172px\\\\]{width:172px}.w-full{width:100%}.w-px{width:1px}.min-w-\\\\[20px\\\\]{min-width:20px}.flex-1{flex:1}.-translate-x-1\\\\/2{--tw-translate-x:calc(calc(1/2*100%)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1\\\\/2{--tw-translate-y:calc(calc(1/2*100%)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.rotate-180{rotate:180deg}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.\\\\!cursor-not-allowed{cursor:not-allowed!important}.\\\\!cursor-pointer{cursor:pointer!important}.cursor-pointer{cursor:pointer}.flex-col{flex-direction:column}.items-center{align-items:center}.items-stretch{align-items:stretch}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.gap-1{gap:calc(var(--spacing)*1)}.gap-1\\\\.5{gap:calc(var(--spacing)*1.5)}.gap-2{gap:calc(var(--spacing)*2)}.gap-2\\\\.5{gap:calc(var(--spacing)*2.5)}.gap-4{gap:calc(var(--spacing)*4)}.gap-\\\\[4px\\\\]{gap:4px}.gap-\\\\[10px\\\\]{gap:10px}.truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.\\\\!rounded-\\\\[48px\\\\]{border-radius:48px!important}.\\\\!rounded-lg{border-radius:var(--radius-lg)!important}.\\\\!rounded-none{border-radius:0!important}.rounded{border-radius:.25rem}.rounded-\\\\[8px\\\\]{border-radius:8px}.rounded-\\\\[12px\\\\]{border-radius:12px}.rounded-\\\\[23px\\\\]{border-radius:23px}.rounded-\\\\[48px\\\\]{border-radius:48px}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-xl{border-radius:var(--radius-xl)}.rounded-b{border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.rounded-b-lg{border-bottom-right-radius:var(--radius-lg);border-bottom-left-radius:var(--radius-lg)}.\\\\!border-0{border-style:var(--tw-border-style)!important;border-width:0!important}.border{border-style:var(--tw-border-style);border-width:1px}.border-2{border-style:var(--tw-border-style);border-width:2px}.border-l{border-left-style:var(--tw-border-style);border-left-width:1px}.\\\\!border-none{--tw-border-style:none!important;border-style:none!important}.border-none{--tw-border-style:none;border-style:none}.border-\\\\[\\\\#F2F4F7\\\\]{border-color:#f2f4f7}.border-\\\\[\\\\#F4F6F9\\\\]{border-color:#f4f6f9}.border-\\\\[rgba\\\\(0\\\\,0\\\\,0\\\\,0\\\\.06\\\\)\\\\]{border-color:#0000000f}.border-yellow-200{border-color:var(--color-yellow-200)}.\\\\!bg-transparent{background-color:#0000!important}.bg-\\\\[\\\\#00C700\\\\]{background-color:#00c700}.bg-\\\\[\\\\#2B83FF1F\\\\]{background-color:#2b83ff1f}.bg-\\\\[\\\\#151414\\\\]{background-color:#151414}.bg-\\\\[\\\\#EFFFE0\\\\]{background-color:#efffe0}.bg-\\\\[\\\\#F2F4F7\\\\]{background-color:#f2f4f7}.bg-\\\\[\\\\#F4F6F9\\\\]{background-color:#f4f6f9}.bg-blue-50{background-color:var(--color-blue-50)}.bg-gray-50{background-color:var(--color-gray-50)}.bg-gray-200{background-color:var(--color-gray-200)}.bg-green-500{background-color:var(--color-green-500)}.bg-transparent{background-color:#0000}.bg-white{background-color:var(--color-white)}.bg-yellow-50{background-color:var(--color-yellow-50)}.\\\\!bg-none{background-image:none!important}.stroke-\\\\[2\\\\]{stroke-width:2px}.\\\\!p-0{padding:calc(var(--spacing)*0)!important}.p-0{padding:calc(var(--spacing)*0)}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-\\\\[1px\\\\]{padding:1px}.p-\\\\[5px\\\\]{padding:5px}.p-\\\\[12px\\\\]{padding:12px}.\\\\!px-0{padding-inline:calc(var(--spacing)*0)!important}.\\\\!px-\\\\[12px\\\\]{padding-inline-start:12px!important;padding-inline-end:12px!important}.\\\\!px-\\\\[16px\\\\]{padding-inline-start:16px!important;padding-inline-end:16px!important}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-\\\\[7px\\\\]{padding-inline-start:7px;padding-inline-end:7px}.px-\\\\[16px\\\\]{padding-inline-start:16px;padding-inline-end:16px}.\\\\!py-2{padding-block:calc(var(--spacing)*2)!important}.\\\\!py-\\\\[12px\\\\]{padding-block-start:12px!important;padding-block-end:12px!important}.py-0{padding-block:calc(var(--spacing)*0)}.py-1{padding-block:calc(var(--spacing)*1)}.py-3{padding-block:calc(var(--spacing)*3)}.py-5{padding-block:calc(var(--spacing)*5)}.py-6{padding-block:calc(var(--spacing)*6)}.py-\\\\[4px\\\\]{padding-block-start:4px;padding-block-end:4px}.py-\\\\[12px\\\\]{padding-block-start:12px;padding-block-end:12px}.text-center{text-align:center}.font-mono{font-family:var(--font-mono)}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.\\\\!text-\\\\[12px\\\\]{font-size:12px!important}.text-\\\\[10px\\\\]{font-size:10px}.text-\\\\[11px\\\\]{font-size:11px}.text-\\\\[12px\\\\]{font-size:12px}.text-\\\\[14px\\\\]{font-size:14px}.\\\\!leading-\\\\[1\\\\.83em\\\\]{--tw-leading:1.83em!important;line-height:1.83em!important}.leading-\\\\[1\\\\.21\\\\]{--tw-leading:1.21;line-height:1.21}.leading-\\\\[1\\\\.67\\\\]{--tw-leading:1.67;line-height:1.67}.leading-\\\\[1\\\\.67em\\\\]{--tw-leading:1.67em;line-height:1.67em}.leading-\\\\[2em\\\\]{--tw-leading:2em;line-height:2em}.leading-\\\\[22px\\\\]{--tw-leading:22px;line-height:22px}.\\\\!font-medium{--tw-font-weight:var(--font-weight-medium)!important;font-weight:var(--font-weight-medium)!important}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-normal{--tw-font-weight:var(--font-weight-normal);font-weight:var(--font-weight-normal)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.whitespace-pre-wrap{white-space:pre-wrap}.\\\\!text-\\\\[\\\\#595959\\\\]{color:#595959!important}.\\\\!text-\\\\[rgba\\\\(0\\\\,0\\\\,0\\\\,1\\\\)\\\\]{color:#000!important}.\\\\!text-gray-300{color:var(--color-gray-300)!important}.text-\\\\[\\\\#2B83FF\\\\]{color:#2b83ff}.text-\\\\[\\\\#12A902\\\\]{color:#12a902}.text-\\\\[\\\\#333333\\\\]{color:#333}.text-\\\\[\\\\#595959\\\\]{color:#595959}.text-\\\\[rgba\\\\(0\\\\,0\\\\,0\\\\,0\\\\.9\\\\)\\\\]{color:#000000e6}.text-\\\\[rgba\\\\(0\\\\,0\\\\,0\\\\,0\\\\.25\\\\)\\\\]{color:#00000040}.text-\\\\[rgba\\\\(0\\\\,0\\\\,0\\\\,0\\\\.85\\\\)\\\\]{color:#000000d9}.text-black{color:var(--color-black)}.text-blue-400{color:var(--color-blue-400)}.text-blue-500{color:var(--color-blue-500)}.text-gray-400{color:var(--color-gray-400)}.text-green-500{color:var(--color-green-500)}.text-white{color:var(--color-white)}.text-yellow-800{color:var(--color-yellow-800)}.italic{font-style:italic}.\\\\!shadow-none{--tw-shadow:0 0 #0000!important;box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)!important}.outline{outline-style:var(--tw-outline-style);outline-width:1px}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,visibility,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-200{--tw-duration:.2s;transition-duration:.2s}.ease-in{--tw-ease:var(--ease-in);transition-timing-function:var(--ease-in)}@media (hover:hover){.hover\\\\:\\\\!bg-transparent:hover{background-color:#0000!important}.hover\\\\:\\\\!text-blue-500:hover{color:var(--color-blue-500)!important}.hover\\\\:\\\\!text-red-500:hover{color:var(--color-red-500)!important}.hover\\\\:text-blue-600:hover{color:var(--color-blue-600)}.hover\\\\:text-gray-600:hover{color:var(--color-gray-600)}.hover\\\\:opacity-80:hover{opacity:.8}.hover\\\\:shadow-md:hover{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}}.focus\\\\:\\\\!bg-transparent:focus{background-color:#0000!important}.disabled\\\\:\\\\!text-gray-300:disabled{color:var(--color-gray-300)!important}}.command-form{flex-direction:column;height:100%;display:flex;overflow:hidden}.form-content{grid-template-rows:auto 1fr;gap:24px;height:100%;min-height:0;display:grid;position:relative}.result-container{flex-direction:column;grid-row:2;min-height:0;display:flex;position:relative;overflow:auto}.result-container>div{flex:1;height:auto;min-height:0}@property --tw-translate-x{syntax:\"*\";inherits:false;initial-value:0}@property --tw-translate-y{syntax:\"*\";inherits:false;initial-value:0}@property --tw-translate-z{syntax:\"*\";inherits:false;initial-value:0}@property --tw-rotate-x{syntax:\"*\";inherits:false}@property --tw-rotate-y{syntax:\"*\";inherits:false}@property --tw-rotate-z{syntax:\"*\";inherits:false}@property --tw-skew-x{syntax:\"*\";inherits:false}@property --tw-skew-y{syntax:\"*\";inherits:false}@property --tw-border-style{syntax:\"*\";inherits:false;initial-value:solid}@property --tw-leading{syntax:\"*\";inherits:false}@property --tw-font-weight{syntax:\"*\";inherits:false}@property --tw-shadow{syntax:\"*\";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:\"*\";inherits:false}@property --tw-shadow-alpha{syntax:\"<percentage>\";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:\"*\";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:\"*\";inherits:false}@property --tw-inset-shadow-alpha{syntax:\"<percentage>\";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:\"*\";inherits:false}@property --tw-ring-shadow{syntax:\"*\";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:\"*\";inherits:false}@property --tw-inset-ring-shadow{syntax:\"*\";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:\"*\";inherits:false}@property --tw-ring-offset-width{syntax:\"<length>\";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:\"*\";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:\"*\";inherits:false;initial-value:0 0 #0000}@property --tw-outline-style{syntax:\"*\";inherits:false;initial-value:solid}@property --tw-blur{syntax:\"*\";inherits:false}@property --tw-brightness{syntax:\"*\";inherits:false}@property --tw-contrast{syntax:\"*\";inherits:false}@property --tw-grayscale{syntax:\"*\";inherits:false}@property --tw-hue-rotate{syntax:\"*\";inherits:false}@property --tw-invert{syntax:\"*\";inherits:false}@property --tw-opacity{syntax:\"*\";inherits:false}@property --tw-saturate{syntax:\"*\";inherits:false}@property --tw-sepia{syntax:\"*\";inherits:false}@property --tw-drop-shadow{syntax:\"*\";inherits:false}@property --tw-drop-shadow-color{syntax:\"*\";inherits:false}@property --tw-drop-shadow-alpha{syntax:\"<percentage>\";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:\"*\";inherits:false}@property --tw-duration{syntax:\"*\";inherits:false}@property --tw-ease{syntax:\"*\";inherits:false}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/App.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"/*! tailwindcss v4.1.11 | MIT License | https://tailwindcss.com */\\n@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-border-style:solid;--tw-leading:initial;--tw-font-weight:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-outline-style:solid;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-duration:initial;--tw-ease:initial}}}@layer theme{:root,:host{--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,\\\"Liberation Mono\\\",\\\"Courier New\\\",monospace;--color-red-500:oklch(63.7% .237 25.331);--color-yellow-50:oklch(98.7% .026 102.212);--color-yellow-200:oklch(94.5% .129 101.54);--color-yellow-800:oklch(47.6% .114 61.907);--color-green-500:oklch(72.3% .219 149.579);--color-blue-50:oklch(97% .014 254.604);--color-blue-400:oklch(70.7% .165 254.624);--color-blue-500:oklch(62.3% .214 259.815);--color-blue-600:oklch(54.6% .245 262.881);--color-gray-50:oklch(98.5% .002 247.839);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-600:oklch(44.6% .03 256.802);--color-black:#000;--color-white:#fff;--spacing:.25rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--font-weight-normal:400;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--radius-lg:.5rem;--radius-xl:.75rem;--ease-in:cubic-bezier(.4,0,1,1);--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1)}}@layer base,components;@layer utilities{.collapse{visibility:collapse}.visible{visibility:visible}.\\\\!fixed{position:fixed!important}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.inset-0{inset:calc(var(--spacing)*0)}.top-1\\\\/2{top:50%}.right-2{right:calc(var(--spacing)*2)}.bottom-3{bottom:calc(var(--spacing)*3)}.bottom-4{bottom:calc(var(--spacing)*4)}.left-1\\\\/2{left:50%}.z-\\\\[1000\\\\]{z-index:1000}.float-right{float:right}.container{width:100%}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}.mx-4{margin-inline:calc(var(--spacing)*4)}.my-\\\\[20px\\\\]{margin-block:20px}.\\\\!mt-0{margin-top:calc(var(--spacing)*0)!important}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-3{margin-top:calc(var(--spacing)*3)}.mt-5{margin-top:calc(var(--spacing)*5)}.mr-1{margin-right:calc(var(--spacing)*1)}.mr-2{margin-right:calc(var(--spacing)*2)}.mr-3{margin-right:calc(var(--spacing)*3)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.ml-1{margin-left:calc(var(--spacing)*1)}.ml-2{margin-left:calc(var(--spacing)*2)}.ml-8{margin-left:calc(var(--spacing)*8)}.ml-auto{margin-left:auto}.line-clamp-2{-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}.block{display:block}.contents{display:contents}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.list-item{display:list-item}.table{display:table}.\\\\!h-4{height:calc(var(--spacing)*4)!important}.\\\\!h-\\\\[40px\\\\]{height:40px!important}.h-3{height:calc(var(--spacing)*3)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-10{height:calc(var(--spacing)*10)}.h-\\\\[6px\\\\]{height:6px}.h-\\\\[20px\\\\]{height:20px}.h-\\\\[30px\\\\]{height:30px}.h-\\\\[40px\\\\]{height:40px}.h-full{height:100%}.max-h-10{max-height:calc(var(--spacing)*10)}.max-h-128{max-height:calc(var(--spacing)*128)}.max-h-\\\\[139px\\\\]{max-height:139px}.max-h-\\\\[calc\\\\(100vh-340px\\\\)\\\\]{max-height:calc(100vh - 340px)}.max-h-\\\\[calc\\\\(100vh-380px\\\\)\\\\]{max-height:calc(100vh - 380px)}.min-h-\\\\[22px\\\\]{min-height:22px}.min-h-\\\\[40px\\\\]{min-height:40px}.\\\\!w-4{width:calc(var(--spacing)*4)!important}.w-0\\\\.5{width:calc(var(--spacing)*.5)}.w-3{width:calc(var(--spacing)*3)}.w-4{width:calc(var(--spacing)*4)}.w-60{width:calc(var(--spacing)*60)}.w-\\\\[6px\\\\]{width:6px}.w-\\\\[172px\\\\]{width:172px}.w-full{width:100%}.w-px{width:1px}.min-w-\\\\[20px\\\\]{min-width:20px}.flex-1{flex:1}.-translate-x-1\\\\/2{--tw-translate-x:calc(calc(1/2*100%)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1\\\\/2{--tw-translate-y:calc(calc(1/2*100%)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.rotate-180{rotate:180deg}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.\\\\!cursor-not-allowed{cursor:not-allowed!important}.\\\\!cursor-pointer{cursor:pointer!important}.cursor-pointer{cursor:pointer}.flex-col{flex-direction:column}.items-center{align-items:center}.items-stretch{align-items:stretch}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.gap-1{gap:calc(var(--spacing)*1)}.gap-1\\\\.5{gap:calc(var(--spacing)*1.5)}.gap-2{gap:calc(var(--spacing)*2)}.gap-2\\\\.5{gap:calc(var(--spacing)*2.5)}.gap-4{gap:calc(var(--spacing)*4)}.gap-\\\\[4px\\\\]{gap:4px}.gap-\\\\[10px\\\\]{gap:10px}.truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.\\\\!rounded-\\\\[48px\\\\]{border-radius:48px!important}.\\\\!rounded-lg{border-radius:var(--radius-lg)!important}.\\\\!rounded-none{border-radius:0!important}.rounded{border-radius:.25rem}.rounded-\\\\[8px\\\\]{border-radius:8px}.rounded-\\\\[12px\\\\]{border-radius:12px}.rounded-\\\\[23px\\\\]{border-radius:23px}.rounded-\\\\[48px\\\\]{border-radius:48px}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-xl{border-radius:var(--radius-xl)}.rounded-b{border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.rounded-b-lg{border-bottom-right-radius:var(--radius-lg);border-bottom-left-radius:var(--radius-lg)}.\\\\!border-0{border-style:var(--tw-border-style)!important;border-width:0!important}.border{border-style:var(--tw-border-style);border-width:1px}.border-2{border-style:var(--tw-border-style);border-width:2px}.border-l{border-left-style:var(--tw-border-style);border-left-width:1px}.\\\\!border-none{--tw-border-style:none!important;border-style:none!important}.border-none{--tw-border-style:none;border-style:none}.border-\\\\[\\\\#F2F4F7\\\\]{border-color:#f2f4f7}.border-\\\\[\\\\#F4F6F9\\\\]{border-color:#f4f6f9}.border-\\\\[rgba\\\\(0\\\\,0\\\\,0\\\\,0\\\\.06\\\\)\\\\]{border-color:#0000000f}.border-yellow-200{border-color:var(--color-yellow-200)}.\\\\!bg-transparent{background-color:#0000!important}.bg-\\\\[\\\\#00C700\\\\]{background-color:#00c700}.bg-\\\\[\\\\#2B83FF1F\\\\]{background-color:#2b83ff1f}.bg-\\\\[\\\\#151414\\\\]{background-color:#151414}.bg-\\\\[\\\\#EFFFE0\\\\]{background-color:#efffe0}.bg-\\\\[\\\\#F2F4F7\\\\]{background-color:#f2f4f7}.bg-\\\\[\\\\#F4F6F9\\\\]{background-color:#f4f6f9}.bg-blue-50{background-color:var(--color-blue-50)}.bg-gray-50{background-color:var(--color-gray-50)}.bg-gray-200{background-color:var(--color-gray-200)}.bg-green-500{background-color:var(--color-green-500)}.bg-transparent{background-color:#0000}.bg-white{background-color:var(--color-white)}.bg-yellow-50{background-color:var(--color-yellow-50)}.\\\\!bg-none{background-image:none!important}.stroke-\\\\[2\\\\]{stroke-width:2px}.\\\\!p-0{padding:calc(var(--spacing)*0)!important}.p-0{padding:calc(var(--spacing)*0)}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-\\\\[1px\\\\]{padding:1px}.p-\\\\[5px\\\\]{padding:5px}.p-\\\\[12px\\\\]{padding:12px}.\\\\!px-0{padding-inline:calc(var(--spacing)*0)!important}.\\\\!px-\\\\[12px\\\\]{padding-inline:12px!important}.\\\\!px-\\\\[16px\\\\]{padding-inline:16px!important}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-\\\\[7px\\\\]{padding-inline:7px}.px-\\\\[16px\\\\]{padding-inline:16px}.\\\\!py-2{padding-block:calc(var(--spacing)*2)!important}.\\\\!py-\\\\[12px\\\\]{padding-block:12px!important}.py-0{padding-block:calc(var(--spacing)*0)}.py-1{padding-block:calc(var(--spacing)*1)}.py-3{padding-block:calc(var(--spacing)*3)}.py-5{padding-block:calc(var(--spacing)*5)}.py-6{padding-block:calc(var(--spacing)*6)}.py-\\\\[4px\\\\]{padding-block:4px}.py-\\\\[12px\\\\]{padding-block:12px}.text-center{text-align:center}.font-mono{font-family:var(--font-mono)}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.\\\\!text-\\\\[12px\\\\]{font-size:12px!important}.text-\\\\[10px\\\\]{font-size:10px}.text-\\\\[11px\\\\]{font-size:11px}.text-\\\\[12px\\\\]{font-size:12px}.text-\\\\[14px\\\\]{font-size:14px}.\\\\!leading-\\\\[1\\\\.83em\\\\]{--tw-leading:1.83em!important;line-height:1.83em!important}.leading-\\\\[1\\\\.21\\\\]{--tw-leading:1.21;line-height:1.21}.leading-\\\\[1\\\\.67\\\\]{--tw-leading:1.67;line-height:1.67}.leading-\\\\[1\\\\.67em\\\\]{--tw-leading:1.67em;line-height:1.67em}.leading-\\\\[2em\\\\]{--tw-leading:2em;line-height:2em}.leading-\\\\[22px\\\\]{--tw-leading:22px;line-height:22px}.\\\\!font-medium{--tw-font-weight:var(--font-weight-medium)!important;font-weight:var(--font-weight-medium)!important}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-normal{--tw-font-weight:var(--font-weight-normal);font-weight:var(--font-weight-normal)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.whitespace-pre-wrap{white-space:pre-wrap}.\\\\!text-\\\\[\\\\#595959\\\\]{color:#595959!important}.\\\\!text-\\\\[rgba\\\\(0\\\\,0\\\\,0\\\\,1\\\\)\\\\]{color:#000!important}.\\\\!text-gray-300{color:var(--color-gray-300)!important}.text-\\\\[\\\\#2B83FF\\\\]{color:#2b83ff}.text-\\\\[\\\\#12A902\\\\]{color:#12a902}.text-\\\\[\\\\#333333\\\\]{color:#333}.text-\\\\[\\\\#595959\\\\]{color:#595959}.text-\\\\[rgba\\\\(0\\\\,0\\\\,0\\\\,0\\\\.9\\\\)\\\\]{color:#000000e6}.text-\\\\[rgba\\\\(0\\\\,0\\\\,0\\\\,0\\\\.25\\\\)\\\\]{color:#00000040}.text-\\\\[rgba\\\\(0\\\\,0\\\\,0\\\\,0\\\\.85\\\\)\\\\]{color:#000000d9}.text-black{color:var(--color-black)}.text-blue-400{color:var(--color-blue-400)}.text-blue-500{color:var(--color-blue-500)}.text-gray-400{color:var(--color-gray-400)}.text-green-500{color:var(--color-green-500)}.text-white{color:var(--color-white)}.text-yellow-800{color:var(--color-yellow-800)}.italic{font-style:italic}.\\\\!shadow-none{--tw-shadow:0 0 #0000!important;box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)!important}.outline{outline-style:var(--tw-outline-style);outline-width:1px}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,visibility,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-200{--tw-duration:.2s;transition-duration:.2s}.ease-in{--tw-ease:var(--ease-in);transition-timing-function:var(--ease-in)}@media (hover:hover){.hover\\\\:\\\\!bg-transparent:hover{background-color:#0000!important}.hover\\\\:\\\\!text-blue-500:hover{color:var(--color-blue-500)!important}.hover\\\\:\\\\!text-red-500:hover{color:var(--color-red-500)!important}.hover\\\\:text-blue-600:hover{color:var(--color-blue-600)}.hover\\\\:text-gray-600:hover{color:var(--color-gray-600)}.hover\\\\:opacity-80:hover{opacity:.8}.hover\\\\:shadow-md:hover{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}}.focus\\\\:\\\\!bg-transparent:focus{background-color:#0000!important}.disabled\\\\:\\\\!text-gray-300:disabled{color:var(--color-gray-300)!important}}.command-form{flex-direction:column;height:100%;display:flex;overflow:hidden}.form-content{grid-template-rows:auto 1fr;gap:24px;height:100%;min-height:0;display:grid;position:relative}.result-container{flex-direction:column;grid-row:2;min-height:0;display:flex;position:relative;overflow:auto}.result-container>div{flex:1;height:auto;min-height:0}@property --tw-translate-x{syntax:\\\"*\\\";inherits:false;initial-value:0}@property --tw-translate-y{syntax:\\\"*\\\";inherits:false;initial-value:0}@property --tw-translate-z{syntax:\\\"*\\\";inherits:false;initial-value:0}@property --tw-rotate-x{syntax:\\\"*\\\";inherits:false}@property --tw-rotate-y{syntax:\\\"*\\\";inherits:false}@property --tw-rotate-z{syntax:\\\"*\\\";inherits:false}@property --tw-skew-x{syntax:\\\"*\\\";inherits:false}@property --tw-skew-y{syntax:\\\"*\\\";inherits:false}@property --tw-border-style{syntax:\\\"*\\\";inherits:false;initial-value:solid}@property --tw-leading{syntax:\\\"*\\\";inherits:false}@property --tw-font-weight{syntax:\\\"*\\\";inherits:false}@property --tw-shadow{syntax:\\\"*\\\";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:\\\"*\\\";inherits:false}@property --tw-shadow-alpha{syntax:\\\"<percentage>\\\";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:\\\"*\\\";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:\\\"*\\\";inherits:false}@property --tw-inset-shadow-alpha{syntax:\\\"<percentage>\\\";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:\\\"*\\\";inherits:false}@property --tw-ring-shadow{syntax:\\\"*\\\";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:\\\"*\\\";inherits:false}@property --tw-inset-ring-shadow{syntax:\\\"*\\\";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:\\\"*\\\";inherits:false}@property --tw-ring-offset-width{syntax:\\\"<length>\\\";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:\\\"*\\\";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:\\\"*\\\";inherits:false;initial-value:0 0 #0000}@property --tw-outline-style{syntax:\\\"*\\\";inherits:false;initial-value:solid}@property --tw-blur{syntax:\\\"*\\\";inherits:false}@property --tw-brightness{syntax:\\\"*\\\";inherits:false}@property --tw-contrast{syntax:\\\"*\\\";inherits:false}@property --tw-grayscale{syntax:\\\"*\\\";inherits:false}@property --tw-hue-rotate{syntax:\\\"*\\\";inherits:false}@property --tw-invert{syntax:\\\"*\\\";inherits:false}@property --tw-opacity{syntax:\\\"*\\\";inherits:false}@property --tw-saturate{syntax:\\\"*\\\";inherits:false}@property --tw-sepia{syntax:\\\"*\\\";inherits:false}@property --tw-drop-shadow{syntax:\\\"*\\\";inherits:false}@property --tw-drop-shadow-color{syntax:\\\"*\\\";inherits:false}@property --tw-drop-shadow-alpha{syntax:\\\"<percentage>\\\";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:\\\"*\\\";inherits:false}@property --tw-duration{syntax:\\\"*\\\";inherits:false}@property --tw-ease{syntax:\\\"*\\\";inherits:false}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.blackboard .footer{color:#aaa}.blackboard ul{padding-left:0}.blackboard li{list-style:none}.blackboard .bottom-tip{height:30px}.blackboard .bottom-tip-item{color:#aaa;text-overflow:ellipsis;word-wrap:break-word;max-width:500px}.blackboard-filter{margin:10px 0}.blackboard-main-content canvas{box-sizing:border-box;border:1px solid #888;width:100%}`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../packages/visualizer/dist/es/component/blackboard/index.css\"],\"names\":[],\"mappings\":\"AADA,oBAAA,UAAA,CAIA,eAAA,cAAA,CAIA,eAAA,eAAA,CAIA,wBAAA,WAAA,CAIA,6BAAA,UAAA,CAAA,sBAAA,CAAA,oBAAA,CAAA,eAAA,CAOA,mBAAA,aAAA,CAIA,gCAAA,qBAAA,CAAA,qBAAA,CAAA,UAAA\",\"sourcesContent\":[\".blackboard .footer {\\n  color: #aaa;\\n}\\n\\n.blackboard ul {\\n  padding-left: 0;\\n}\\n\\n.blackboard li {\\n  list-style: none;\\n}\\n\\n.blackboard .bottom-tip {\\n  height: 30px;\\n}\\n\\n.blackboard .bottom-tip-item {\\n  color: #aaa;\\n  text-overflow: ellipsis;\\n  word-wrap: break-word;\\n  max-width: 500px;\\n}\\n\\n.blackboard-filter {\\n  margin: 10px 0;\\n}\\n\\n.blackboard-main-content canvas {\\n  box-sizing: border-box;\\n  border: 1px solid #888;\\n  width: 100%;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.env-config-reminder{background:#fff2e8;border-radius:12px;align-items:center;gap:12px;margin-bottom:12px;padding:12px 16px;display:flex}.env-config-reminder .reminder-icon{color:#fa541c;width:16px;height:16px}.env-config-reminder .reminder-text{color:#000;flex:1;font-size:14px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../packages/visualizer/dist/es/component/env-config-reminder/index.css\"],\"names\":[],\"mappings\":\"AADA,qBAAA,kBAAA,CAAA,kBAAA,CAAA,kBAAA,CAAA,QAAA,CAAA,kBAAA,CAAA,iBAAA,CAAA,YAAA,CAUA,oCAAA,aAAA,CAAA,UAAA,CAAA,WAAA,CAMA,oCAAA,UAAA,CAAA,MAAA,CAAA,cAAA\",\"sourcesContent\":[\".env-config-reminder {\\n  background: #fff2e8;\\n  border-radius: 12px;\\n  align-items: center;\\n  gap: 12px;\\n  margin-bottom: 12px;\\n  padding: 12px 16px;\\n  display: flex;\\n}\\n\\n.env-config-reminder .reminder-icon {\\n  color: #fa541c;\\n  width: 16px;\\n  height: 16px;\\n}\\n\\n.env-config-reminder .reminder-text {\\n  color: #000;\\n  flex: 1;\\n  font-size: 14px;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.history-selector-wrapper{position:relative}.history-modal-overlay{z-index:9999;background:#fff;border:1px solid #00000014;border-radius:12px;width:320px;height:400px;position:fixed;top:auto;bottom:20px;right:20px;box-shadow:0 8px 24px #0000001f}.history-modal-container{border-radius:12px;flex-direction:column;width:100%;height:100%;display:flex;overflow:hidden}.history-modal-container .history-modal-header{justify-content:space-between;align-items:center;height:48px;padding:0 25px;line-height:48px;display:flex}.history-modal-container .history-modal-header .close-button{justify-content:center;align-items:center;margin-right:-4px;padding:4px;display:flex}.history-modal-container .history-modal-header .close-button .anticon{color:#999;font-size:18px}.history-modal-container .history-modal-header .close-button:hover .anticon{color:#666}.history-modal-container .history-search-section{background:#fff;padding:16px 20px}.history-modal-container .history-search-section .search-input-wrapper{color:#00000040;align-items:center;gap:12px;display:flex}.history-modal-container .history-search-section .search-input-wrapper .search-input{background:#f1f2f3;border:none;border-radius:16px;flex:1;height:36px}.history-modal-container .history-search-section .search-input-wrapper .search-input .ant-input{box-shadow:none;background:0 0;border:none}.history-modal-container .history-search-section .search-input-wrapper .search-input:hover,.history-modal-container .history-search-section .search-input-wrapper .search-input:focus-within{background:#fff;border-color:#d9d9d9}.history-modal-container .history-search-section .search-input-wrapper .clear-button{color:#1890ff;height:auto;padding:0}.history-modal-container .history-search-section .search-input-wrapper .clear-button:hover{color:#40a9ff}.history-modal-container .history-content{flex:1;padding:0 25px 25px;overflow-y:auto}.history-modal-container .history-content .history-group{margin-bottom:10px}.history-modal-container .history-content .history-group .history-group-title{color:#00000073;height:40px;font-size:12px;font-weight:400;line-height:40px}.history-modal-container .history-content .history-group .history-item{cursor:pointer;color:#000000d9;white-space:nowrap;text-overflow:ellipsis;height:40px;font-size:14px;line-height:40px;overflow:hidden}.history-modal-container .history-content .history-group .history-item:hover{background:#f2f4f7;margin:0 -8px;padding:0 8px}.history-modal-container .history-content .no-results{text-align:center;color:#999;padding:40px 20px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../packages/visualizer/dist/es/component/history-selector/index.css\"],\"names\":[],\"mappings\":\"AADA,0BAAA,iBAAA,CAIA,uBAAA,YAAA,CAAA,eAAA,CAAA,0BAAA,CAAA,kBAAA,CAAA,WAAA,CAAA,YAAA,CAAA,cAAA,CAAA,QAAA,CAAA,WAAA,CAAA,UAAA,CAAA,+BAAA,CAcA,yBAAA,kBAAA,CAAA,qBAAA,CAAA,UAAA,CAAA,WAAA,CAAA,YAAA,CAAA,eAAA,CASA,+CAAA,6BAAA,CAAA,kBAAA,CAAA,WAAA,CAAA,cAAA,CAAA,gBAAA,CAAA,YAAA,CASA,6DAAA,sBAAA,CAAA,kBAAA,CAAA,iBAAA,CAAA,WAAA,CAAA,YAAA,CAQA,sEAAA,UAAA,CAAA,cAAA,CAKA,4EAAA,UAAA,CAIA,iDAAA,eAAA,CAAA,iBAAA,CAKA,uEAAA,eAAA,CAAA,kBAAA,CAAA,QAAA,CAAA,YAAA,CAOA,qFAAA,kBAAA,CAAA,WAAA,CAAA,kBAAA,CAAA,MAAA,CAAA,WAAA,CAQA,gGAAA,eAAA,CAAA,cAAA,CAAA,WAAA,CAMA,6LAAA,eAAA,CAAA,oBAAA,CAKA,qFAAA,aAAA,CAAA,WAAA,CAAA,SAAA,CAMA,2FAAA,aAAA,CAIA,0CAAA,MAAA,CAAA,mBAAA,CAAA,eAAA,CAMA,yDAAA,kBAAA,CAIA,8EAAA,eAAA,CAAA,WAAA,CAAA,cAAA,CAAA,eAAA,CAAA,gBAAA,CAQA,uEAAA,cAAA,CAAA,eAAA,CAAA,kBAAA,CAAA,sBAAA,CAAA,WAAA,CAAA,cAAA,CAAA,gBAAA,CAAA,eAAA,CAWA,6EAAA,kBAAA,CAAA,aAAA,CAAA,aAAA,CAMA,sDAAA,iBAAA,CAAA,UAAA,CAAA,iBAAA\",\"sourcesContent\":[\".history-selector-wrapper {\\n  position: relative;\\n}\\n\\n.history-modal-overlay {\\n  z-index: 9999;\\n  background: #fff;\\n  border: 1px solid rgba(0, 0, 0, .08);\\n  border-radius: 12px;\\n  width: 320px;\\n  height: 400px;\\n  position: fixed;\\n  top: auto;\\n  bottom: 20px;\\n  right: 20px;\\n  box-shadow: 0 8px 24px rgba(0, 0, 0, .12);\\n}\\n\\n.history-modal-container {\\n  border-radius: 12px;\\n  flex-direction: column;\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  overflow: hidden;\\n}\\n\\n.history-modal-container .history-modal-header {\\n  justify-content: space-between;\\n  align-items: center;\\n  height: 48px;\\n  padding: 0 25px;\\n  line-height: 48px;\\n  display: flex;\\n}\\n\\n.history-modal-container .history-modal-header .close-button {\\n  justify-content: center;\\n  align-items: center;\\n  margin-right: -4px;\\n  padding: 4px;\\n  display: flex;\\n}\\n\\n.history-modal-container .history-modal-header .close-button .anticon {\\n  color: #999;\\n  font-size: 18px;\\n}\\n\\n.history-modal-container .history-modal-header .close-button:hover .anticon {\\n  color: #666;\\n}\\n\\n.history-modal-container .history-search-section {\\n  background: #fff;\\n  padding: 16px 20px;\\n}\\n\\n.history-modal-container .history-search-section .search-input-wrapper {\\n  color: rgba(0, 0, 0, .25);\\n  align-items: center;\\n  gap: 12px;\\n  display: flex;\\n}\\n\\n.history-modal-container .history-search-section .search-input-wrapper .search-input {\\n  background: #f1f2f3;\\n  border: none;\\n  border-radius: 16px;\\n  flex: 1;\\n  height: 36px;\\n}\\n\\n.history-modal-container .history-search-section .search-input-wrapper .search-input .ant-input {\\n  box-shadow: none;\\n  background: none;\\n  border: none;\\n}\\n\\n.history-modal-container .history-search-section .search-input-wrapper .search-input:hover, .history-modal-container .history-search-section .search-input-wrapper .search-input:focus-within {\\n  background: #fff;\\n  border-color: #d9d9d9;\\n}\\n\\n.history-modal-container .history-search-section .search-input-wrapper .clear-button {\\n  color: #1890ff;\\n  height: auto;\\n  padding: 0;\\n}\\n\\n.history-modal-container .history-search-section .search-input-wrapper .clear-button:hover {\\n  color: #40a9ff;\\n}\\n\\n.history-modal-container .history-content {\\n  flex: 1;\\n  padding: 0 25px 25px;\\n  overflow-y: auto;\\n}\\n\\n.history-modal-container .history-content .history-group {\\n  margin-bottom: 10px;\\n}\\n\\n.history-modal-container .history-content .history-group .history-group-title {\\n  color: rgba(0, 0, 0, .45);\\n  height: 40px;\\n  font-size: 12px;\\n  font-weight: 400;\\n  line-height: 40px;\\n}\\n\\n.history-modal-container .history-content .history-group .history-item {\\n  cursor: pointer;\\n  color: rgba(0, 0, 0, .85);\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  height: 40px;\\n  font-size: 14px;\\n  line-height: 40px;\\n  overflow: hidden;\\n}\\n\\n.history-modal-container .history-content .history-group .history-item:hover {\\n  background: #f2f4f7;\\n  margin: 0 -8px;\\n  padding: 0 8px;\\n}\\n\\n.history-modal-container .history-content .no-results {\\n  text-align: center;\\n  color: #999;\\n  padding: 40px 20px;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.nav-actions{align-items:center;gap:8px;display:flex}.nav-actions .nav-icon{color:#000000a6;cursor:pointer;font-size:16px;transition:color .3s}.nav-actions .nav-icon:hover{color:#2b83ff}.nav-actions a{align-items:center;text-decoration:none;display:flex}.nav-actions a:hover .nav-icon{color:#2b83ff}[data-theme=dark] .nav-actions .nav-icon{color:#ffffffa6}[data-theme=dark] .nav-actions .nav-icon:hover{color:#2b83ff}`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../packages/visualizer/dist/es/component/nav-actions/style.css\"],\"names\":[],\"mappings\":\"AADA,aAAA,kBAAA,CAAA,OAAA,CAAA,YAAA,CAMA,uBAAA,eAAA,CAAA,cAAA,CAAA,cAAA,CAAA,oBAAA,CAOA,6BAAA,aAAA,CAIA,eAAA,kBAAA,CAAA,oBAAA,CAAA,YAAA,CAMA,+BAAA,aAAA,CAIA,yCAAA,eAAA,CAIA,+CAAA,aAAA\",\"sourcesContent\":[\".nav-actions {\\n  align-items: center;\\n  gap: 8px;\\n  display: flex;\\n}\\n\\n.nav-actions .nav-icon {\\n  color: rgba(0, 0, 0, .65);\\n  cursor: pointer;\\n  font-size: 16px;\\n  transition: color .3s;\\n}\\n\\n.nav-actions .nav-icon:hover {\\n  color: #2b83ff;\\n}\\n\\n.nav-actions a {\\n  align-items: center;\\n  text-decoration: none;\\n  display: flex;\\n}\\n\\n.nav-actions a:hover .nav-icon {\\n  color: #2b83ff;\\n}\\n\\n[data-theme=\\\"dark\\\"] .nav-actions .nav-icon {\\n  color: rgba(255, 255, 255, .65);\\n}\\n\\n[data-theme=\\\"dark\\\"] .nav-actions .nav-icon:hover {\\n  color: #2b83ff;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.player-container{box-sizing:border-box;background:#f2f4f7;border:1px solid #f2f4f7;border-radius:8px;flex-direction:column;width:100%;max-width:100%;height:100%;min-height:300px;max-height:100%;margin:0 auto;padding:12px;line-height:100%;display:flex;position:relative;overflow:visible}.player-container[data-fit-mode=height]{background:#fff}.player-container[data-fit-mode=height] .canvas-container{background-color:#f2f4f7}.player-container .canvas-container{width:100%;min-height:200px;aspect-ratio:var(--canvas-aspect-ratio,16/9);background-color:#fff;border-top-left-radius:4px;border-top-right-radius:4px;flex:none;justify-content:center;align-items:center;display:flex;position:relative;overflow:hidden}.player-container .canvas-container canvas{box-sizing:border-box;object-fit:contain;border:none;width:100%;max-width:100%;height:auto;max-height:100%;margin:0 auto;display:block}.player-container .canvas-container[data-fit-mode=height]{aspect-ratio:unset;flex:auto;height:auto;min-height:0}.player-container .canvas-container[data-fit-mode=height] canvas{width:auto;max-width:100%;height:100%;max-height:100%}.player-container .canvas-container[data-fit-mode=width]{aspect-ratio:var(--canvas-aspect-ratio,16/9)}.player-container .canvas-container[data-fit-mode=width] canvas{width:100%;height:auto}.player-container .player-timeline-wrapper{flex:none;width:100%;height:4px;margin-bottom:2px;position:relative}.player-container .player-timeline{background:#666;flex-shrink:0;width:100%;height:4px;position:relative}.player-container .player-timeline .player-timeline-progress{background:#2b83ff;height:4px;transition-timing-function:linear;position:absolute;top:0;left:0}.player-container .player-tools-wrapper{box-sizing:border-box;flex:none;width:100%;height:72px;padding:15px 16px;position:relative}.player-container .player-tools{color:#000;box-sizing:border-box;flex-direction:row;flex-shrink:0;justify-content:space-between;width:100%;max-width:100%;height:42px;font-size:14px;display:flex;overflow:hidden}.player-container .player-tools .ant-spin{color:#333}.player-container .player-tools .player-control{flex-direction:row;flex-grow:1;align-items:center;display:flex;overflow:hidden}.player-container .player-tools .status-icon{border-radius:8px;flex-shrink:0;justify-content:center;align-items:center;width:32px;height:32px;margin-left:10px;transition:all .2s;display:flex}.player-container .player-tools .status-icon:hover{cursor:pointer;background:#f0f0f0}.player-container .player-tools .status-text{flex-direction:column;flex-grow:1;flex-shrink:1;justify-content:space-between;width:0;min-width:0;height:100%;display:flex;position:relative;overflow:hidden}.player-container .player-tools .title{font-weight:600}.player-container .player-tools .title,.player-container .player-tools .subtitle{text-overflow:ellipsis;white-space:nowrap;width:100%;overflow:hidden}.player-container .player-tools .player-tools-item{flex-direction:column;justify-content:center;height:100%;display:flex}`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../packages/visualizer/dist/es/component/player/index.css\"],\"names\":[],\"mappings\":\"AADA,kBAAA,qBAAA,CAAA,kBAAA,CAAA,wBAAA,CAAA,iBAAA,CAAA,qBAAA,CAAA,UAAA,CAAA,cAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,eAAA,CAAA,aAAA,CAAA,YAAA,CAAA,gBAAA,CAAA,YAAA,CAAA,iBAAA,CAAA,gBAAA,CAmBA,wCAAA,eAAA,CAIA,0DAAA,wBAAA,CAIA,oCAAA,UAAA,CAAA,gBAAA,CAAA,4CAAA,CAAA,qBAAA,CAAA,0BAAA,CAAA,2BAAA,CAAA,SAAA,CAAA,sBAAA,CAAA,kBAAA,CAAA,YAAA,CAAA,iBAAA,CAAA,eAAA,CAeA,2CAAA,qBAAA,CAAA,kBAAA,CAAA,WAAA,CAAA,UAAA,CAAA,cAAA,CAAA,WAAA,CAAA,eAAA,CAAA,aAAA,CAAA,aAAA,CAYA,0DAAA,kBAAA,CAAA,SAAA,CAAA,WAAA,CAAA,YAAA,CAOA,iEAAA,UAAA,CAAA,cAAA,CAAA,WAAA,CAAA,eAAA,CAOA,yDAAA,4CAAA,CAIA,gEAAA,UAAA,CAAA,WAAA,CAKA,2CAAA,SAAA,CAAA,UAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,iBAAA,CAQA,mCAAA,eAAA,CAAA,aAAA,CAAA,UAAA,CAAA,UAAA,CAAA,iBAAA,CAQA,6DAAA,kBAAA,CAAA,UAAA,CAAA,iCAAA,CAAA,iBAAA,CAAA,KAAA,CAAA,MAAA,CASA,wCAAA,qBAAA,CAAA,SAAA,CAAA,UAAA,CAAA,WAAA,CAAA,iBAAA,CAAA,iBAAA,CASA,gCAAA,UAAA,CAAA,qBAAA,CAAA,kBAAA,CAAA,aAAA,CAAA,6BAAA,CAAA,UAAA,CAAA,cAAA,CAAA,WAAA,CAAA,cAAA,CAAA,YAAA,CAAA,eAAA,CAcA,0CAAA,UAAA,CAIA,gDAAA,kBAAA,CAAA,WAAA,CAAA,kBAAA,CAAA,YAAA,CAAA,eAAA,CAQA,6CAAA,iBAAA,CAAA,aAAA,CAAA,sBAAA,CAAA,kBAAA,CAAA,UAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,kBAAA,CAAA,YAAA,CAYA,mDAAA,cAAA,CAAA,kBAAA,CAKA,6CAAA,qBAAA,CAAA,WAAA,CAAA,aAAA,CAAA,6BAAA,CAAA,OAAA,CAAA,WAAA,CAAA,WAAA,CAAA,YAAA,CAAA,iBAAA,CAAA,eAAA,CAaA,uCAAA,eAAA,CAIA,iFAAA,sBAAA,CAAA,kBAAA,CAAA,UAAA,CAAA,eAAA,CAOA,mDAAA,qBAAA,CAAA,sBAAA,CAAA,WAAA,CAAA,YAAA\",\"sourcesContent\":[\".player-container {\\n  box-sizing: border-box;\\n  background: #f2f4f7;\\n  border: 1px solid #f2f4f7;\\n  border-radius: 8px;\\n  flex-direction: column;\\n  width: 100%;\\n  max-width: 100%;\\n  height: 100%;\\n  min-height: 300px;\\n  max-height: 100%;\\n  margin: 0 auto;\\n  padding: 12px;\\n  line-height: 100%;\\n  display: flex;\\n  position: relative;\\n  overflow: visible;\\n}\\n\\n.player-container[data-fit-mode=\\\"height\\\"] {\\n  background: #fff;\\n}\\n\\n.player-container[data-fit-mode=\\\"height\\\"] .canvas-container {\\n  background-color: #f2f4f7;\\n}\\n\\n.player-container .canvas-container {\\n  width: 100%;\\n  min-height: 200px;\\n  aspect-ratio: var(--canvas-aspect-ratio, 16 / 9);\\n  background-color: #fff;\\n  border-top-left-radius: 4px;\\n  border-top-right-radius: 4px;\\n  flex: none;\\n  justify-content: center;\\n  align-items: center;\\n  display: flex;\\n  position: relative;\\n  overflow: hidden;\\n}\\n\\n.player-container .canvas-container canvas {\\n  box-sizing: border-box;\\n  object-fit: contain;\\n  border: none;\\n  width: 100%;\\n  max-width: 100%;\\n  height: auto;\\n  max-height: 100%;\\n  margin: 0 auto;\\n  display: block;\\n}\\n\\n.player-container .canvas-container[data-fit-mode=\\\"height\\\"] {\\n  aspect-ratio: unset;\\n  flex: auto;\\n  height: auto;\\n  min-height: 0;\\n}\\n\\n.player-container .canvas-container[data-fit-mode=\\\"height\\\"] canvas {\\n  width: auto;\\n  max-width: 100%;\\n  height: 100%;\\n  max-height: 100%;\\n}\\n\\n.player-container .canvas-container[data-fit-mode=\\\"width\\\"] {\\n  aspect-ratio: var(--canvas-aspect-ratio, 16 / 9);\\n}\\n\\n.player-container .canvas-container[data-fit-mode=\\\"width\\\"] canvas {\\n  width: 100%;\\n  height: auto;\\n}\\n\\n.player-container .player-timeline-wrapper {\\n  flex: none;\\n  width: 100%;\\n  height: 4px;\\n  margin-bottom: 2px;\\n  position: relative;\\n}\\n\\n.player-container .player-timeline {\\n  background: #666;\\n  flex-shrink: 0;\\n  width: 100%;\\n  height: 4px;\\n  position: relative;\\n}\\n\\n.player-container .player-timeline .player-timeline-progress {\\n  background: #2b83ff;\\n  height: 4px;\\n  transition-timing-function: linear;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n}\\n\\n.player-container .player-tools-wrapper {\\n  box-sizing: border-box;\\n  flex: none;\\n  width: 100%;\\n  height: 72px;\\n  padding: 15px 16px;\\n  position: relative;\\n}\\n\\n.player-container .player-tools {\\n  color: #000;\\n  box-sizing: border-box;\\n  flex-direction: row;\\n  flex-shrink: 0;\\n  justify-content: space-between;\\n  width: 100%;\\n  max-width: 100%;\\n  height: 42px;\\n  font-size: 14px;\\n  display: flex;\\n  overflow: hidden;\\n}\\n\\n.player-container .player-tools .ant-spin {\\n  color: #333;\\n}\\n\\n.player-container .player-tools .player-control {\\n  flex-direction: row;\\n  flex-grow: 1;\\n  align-items: center;\\n  display: flex;\\n  overflow: hidden;\\n}\\n\\n.player-container .player-tools .status-icon {\\n  border-radius: 8px;\\n  flex-shrink: 0;\\n  justify-content: center;\\n  align-items: center;\\n  width: 32px;\\n  height: 32px;\\n  margin-left: 10px;\\n  transition: all .2s;\\n  display: flex;\\n}\\n\\n.player-container .player-tools .status-icon:hover {\\n  cursor: pointer;\\n  background: #f0f0f0;\\n}\\n\\n.player-container .player-tools .status-text {\\n  flex-direction: column;\\n  flex-grow: 1;\\n  flex-shrink: 1;\\n  justify-content: space-between;\\n  width: 0;\\n  min-width: 0;\\n  height: 100%;\\n  display: flex;\\n  position: relative;\\n  overflow: hidden;\\n}\\n\\n.player-container .player-tools .title {\\n  font-weight: 600;\\n}\\n\\n.player-container .player-tools .title, .player-container .player-tools .subtitle {\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  width: 100%;\\n  overflow: hidden;\\n}\\n\\n.player-container .player-tools .player-tools-item {\\n  flex-direction: column;\\n  justify-content: center;\\n  height: 100%;\\n  display: flex;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.result-wrapper{justify-content:center;height:100%;margin:4px 0;display:flex}.result-wrapper .loading-container{flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;display:flex}.result-wrapper .loading-container .loading-progress-text{color:#888;margin-top:8px;font-size:12px}.result-wrapper pre{white-space:pre-wrap;text-wrap:unset;word-wrap:break-word;overflow-wrap:break-word;background:#f2f4f7;border-radius:8px;margin:0;padding:14px;overflow:scroll}`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../packages/visualizer/dist/es/component/playground-result/index.css\"],\"names\":[],\"mappings\":\"AADA,gBAAA,sBAAA,CAAA,WAAA,CAAA,YAAA,CAAA,YAAA,CAOA,mCAAA,qBAAA,CAAA,sBAAA,CAAA,kBAAA,CAAA,UAAA,CAAA,WAAA,CAAA,YAAA,CASA,0DAAA,UAAA,CAAA,cAAA,CAAA,cAAA,CAMA,oBAAA,oBAAA,CAAA,eAAA,CAAA,oBAAA,CAAA,wBAAA,CAAA,kBAAA,CAAA,iBAAA,CAAA,QAAA,CAAA,YAAA,CAAA,eAAA\",\"sourcesContent\":[\".result-wrapper {\\n  justify-content: center;\\n  height: 100%;\\n  margin: 4px 0;\\n  display: flex;\\n}\\n\\n.result-wrapper .loading-container {\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n}\\n\\n.result-wrapper .loading-container .loading-progress-text {\\n  color: #888;\\n  margin-top: 8px;\\n  font-size: 12px;\\n}\\n\\n.result-wrapper pre {\\n  white-space: pre-wrap;\\n  text-wrap: unset;\\n  word-wrap: break-word;\\n  overflow-wrap: break-word;\\n  background: #f2f4f7;\\n  border-radius: 8px;\\n  margin: 0;\\n  padding: 14px;\\n  overflow: scroll;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.prompt-input-wrapper{width:100%}.prompt-input-wrapper .mode-radio-group-wrapper{align-items:center;gap:8px;display:flex;position:relative}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group{scrollbar-width:thin;flex:1;align-items:center;gap:8px;min-width:0;height:100%;margin-right:60px;display:flex;overflow:auto hidden}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group::-webkit-scrollbar{height:6px}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .ant-form-item{flex-shrink:0;margin:0!important}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .ant-form-item .ant-radio-group{flex-wrap:nowrap;gap:8px;display:flex}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .ant-radio-button-wrapper{height:24px;box-shadow:none;white-space:nowrap;background-color:#f7f7f7;border:none;border-radius:11px;flex-shrink:0;margin-right:0;padding:0 8px;font-size:12px;line-height:24px}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .ant-radio-button-wrapper:before{display:none}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .ant-radio-button-wrapper:focus-within{outline:none}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .ant-radio-button-wrapper.ant-radio-button-wrapper-checked{color:#fff;background-color:#2b83ff;border-color:#2b83ff}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .ant-radio-button-wrapper.ant-radio-button-wrapper-checked:hover{color:#fff}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .ant-dropdown-trigger{flex-shrink:0}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .more-apis-button{height:24px;box-shadow:none;white-space:nowrap;background-color:#f7f7f7;border:none;border-radius:11px;flex-shrink:0;align-items:center;gap:2px;max-width:160px;padding:0 8px;font-size:12px;display:inline-flex}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .more-apis-button .ant-btn-content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .more-apis-button:hover{background-color:#e6e6e6}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .more-apis-button.selected-from-dropdown{color:#fff;background-color:#2b83ff;font-weight:500}.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .more-apis-button.selected-from-dropdown:hover{background-color:#2b83ff}.prompt-input-wrapper .mode-radio-group-wrapper .action-icons{z-index:10;pointer-events:none;background:linear-gradient(90deg,#0000 0%,#ffffff80 20%,#fffc 40%,#fffffff2 60%,#fff 70%);flex-shrink:0;justify-content:flex-end;align-items:center;gap:8px;width:80px;padding-left:20px;display:flex;position:absolute;top:50%;right:0;transform:translateY(-50%)}.prompt-input-wrapper .mode-radio-group-wrapper .action-icons>*{pointer-events:auto}.prompt-input-wrapper .main-side-console-input{margin-top:10px;position:relative}.prompt-input-wrapper .main-side-console-input .main-side-console-input-textarea{white-space:pre-wrap;scrollbar-width:thin;background:#fff;border:1px solid #f2f4f7;border-radius:12px;padding:12px 16px;line-height:21px;transition:background-color .2s;overflow-y:auto}@keyframes hue-shift{0%{filter:hue-rotate()}to{filter:hue-rotate(360deg)}}.prompt-input-wrapper .main-side-console-input .main-side-console-input-textarea:focus-within{background:linear-gradient(#fff,#fff) padding-box padding-box,linear-gradient(135deg,#4285f4 0%,#06f 25%,#7b02c5 50%,#ea4335 75%,#ff7043 100%) border-box;border:1px solid #0000}.prompt-input-wrapper .main-side-console-input .main-side-console-input-textarea::-webkit-scrollbar{width:6px}.prompt-input-wrapper .main-side-console-input .main-side-console-input-textarea::-webkit-scrollbar-thumb{background-color:#0003;border-radius:3px}.prompt-input-wrapper .main-side-console-input.loading .main-side-console-input-textarea{background:linear-gradient(#fff,#fff) padding-box padding-box,linear-gradient(135deg,#4285f4 0%,#06f 25%,#7b02c5 50%,#ea4335 75%,#ff7043 100%) border-box;border:1px solid #0000;animation:5s linear infinite hue-shift}.prompt-input-wrapper .main-side-console-input .ant-form-item-control-input-content{z-index:999;border:3px solid #0000;border-radius:14px}.prompt-input-wrapper .main-side-console-input:focus-within .ant-form-item-control-input-content{border-color:#2b83ff29}.prompt-input-wrapper .main-side-console-input.disabled .form-controller-wrapper{background-color:#0000}.prompt-input-wrapper .ant-form-item-with-help+.form-controller-wrapper{bottom:22px}.prompt-input-wrapper .ant-input{padding-bottom:40px}.prompt-input-wrapper .form-controller-wrapper{box-sizing:border-box;background-color:#fff;flex-direction:row;justify-content:flex-end;align-items:flex-end;gap:8px;width:calc(100% - 32px);padding:12px 0;line-height:32px;transition:background-color .2s;display:flex;position:absolute;bottom:1px;left:16px}.prompt-input-wrapper .settings-wrapper{color:#777;flex-flow:wrap;gap:2px;display:flex}.prompt-input-wrapper .settings-wrapper.settings-wrapper-hover{color:#3b3b3b}.prompt-input-wrapper .structured-params-container{background:linear-gradient(#fff,#fff) padding-box padding-box,linear-gradient(135deg,#4285f4 0%,#06f 25%,#7b02c5 50%,#ea4335 75%,#ff7043 100%) border-box;border:1px solid #0000;border-radius:12px;padding:16px 16px 56px}.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item{flex-direction:column;display:flex}.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label{text-align:left;flex-basis:auto;padding-bottom:4px}.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label>label{color:#000000d9;height:auto;font-size:12px;font-weight:500;line-height:1.5}.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label>label:after{color:#ff4d4f;font-family:SimSun,sans-serif;font-size:12px;line-height:1;display:inline-block}.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label>label:not(:-webkit-any(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi))):after{margin-left:4px}.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label>label:not(:-moz-any(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi))):after{margin-left:4px}.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label>label:not(:-webkit-any(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi))):after{margin-left:4px}.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label>label:not(:-moz-any(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi))):after{margin-left:4px}.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label>label:not(:is(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi))):after{margin-left:4px}.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label>label:-webkit-any(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi)):after{margin-right:4px}.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label>label:-moz-any(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi)):after{margin-right:4px}.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label>label:is(:lang(ae),:lang(ar),:lang(arc),:lang(bcc),:lang(bqi),:lang(ckb),:lang(dv),:lang(fa),:lang(glk),:lang(he),:lang(ku),:lang(mzn),:lang(nqo),:lang(pnb),:lang(ps),:lang(sd),:lang(ug),:lang(ur),:lang(yi)):after{margin-right:4px}.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-control{flex:1;margin-top:0}.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-row{flex-direction:column}.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-control-input{min-height:auto}.prompt-input-wrapper .structured-params-container .structured-params .ant-input,.prompt-input-wrapper .structured-params-container .structured-params .ant-input-number,.prompt-input-wrapper .structured-params-container .structured-params .ant-select{border:1px solid #e1e5e9;border-radius:6px;width:100%}.prompt-input-wrapper .structured-params-container .structured-params .ant-input:hover,.prompt-input-wrapper .structured-params-container .structured-params .ant-input-number:hover,.prompt-input-wrapper .structured-params-container .structured-params .ant-select:hover{border-color:#40a9ff}.prompt-input-wrapper .structured-params-container .structured-params .ant-input:focus,.prompt-input-wrapper .structured-params-container .structured-params .ant-input-number:focus,.prompt-input-wrapper .structured-params-container .structured-params .ant-select:focus,.prompt-input-wrapper .structured-params-container .structured-params .ant-input:focus-within,.prompt-input-wrapper .structured-params-container .structured-params .ant-input-number:focus-within,.prompt-input-wrapper .structured-params-container .structured-params .ant-select:focus-within{border-color:#40a9ff;box-shadow:0 0 0 2px #1890ff33}.prompt-input-wrapper .structured-params-container .structured-params textarea.ant-input{padding-bottom:5px}.prompt-input-wrapper .structured-params-container .structured-params .ant-input-number .ant-input-number-input{box-shadow:none;border:none}.prompt-input-wrapper .structured-params-container .structured-params .ant-input-number:hover .ant-input-number-input{box-shadow:none}.prompt-input-wrapper .structured-params-container .structured-params .ant-select{min-width:120px}.prompt-input-wrapper .structured-params-container .structured-params .ant-select .ant-select-selector{box-shadow:none;border:none}.prompt-input-wrapper .structured-params-container .structured-params .ant-select:hover .ant-select-selector,.prompt-input-wrapper .structured-params-container .structured-params .ant-select.ant-select-focused .ant-select-selector{box-shadow:none}.prompt-input-wrapper .structured-params-container .structured-params .ant-radio-group{width:100%}.prompt-input-wrapper .structured-params-container .structured-params .ant-radio-group .ant-radio-button-wrapper{border:1px solid #e1e5e9;border-radius:6px;height:32px;margin-right:4px;font-size:12px;line-height:30px}.prompt-input-wrapper .structured-params-container .structured-params .ant-radio-group .ant-radio-button-wrapper.ant-radio-button-wrapper-checked{color:#fff;background-color:#2b83ff;border-color:#2b83ff}.selector-trigger{cursor:pointer;width:24px;height:24px;transition:all .2s}.selector-trigger .action-icon{color:#000000d9;font-size:14px;transition:all .2s}.selector-trigger .action-icon:hover{color:#2b83ff}`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../packages/visualizer/dist/es/component/prompt-input/index.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\".prompt-input-wrapper {\\n  width: 100%;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper {\\n  align-items: center;\\n  gap: 8px;\\n  display: flex;\\n  position: relative;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group {\\n  scrollbar-width: thin;\\n  flex: 1;\\n  align-items: center;\\n  gap: 8px;\\n  min-width: 0;\\n  height: 100%;\\n  margin-right: 60px;\\n  display: flex;\\n  overflow-x: auto;\\n  overflow-y: hidden;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group::-webkit-scrollbar {\\n  height: 6px;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group::-webkit-scrollbar-track {\\n  background: #f1f1f1;\\n  border-radius: 3px;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group::-webkit-scrollbar-thumb {\\n  background: #c1c1c1;\\n  border-radius: 3px;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group::-webkit-scrollbar-thumb:hover {\\n  background: #a8a8a8;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .ant-form-item {\\n  flex-shrink: 0;\\n  margin: 0 !important;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .ant-form-item .ant-radio-group {\\n  flex-wrap: nowrap;\\n  gap: 8px;\\n  display: flex;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .ant-radio-button-wrapper {\\n  height: 24px;\\n  box-shadow: none;\\n  white-space: nowrap;\\n  background-color: #f7f7f7;\\n  border: none;\\n  border-radius: 11px;\\n  flex-shrink: 0;\\n  margin-right: 0;\\n  padding: 0 8px;\\n  font-size: 12px;\\n  line-height: 24px;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .ant-radio-button-wrapper:before {\\n  display: none;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .ant-radio-button-wrapper:focus-within {\\n  outline: none;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .ant-radio-button-wrapper.ant-radio-button-wrapper-checked {\\n  color: #fff;\\n  background-color: #2b83ff;\\n  border-color: #2b83ff;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .ant-radio-button-wrapper.ant-radio-button-wrapper-checked:hover {\\n  color: #fff;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .ant-dropdown-trigger {\\n  flex-shrink: 0;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .more-apis-button {\\n  height: 24px;\\n  box-shadow: none;\\n  white-space: nowrap;\\n  background-color: #f7f7f7;\\n  border: none;\\n  border-radius: 11px;\\n  flex-shrink: 0;\\n  align-items: center;\\n  gap: 2px;\\n  max-width: 160px;\\n  padding: 0 8px;\\n  font-size: 12px;\\n  display: inline-flex;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .more-apis-button .ant-btn-content {\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  overflow: hidden;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .more-apis-button:hover {\\n  background-color: #e6e6e6;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .more-apis-button.selected-from-dropdown {\\n  color: #fff;\\n  background-color: #2b83ff;\\n  font-weight: 500;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .mode-radio-group .more-apis-button.selected-from-dropdown:hover {\\n  background-color: #2b83ff;\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .action-icons {\\n  z-index: 10;\\n  pointer-events: none;\\n  background: linear-gradient(to right, rgba(0, 0, 0, 0) 0%, rgba(255, 255, 255, .5) 20%, rgba(255, 255, 255, .8) 40%, rgba(255, 255, 255, .95) 60%, #fff 70%);\\n  flex-shrink: 0;\\n  justify-content: flex-end;\\n  align-items: center;\\n  gap: 8px;\\n  width: 80px;\\n  padding-left: 20px;\\n  display: flex;\\n  position: absolute;\\n  top: 50%;\\n  right: 0;\\n  transform: translateY(-50%);\\n}\\n\\n.prompt-input-wrapper .mode-radio-group-wrapper .action-icons > * {\\n  pointer-events: auto;\\n}\\n\\n.prompt-input-wrapper .main-side-console-input {\\n  margin-top: 10px;\\n  position: relative;\\n}\\n\\n.prompt-input-wrapper .main-side-console-input .main-side-console-input-textarea {\\n  white-space: pre-wrap;\\n  scrollbar-width: thin;\\n  background: #fff;\\n  border: 1px solid #f2f4f7;\\n  border-radius: 12px;\\n  padding: 12px 16px;\\n  line-height: 21px;\\n  transition: background-color .2s;\\n  overflow-y: auto;\\n}\\n\\n@keyframes hue-shift {\\n  0% {\\n    filter: hue-rotate();\\n  }\\n\\n  100% {\\n    filter: hue-rotate(360deg);\\n  }\\n}\\n\\n.prompt-input-wrapper .main-side-console-input .main-side-console-input-textarea:focus-within {\\n  background: linear-gradient(#fff, #fff) padding-box padding-box, linear-gradient(135deg, #4285f4 0%, #06f 25%, #7b02c5 50%, #ea4335 75%, #ff7043 100%) border-box;\\n  border: 1px solid rgba(0, 0, 0, 0);\\n}\\n\\n.prompt-input-wrapper .main-side-console-input .main-side-console-input-textarea::-webkit-scrollbar {\\n  width: 6px;\\n}\\n\\n.prompt-input-wrapper .main-side-console-input .main-side-console-input-textarea::-webkit-scrollbar-thumb {\\n  background-color: rgba(0, 0, 0, .2);\\n  border-radius: 3px;\\n}\\n\\n.prompt-input-wrapper .main-side-console-input.loading .main-side-console-input-textarea {\\n  background: linear-gradient(#fff, #fff) padding-box padding-box, linear-gradient(135deg, #4285f4 0%, #06f 25%, #7b02c5 50%, #ea4335 75%, #ff7043 100%) border-box;\\n  border: 1px solid rgba(0, 0, 0, 0);\\n  animation: 5s linear infinite hue-shift;\\n}\\n\\n.prompt-input-wrapper .main-side-console-input .ant-form-item-control-input-content {\\n  z-index: 999;\\n  border: 3px solid rgba(0, 0, 0, 0);\\n  border-radius: 14px;\\n}\\n\\n.prompt-input-wrapper .main-side-console-input:focus-within .ant-form-item-control-input-content {\\n  border-color: rgba(43, 131, 255, .16);\\n}\\n\\n.prompt-input-wrapper .main-side-console-input.disabled .form-controller-wrapper {\\n  background-color: rgba(0, 0, 0, 0);\\n}\\n\\n.prompt-input-wrapper .ant-form-item-with-help + .form-controller-wrapper {\\n  bottom: 22px;\\n}\\n\\n.prompt-input-wrapper .ant-input {\\n  padding-bottom: 40px;\\n}\\n\\n.prompt-input-wrapper .form-controller-wrapper {\\n  box-sizing: border-box;\\n  background-color: #fff;\\n  flex-direction: row;\\n  justify-content: flex-end;\\n  align-items: flex-end;\\n  gap: 8px;\\n  width: calc(100% - 32px);\\n  padding: 12px 0;\\n  line-height: 32px;\\n  transition: background-color .2s;\\n  display: flex;\\n  position: absolute;\\n  bottom: 1px;\\n  left: 16px;\\n}\\n\\n.prompt-input-wrapper .settings-wrapper {\\n  color: #777;\\n  flex-flow: wrap;\\n  gap: 2px;\\n  display: flex;\\n}\\n\\n.prompt-input-wrapper .settings-wrapper.settings-wrapper-hover {\\n  color: #3b3b3b;\\n}\\n\\n.prompt-input-wrapper .structured-params-container {\\n  background: linear-gradient(#fff, #fff) padding-box padding-box, linear-gradient(135deg, #4285f4 0%, #06f 25%, #7b02c5 50%, #ea4335 75%, #ff7043 100%) border-box;\\n  border: 1px solid rgba(0, 0, 0, 0);\\n  border-radius: 12px;\\n  padding: 16px 16px 56px;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item {\\n  flex-direction: column;\\n  display: flex;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label {\\n  text-align: left;\\n  flex-basis: auto;\\n  padding-bottom: 4px;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label > label {\\n  color: rgba(0, 0, 0, .85);\\n  height: auto;\\n  font-size: 12px;\\n  font-weight: 500;\\n  line-height: 1.5;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label > label:after {\\n  color: #ff4d4f;\\n  font-family: SimSun, sans-serif;\\n  font-size: 12px;\\n  line-height: 1;\\n  display: inline-block;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label > label:not(:-webkit-any(:lang(ae), :lang(ar), :lang(arc), :lang(bcc), :lang(bqi), :lang(ckb), :lang(dv), :lang(fa), :lang(glk), :lang(he), :lang(ku), :lang(mzn), :lang(nqo), :lang(pnb), :lang(ps), :lang(sd), :lang(ug), :lang(ur), :lang(yi))):after {\\n  margin-left: 4px;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label > label:not(:-moz-any(:lang(ae), :lang(ar), :lang(arc), :lang(bcc), :lang(bqi), :lang(ckb), :lang(dv), :lang(fa), :lang(glk), :lang(he), :lang(ku), :lang(mzn), :lang(nqo), :lang(pnb), :lang(ps), :lang(sd), :lang(ug), :lang(ur), :lang(yi))):after {\\n  margin-left: 4px;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label > label:not(:is(:lang(ae), :lang(ar), :lang(arc), :lang(bcc), :lang(bqi), :lang(ckb), :lang(dv), :lang(fa), :lang(glk), :lang(he), :lang(ku), :lang(mzn), :lang(nqo), :lang(pnb), :lang(ps), :lang(sd), :lang(ug), :lang(ur), :lang(yi))):after {\\n  margin-left: 4px;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label > label:-webkit-any(:lang(ae), :lang(ar), :lang(arc), :lang(bcc), :lang(bqi), :lang(ckb), :lang(dv), :lang(fa), :lang(glk), :lang(he), :lang(ku), :lang(mzn), :lang(nqo), :lang(pnb), :lang(ps), :lang(sd), :lang(ug), :lang(ur), :lang(yi)):after {\\n  margin-right: 4px;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label > label:-moz-any(:lang(ae), :lang(ar), :lang(arc), :lang(bcc), :lang(bqi), :lang(ckb), :lang(dv), :lang(fa), :lang(glk), :lang(he), :lang(ku), :lang(mzn), :lang(nqo), :lang(pnb), :lang(ps), :lang(sd), :lang(ug), :lang(ur), :lang(yi)):after {\\n  margin-right: 4px;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-label > label:is(:lang(ae), :lang(ar), :lang(arc), :lang(bcc), :lang(bqi), :lang(ckb), :lang(dv), :lang(fa), :lang(glk), :lang(he), :lang(ku), :lang(mzn), :lang(nqo), :lang(pnb), :lang(ps), :lang(sd), :lang(ug), :lang(ur), :lang(yi)):after {\\n  margin-right: 4px;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-control {\\n  flex: 1;\\n  margin-top: 0;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-row {\\n  flex-direction: column;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-form-item .ant-form-item-control-input {\\n  min-height: auto;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-input, .prompt-input-wrapper .structured-params-container .structured-params .ant-input-number, .prompt-input-wrapper .structured-params-container .structured-params .ant-select {\\n  border: 1px solid #e1e5e9;\\n  border-radius: 6px;\\n  width: 100%;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-input:hover, .prompt-input-wrapper .structured-params-container .structured-params .ant-input-number:hover, .prompt-input-wrapper .structured-params-container .structured-params .ant-select:hover {\\n  border-color: #40a9ff;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-input:focus, .prompt-input-wrapper .structured-params-container .structured-params .ant-input-number:focus, .prompt-input-wrapper .structured-params-container .structured-params .ant-select:focus, .prompt-input-wrapper .structured-params-container .structured-params .ant-input:focus-within, .prompt-input-wrapper .structured-params-container .structured-params .ant-input-number:focus-within, .prompt-input-wrapper .structured-params-container .structured-params .ant-select:focus-within {\\n  border-color: #40a9ff;\\n  box-shadow: 0 0 0 2px rgba(24, 144, 255, .2);\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params textarea.ant-input {\\n  padding-bottom: 5px;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-input-number .ant-input-number-input {\\n  box-shadow: none;\\n  border: none;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-input-number:hover .ant-input-number-input {\\n  box-shadow: none;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-select {\\n  min-width: 120px;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-select .ant-select-selector {\\n  box-shadow: none;\\n  border: none;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-select:hover .ant-select-selector, .prompt-input-wrapper .structured-params-container .structured-params .ant-select.ant-select-focused .ant-select-selector {\\n  box-shadow: none;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-radio-group {\\n  width: 100%;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-radio-group .ant-radio-button-wrapper {\\n  border: 1px solid #e1e5e9;\\n  border-radius: 6px;\\n  height: 32px;\\n  margin-right: 4px;\\n  font-size: 12px;\\n  line-height: 30px;\\n}\\n\\n.prompt-input-wrapper .structured-params-container .structured-params .ant-radio-group .ant-radio-button-wrapper.ant-radio-button-wrapper-checked {\\n  color: #fff;\\n  background-color: #2b83ff;\\n  border-color: #2b83ff;\\n}\\n\\n.selector-trigger {\\n  cursor: pointer;\\n  width: 24px;\\n  height: 24px;\\n  transition: all .2s;\\n}\\n\\n.selector-trigger .action-icon {\\n  color: rgba(0, 0, 0, .85);\\n  font-size: 14px;\\n  transition: all .2s;\\n}\\n\\n.selector-trigger .action-icon:hover {\\n  color: #2b83ff;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.shiny-text{color:#0000;letter-spacing:.5px;text-shadow:0 1px 2px #0000000d;background-image:linear-gradient(45deg,#2b83ff,#6a11cb,#2575fc,#4481eb);background-size:300%;-webkit-background-clip:text;background-clip:text;font-weight:600;animation:8s infinite textGradient;display:inline-block;position:relative;overflow:hidden}.shiny-text:after{content:\"\";width:120%;height:120%;animation:shine var(--animation-duration,5s)cubic-bezier(.25,.1,.25,1)infinite;z-index:1;pointer-events:none;background:linear-gradient(90deg,#fff0 0%,#ffffff1a 10%,#fff9 50%,#ffffff1a 90%,#fff0 100%);position:absolute;top:-10%;left:-150%;transform:skew(-20deg)translateY(0)}.shiny-text.disabled{background:#2b83ff;-webkit-background-clip:text;background-clip:text;animation:none}.shiny-text.disabled:after{animation:none;display:none}@keyframes shine{0%{opacity:.7;left:-150%}20%{opacity:1}80%{opacity:1}to{opacity:.7;left:250%}}@keyframes textGradient{0%{background-position:0%}50%{background-position:100%}to{background-position:0%}}`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../packages/visualizer/dist/es/component/shiny-text/index.css\"],\"names\":[],\"mappings\":\"AADA,YAAA,WAAA,CAAA,mBAAA,CAAA,+BAAA,CAAA,uEAAA,CAAA,oBAAA,CAAA,4BAAA,CAAA,oBAAA,CAAA,eAAA,CAAA,kCAAA,CAAA,oBAAA,CAAA,iBAAA,CAAA,eAAA,CAeA,kBAAA,UAAA,CAAA,UAAA,CAAA,WAAA,CAAA,8EAAA,CAAA,SAAA,CAAA,mBAAA,CAAA,2FAAA,CAAA,iBAAA,CAAA,QAAA,CAAA,UAAA,CAAA,mCAAA,CAcA,qBAAA,kBAAA,CAAA,4BAAA,CAAA,oBAAA,CAAA,cAAA,CAOA,2BAAA,cAAA,CAAA,YAAA,CAKA,iBAAA,GAAA,UAAA,CAAA,UAAA,CAAA,IAAA,SAAA,CAAA,IAAA,SAAA,CAAA,GAAA,UAAA,CAAA,SAAA,CAAA,CAoBA,wBAAA,GAAA,sBAAA,CAAA,IAAA,wBAAA,CAAA,GAAA,sBAAA,CAAA\",\"sourcesContent\":[\".shiny-text {\\n  color: rgba(0, 0, 0, 0);\\n  letter-spacing: .5px;\\n  text-shadow: 0 1px 2px rgba(0, 0, 0, .05);\\n  background-image: linear-gradient(45deg, #2b83ff, #6a11cb, #2575fc, #4481eb);\\n  background-size: 300%;\\n  -webkit-background-clip: text;\\n  background-clip: text;\\n  font-weight: 600;\\n  animation: 8s infinite textGradient;\\n  display: inline-block;\\n  position: relative;\\n  overflow: hidden;\\n}\\n\\n.shiny-text:after {\\n  content: \\\"\\\";\\n  width: 120%;\\n  height: 120%;\\n  animation: shine var(--animation-duration, 5s) cubic-bezier(.25, .1, .25, 1) infinite;\\n  z-index: 1;\\n  pointer-events: none;\\n  background: linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, .1) 10%, rgba(255, 255, 255, .6) 50%, rgba(255, 255, 255, .1) 90%, rgba(255, 255, 255, 0) 100%);\\n  position: absolute;\\n  top: -10%;\\n  left: -150%;\\n  transform: skewX(-20deg)translateY(0);\\n}\\n\\n.shiny-text.disabled {\\n  background: #2b83ff;\\n  -webkit-background-clip: text;\\n  background-clip: text;\\n  animation: none;\\n}\\n\\n.shiny-text.disabled:after {\\n  animation: none;\\n  display: none;\\n}\\n\\n@keyframes shine {\\n  0% {\\n    opacity: .7;\\n    left: -150%;\\n  }\\n\\n  20% {\\n    opacity: 1;\\n  }\\n\\n  80% {\\n    opacity: 1;\\n  }\\n\\n  100% {\\n    opacity: .7;\\n    left: 250%;\\n  }\\n}\\n\\n@keyframes textGradient {\\n  0% {\\n    background-position: 0%;\\n  }\\n\\n  50% {\\n    background-position: 100%;\\n  }\\n\\n  100% {\\n    background-position: 0%;\\n  }\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.playground-container{background:#fff;flex-direction:column;width:100%;height:100vh;display:flex;position:relative}.playground-container .command-form{flex-direction:column;width:100%;height:100%;display:flex}.playground-container .context-preview-section{border-bottom:1px solid #f0f0f0;flex-shrink:0;padding:16px}.playground-container .middle-dialog-area{flex-direction:column;flex:1;min-height:0;display:flex;position:relative;overflow:hidden}.playground-container .middle-dialog-area .clear-button-container{z-index:10;position:absolute;top:16px;right:0}.playground-container .middle-dialog-area .clear-button-container .clear-button{opacity:.7;transition:opacity .2s}.playground-container .middle-dialog-area .clear-button-container .clear-button:hover{opacity:1}.playground-container .middle-dialog-area .info-list-container{scrollbar-width:none;flex:1;padding-top:16px;padding-bottom:16px;overflow:hidden auto}.playground-container .middle-dialog-area .info-list-container .ant-list .ant-list-item{border-bottom:none;padding:0}.playground-container .middle-dialog-area .info-list-container .ant-list .ant-list-item .ant-card{border:1px solid #f0f0f0;border-radius:8px;box-shadow:0 1px 3px #0000001a}.playground-container .middle-dialog-area .info-list-container .ant-list .ant-list-item .ant-card:hover{box-shadow:0 2px 6px #00000026}.playground-container .middle-dialog-area .info-list-container .ant-list .ant-list-item .ant-card .ant-card-body{padding:12px}.playground-container .middle-dialog-area .info-list-container .ant-list .ant-list-empty-text{color:#999;font-style:italic}.playground-container .middle-dialog-area .info-list-container::-webkit-scrollbar{display:none}.playground-container .middle-dialog-area .info-list-container .list-item{background:0 0;border:none;padding:0}.playground-container .middle-dialog-area .scroll-to-bottom-button{z-index:10;background:#fff;border:1px solid #00000014;position:absolute;bottom:10px;right:0}.playground-container .middle-dialog-area .scroll-to-bottom-button:hover{background:#1890ff}.playground-container .middle-dialog-area .scroll-to-bottom-button:hover .anticon{color:#fff}.playground-container .middle-dialog-area .scroll-to-bottom-button .anticon{color:#333;font-size:16px}.playground-container .user-message-container{justify-content:flex-end;width:100%;margin:20px 0 30px;display:flex}.playground-container .user-message-container .user-message-bubble{color:#000000d9;text-align:left;background:#f2f4f7;border-radius:12px;max-width:80%;padding:12px 16px;font-size:14px;font-weight:400;display:inline-block}.playground-container .progress-action-item{color:#000;background:#f2f4f7;border-radius:8px;justify-content:space-between;height:36px;margin:4px 0;padding:0 12px;font-size:14px;line-height:36px;display:flex}.playground-container .progress-action-item .progress-status-icon{margin-left:4px}.playground-container .progress-action-item .progress-status-icon.loading{color:#1890ff}.playground-container .progress-action-item .progress-status-icon.completed{color:#52c41a}.playground-container .progress-action-item .progress-status-icon.error{color:#ff4d4f;font-weight:700}.playground-container .progress-description{color:#000;padding:8px 0;font-size:14px;line-height:22px;display:inline-block}.playground-container .system-message-container{flex-direction:column;display:flex}.playground-container .system-message-container .system-message-header{align-items:center;gap:8px;margin:12px 0;display:flex}.playground-container .system-message-container .system-message-header .system-message-title{font-size:12px;font-weight:400;line-height:100%}.playground-container .system-message-container .system-message-content{color:#000000d9;font-size:14px}.playground-container .system-message-container .system-message-content .system-message-text{color:#000000d9;font-size:14px;line-height:25px}.playground-container .system-message-container .system-message-content .error-message{color:#e51723;word-break:break-word;background-color:#fff;border:none;border-radius:0;align-items:flex-start;margin-bottom:16px;padding:0;font-size:14px;display:flex}.playground-container .system-message-container .system-message-content .error-message .divider{background-color:#e6e8eb;flex-shrink:0;align-self:stretch;width:1px;min-height:20px;margin:0 8px 0 0}.playground-container .system-message-container .system-message-content .loading-progress-text{color:#666;background:#f6f8fa;border-left:3px solid #1890ff;border-radius:4px;margin-top:8px;padding:8px 12px;font-size:13px}.playground-container .new-conversation-separator{flex-shrink:0;justify-content:center;align-items:center;padding:20px 0;display:flex;position:relative}.playground-container .new-conversation-separator .separator-line{background-color:#e8e8e8;height:1px;position:absolute;top:50%;left:0;right:0}.playground-container .new-conversation-separator .separator-text-container{z-index:1;background-color:#fff;padding:0 16px;position:relative}.playground-container .new-conversation-separator .separator-text-container .separator-text{color:#999;background-color:#fff;font-size:12px}.playground-container .bottom-input-section{background-color:#fff;flex-shrink:0;padding:16px 0 0}.playground-container .version-info-section{flex-shrink:0;justify-content:center;align-items:center;height:38px;display:flex}.playground-container .version-text{color:#999;text-align:center;font-size:12px}.playground-container .hidden-result-ref{display:none}.playground-container .playground-description{margin-bottom:32px}.playground-container .playground-description .description-zh{color:#333;margin:0 0 8px;font-size:16px;line-height:1.5}.playground-container .playground-description .description-en{color:#666;margin:0;font-size:14px;line-height:1.5}.playground-container .config-section{margin-bottom:24px}.playground-container .config-section .config-title{color:#333;margin:0 0 16px;font-size:18px;font-weight:600}.playground-container .config-section .config-item{align-items:center;gap:8px;margin-bottom:12px;display:flex}.playground-container .config-section .config-item .config-check{color:#52c41a;font-size:16px}.playground-container .config-section .config-item .config-label{color:#333;font-size:14px}.playground-container .config-section .config-link{color:#1890ff;font-size:14px;text-decoration:none}.playground-container .config-section .config-link:hover{text-decoration:underline}`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../packages/visualizer/dist/es/component/universal-playground/index.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\".playground-container {\\n  background: #fff;\\n  flex-direction: column;\\n  width: 100%;\\n  height: 100vh;\\n  display: flex;\\n  position: relative;\\n}\\n\\n.playground-container .command-form {\\n  flex-direction: column;\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n}\\n\\n.playground-container .context-preview-section {\\n  border-bottom: 1px solid #f0f0f0;\\n  flex-shrink: 0;\\n  padding: 16px;\\n}\\n\\n.playground-container .middle-dialog-area {\\n  flex-direction: column;\\n  flex: 1;\\n  min-height: 0;\\n  display: flex;\\n  position: relative;\\n  overflow: hidden;\\n}\\n\\n.playground-container .middle-dialog-area .clear-button-container {\\n  z-index: 10;\\n  position: absolute;\\n  top: 16px;\\n  right: 0;\\n}\\n\\n.playground-container .middle-dialog-area .clear-button-container .clear-button {\\n  opacity: .7;\\n  transition: opacity .2s;\\n}\\n\\n.playground-container .middle-dialog-area .clear-button-container .clear-button:hover {\\n  opacity: 1;\\n}\\n\\n.playground-container .middle-dialog-area .info-list-container {\\n  scrollbar-width: none;\\n  flex: 1;\\n  padding-top: 16px;\\n  padding-bottom: 16px;\\n  overflow-x: hidden;\\n  overflow-y: auto;\\n}\\n\\n.playground-container .middle-dialog-area .info-list-container .ant-list .ant-list-item {\\n  border-bottom: none;\\n  padding: 0;\\n}\\n\\n.playground-container .middle-dialog-area .info-list-container .ant-list .ant-list-item .ant-card {\\n  border: 1px solid #f0f0f0;\\n  border-radius: 8px;\\n  box-shadow: 0 1px 3px rgba(0, 0, 0, .1);\\n}\\n\\n.playground-container .middle-dialog-area .info-list-container .ant-list .ant-list-item .ant-card:hover {\\n  box-shadow: 0 2px 6px rgba(0, 0, 0, .15);\\n}\\n\\n.playground-container .middle-dialog-area .info-list-container .ant-list .ant-list-item .ant-card .ant-card-body {\\n  padding: 12px;\\n}\\n\\n.playground-container .middle-dialog-area .info-list-container .ant-list .ant-list-empty-text {\\n  color: #999;\\n  font-style: italic;\\n}\\n\\n.playground-container .middle-dialog-area .info-list-container::-webkit-scrollbar {\\n  display: none;\\n}\\n\\n.playground-container .middle-dialog-area .info-list-container .list-item {\\n  background: none;\\n  border: none;\\n  padding: 0;\\n}\\n\\n.playground-container .middle-dialog-area .scroll-to-bottom-button {\\n  z-index: 10;\\n  background: #fff;\\n  border: 1px solid rgba(0, 0, 0, .08);\\n  position: absolute;\\n  bottom: 10px;\\n  right: 0;\\n}\\n\\n.playground-container .middle-dialog-area .scroll-to-bottom-button:hover {\\n  background: #1890ff;\\n}\\n\\n.playground-container .middle-dialog-area .scroll-to-bottom-button:hover .anticon {\\n  color: #fff;\\n}\\n\\n.playground-container .middle-dialog-area .scroll-to-bottom-button .anticon {\\n  color: #333;\\n  font-size: 16px;\\n}\\n\\n.playground-container .user-message-container {\\n  justify-content: flex-end;\\n  width: 100%;\\n  margin: 20px 0 30px;\\n  display: flex;\\n}\\n\\n.playground-container .user-message-container .user-message-bubble {\\n  color: rgba(0, 0, 0, .85);\\n  text-align: left;\\n  background: #f2f4f7;\\n  border-radius: 12px;\\n  max-width: 80%;\\n  padding: 12px 16px;\\n  font-size: 14px;\\n  font-weight: 400;\\n  display: inline-block;\\n}\\n\\n.playground-container .progress-action-item {\\n  color: #000;\\n  background: #f2f4f7;\\n  border-radius: 8px;\\n  justify-content: space-between;\\n  height: 36px;\\n  margin: 4px 0;\\n  padding: 0 12px;\\n  font-size: 14px;\\n  line-height: 36px;\\n  display: flex;\\n}\\n\\n.playground-container .progress-action-item .progress-status-icon {\\n  margin-left: 4px;\\n}\\n\\n.playground-container .progress-action-item .progress-status-icon.loading {\\n  color: #1890ff;\\n}\\n\\n.playground-container .progress-action-item .progress-status-icon.completed {\\n  color: #52c41a;\\n}\\n\\n.playground-container .progress-action-item .progress-status-icon.error {\\n  color: #ff4d4f;\\n  font-weight: bold;\\n}\\n\\n.playground-container .progress-description {\\n  color: #000;\\n  padding: 8px 0;\\n  font-size: 14px;\\n  line-height: 22px;\\n  display: inline-block;\\n}\\n\\n.playground-container .system-message-container {\\n  flex-direction: column;\\n  display: flex;\\n}\\n\\n.playground-container .system-message-container .system-message-header {\\n  align-items: center;\\n  gap: 8px;\\n  margin: 12px 0;\\n  display: flex;\\n}\\n\\n.playground-container .system-message-container .system-message-header .system-message-title {\\n  font-size: 12px;\\n  font-weight: 400;\\n  line-height: 100%;\\n}\\n\\n.playground-container .system-message-container .system-message-content {\\n  color: rgba(0, 0, 0, .85);\\n  font-size: 14px;\\n}\\n\\n.playground-container .system-message-container .system-message-content .system-message-text {\\n  color: rgba(0, 0, 0, .85);\\n  font-size: 14px;\\n  line-height: 25px;\\n}\\n\\n.playground-container .system-message-container .system-message-content .error-message {\\n  color: #e51723;\\n  word-break: break-word;\\n  background-color: #fff;\\n  border: none;\\n  border-radius: 0;\\n  align-items: flex-start;\\n  margin-bottom: 16px;\\n  padding: 0;\\n  font-size: 14px;\\n  display: flex;\\n}\\n\\n.playground-container .system-message-container .system-message-content .error-message .divider {\\n  background-color: #e6e8eb;\\n  flex-shrink: 0;\\n  align-self: stretch;\\n  width: 1px;\\n  min-height: 20px;\\n  margin: 0 8px 0 0;\\n}\\n\\n.playground-container .system-message-container .system-message-content .loading-progress-text {\\n  color: #666;\\n  background: #f6f8fa;\\n  border-left: 3px solid #1890ff;\\n  border-radius: 4px;\\n  margin-top: 8px;\\n  padding: 8px 12px;\\n  font-size: 13px;\\n}\\n\\n.playground-container .new-conversation-separator {\\n  flex-shrink: 0;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 20px 0;\\n  display: flex;\\n  position: relative;\\n}\\n\\n.playground-container .new-conversation-separator .separator-line {\\n  background-color: #e8e8e8;\\n  height: 1px;\\n  position: absolute;\\n  top: 50%;\\n  left: 0;\\n  right: 0;\\n}\\n\\n.playground-container .new-conversation-separator .separator-text-container {\\n  z-index: 1;\\n  background-color: #fff;\\n  padding: 0 16px;\\n  position: relative;\\n}\\n\\n.playground-container .new-conversation-separator .separator-text-container .separator-text {\\n  color: #999;\\n  background-color: #fff;\\n  font-size: 12px;\\n}\\n\\n.playground-container .bottom-input-section {\\n  background-color: #fff;\\n  flex-shrink: 0;\\n  padding: 16px 0 0;\\n}\\n\\n.playground-container .version-info-section {\\n  flex-shrink: 0;\\n  justify-content: center;\\n  align-items: center;\\n  height: 38px;\\n  display: flex;\\n}\\n\\n.playground-container .version-text {\\n  color: #999;\\n  text-align: center;\\n  font-size: 12px;\\n}\\n\\n.playground-container .hidden-result-ref {\\n  display: none;\\n}\\n\\n.playground-container .playground-description {\\n  margin-bottom: 32px;\\n}\\n\\n.playground-container .playground-description .description-zh {\\n  color: #333;\\n  margin: 0 0 8px;\\n  font-size: 16px;\\n  line-height: 1.5;\\n}\\n\\n.playground-container .playground-description .description-en {\\n  color: #666;\\n  margin: 0;\\n  font-size: 14px;\\n  line-height: 1.5;\\n}\\n\\n.playground-container .config-section {\\n  margin-bottom: 24px;\\n}\\n\\n.playground-container .config-section .config-title {\\n  color: #333;\\n  margin: 0 0 16px;\\n  font-size: 18px;\\n  font-weight: 600;\\n}\\n\\n.playground-container .config-section .config-item {\\n  align-items: center;\\n  gap: 8px;\\n  margin-bottom: 12px;\\n  display: flex;\\n}\\n\\n.playground-container .config-section .config-item .config-check {\\n  color: #52c41a;\\n  font-size: 16px;\\n}\\n\\n.playground-container .config-section .config-item .config-label {\\n  color: #333;\\n  font-size: 14px;\\n}\\n\\n.playground-container .config-section .config-link {\\n  color: #1890ff;\\n  font-size: 14px;\\n  text-decoration: none;\\n}\\n\\n.playground-container .config-section .config-link:hover {\\n  text-decoration: underline;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import { YAML_EXAMPLE_CODE } from \"@sqai/shared/constants\";\nimport { AIActionType, callAI, callAIWithStringResponse } from \"../index.mjs\";\nconst getScreenshotsForLLM = (events, maxScreenshots = 1)=>{\n    const eventsWithScreenshots = events.filter((event)=>event.screenshotBefore || event.screenshotAfter || event.screenshotWithBox);\n    const sortedEvents = [\n        ...eventsWithScreenshots\n    ].sort((a, b)=>{\n        if ('navigation' === a.type && 'navigation' !== b.type) return -1;\n        if ('navigation' !== a.type && 'navigation' === b.type) return 1;\n        if ('click' === a.type && 'click' !== b.type) return -1;\n        if ('click' !== a.type && 'click' === b.type) return 1;\n        return 0;\n    });\n    const screenshots = [];\n    for (const event of sortedEvents){\n        const screenshot = event.screenshotWithBox || event.screenshotAfter || event.screenshotBefore;\n        if (screenshot && !screenshots.includes(screenshot)) {\n            screenshots.push(screenshot);\n            if (screenshots.length >= maxScreenshots) break;\n        }\n    }\n    return screenshots;\n};\nconst filterEventsByType = (events)=>({\n        navigationEvents: events.filter((event)=>'navigation' === event.type),\n        clickEvents: events.filter((event)=>'click' === event.type),\n        inputEvents: events.filter((event)=>'input' === event.type),\n        scrollEvents: events.filter((event)=>'scroll' === event.type)\n    });\nconst createEventCounts = (filteredEvents, totalEvents)=>({\n        navigation: filteredEvents.navigationEvents.length,\n        click: filteredEvents.clickEvents.length,\n        input: filteredEvents.inputEvents.length,\n        scroll: filteredEvents.scrollEvents.length,\n        total: totalEvents\n    });\nconst extractInputDescriptions = (inputEvents)=>inputEvents.map((event)=>({\n            description: event.elementDescription || '',\n            value: event.value || ''\n        })).filter((item)=>item.description && item.value);\nconst processEventsForLLM = (events)=>events.map((event)=>({\n            type: event.type,\n            timestamp: event.timestamp,\n            url: event.url,\n            title: event.title,\n            elementDescription: event.elementDescription,\n            value: event.value,\n            pageInfo: event.pageInfo,\n            elementRect: event.elementRect\n        }));\nconst prepareEventSummary = (events, options = {})=>{\n    const filteredEvents = filterEventsByType(events);\n    const eventCounts = createEventCounts(filteredEvents, events.length);\n    const startUrl = filteredEvents.navigationEvents.length > 0 ? filteredEvents.navigationEvents[0].url || '' : '';\n    const clickDescriptions = filteredEvents.clickEvents.map((event)=>event.elementDescription).filter((desc)=>Boolean(desc)).slice(0, 10);\n    const inputDescriptions = extractInputDescriptions(filteredEvents.inputEvents).slice(0, 10);\n    const urls = filteredEvents.navigationEvents.map((e)=>e.url).filter((url)=>Boolean(url)).slice(0, 5);\n    const processedEvents = processEventsForLLM(events);\n    return {\n        testName: options.testName || 'Automated test from recorded events',\n        startUrl,\n        eventCounts,\n        urls,\n        clickDescriptions,\n        inputDescriptions,\n        events: processedEvents\n    };\n};\nconst createMessageContent = (promptText, screenshots = [], includeScreenshots = true)=>{\n    const messageContent = [\n        {\n            type: 'text',\n            text: promptText\n        }\n    ];\n    if (includeScreenshots && screenshots.length > 0) {\n        messageContent.unshift({\n            type: 'text',\n            text: 'Here are screenshots from the recording session to help you understand the context:'\n        });\n        screenshots.forEach((screenshot)=>{\n            messageContent.push({\n                type: 'image_url',\n                image_url: {\n                    url: screenshot\n                }\n            });\n        });\n    }\n    return messageContent;\n};\nconst validateEvents = (events)=>{\n    if (!events.length) throw new Error('No events provided for test generation');\n};\nconst generateYamlTest = async (events, options, modelConfig)=>{\n    try {\n        validateEvents(events);\n        const summary = prepareEventSummary(events, {\n            testName: options.testName,\n            maxScreenshots: options.maxScreenshots || 3\n        });\n        const yamlSummary = {\n            ...summary,\n            includeTimestamps: options.includeTimestamps || false\n        };\n        const screenshots = getScreenshotsForLLM(events, options.maxScreenshots || 3);\n        const prompt = [\n            {\n                role: 'system',\n                content: `You are an expert in Midscene.js YAML test generation. Generate clean, accurate YAML following these rules: ${YAML_EXAMPLE_CODE}`\n            },\n            {\n                role: 'user',\n                content: `Generate YAML test for Midscene.js automation from recorded browser events.\n\nEvent Summary:\n${JSON.stringify(yamlSummary, null, 2)}\n\nConvert events:\n- navigation \\u{2192} target.url\n- click \\u{2192} aiTap with element description\n- input \\u{2192} aiInput with value and locate\n- scroll \\u{2192} aiScroll with appropriate direction\n- Add aiAssert for important state changes\n\nImportant: Return ONLY the raw YAML content. Do NOT wrap the response in markdown code blocks (no \\`\\`\\`yaml or \\`\\`\\`). Start directly with the YAML content.`\n            }\n        ];\n        if (screenshots.length > 0) {\n            prompt.push({\n                role: 'user',\n                content: 'Here are screenshots from the recording session to help you understand the context:'\n            });\n            prompt.push({\n                role: 'user',\n                content: screenshots.map((screenshot)=>({\n                        type: 'image_url',\n                        image_url: {\n                            url: screenshot\n                        }\n                    }))\n            });\n        }\n        const response = await callAIWithStringResponse(prompt, AIActionType.TEXT, modelConfig);\n        if ((null == response ? void 0 : response.content) && 'string' == typeof response.content) return response.content;\n        throw new Error('Failed to generate YAML test configuration');\n    } catch (error) {\n        throw new Error(`Failed to generate YAML test: ${error}`);\n    }\n};\nconst generateYamlTestStream = async (events, options, modelConfig)=>{\n    try {\n        validateEvents(events);\n        const summary = prepareEventSummary(events, {\n            testName: options.testName,\n            maxScreenshots: options.maxScreenshots || 3\n        });\n        const yamlSummary = {\n            ...summary,\n            includeTimestamps: options.includeTimestamps || false\n        };\n        const screenshots = getScreenshotsForLLM(events, options.maxScreenshots || 3);\n        const prompt = [\n            {\n                role: 'system',\n                content: `You are an expert in Midscene.js YAML test generation. Generate clean, accurate YAML following these rules: ${YAML_EXAMPLE_CODE}`\n            },\n            {\n                role: 'user',\n                content: `Generate YAML test for Midscene.js automation from recorded browser events.\n\nEvent Summary:\n${JSON.stringify(yamlSummary, null, 2)}\n\nConvert events:\n- navigation \\u{2192} target.url\n- click \\u{2192} aiTap with element description\n- input \\u{2192} aiInput with value and locate\n- scroll \\u{2192} aiScroll with appropriate direction\n- Add aiAssert for important state changes\n\nImportant: Return ONLY the raw YAML content. Do NOT wrap the response in markdown code blocks (no \\`\\`\\`yaml or \\`\\`\\`). Start directly with the YAML content.`\n            }\n        ];\n        if (screenshots.length > 0) {\n            prompt.push({\n                role: 'user',\n                content: 'Here are screenshots from the recording session to help you understand the context:'\n            });\n            prompt.push({\n                role: 'user',\n                content: screenshots.map((screenshot)=>({\n                        type: 'image_url',\n                        image_url: {\n                            url: screenshot\n                        }\n                    }))\n            });\n        }\n        if (options.stream && options.onChunk) return await callAI(prompt, AIActionType.TEXT, modelConfig, {\n            stream: true,\n            onChunk: options.onChunk\n        });\n        {\n            const response = await callAIWithStringResponse(prompt, AIActionType.TEXT, modelConfig);\n            if ((null == response ? void 0 : response.content) && 'string' == typeof response.content) return {\n                content: response.content,\n                usage: response.usage,\n                isStreamed: false\n            };\n            throw new Error('Failed to generate YAML test configuration');\n        }\n    } catch (error) {\n        throw new Error(`Failed to generate YAML test: ${error}`);\n    }\n};\nexport { createEventCounts, createMessageContent, extractInputDescriptions, filterEventsByType, generateYamlTest, generateYamlTestStream, getScreenshotsForLLM, prepareEventSummary, processEventsForLLM, validateEvents };\n\n//# sourceMappingURL=yaml-generator.mjs.map","import { PLAYWRIGHT_EXAMPLE_CODE } from \"@sqai/shared/constants\";\nimport { AIActionType, callAI, callAIWithStringResponse } from \"../index.mjs\";\nimport { createEventCounts, createMessageContent, extractInputDescriptions, filterEventsByType, getScreenshotsForLLM, prepareEventSummary, processEventsForLLM, validateEvents } from \"./yaml-generator.mjs\";\nconst generatePlaywrightTest = async (events, options, modelConfig)=>{\n    validateEvents(events);\n    const summary = prepareEventSummary(events, {\n        testName: options.testName,\n        maxScreenshots: options.maxScreenshots || 3\n    });\n    const playwrightSummary = {\n        ...summary,\n        waitForNetworkIdle: false !== options.waitForNetworkIdle,\n        waitForNetworkIdleTimeout: options.waitForNetworkIdleTimeout || 2000,\n        viewportSize: options.viewportSize || {\n            width: 1280,\n            height: 800\n        }\n    };\n    const screenshots = getScreenshotsForLLM(events, options.maxScreenshots || 3);\n    const promptText = `Generate a Playwright test using @sqai/web/playwright that reproduces this recorded browser session. The test should be based on the following events and follow the structure of the example provided. Make the test descriptive with appropriate assertions and validations.\n\nEvent Summary:\n${JSON.stringify(playwrightSummary, null, 2)}\n\nGenerated code should:\n1. Import required dependencies\n2. Set up the test with proper configuration\n3. Include a beforeEach hook to navigate to the starting URL\n4. Implement a test that uses Midscene AI methods (aiTap, aiInput, aiAssert, etc.)\n5. Include appropriate assertions and validations\n6. Follow best practices for Playwright tests\n7. Be ready to execute without further modification\n\nImportant: Return ONLY the raw Playwright test code. Do NOT wrap the response in markdown code blocks (no \\`\\`\\`typescript, \\`\\`\\`javascript or \\`\\`\\`). Start directly with the code content.`;\n    const messageContent = createMessageContent(promptText, screenshots, false !== options.includeScreenshots);\n    const systemPrompt = `You are an expert test automation engineer specializing in Playwright and Midscene. \nYour task is to generate a complete, executable Playwright test using @sqai/web/playwright that reproduces a recorded browser session.\n\n${PLAYWRIGHT_EXAMPLE_CODE}`;\n    const prompt = [\n        {\n            role: 'system',\n            content: systemPrompt\n        },\n        {\n            role: 'user',\n            content: messageContent\n        }\n    ];\n    const response = await callAIWithStringResponse(prompt, AIActionType.TEXT, modelConfig);\n    if ((null == response ? void 0 : response.content) && 'string' == typeof response.content) return response.content;\n    throw new Error('Failed to generate Playwright test code');\n};\nconst generatePlaywrightTestStream = async (events, options, modelConfig)=>{\n    validateEvents(events);\n    const summary = prepareEventSummary(events, {\n        testName: options.testName,\n        maxScreenshots: options.maxScreenshots || 3\n    });\n    const playwrightSummary = {\n        ...summary,\n        waitForNetworkIdle: false !== options.waitForNetworkIdle,\n        waitForNetworkIdleTimeout: options.waitForNetworkIdleTimeout || 2000,\n        viewportSize: options.viewportSize || {\n            width: 1280,\n            height: 800\n        }\n    };\n    const screenshots = getScreenshotsForLLM(events, options.maxScreenshots || 3);\n    const promptText = `Generate a Playwright test using @sqai/web/playwright that reproduces this recorded browser session. The test should be based on the following events and follow the structure of the example provided. Make the test descriptive with appropriate assertions and validations.\n\nEvent Summary:\n${JSON.stringify(playwrightSummary, null, 2)}\n\nGenerated code should:\n1. Import required dependencies\n2. Set up the test with proper configuration\n3. Include a beforeEach hook to navigate to the starting URL\n4. Implement a test that uses Midscene AI methods (aiTap, aiInput, aiAssert, etc.)\n5. Include appropriate assertions and validations\n6. Follow best practices for Playwright tests\n7. Be ready to execute without further modification\n8. can't wrap this test code in markdown code block\n\nImportant: Return ONLY the raw Playwright test code. Do NOT wrap the response in markdown code blocks (no \\`\\`\\`typescript, \\`\\`\\`javascript or \\`\\`\\`). Start directly with the code content.`;\n    const messageContent = createMessageContent(promptText, screenshots, false !== options.includeScreenshots);\n    const systemPrompt = `You are an expert test automation engineer specializing in Playwright and Midscene. \nYour task is to generate a complete, executable Playwright test using @sqai/web/playwright that reproduces a recorded browser session.\n\n${PLAYWRIGHT_EXAMPLE_CODE}`;\n    const prompt = [\n        {\n            role: 'system',\n            content: systemPrompt\n        },\n        {\n            role: 'user',\n            content: messageContent\n        }\n    ];\n    if (options.stream && options.onChunk) return await callAI(prompt, AIActionType.TEXT, modelConfig, {\n        stream: true,\n        onChunk: options.onChunk\n    });\n    {\n        const response = await callAIWithStringResponse(prompt, AIActionType.TEXT, modelConfig);\n        if ((null == response ? void 0 : response.content) && 'string' == typeof response.content) return {\n            content: response.content,\n            usage: response.usage,\n            isStreamed: false\n        };\n        throw new Error('Failed to generate Playwright test code');\n    }\n};\nexport { createEventCounts, createMessageContent, extractInputDescriptions, filterEventsByType, generatePlaywrightTest, generatePlaywrightTestStream, getScreenshotsForLLM, prepareEventSummary, processEventsForLLM, validateEvents };\n\n//# sourceMappingURL=playwright-generator.mjs.map","import { AIResponseFormat } from \"../../types.mjs\";\nimport { Anthropic } from \"@anthropic-ai/sdk\";\nimport { DefaultAzureCredential, getBearerTokenProvider } from \"@azure/identity\";\nimport { OPENAI_MAX_TOKENS, SQAI_API_TYPE, SQAI_LANGSMITH_DEBUG, globalConfigManager } from \"@sqai/shared/env\";\nimport { parseBase64 } from \"@sqai/shared/img\";\nimport { getDebug } from \"@sqai/shared/logger\";\nimport { assert, ifInBrowser } from \"@sqai/shared/utils\";\nimport { HttpsProxyAgent } from \"https-proxy-agent\";\nimport { jsonrepair } from \"jsonrepair\";\nimport openai_0, { AzureOpenAI } from \"openai\";\nimport { SocksProxyAgent } from \"socks-proxy-agent\";\nimport { AIActionType } from \"../common.mjs\";\nimport { assertSchema } from \"../prompt/assertion.mjs\";\nimport { locatorSchema } from \"../prompt/llm-locator.mjs\";\nimport { planSchema } from \"../prompt/llm-planning.mjs\";\nasync function createChatClient({ AIActionTypeValue, modelConfig }) {\n    const { socksProxy, httpProxy, modelName, openaiBaseURL, openaiApiKey, openaiExtraConfig, openaiUseAzureDeprecated, useAzureOpenai, azureOpenaiScope, azureOpenaiKey, azureOpenaiEndpoint, azureOpenaiApiVersion, azureOpenaiDeployment, azureExtraConfig, useAnthropicSdk, anthropicApiKey, modelDescription, uiTarsModelVersion: uiTarsVersion, vlMode } = modelConfig;\n    let openai;\n    let proxyAgent;\n    const debugProxy = getDebug('ai:call:proxy');\n    if (httpProxy) {\n        debugProxy('using http proxy', httpProxy);\n        proxyAgent = new HttpsProxyAgent(httpProxy);\n    } else if (socksProxy) {\n        debugProxy('using socks proxy', socksProxy);\n        proxyAgent = new SocksProxyAgent(socksProxy);\n    }\n    if (openaiUseAzureDeprecated) openai = new AzureOpenAI({\n        baseURL: openaiBaseURL,\n        apiKey: openaiApiKey,\n        httpAgent: proxyAgent,\n        ...openaiExtraConfig,\n        dangerouslyAllowBrowser: true\n    });\n    else if (useAzureOpenai) {\n        let tokenProvider;\n        if (azureOpenaiScope) {\n            assert(!ifInBrowser, 'Azure OpenAI is not supported in browser with Midscene.');\n            const credential = new DefaultAzureCredential();\n            tokenProvider = getBearerTokenProvider(credential, azureOpenaiScope);\n            openai = new AzureOpenAI({\n                azureADTokenProvider: tokenProvider,\n                endpoint: azureOpenaiEndpoint,\n                apiVersion: azureOpenaiApiVersion,\n                deployment: azureOpenaiDeployment,\n                ...openaiExtraConfig,\n                ...azureExtraConfig\n            });\n        } else openai = new AzureOpenAI({\n            apiKey: azureOpenaiKey,\n            endpoint: azureOpenaiEndpoint,\n            apiVersion: azureOpenaiApiVersion,\n            deployment: azureOpenaiDeployment,\n            dangerouslyAllowBrowser: true,\n            ...openaiExtraConfig,\n            ...azureExtraConfig\n        });\n    } else if (!useAnthropicSdk) openai = new openai_0({\n        baseURL: openaiBaseURL,\n        apiKey: openaiApiKey,\n        httpAgent: proxyAgent,\n        ...openaiExtraConfig,\n        defaultHeaders: {\n            ...(null == openaiExtraConfig ? void 0 : openaiExtraConfig.defaultHeaders) || {},\n            [SQAI_API_TYPE]: AIActionTypeValue.toString()\n        },\n        dangerouslyAllowBrowser: true\n    });\n    if (openai && globalConfigManager.getEnvConfigInBoolean(SQAI_LANGSMITH_DEBUG)) {\n        if (ifInBrowser) throw new Error('langsmith is not supported in browser');\n        console.log('DEBUGGING MODE: langsmith wrapper enabled');\n        const { wrapOpenAI } = await import(\"langsmith/wrappers\");\n        openai = wrapOpenAI(openai);\n    }\n    if (void 0 !== openai) return {\n        completion: openai.chat.completions,\n        style: 'openai',\n        modelName,\n        modelDescription,\n        uiTarsVersion,\n        vlMode\n    };\n    if (useAnthropicSdk) openai = new Anthropic({\n        apiKey: anthropicApiKey,\n        httpAgent: proxyAgent,\n        dangerouslyAllowBrowser: true\n    });\n    if (void 0 !== openai && openai.messages) return {\n        completion: openai.messages,\n        style: 'anthropic',\n        modelName,\n        modelDescription,\n        uiTarsVersion,\n        vlMode\n    };\n    throw new Error('Openai SDK or Anthropic SDK is not initialized');\n}\nasync function callAI(messages, AIActionTypeValue, modelConfig, options) {\n    const { completion, style, modelName, modelDescription, uiTarsVersion, vlMode } = await createChatClient({\n        AIActionTypeValue,\n        modelConfig\n    });\n    const responseFormat = getResponseFormat(modelName, AIActionTypeValue);\n    const maxTokens = globalConfigManager.getEnvConfigValue(OPENAI_MAX_TOKENS);\n    const debugCall = getDebug('ai:call');\n    const debugProfileStats = getDebug('ai:profile:stats');\n    const debugProfileDetail = getDebug('ai:profile:detail');\n    const startTime = Date.now();\n    const isStreaming = (null == options ? void 0 : options.stream) && (null == options ? void 0 : options.onChunk);\n    let content;\n    let accumulated = '';\n    let usage;\n    let timeCost;\n    const commonConfig = {\n        temperature: 'vlm-ui-tars' === vlMode ? 0.0 : 0.1,\n        stream: !!isStreaming,\n        max_tokens: 'number' == typeof maxTokens ? maxTokens : Number.parseInt(maxTokens || '2048', 10),\n        ...'qwen-vl' === vlMode || 'qwen3-vl' === vlMode ? {\n            vl_high_resolution_images: true\n        } : {}\n    };\n    try {\n        if ('openai' === style) {\n            debugCall(`sending ${isStreaming ? 'streaming ' : ''}request to ${modelName}`);\n            if (isStreaming) {\n                const stream = await completion.create({\n                    model: modelName,\n                    messages,\n                    response_format: responseFormat,\n                    ...commonConfig\n                }, {\n                    stream: true\n                });\n                for await (const chunk of stream){\n                    var _chunk_choices__delta, _chunk_choices_, _chunk_choices, _chunk_choices__delta1, _chunk_choices_1, _chunk_choices1, _chunk_choices_2, _chunk_choices2;\n                    const content = (null == (_chunk_choices = chunk.choices) ? void 0 : null == (_chunk_choices_ = _chunk_choices[0]) ? void 0 : null == (_chunk_choices__delta = _chunk_choices_.delta) ? void 0 : _chunk_choices__delta.content) || '';\n                    const reasoning_content = (null == (_chunk_choices1 = chunk.choices) ? void 0 : null == (_chunk_choices_1 = _chunk_choices1[0]) ? void 0 : null == (_chunk_choices__delta1 = _chunk_choices_1.delta) ? void 0 : _chunk_choices__delta1.reasoning_content) || '';\n                    if (chunk.usage) usage = chunk.usage;\n                    if (content || reasoning_content) {\n                        accumulated += content;\n                        const chunkData = {\n                            content,\n                            reasoning_content,\n                            accumulated,\n                            isComplete: false,\n                            usage: void 0\n                        };\n                        options.onChunk(chunkData);\n                    }\n                    if (null == (_chunk_choices2 = chunk.choices) ? void 0 : null == (_chunk_choices_2 = _chunk_choices2[0]) ? void 0 : _chunk_choices_2.finish_reason) {\n                        timeCost = Date.now() - startTime;\n                        if (!usage) {\n                            const estimatedTokens = Math.max(1, Math.floor(accumulated.length / 4));\n                            usage = {\n                                prompt_tokens: estimatedTokens,\n                                completion_tokens: estimatedTokens,\n                                total_tokens: 2 * estimatedTokens\n                            };\n                        }\n                        const finalChunk = {\n                            content: '',\n                            accumulated,\n                            reasoning_content: '',\n                            isComplete: true,\n                            usage: {\n                                prompt_tokens: usage.prompt_tokens ?? 0,\n                                completion_tokens: usage.completion_tokens ?? 0,\n                                total_tokens: usage.total_tokens ?? 0,\n                                time_cost: timeCost ?? 0,\n                                model_name: modelName,\n                                model_description: modelDescription,\n                                intent: modelConfig.intent\n                            }\n                        };\n                        options.onChunk(finalChunk);\n                        break;\n                    }\n                }\n                content = accumulated;\n                debugProfileStats(`streaming model, ${modelName}, mode, ${vlMode || 'default'}, cost-ms, ${timeCost}`);\n            } else {\n                var _result_usage, _result_usage1, _result_usage2;\n                const result = await completion.create({\n                    model: modelName,\n                    messages,\n                    response_format: responseFormat,\n                    ...commonConfig\n                });\n                timeCost = Date.now() - startTime;\n                debugProfileStats(`model, ${modelName}, mode, ${vlMode || 'default'}, ui-tars-version, ${uiTarsVersion}, prompt-tokens, ${(null == (_result_usage = result.usage) ? void 0 : _result_usage.prompt_tokens) || ''}, completion-tokens, ${(null == (_result_usage1 = result.usage) ? void 0 : _result_usage1.completion_tokens) || ''}, total-tokens, ${(null == (_result_usage2 = result.usage) ? void 0 : _result_usage2.total_tokens) || ''}, cost-ms, ${timeCost}, requestId, ${result._request_id || ''}`);\n                debugProfileDetail(`model usage detail: ${JSON.stringify(result.usage)}`);\n                assert(result.choices, `invalid response from LLM service: ${JSON.stringify(result)}`);\n                content = result.choices[0].message.content;\n                usage = result.usage;\n            }\n            debugCall(`response: ${content}`);\n            assert(content, 'empty content');\n        } else if ('anthropic' === style) {\n            const convertImageContent = (content)=>{\n                if ('image_url' === content.type) {\n                    const imgBase64 = content.image_url.url;\n                    assert(imgBase64, 'image_url is required');\n                    const { mimeType, body } = parseBase64(content.image_url.url);\n                    return {\n                        source: {\n                            type: 'base64',\n                            media_type: mimeType,\n                            data: body\n                        },\n                        type: 'image'\n                    };\n                }\n                return content;\n            };\n            if (isStreaming) {\n                const stream = await completion.create({\n                    model: modelName,\n                    system: 'You are a versatile professional in software UI automation',\n                    messages: messages.map((m)=>({\n                            role: 'user',\n                            content: Array.isArray(m.content) ? m.content.map(convertImageContent) : m.content\n                        })),\n                    response_format: responseFormat,\n                    ...commonConfig\n                });\n                for await (const chunk of stream){\n                    var _chunk_delta;\n                    const content = (null == (_chunk_delta = chunk.delta) ? void 0 : _chunk_delta.text) || '';\n                    if (content) {\n                        accumulated += content;\n                        const chunkData = {\n                            content,\n                            accumulated,\n                            reasoning_content: '',\n                            isComplete: false,\n                            usage: void 0\n                        };\n                        options.onChunk(chunkData);\n                    }\n                    if ('message_stop' === chunk.type) {\n                        timeCost = Date.now() - startTime;\n                        const anthropicUsage = chunk.usage;\n                        const finalChunk = {\n                            content: '',\n                            accumulated,\n                            reasoning_content: '',\n                            isComplete: true,\n                            usage: anthropicUsage ? {\n                                prompt_tokens: anthropicUsage.input_tokens ?? 0,\n                                completion_tokens: anthropicUsage.output_tokens ?? 0,\n                                total_tokens: (anthropicUsage.input_tokens ?? 0) + (anthropicUsage.output_tokens ?? 0),\n                                time_cost: timeCost ?? 0,\n                                model_name: modelName,\n                                model_description: modelDescription,\n                                intent: modelConfig.intent\n                            } : void 0\n                        };\n                        options.onChunk(finalChunk);\n                        break;\n                    }\n                }\n                content = accumulated;\n            } else {\n                const result = await completion.create({\n                    model: modelName,\n                    system: 'You are a versatile professional in software UI automation',\n                    messages: messages.map((m)=>({\n                            role: 'user',\n                            content: Array.isArray(m.content) ? m.content.map(convertImageContent) : m.content\n                        })),\n                    response_format: responseFormat,\n                    ...commonConfig\n                });\n                timeCost = Date.now() - startTime;\n                content = result.content[0].text;\n                usage = result.usage;\n            }\n            assert(content, 'empty content');\n        }\n        if (isStreaming && !usage) {\n            const estimatedTokens = Math.max(1, Math.floor((content || '').length / 4));\n            usage = {\n                prompt_tokens: estimatedTokens,\n                completion_tokens: estimatedTokens,\n                total_tokens: 2 * estimatedTokens\n            };\n        }\n        return {\n            content: content || '',\n            usage: usage ? {\n                prompt_tokens: usage.prompt_tokens ?? 0,\n                completion_tokens: usage.completion_tokens ?? 0,\n                total_tokens: usage.total_tokens ?? 0,\n                time_cost: timeCost ?? 0,\n                model_name: modelName,\n                model_description: modelDescription,\n                intent: modelConfig.intent\n            } : void 0,\n            isStreamed: !!isStreaming\n        };\n    } catch (e) {\n        console.error(' call AI error', e);\n        const newError = new Error(`failed to call ${isStreaming ? 'streaming ' : ''}AI model service: ${e.message}. Trouble shooting: https://midscenejs.com/model-provider.html`, {\n            cause: e\n        });\n        throw newError;\n    }\n}\nconst getResponseFormat = (modelName, AIActionTypeValue)=>{\n    let responseFormat;\n    if (modelName.includes('gpt-4')) switch(AIActionTypeValue){\n        case AIActionType.ASSERT:\n            responseFormat = assertSchema;\n            break;\n        case AIActionType.INSPECT_ELEMENT:\n            responseFormat = locatorSchema;\n            break;\n        case AIActionType.PLAN:\n            responseFormat = planSchema;\n            break;\n        case AIActionType.EXTRACT_DATA:\n        case AIActionType.DESCRIBE_ELEMENT:\n            responseFormat = {\n                type: AIResponseFormat.JSON\n            };\n            break;\n        case AIActionType.TEXT:\n            responseFormat = void 0;\n            break;\n    }\n    if ('gpt-4o-2024-05-13' === modelName && AIActionTypeValue !== AIActionType.TEXT) responseFormat = {\n        type: AIResponseFormat.JSON\n    };\n    return responseFormat;\n};\nasync function callAIWithObjectResponse(messages, AIActionTypeValue, modelConfig) {\n    const response = await callAI(messages, AIActionTypeValue, modelConfig);\n    assert(response, 'empty response');\n    const vlMode = modelConfig.vlMode;\n    const jsonContent = safeParseJson(response.content, vlMode);\n    return {\n        content: jsonContent,\n        usage: response.usage\n    };\n}\nasync function callAIWithStringResponse(msgs, AIActionTypeValue, modelConfig) {\n    const { content, usage } = await callAI(msgs, AIActionTypeValue, modelConfig);\n    return {\n        content,\n        usage\n    };\n}\nfunction extractJSONFromCodeBlock(response) {\n    try {\n        const jsonMatch = response.match(/^\\s*(\\{[\\s\\S]*\\})\\s*$/);\n        if (jsonMatch) return jsonMatch[1];\n        const codeBlockMatch = response.match(/```(?:json)?\\s*(\\{[\\s\\S]*?\\})\\s*```/);\n        if (codeBlockMatch) return codeBlockMatch[1];\n        const jsonLikeMatch = response.match(/\\{[\\s\\S]*\\}/);\n        if (jsonLikeMatch) return jsonLikeMatch[0];\n    } catch  {}\n    return response;\n}\nfunction preprocessDoubaoBboxJson(input) {\n    if (input.includes('bbox')) while(/\\d+\\s+\\d+/.test(input))input = input.replace(/(\\d+)\\s+(\\d+)/g, '$1,$2');\n    return input;\n}\nfunction safeParseJson(input, vlMode) {\n    const cleanJsonString = extractJSONFromCodeBlock(input);\n    if (null == cleanJsonString ? void 0 : cleanJsonString.match(/\\((\\d+),(\\d+)\\)/)) {\n        var _cleanJsonString_match;\n        return null == (_cleanJsonString_match = cleanJsonString.match(/\\((\\d+),(\\d+)\\)/)) ? void 0 : _cleanJsonString_match.slice(1).map(Number);\n    }\n    try {\n        return JSON.parse(cleanJsonString);\n    } catch  {}\n    try {\n        return JSON.parse(jsonrepair(cleanJsonString));\n    } catch (e) {}\n    if ('doubao-vision' === vlMode || 'vlm-ui-tars' === vlMode) {\n        const jsonString = preprocessDoubaoBboxJson(cleanJsonString);\n        return JSON.parse(jsonrepair(jsonString));\n    }\n    throw Error(`failed to parse json response: ${input}`);\n}\nexport { callAI, callAIWithObjectResponse, callAIWithStringResponse, extractJSONFromCodeBlock, getResponseFormat, preprocessDoubaoBboxJson, safeParseJson };\n\n//# sourceMappingURL=index.mjs.map","import { z } from \"zod\";\nimport { Executor } from \"./ai-model/action-executor.mjs\";\nimport insight from \"./insight/index.mjs\";\nimport { getVersion } from \"./utils.mjs\";\nimport { AiLocateElement, PointSchema, RectSchema, SizeSchema, TMultimodalPromptSchema, TUserPromptSchema, describeUserPage, getMidsceneLocationSchema, plan } from \"./ai-model/index.mjs\";\nimport { SQAI_MODEL_NAME } from \"@sqai/shared/env\";\nimport { Agent, createAgent } from \"./agent/index.mjs\";\nconst src = insight;\nexport { Agent, AiLocateElement, Executor, insight as Insight, PointSchema, RectSchema, SQAI_MODEL_NAME, SizeSchema, TMultimodalPromptSchema, TUserPromptSchema, createAgent, src as default, describeUserPage, getMidsceneLocationSchema, getVersion, plan, z };\n\n//# sourceMappingURL=index.mjs.map","import { findAllMidsceneLocatorField } from \"@sqai/core/ai-model\";\nimport { buildDetailedLocateParam } from \"@sqai/core/yaml\";\nconst dataExtractionAPIs = [\n    'aiQuery',\n    'aiBoolean',\n    'aiNumber',\n    'aiString',\n    'aiAsk'\n];\nconst validationAPIs = [\n    'aiAssert',\n    'aiWaitFor'\n];\nconst noReplayAPIs = [\n    ...dataExtractionAPIs,\n    ...validationAPIs\n];\nconst formatErrorMessage = (e)=>{\n    const errorMessage = (null == e ? void 0 : e.message) || '';\n    if (errorMessage.includes('of different extension')) return 'Conflicting extension detected. Please disable the suspicious plugins and refresh the page. Guide: https://midscenejs.com/quick-experience.html#faq';\n    if (errorMessage.includes('NOT_IMPLEMENTED_AS_DESIGNED')) return 'Further actions cannot be performed in the current environment';\n    return errorMessage || 'Unknown error';\n};\nasync function parseStructuredParams(action, params, options = {}) {\n    if (!(null == action ? void 0 : action.paramSchema) || !('shape' in action.paramSchema)) return [\n        params.prompt || '',\n        options\n    ];\n    const schema = action.paramSchema;\n    const keys = schema && 'shape' in schema ? Object.keys(schema.shape) : [];\n    const paramObj = {\n        ...options\n    };\n    keys.forEach((key)=>{\n        if (void 0 !== params[key] && null !== params[key] && '' !== params[key]) paramObj[key] = params[key];\n    });\n    if (schema) {\n        const locatorFieldKeys = findAllMidsceneLocatorField(schema);\n        locatorFieldKeys.forEach((locateKey)=>{\n            const locatePrompt = params[locateKey];\n            if (locatePrompt && 'string' == typeof locatePrompt) {\n                const detailedLocateParam = buildDetailedLocateParam(locatePrompt, {\n                    deepThink: options.deepThink,\n                    cacheable: true\n                });\n                if (detailedLocateParam) paramObj[locateKey] = detailedLocateParam;\n            }\n        });\n    }\n    return [\n        paramObj\n    ];\n}\nfunction validateStructuredParams(value, action) {\n    if (!value.params) return {\n        valid: false,\n        errorMessage: 'Parameters are required'\n    };\n    if (!(null == action ? void 0 : action.paramSchema)) return {\n        valid: true\n    };\n    try {\n        var _action_paramSchema;\n        const paramsForValidation = {\n            ...value.params\n        };\n        const schema = action.paramSchema;\n        if (schema) {\n            const locatorFieldKeys = findAllMidsceneLocatorField(schema);\n            locatorFieldKeys.forEach((key)=>{\n                if ('string' == typeof paramsForValidation[key]) paramsForValidation[key] = {\n                    midscene_location_field_flag: true,\n                    prompt: paramsForValidation[key],\n                    center: [\n                        0,\n                        0\n                    ],\n                    rect: {\n                        left: 0,\n                        top: 0,\n                        width: 0,\n                        height: 0\n                    }\n                };\n            });\n        }\n        null == (_action_paramSchema = action.paramSchema) || _action_paramSchema.parse(paramsForValidation);\n    } catch (error) {\n        const zodError = error;\n        if (zodError.errors && zodError.errors.length > 0) {\n            const errorMessages = zodError.errors.filter((err)=>{\n                const path = err.path.join('.');\n                return !path.includes('center') && !path.includes('rect') && !path.includes('midscene_location_field_flag');\n            }).map((err)=>{\n                const field = err.path.join('.');\n                return `${field}: ${err.message}`;\n            });\n            if (errorMessages.length > 0) return {\n                valid: false,\n                errorMessage: `Validation error: ${errorMessages.join(', ')}`\n            };\n        } else {\n            const errorMsg = error instanceof Error ? error.message : 'Unknown validation error';\n            return {\n                valid: false,\n                errorMessage: `Parameter validation failed: ${errorMsg}`\n            };\n        }\n    }\n    return {\n        valid: true\n    };\n}\nasync function executeAction(activeAgent, actionType, actionSpace, value, options) {\n    const action = null == actionSpace ? void 0 : actionSpace.find((a)=>a.interfaceAlias === actionType || a.name === actionType);\n    if (action && 'function' == typeof activeAgent.callActionInActionSpace) if (value.params) {\n        const parsedParams = await parseStructuredParams(action, value.params, options);\n        return await activeAgent.callActionInActionSpace(action.name, parsedParams[0]);\n    } else {\n        const detailedLocateParam = value.prompt ? buildDetailedLocateParam(value.prompt, {\n            deepThink: options.deepThink,\n            cacheable: true\n        }) : void 0;\n        return await activeAgent.callActionInActionSpace(action.name, {\n            locate: detailedLocateParam,\n            ...options\n        });\n    }\n    {\n        const prompt = value.prompt;\n        if ('aiAssert' === actionType) {\n            var _activeAgent_aiAssert;\n            const { pass, thought } = await (null == activeAgent ? void 0 : null == (_activeAgent_aiAssert = activeAgent.aiAssert) ? void 0 : _activeAgent_aiAssert.call(activeAgent, prompt || '', void 0, {\n                keepRawResponse: true,\n                ...options\n            })) || {};\n            return {\n                pass: pass || false,\n                thought: thought || ''\n            };\n        }\n        if (activeAgent && 'function' == typeof activeAgent[actionType]) return await activeAgent[actionType](prompt, options);\n        throw new Error(`Unknown action type: ${actionType}`);\n    }\n}\nexport { dataExtractionAPIs, executeAction, formatErrorMessage, noReplayAPIs, parseStructuredParams, validateStructuredParams, validationAPIs };\n\n//# sourceMappingURL=common.mjs.map","import { overrideAIConfig } from \"@sqai/shared/env\";\nimport { uuid } from \"@sqai/shared/utils\";\nimport { executeAction, parseStructuredParams } from \"../common.mjs\";\nimport { BasePlaygroundAdapter } from \"./base.mjs\";\nfunction _define_property(obj, key, value) {\n    if (key in obj) Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n    });\n    else obj[key] = value;\n    return obj;\n}\nclass LocalExecutionAdapter extends BasePlaygroundAdapter {\n    get id() {\n        return this._id;\n    }\n    setProgressCallback(callback) {\n        this.progressCallback = void 0;\n        this.progressCallback = callback;\n    }\n    cleanup(requestId) {\n        delete this.taskProgressTips[requestId];\n    }\n    async parseStructuredParams(action, params, options) {\n        return await parseStructuredParams(action, params, options);\n    }\n    formatErrorMessage(error) {\n        const errorMessage = (null == error ? void 0 : error.message) || '';\n        if (errorMessage.includes('of different extension')) return 'Conflicting extension detected. Please disable the suspicious plugins and refresh the page. Guide: https://midscenejs.com/quick-experience.html#faq';\n        return this.formatBasicErrorMessage(error);\n    }\n    async getActionSpace(context) {\n        var _this_agent;\n        if (null == (_this_agent = this.agent) ? void 0 : _this_agent.getActionSpace) return await this.agent.getActionSpace();\n        if (this.agent && 'interface' in this.agent && 'object' == typeof this.agent.interface) {\n            const page = this.agent.interface;\n            if (null == page ? void 0 : page.actionSpace) return await page.actionSpace();\n        }\n        if (context && 'object' == typeof context && 'actionSpace' in context) {\n            const contextPage = context;\n            return await contextPage.actionSpace();\n        }\n        return [];\n    }\n    async checkStatus() {\n        return true;\n    }\n    async overrideConfig(aiConfig) {\n        overrideAIConfig(aiConfig);\n    }\n    async executeAction(actionType, value, options) {\n        const actionSpace = await this.getActionSpace();\n        let originalOnTaskStartTip;\n        if (options.requestId && this.agent) {\n            this.currentRequestId = options.requestId;\n            originalOnTaskStartTip = this.agent.onTaskStartTip;\n            this.agent.onTaskStartTip = (tip)=>{\n                if (this.currentRequestId !== options.requestId) return;\n                this.taskProgressTips[options.requestId] = tip;\n                if (this.progressCallback) this.progressCallback(tip);\n                if ('function' == typeof originalOnTaskStartTip) originalOnTaskStartTip(tip);\n            };\n        }\n        try {\n            const result = await executeAction(this.agent, actionType, actionSpace, value, options);\n            const response = {\n                result,\n                dump: null,\n                reportHTML: null,\n                error: null\n            };\n            try {\n                if (this.agent.dumpDataString) {\n                    const dumpString = this.agent.dumpDataString();\n                    if (dumpString) response.dump = JSON.parse(dumpString);\n                }\n                if (this.agent.reportHTMLString) response.reportHTML = this.agent.reportHTMLString() || null;\n                if (this.agent.writeOutActionDumps) this.agent.writeOutActionDumps();\n            } catch (error) {\n                console.error('Failed to get dump/reportHTML from agent:', error);\n            }\n            this.agent.resetDump();\n            return response;\n        } finally{\n            if (options.requestId) {\n                this.cleanup(options.requestId);\n                if (this.agent) this.agent.onTaskStartTip = originalOnTaskStartTip;\n            }\n        }\n    }\n    async getTaskProgress(requestId) {\n        return {\n            tip: this.taskProgressTips[requestId] || void 0\n        };\n    }\n    async cancelTask(_requestId) {\n        if (!this.agent) return {\n            error: 'No active agent found for this requestId'\n        };\n        try {\n            var _this_agent_destroy, _this_agent;\n            await (null == (_this_agent_destroy = (_this_agent = this.agent).destroy) ? void 0 : _this_agent_destroy.call(_this_agent));\n            return {\n                success: true\n            };\n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n            console.error(`Failed to cancel agent: ${errorMessage}`);\n            return {\n                error: `Failed to cancel: ${errorMessage}`\n            };\n        }\n    }\n    async getInterfaceInfo() {\n        var _this_agent;\n        if (!(null == (_this_agent = this.agent) ? void 0 : _this_agent.interface)) return null;\n        try {\n            var _this_agent_interface_describe, _this_agent_interface;\n            const type = this.agent.interface.interfaceType || 'Unknown';\n            const description = (null == (_this_agent_interface_describe = (_this_agent_interface = this.agent.interface).describe) ? void 0 : _this_agent_interface_describe.call(_this_agent_interface)) || void 0;\n            return {\n                type,\n                description\n            };\n        } catch (error) {\n            console.error('Failed to get interface info:', error);\n            return null;\n        }\n    }\n    constructor(agent){\n        super(), _define_property(this, \"agent\", void 0), _define_property(this, \"taskProgressTips\", {}), _define_property(this, \"progressCallback\", void 0), _define_property(this, \"_id\", void 0), _define_property(this, \"currentRequestId\", void 0);\n        this.agent = agent;\n        this._id = uuid();\n    }\n}\nexport { LocalExecutionAdapter };\n\n//# sourceMappingURL=local-execution.mjs.map","import { parseStructuredParams } from \"../common.mjs\";\nimport { BasePlaygroundAdapter } from \"./base.mjs\";\nfunction _define_property(obj, key, value) {\n    if (key in obj) Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n    });\n    else obj[key] = value;\n    return obj;\n}\nclass RemoteExecutionAdapter extends BasePlaygroundAdapter {\n    get id() {\n        return this._id;\n    }\n    validateParams(value, action) {\n        if (!(null == action ? void 0 : action.paramSchema)) return {\n            valid: true\n        };\n        const needsStructuredParams = this.actionNeedsStructuredParams(action);\n        if (!needsStructuredParams) return {\n            valid: true\n        };\n        if (!value.params) return {\n            valid: false,\n            errorMessage: 'Parameters are required'\n        };\n        if (action.paramSchema && 'object' == typeof action.paramSchema) {\n            const schema = action.paramSchema;\n            if (schema.shape || 'ZodObject' === schema.type) {\n                const shape = schema.shape || {};\n                const missingFields = Object.keys(shape).filter((key)=>{\n                    var _fieldDef__def, _fieldDef__def1;\n                    const fieldDef = shape[key];\n                    const isOptional = (null == fieldDef ? void 0 : fieldDef.isOptional) || (null == fieldDef ? void 0 : null == (_fieldDef__def = fieldDef._def) ? void 0 : _fieldDef__def.innerType) || (null == fieldDef ? void 0 : null == (_fieldDef__def1 = fieldDef._def) ? void 0 : _fieldDef__def1.typeName) === 'ZodOptional';\n                    return !isOptional && (void 0 === value.params[key] || '' === value.params[key]);\n                });\n                if (missingFields.length > 0) return {\n                    valid: false,\n                    errorMessage: `Missing required parameters: ${missingFields.join(', ')}`\n                };\n            }\n        }\n        return {\n            valid: true\n        };\n    }\n    async parseStructuredParams(action, params, options) {\n        return await parseStructuredParams(action, params, options);\n    }\n    formatErrorMessage(error) {\n        const message = (null == error ? void 0 : error.message) || '';\n        const androidErrors = [\n            {\n                keyword: 'adb',\n                message: 'ADB connection error. Please ensure device is connected and USB debugging is enabled.'\n            },\n            {\n                keyword: 'UIAutomator',\n                message: 'UIAutomator error. Please ensure the UIAutomator server is running on the device.'\n            }\n        ];\n        const androidError = androidErrors.find(({ keyword })=>message.includes(keyword));\n        if (androidError) return androidError.message;\n        return this.formatBasicErrorMessage(error);\n    }\n    async executeAction(actionType, value, options) {\n        if (this.serverUrl && 'undefined' != typeof window) return this.executeViaServer(actionType, value, options);\n        throw new Error('Remote execution adapter requires server URL for execution');\n    }\n    async executeViaServer(actionType, value, options) {\n        const payload = {\n            type: actionType,\n            prompt: value.prompt,\n            ...this.buildOptionalPayloadParams(options, value)\n        };\n        if (options.context) payload.context = options.context;\n        if (options.requestId && this.progressCallback) this.startProgressPolling(options.requestId, this.progressCallback);\n        try {\n            const response = await fetch(`${this.serverUrl}/execute`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(payload)\n            });\n            if (!response.ok) {\n                const errorText = await response.text().catch(()=>'Unknown error');\n                throw new Error(`Server request failed (${response.status}): ${errorText}`);\n            }\n            const result = await response.json();\n            if (options.requestId) this.stopProgressPolling(options.requestId);\n            return result;\n        } catch (error) {\n            if (options.requestId) this.stopProgressPolling(options.requestId);\n            console.error('Execute via server failed:', error);\n            throw error;\n        }\n    }\n    buildOptionalPayloadParams(options, value) {\n        const optionalParams = {};\n        const optionalFields = [\n            {\n                key: 'requestId',\n                value: options.requestId\n            },\n            {\n                key: 'deepThink',\n                value: options.deepThink\n            },\n            {\n                key: 'screenshotIncluded',\n                value: options.screenshotIncluded\n            },\n            {\n                key: 'domIncluded',\n                value: options.domIncluded\n            },\n            {\n                key: 'params',\n                value: value.params\n            }\n        ];\n        optionalFields.forEach(({ key, value })=>{\n            if (null != value && '' !== value) optionalParams[key] = value;\n        });\n        return optionalParams;\n    }\n    async getActionSpace(context) {\n        if (this.serverUrl && 'undefined' != typeof window) try {\n            const response = await fetch(`${this.serverUrl}/action-space`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    context\n                })\n            });\n            if (!response.ok) throw new Error(`Failed to get action space: ${response.statusText}`);\n            const result = await response.json();\n            return Array.isArray(result) ? result : [];\n        } catch (error) {\n            console.error('Failed to get action space from server:', error);\n        }\n        if (context && 'object' == typeof context && 'actionSpace' in context) try {\n            const actionSpaceMethod = context.actionSpace;\n            const result = await actionSpaceMethod();\n            return Array.isArray(result) ? result : [];\n        } catch (error) {\n            console.error('Failed to get action space from context:', error);\n        }\n        return [];\n    }\n    async checkStatus() {\n        if (!this.serverUrl) return false;\n        try {\n            const res = await fetch(`${this.serverUrl}/status`);\n            if (200 === res.status) {\n                try {\n                    const data = await res.json();\n                    if (data.id && 'string' == typeof data.id) this._id = data.id;\n                } catch (jsonError) {\n                    console.debug('Failed to parse status response:', jsonError);\n                }\n                return true;\n            }\n            return false;\n        } catch (error) {\n            console.warn('Server status check failed:', error);\n            return false;\n        }\n    }\n    async overrideConfig(aiConfig) {\n        if (!this.serverUrl) throw new Error('Server URL not configured');\n        try {\n            const response = await fetch(`${this.serverUrl}/config`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    aiConfig\n                })\n            });\n            if (!response.ok) throw new Error(`Failed to override server config: ${response.statusText}`);\n        } catch (error) {\n            console.error('Failed to override server config:', error);\n            throw error;\n        }\n    }\n    async getTaskProgress(requestId) {\n        if (!this.serverUrl) return {\n            tip: void 0\n        };\n        if (!(null == requestId ? void 0 : requestId.trim())) {\n            console.warn('Invalid requestId provided for task progress');\n            return {\n                tip: void 0\n            };\n        }\n        try {\n            const response = await fetch(`${this.serverUrl}/task-progress/${encodeURIComponent(requestId)}`);\n            if (!response.ok) {\n                console.warn(`Task progress request failed: ${response.statusText}`);\n                return {\n                    tip: void 0\n                };\n            }\n            return await response.json();\n        } catch (error) {\n            console.error('Failed to poll task progress:', error);\n            return {\n                tip: void 0\n            };\n        }\n    }\n    async cancelTask(requestId) {\n        this.stopProgressPolling(requestId);\n        if (!this.serverUrl) return {\n            error: 'No server URL configured'\n        };\n        if (!(null == requestId ? void 0 : requestId.trim())) return {\n            error: 'Invalid request ID'\n        };\n        try {\n            const res = await fetch(`${this.serverUrl}/cancel/${encodeURIComponent(requestId)}`, {\n                method: 'POST'\n            });\n            if (!res.ok) return {\n                error: `Cancel request failed: ${res.statusText}`\n            };\n            const result = await res.json();\n            return {\n                success: true,\n                ...result\n            };\n        } catch (error) {\n            console.error('Failed to cancel task:', error);\n            return {\n                error: 'Failed to cancel task'\n            };\n        }\n    }\n    setProgressCallback(callback) {\n        this.progressCallback = callback;\n    }\n    startProgressPolling(requestId, callback) {\n        if (this.progressPolling.has(requestId)) return;\n        let lastTip = '';\n        const interval = setInterval(async ()=>{\n            try {\n                var _progress_tip_trim, _progress_tip;\n                const progress = await this.getTaskProgress(requestId);\n                if ((null == progress ? void 0 : null == (_progress_tip = progress.tip) ? void 0 : null == (_progress_tip_trim = _progress_tip.trim) ? void 0 : _progress_tip_trim.call(_progress_tip)) && progress.tip !== lastTip) {\n                    lastTip = progress.tip;\n                    callback(progress.tip);\n                }\n            } catch (error) {\n                console.debug('Progress polling error:', error);\n            }\n        }, 500);\n        this.progressPolling.set(requestId, interval);\n    }\n    stopProgressPolling(requestId) {\n        const interval = this.progressPolling.get(requestId);\n        if (interval) {\n            clearInterval(interval);\n            this.progressPolling.delete(requestId);\n        }\n    }\n    async getScreenshot() {\n        if (!this.serverUrl) return null;\n        try {\n            const response = await fetch(`${this.serverUrl}/screenshot`);\n            if (!response.ok) {\n                console.warn(`Screenshot request failed: ${response.statusText}`);\n                return null;\n            }\n            return await response.json();\n        } catch (error) {\n            console.error('Failed to get screenshot:', error);\n            return null;\n        }\n    }\n    async getInterfaceInfo() {\n        if (!this.serverUrl) return null;\n        try {\n            const response = await fetch(`${this.serverUrl}/interface-info`);\n            if (!response.ok) {\n                console.warn(`Interface info request failed: ${response.statusText}`);\n                return null;\n            }\n            return await response.json();\n        } catch (error) {\n            console.error('Failed to get interface info:', error);\n            return null;\n        }\n    }\n    constructor(serverUrl){\n        super(), _define_property(this, \"serverUrl\", void 0), _define_property(this, \"progressPolling\", new Map()), _define_property(this, \"progressCallback\", void 0), _define_property(this, \"_id\", void 0);\n        this.serverUrl = serverUrl;\n    }\n}\nexport { RemoteExecutionAdapter };\n\n//# sourceMappingURL=remote-execution.mjs.map","import { PLAYGROUND_SERVER_PORT } from \"@sqai/shared/constants\";\nimport { LocalExecutionAdapter } from \"../adapters/local-execution.mjs\";\nimport { RemoteExecutionAdapter } from \"../adapters/remote-execution.mjs\";\nfunction _define_property(obj, key, value) {\n    if (key in obj) Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n    });\n    else obj[key] = value;\n    return obj;\n}\nclass PlaygroundSDK {\n    createAdapter(type, serverUrl, agent) {\n        switch(type){\n            case 'local-execution':\n                if (!agent) throw new Error('Agent is required for local execution');\n                return new LocalExecutionAdapter(agent);\n            case 'remote-execution':\n                {\n                    const finalServerUrl = serverUrl || ('undefined' != typeof window && window.location.protocol.includes('http') ? window.location.origin : `http://localhost:${PLAYGROUND_SERVER_PORT}`);\n                    return new RemoteExecutionAdapter(finalServerUrl);\n                }\n            default:\n                throw new Error(`Unsupported execution type: ${type}`);\n        }\n    }\n    async executeAction(actionType, value, options) {\n        const result = await this.adapter.executeAction(actionType, value, options);\n        if (options.requestId) this.stopProgressPolling(options.requestId);\n        return result;\n    }\n    async getActionSpace(context) {\n        return this.adapter.getActionSpace(context);\n    }\n    validateStructuredParams(value, action) {\n        return this.adapter.validateParams(value, action);\n    }\n    formatErrorMessage(error) {\n        return this.adapter.formatErrorMessage(error);\n    }\n    createDisplayContent(value, needsStructuredParams, action) {\n        return this.adapter.createDisplayContent(value, needsStructuredParams, action);\n    }\n    get id() {\n        if (this.adapter instanceof RemoteExecutionAdapter) return this.adapter.id;\n        if (this.adapter instanceof LocalExecutionAdapter) return this.adapter.id;\n    }\n    async checkStatus() {\n        if (this.adapter instanceof RemoteExecutionAdapter) return this.adapter.checkStatus();\n        return true;\n    }\n    async overrideConfig(aiConfig) {\n        if (this.adapter instanceof RemoteExecutionAdapter) return this.adapter.overrideConfig(aiConfig);\n    }\n    async getTaskProgress(requestId) {\n        if (this.adapter instanceof RemoteExecutionAdapter) return this.adapter.getTaskProgress(requestId);\n        if (this.adapter instanceof LocalExecutionAdapter) return this.adapter.getTaskProgress(requestId);\n        return {\n            tip: void 0\n        };\n    }\n    async cancelTask(requestId) {\n        this.stopProgressPolling(requestId);\n        if (this.adapter instanceof RemoteExecutionAdapter) return this.adapter.cancelTask(requestId);\n        return {\n            error: 'Cancel task not supported in local execution mode'\n        };\n    }\n    onProgressUpdate(callback) {\n        if (this.adapter instanceof RemoteExecutionAdapter) this.adapter.setProgressCallback(callback);\n        else if (this.adapter instanceof LocalExecutionAdapter) this.adapter.setProgressCallback(callback);\n    }\n    startProgressPolling(requestId) {\n        console.warn('startProgressPolling is deprecated - polling is now automatic');\n    }\n    stopProgressPolling(requestId) {\n        console.warn('stopProgressPolling is deprecated - polling cleanup is now automatic');\n    }\n    async cancelExecution(requestId) {\n        this.stopProgressPolling(requestId);\n        if (this.adapter instanceof RemoteExecutionAdapter) await this.adapter.cancelTask(requestId);\n        else if (this.adapter instanceof LocalExecutionAdapter) console.warn('Local execution cancellation not fully implemented');\n    }\n    async getScreenshot() {\n        if (this.adapter instanceof RemoteExecutionAdapter) return this.adapter.getScreenshot();\n        return null;\n    }\n    async getInterfaceInfo() {\n        if (this.adapter instanceof LocalExecutionAdapter) return this.adapter.getInterfaceInfo();\n        if (this.adapter instanceof RemoteExecutionAdapter) return this.adapter.getInterfaceInfo();\n        return null;\n    }\n    constructor(config){\n        _define_property(this, \"adapter\", void 0);\n        this.adapter = this.createAdapter(config.type, config.serverUrl, config.agent);\n    }\n}\nexport { PlaygroundSDK };\n\n//# sourceMappingURL=index.mjs.map","function _define_property(obj, key, value) {\n    if (key in obj) Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n    });\n    else obj[key] = value;\n    return obj;\n}\nclass IndexedDBManager {\n    initDB() {\n        return new Promise((resolve, reject)=>{\n            const request = indexedDB.open(this.dbName, this.version);\n            request.onerror = ()=>reject(request.error);\n            request.onsuccess = ()=>resolve(request.result);\n            request.onupgradeneeded = (event)=>{\n                const db = event.target.result;\n                this.storeConfigs.forEach(({ name, keyPath })=>{\n                    if (!db.objectStoreNames.contains(name)) {\n                        const store = db.createObjectStore(name, {\n                            keyPath\n                        });\n                        store.createIndex('timestamp', 'timestamp', {\n                            unique: false\n                        });\n                    }\n                });\n            };\n        });\n    }\n    async withTransaction(storeNames, mode, operation) {\n        const db = await this.dbPromise;\n        const transaction = db.transaction(storeNames, mode);\n        const stores = Array.isArray(storeNames) ? storeNames.map((name)=>transaction.objectStore(name)) : transaction.objectStore(storeNames);\n        return operation(stores);\n    }\n    promisifyRequest(request) {\n        return new Promise((resolve, reject)=>{\n            request.onsuccess = ()=>resolve(request.result);\n            request.onerror = ()=>reject(request.error);\n        });\n    }\n    async put(storeName, data) {\n        await this.withTransaction(storeName, 'readwrite', async (store)=>{\n            await this.promisifyRequest(store.put(data));\n        });\n    }\n    async get(storeName, key) {\n        return this.withTransaction(storeName, 'readonly', async (store)=>this.promisifyRequest(store.get(key)));\n    }\n    async getAll(storeName, sortByTimestamp = true) {\n        return this.withTransaction(storeName, 'readonly', async (store)=>{\n            const objectStore = store;\n            const results = sortByTimestamp ? await this.promisifyRequest(objectStore.index('timestamp').getAll()) : await this.promisifyRequest(objectStore.getAll());\n            return sortByTimestamp ? results.sort((a, b)=>a.timestamp - b.timestamp) : results;\n        });\n    }\n    async clear(storeName) {\n        await this.withTransaction(storeName, 'readwrite', async (store)=>{\n            await this.promisifyRequest(store.clear());\n        });\n    }\n    async delete(storeName, key) {\n        await this.withTransaction(storeName, 'readwrite', async (store)=>{\n            await this.promisifyRequest(store.delete(key));\n        });\n    }\n    async count(storeName) {\n        return this.withTransaction(storeName, 'readonly', async (store)=>this.promisifyRequest(store.count()));\n    }\n    getDBPromise() {\n        return this.dbPromise;\n    }\n    constructor(dbName, version, storeConfigs){\n        _define_property(this, \"dbPromise\", void 0);\n        _define_property(this, \"dbName\", void 0);\n        _define_property(this, \"version\", void 0);\n        _define_property(this, \"storeConfigs\", void 0);\n        this.dbName = dbName;\n        this.version = version;\n        this.storeConfigs = storeConfigs;\n        this.dbPromise = this.initDB();\n    }\n}\nconst withErrorHandling = async (operation, errorMessage, defaultValue, onQuotaExceeded)=>{\n    try {\n        return await operation();\n    } catch (e) {\n        console.error(errorMessage, e);\n        if (e instanceof Error && 'QuotaExceededError' === e.name && onQuotaExceeded) {\n            console.log('Storage quota exceeded, running cleanup...');\n            await onQuotaExceeded();\n        }\n        return defaultValue;\n    }\n};\nconst createCleanupFunction = (dbManager, storeName, maxItems)=>async ()=>{\n        try {\n            const results = await dbManager.getAll(storeName);\n            if (results.length > maxItems) {\n                const toDelete = results.sort((a, b)=>a.timestamp - b.timestamp).slice(0, results.length - maxItems);\n                await Promise.all(toDelete.map((item)=>dbManager.delete(storeName, item.id)));\n            }\n        } catch (e) {\n            console.error(`Failed to cleanup ${storeName}:`, e);\n        }\n    };\nexport { IndexedDBManager, createCleanupFunction, withErrorHandling };\n","const PLAYWRIGHT_EXAMPLE_CODE = `\n// Reference the following code to generate Midscene test cases\n// The following is test code for Midscene AI, for reference\n// The following is Playwright syntax, you can use Playwright to assist in test generation\nIMPORTANT: Follow these exact type signatures for AI functions:\n\n// Type signatures for AI functions:\naiInput(value: string, locator: string): Promise<void>\naiTap(locator: string): Promise<void>\naiDoubleClick(locator: string): Promise<void>\naiScroll(scrollParam: {\n  direction: 'up' | 'down' | 'left' | 'right',\n  scrollType: 'once' | 'untilBottom' | 'untilTop' | 'untilRight' | 'untilLeft',\n  distance: number - scroll distance, px is the unit\n}): Promise<void>\naiAssert(assertion: string): Promise<void>\naiQuery<T>(queryObject: Record<string, string>): Promise<T> // Extracts data from page based on descriptions\n\n// examples:\n// Reference the following code to generate Midscene test cases\n// The following is test code for Midscene AI, for reference\n// The following is Playwright syntax, you can use Playwright to assist in test generation\nimport { test as base } from '@playwright/test';\nimport type { PlayWrightAiFixtureType } from '@sqai/web/playwright';\nimport { PlaywrightAiFixture } from '@sqai/web/playwright';\n\nconst test = base.extend<PlayWrightAiFixtureType>(PlaywrightAiFixture({\n  waitForNetworkIdleTimeout: 2000, // optional, the timeout for waiting for network idle between each action, default is 2000ms\n}));\n\n\ntest.beforeEach(async ({ page }) => {\n  await page.goto('https://www.xxx.com/');\n  await page.setViewportSize({ width: 1920, height: 1080 });\n});\n\ntest('ai shop', async ({\n  aiInput,\n  aiAssert,\n  aiQuery,\n  aiKeyboardPress,\n  aiHover,\n  aiTap,\n  agentForPage,\n  page,\n}) => {\n  // login\n  await aiAssert('The page shows the login interface');\n  await aiInput('user_name', 'in user name input');\n  await aiInput('password', 'in password input');\n  await aiKeyboardPress('Enter', 'Login Button');\n\n  // check the login success\n  await aiWaitFor('The page shows that the loading is complete');\n  await aiAssert('The current page shows the product detail page');\n\n  // check the product info\n  const dataA = await aiQuery({\n    userInfo: 'User information in the format {name: string}',\n    theFirstProductInfo: 'The first product info in the format {name: string, price: number}',\n  });\n  expect(dataA.theFirstProductInfo.name).toBe('xxx');\n  expect(dataA.theFirstProductInfo.price).toBe(100);\n\n\n  // add to cart\n  await aiTap('click add to cart button');\n  \n  await aiTap('click right top cart icon');\n  await aiAssert('The cart icon shows the number 1');\n});\n`;\nconst YAML_EXAMPLE_CODE = `\n1. Format:\n\nweb:\n  url: \"starting_url\"\n  viewportWidth: 1280\n  viewportHeight: 960\n\ntasks:\n  - name: \"descriptive task name\"\n    flow:\n      - aiTap: \"element description\"\n      - aiInput: 'text value'\n        locate: 'input field description'\n      - aiScroll:\n        direction: down/up\n        scrollType: untilBottom/untilTop/page\n      - aiAssert: \"expected state\"\n      - sleep: milliseconds\n\n2. Action Types:\n- aiTap: for clicks (natural language targeting)\n- aiInput: for text input with 'locate' field\n- aiScroll: with direction and scrollType\n- aiAssert: for validations\n- sleep: for delays (milliseconds)\n\n3. Best Practices:\n- Group related actions into logical tasks\n- Use natural language descriptions\n- Add deepThink: true for complex interactions\n- Keep task names concise but descriptive\n\n\n\nYAML type\ntasks:\n  - name: <name>\n    continueOnError: <boolean> # Optional, whether to continue to the next task on error, defaults to false.\n    flow:\n      # Auto Planning (.ai)\n      # ----------------\n\n      # Perform an interaction. \\`ai\\` is a shorthand for \\`aiAction\\`.\n      - ai: <prompt>\n        cacheable: <boolean> # Optional, whether to cache the result of this API call when the [caching feature](./caching.mdx) is enabled. Defaults to True.\n\n      # This usage is the same as \\`ai\\`.\n      - aiAction: <prompt>\n        cacheable: <boolean> # Optional, whether to cache the result of this API call when the [caching feature](./caching.mdx) is enabled. Defaults to True.\n\n      # Instant Action (.aiTap, .aiDoubleClick, .aiHover, .aiInput, .aiKeyboardPress, .aiScroll)\n      # ----------------\n\n      # Tap an element described by a prompt.\n      - aiTap: <prompt>\n        deepThink: <boolean> # Optional, whether to use deepThink to precisely locate the element. Defaults to False.\n        xpath: <xpath> # Optional, the xpath of the target element for the operation. If provided, Midscene will prioritize this xpath to find the element before using the cache and the AI model. Defaults to empty.\n        cacheable: <boolean> # Optional, whether to cache the result of this API call when the [caching feature](./caching.mdx) is enabled. Defaults to True.\n\n      # Double click an element described by a prompt.\n      - aiDoubleClick: <prompt>\n        deepThink: <boolean> # Optional, whether to use deepThink to precisely locate the element. Defaults to False.\n        xpath: <xpath> # Optional, the xpath of the target element for the operation. If provided, Midscene will prioritize this xpath to find the element before using the cache and the AI model. Defaults to empty.\n        cacheable: <boolean> # Optional, whether to cache the result of this API call when the [caching feature](./caching.mdx) is enabled. Defaults to True.\n\n      # Hover over an element described by a prompt.\n      - aiHover: <prompt>\n        deepThink: <boolean> # Optional, whether to use deepThink to precisely locate the element. Defaults to False.\n        xpath: <xpath> # Optional, the xpath of the target element for the operation. If provided, Midscene will prioritize this xpath to find the element before using the cache and the AI model. Defaults to empty.\n        cacheable: <boolean> # Optional, whether to cache the result of this API call when the [caching feature](./caching.mdx) is enabled. Defaults to True.\n\n      # Input text into an element described by a prompt.\n      - aiInput: <final text content of the input>\n        locate: <prompt>\n        deepThink: <boolean> # Optional, whether to use deepThink to precisely locate the element. Defaults to False.\n        xpath: <xpath> # Optional, the xpath of the target element for the operation. If provided, Midscene will prioritize this xpath to find the element before using the cache and the AI model. Defaults to empty.\n        cacheable: <boolean> # Optional, whether to cache the result of this API call when the [caching feature](./caching.mdx) is enabled. Defaults to True.\n\n      # Press a key (e.g., Enter, Tab, Escape) on an element described by a prompt.\n      - aiKeyboardPress: <key>\n        locate: <prompt>\n        deepThink: <boolean> # Optional, whether to use deepThink to precisely locate the element. Defaults to False.\n        xpath: <xpath> # Optional, the xpath of the target element for the operation. If provided, Midscene will prioritize this xpath to find the element before using the cache and the AI model. Defaults to empty.\n        cacheable: <boolean> # Optional, whether to cache the result of this API call when the [caching feature](./caching.mdx) is enabled. Defaults to True.\n\n      # Scroll globally or on an element described by a prompt.\n      - aiScroll:\n        direction: 'up' # or 'down' | 'left' | 'right'\n        scrollType: 'once' # or 'untilTop' | 'untilBottom' | 'untilLeft' | 'untilRight'\n        distance: <number> # Optional, the scroll distance in pixels.\n        locate: <prompt> # Optional, the element to scroll on.\n        deepThink: <boolean> # Optional, whether to use deepThink to precisely locate the element. Defaults to False.\n        xpath: <xpath> # Optional, the xpath of the target element for the operation. If provided, Midscene will prioritize this xpath to find the element before using the cache and the AI model. Defaults to empty.\n        cacheable: <boolean> # Optional, whether to cache the result of this API call when the [caching feature](./caching.mdx) is enabled. Defaults to True.\n\n      # Log the current screenshot with a description in the report file.\n      - logScreenshot: <title> # Optional, the title of the screenshot. If not provided, the title will be 'untitled'.\n        content: <content> # Optional, the description of the screenshot.\n\n      # Data Extraction\n      # ----------------\n\n      # Perform a query that returns a JSON object.\n      - aiQuery: <prompt> # Remember to describe the format of the result in the prompt.\n        name: <name> # The key for the query result in the JSON output.\n\n      # More APIs\n      # ----------------\n\n      # Wait for a condition to be met, with a timeout (in ms, optional, defaults to 30000).\n      - aiWaitFor: <prompt>\n        timeout: <ms>\n\n      # Perform an assertion.\n      - aiAssert: <prompt>\n        errorMessage: <error-message> # Optional, the error message to print if the assertion fails.\n\n      # Wait for a specified amount of time.\n      - sleep: <ms>\n\n      # Execute a piece of JavaScript code in the web page context.\n      - javascript: <javascript>\n        name: <name> # Optional, assign a name to the return value, which will be used as a key in the JSON output.\n\n  - name: <name>\n    flow:\n      # ...\n`;\nexport { PLAYWRIGHT_EXAMPLE_CODE, YAML_EXAMPLE_CODE };\n","import { PLAYWRIGHT_EXAMPLE_CODE, YAML_EXAMPLE_CODE } from \"./example-code.mjs\";\nconst TEXT_SIZE_THRESHOLD = 9;\nconst TEXT_MAX_SIZE = 40;\nconst CONTAINER_MINI_HEIGHT = 3;\nconst CONTAINER_MINI_WIDTH = 3;\nvar constants_NodeType = /*#__PURE__*/ function(NodeType) {\n    NodeType[\"CONTAINER\"] = \"CONTAINER Node\";\n    NodeType[\"FORM_ITEM\"] = \"FORM_ITEM Node\";\n    NodeType[\"BUTTON\"] = \"BUTTON Node\";\n    NodeType[\"A\"] = \"Anchor Node\";\n    NodeType[\"IMG\"] = \"IMG Node\";\n    NodeType[\"TEXT\"] = \"TEXT Node\";\n    NodeType[\"POSITION\"] = \"POSITION Node\";\n    return NodeType;\n}({});\nconst PLAYGROUND_SERVER_PORT = 5800;\nconst SCRCPY_SERVER_PORT = 5700;\nconst WEBDRIVER_ELEMENT_ID_KEY = 'element-6066-11e4-a52e-4f735466cecf';\nconst DEFAULT_WDA_PORT = 8100;\nconst DEFAULT_WAIT_FOR_NAVIGATION_TIMEOUT = 5000;\nconst DEFAULT_WAIT_FOR_NETWORK_IDLE_TIMEOUT = 2000;\nconst DEFAULT_WAIT_FOR_NETWORK_IDLE_TIME = 300;\nconst DEFAULT_WAIT_FOR_NETWORK_IDLE_CONCURRENCY = 2;\nexport { CONTAINER_MINI_HEIGHT, CONTAINER_MINI_WIDTH, DEFAULT_WAIT_FOR_NAVIGATION_TIMEOUT, DEFAULT_WAIT_FOR_NETWORK_IDLE_CONCURRENCY, DEFAULT_WAIT_FOR_NETWORK_IDLE_TIME, DEFAULT_WAIT_FOR_NETWORK_IDLE_TIMEOUT, DEFAULT_WDA_PORT, constants_NodeType as NodeType, PLAYGROUND_SERVER_PORT, PLAYWRIGHT_EXAMPLE_CODE, SCRCPY_SERVER_PORT, TEXT_MAX_SIZE, TEXT_SIZE_THRESHOLD, WEBDRIVER_ELEMENT_ID_KEY, YAML_EXAMPLE_CODE };\n","\n      import API from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport { ExclamationCircleFilled } from \"@ant-design/icons\";\nimport { useEnvConfig } from \"../../store/store.mjs\";\nimport { EnvConfig } from \"../env-config/index.mjs\";\nimport \"./index.css\";\nconst EnvConfigReminder = (param)=>{\n    let { className = '' } = param;\n    const { config } = useEnvConfig();\n    const configAlreadySet = Object.keys(config || {}).length >= 1;\n    if (configAlreadySet) return null;\n    return /*#__PURE__*/ jsxs(\"div\", {\n        className: `env-config-reminder ${className}`,\n        children: [\n            /*#__PURE__*/ jsx(ExclamationCircleFilled, {\n                className: \"reminder-icon\"\n            }),\n            /*#__PURE__*/ jsx(\"span\", {\n                className: \"reminder-text\",\n                children: \"Please set up your environment variables before using.\"\n            }),\n            /*#__PURE__*/ jsx(EnvConfig, {\n                mode: \"text\",\n                showTooltipWhenEmpty: false\n            })\n        ]\n    });\n};\nexport { EnvConfigReminder };\n","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport { SettingOutlined } from \"@ant-design/icons\";\nimport { Input, Modal, Tooltip } from \"antd\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { useEnvConfig } from \"../../store/store.mjs\";\nfunction EnvConfig(param) {\n    let { showTooltipWhenEmpty = true, showModelName = true, tooltipPlacement = 'bottom', mode = 'icon' } = param;\n    const { config, configString, loadConfig, syncFromStorage } = useEnvConfig();\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [tempConfigString, setTempConfigString] = useState(configString);\n    const midsceneModelName = config.MIDSCENE_MODEL_NAME;\n    const componentRef = useRef(null);\n    const showModal = (e)=>{\n        syncFromStorage();\n        setIsModalOpen(true);\n        e.preventDefault();\n        e.stopPropagation();\n    };\n    const handleOk = ()=>{\n        setIsModalOpen(false);\n        loadConfig(tempConfigString);\n    };\n    const handleCancel = ()=>{\n        setIsModalOpen(false);\n    };\n    useEffect(()=>{\n        if (isModalOpen) setTempConfigString(configString);\n    }, [\n        isModalOpen,\n        configString\n    ]);\n    return /*#__PURE__*/ jsxs(\"div\", {\n        style: {\n            display: 'flex',\n            justifyContent: 'flex-end',\n            gap: '10px',\n            alignItems: 'center',\n            height: '100%',\n            minHeight: '32px'\n        },\n        ref: componentRef,\n        children: [\n            showModelName ? midsceneModelName : null,\n            /*#__PURE__*/ jsx(Tooltip, {\n                title: \"Please set up your environment variables before using.\",\n                placement: tooltipPlacement,\n                align: {\n                    offset: [\n                        -10,\n                        5\n                    ]\n                },\n                getPopupContainer: ()=>componentRef.current,\n                open: isModalOpen ? false : showTooltipWhenEmpty ? 0 === Object.keys(config).length : void 0,\n                children: 'icon' === mode ? /*#__PURE__*/ jsx(SettingOutlined, {\n                    onClick: showModal\n                }) : /*#__PURE__*/ jsx(\"span\", {\n                    onClick: showModal,\n                    style: {\n                        color: '#006AFF',\n                        cursor: 'pointer'\n                    },\n                    children: \"set up\"\n                })\n            }),\n            /*#__PURE__*/ jsxs(Modal, {\n                title: \"Model Env Config\",\n                open: isModalOpen,\n                onOk: handleOk,\n                onCancel: handleCancel,\n                okText: \"Save\",\n                style: {\n                    width: '800px',\n                    height: '100%',\n                    marginTop: '10%'\n                },\n                destroyOnClose: true,\n                maskClosable: true,\n                centered: true,\n                children: [\n                    /*#__PURE__*/ jsx(Input.TextArea, {\n                        rows: 7,\n                        placeholder: 'OPENAI_API_KEY=sk-...\\nMIDSCENE_MODEL_NAME=gpt-4o-2024-08-06\\n...',\n                        value: tempConfigString,\n                        onChange: (e)=>setTempConfigString(e.target.value),\n                        style: {\n                            whiteSpace: 'nowrap',\n                            wordWrap: 'break-word'\n                        }\n                    }),\n                    /*#__PURE__*/ jsxs(\"div\", {\n                        children: [\n                            /*#__PURE__*/ jsx(\"p\", {\n                                children: \"The format is KEY=VALUE and separated by new lines.\"\n                            }),\n                            /*#__PURE__*/ jsxs(\"p\", {\n                                children: [\n                                    \"These data will be saved \",\n                                    /*#__PURE__*/ jsx(\"strong\", {\n                                        children: \"locally in your browser\"\n                                    }),\n                                    \".\"\n                                ]\n                            })\n                        ]\n                    })\n                ]\n            })\n        ]\n    });\n}\nexport { EnvConfig };\n","\n      import API from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./style.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./style.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport { GithubOutlined, QuestionCircleOutlined } from \"@ant-design/icons\";\nimport { Typography } from \"antd\";\nimport { EnvConfig } from \"../env-config/index.mjs\";\nimport \"./style.css\";\nfunction NavActions(param) {\n    let { showEnvConfig = true, showTooltipWhenEmpty = false, showModelName = false, githubUrl = 'https://github.com/web-infra-dev/midscene', helpUrl = 'https://midscenejs.com/quick-experience.html', className = '' } = param;\n    return /*#__PURE__*/ jsxs(\"div\", {\n        className: `nav-actions ${className}`,\n        children: [\n            /*#__PURE__*/ jsx(Typography.Link, {\n                href: githubUrl,\n                target: \"_blank\",\n                children: /*#__PURE__*/ jsx(GithubOutlined, {\n                    className: \"nav-icon\"\n                })\n            }),\n            /*#__PURE__*/ jsx(Typography.Link, {\n                href: helpUrl,\n                target: \"_blank\",\n                children: /*#__PURE__*/ jsx(QuestionCircleOutlined, {\n                    className: \"nav-icon\"\n                })\n            }),\n            showEnvConfig && /*#__PURE__*/ jsx(EnvConfig, {\n                showTooltipWhenEmpty: showTooltipWhenEmpty,\n                showModelName: showModelName\n            })\n        ]\n    });\n}\nexport { NavActions };\n","\n      import API from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { jsx } from \"react/jsx-runtime\";\nimport \"./index.css\";\nconst ShinyText = (param)=>{\n    let { text, disabled = false, speed = 5, className = '' } = param;\n    const style = {\n        '--animation-duration': `${speed}s`\n    };\n    return /*#__PURE__*/ jsx(\"div\", {\n        className: `shiny-text ${disabled ? 'disabled' : ''} ${className}`,\n        style: style,\n        children: text\n    });\n};\nconst shiny_text = ShinyText;\nexport { shiny_text as default };\n","const trackingTip = 'limit popup to current tab';\nconst deepThinkTip = 'deep think';\nconst screenshotIncludedTip = 'include screenshot in request';\nconst domIncludedTip = 'include DOM info in request';\nconst apiMetadata = {\n    aiAction: {\n        group: 'interaction',\n        title: 'Auto Planning: plan the steps and execute'\n    },\n    aiTap: {\n        group: 'interaction',\n        title: 'Click an element'\n    },\n    aiDoubleClick: {\n        group: 'interaction',\n        title: 'Double-click an element'\n    },\n    aiHover: {\n        group: 'interaction',\n        title: 'Hover over an element'\n    },\n    aiInput: {\n        group: 'interaction',\n        title: 'Input text into an element'\n    },\n    aiRightClick: {\n        group: 'interaction',\n        title: 'Right-click an element'\n    },\n    aiKeyboardPress: {\n        group: 'interaction',\n        title: 'Press keyboard keys'\n    },\n    aiScroll: {\n        group: 'interaction',\n        title: 'Scroll the page or element'\n    },\n    aiLocate: {\n        group: 'interaction',\n        title: 'Locate an element on the page'\n    },\n    aiQuery: {\n        group: 'extraction',\n        title: 'Extract data directly from the UI'\n    },\n    aiBoolean: {\n        group: 'extraction',\n        title: 'Get true/false answer'\n    },\n    aiNumber: {\n        group: 'extraction',\n        title: 'Extract numeric value'\n    },\n    aiString: {\n        group: 'extraction',\n        title: 'Extract text value'\n    },\n    aiAsk: {\n        group: 'extraction',\n        title: 'Ask a question about the UI'\n    },\n    aiAssert: {\n        group: 'validation',\n        title: 'Assert a condition is true'\n    },\n    aiWaitFor: {\n        group: 'validation',\n        title: 'Wait for a condition to be met'\n    }\n};\nconst defaultMainButtons = [\n    'aiAction',\n    'aiTap',\n    'aiQuery',\n    'aiAssert'\n];\nconst WELCOME_MESSAGE_TEMPLATE = {\n    type: 'system',\n    content: `\n      Welcome to Midscene.js Playground!\n      \n      This is a panel for experimenting and testing Midscene.js features. You can use natural language instructions to operate the web page, such as clicking buttons, filling in forms, querying information, etc.\n      \n      Please enter your instructions in the input box below to start experiencing.\n    `,\n    loading: false,\n    result: void 0,\n    replayScriptsInfo: null,\n    replayCounter: 0,\n    loadingProgressText: '',\n    verticalMode: false\n};\nconst BLANK_RESULT = {\n    result: void 0,\n    dump: null,\n    reportHTML: null,\n    error: null\n};\nexport { BLANK_RESULT, WELCOME_MESSAGE_TEMPLATE, apiMetadata, deepThinkTip, defaultMainButtons, domIncludedTip, screenshotIncludedTip, trackingTip };\n","import dayjs from \"dayjs\";\nfunction timeStr(timestamp) {\n    return timestamp ? dayjs(timestamp).format('YYYY-MM-DD HH:mm:ss') : '-';\n}\nfunction filterBase64Value(input) {\n    return input.replace(/data:image\\/[^\"]+\"/g, 'data:image...\"');\n}\nconst mousePointer = 'data:image/png;base64,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';\nconst mouseLoading = 'data:image/png;base64,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';\nexport { filterBase64Value, mouseLoading, mousePointer, timeStr };\n","'use client';\nimport { mousePointer } from \"./index.mjs\";\nimport { paramStr, typeStr } from \"@sqai/core/agent\";\nimport { treeToList } from \"@sqai/shared/extractor\";\nconst stillDuration = 900;\nconst actionSpinningPointerDuration = 300;\nconst stillAfterInsightDuration = 300;\nconst locateDuration = 800;\nconst actionDuration = 1000;\nconst clearInsightDuration = 200;\nconst cameraStateForRect = (rect, imageWidth, imageHeight)=>{\n    const canvasRatio = imageWidth / imageHeight;\n    const rectRatio = rect.width / rect.height;\n    let rectWidthOnPage;\n    rectWidthOnPage = rectRatio >= canvasRatio ? rect.width : rect.height / imageHeight * imageWidth;\n    const cameraPaddingRatio = rectWidthOnPage > 400 ? 0.1 : rectWidthOnPage > 50 ? 0.2 : 0.3;\n    const cameraWidth = Math.min(imageWidth, rectWidthOnPage + imageWidth * cameraPaddingRatio * 2);\n    const cameraHeight = imageHeight / imageWidth * cameraWidth;\n    let left = Math.min(rect.left - imageWidth * cameraPaddingRatio, imageWidth - cameraWidth);\n    left = Math.max(left, 0);\n    let top = Math.min(rect.top - imageHeight * cameraPaddingRatio, imageHeight - cameraHeight);\n    top = Math.max(top, 0);\n    return {\n        left: Math.round(left),\n        top: Math.round(top),\n        width: Math.round(cameraWidth)\n    };\n};\nconst mergeTwoCameraState = (cameraState1, cameraState2)=>{\n    const newLeft = Math.min(cameraState1.left, cameraState2.left);\n    const newTop = Math.min(cameraState1.top, cameraState2.top);\n    const newRight = Math.max(cameraState1.left + cameraState1.width, cameraState2.left + cameraState2.width);\n    const newWidth = newRight - newLeft;\n    return {\n        left: newLeft,\n        top: newTop,\n        width: newWidth\n    };\n};\nconst capitalizeFirstLetter = (str)=>{\n    if ('string' != typeof str || 0 === str.length) return str;\n    return str.charAt(0).toUpperCase() + str.slice(1);\n};\nconst allScriptsFromDump = (dump)=>{\n    const dimensionsSet = new Set();\n    let firstWidth;\n    let firstHeight;\n    const sdkVersion = dump.sdkVersion;\n    const modelBriefsSet = new Set();\n    dump.executions.forEach((execution)=>{\n        execution.tasks.forEach((task)=>{\n            var _task_uiContext_size, _task_uiContext;\n            if (null == (_task_uiContext = task.uiContext) ? void 0 : null == (_task_uiContext_size = _task_uiContext.size) ? void 0 : _task_uiContext_size.width) {\n                const w = task.uiContext.size.width;\n                const h = task.uiContext.size.height;\n                if (!firstWidth) {\n                    firstWidth = w;\n                    firstHeight = h;\n                }\n                dimensionsSet.add(`${w}x${h}`);\n            }\n        });\n    });\n    if (!firstWidth || !firstHeight) {\n        console.warn('width or height is missing in dump file');\n        return {\n            scripts: [],\n            sdkVersion,\n            modelBriefs: []\n        };\n    }\n    const allScripts = [];\n    dump.executions.forEach((execution)=>{\n        const scripts = generateAnimationScripts(execution, -1, firstWidth, firstHeight);\n        if (scripts) allScripts.push(...scripts);\n        execution.tasks.forEach((task)=>{\n            if (task.usage) {\n                const { model_name, model_description, intent } = task.usage;\n                if (intent && model_name) modelBriefsSet.add(model_description ? `${capitalizeFirstLetter(intent)}/${model_name}(${model_description})` : model_name);\n            }\n        });\n    });\n    const allScriptsWithoutIntermediateDoneFrame = allScripts.filter((script, index)=>{\n        if (index !== allScripts.length - 1 && 'Done' === script.title) return false;\n        return true;\n    });\n    const modelBriefs = (()=>{\n        var _list_;\n        const list = [\n            ...modelBriefsSet\n        ];\n        if (!list.length) return list;\n        const firstOneInfo = null == (_list_ = list[0]) ? void 0 : _list_.split('/', 2)[1];\n        if (firstOneInfo && list.slice(1).every((item)=>(null == item ? void 0 : item.split('/', 2)[1]) === firstOneInfo)) return [\n            firstOneInfo\n        ];\n        return list;\n    })();\n    return {\n        scripts: allScriptsWithoutIntermediateDoneFrame,\n        width: firstWidth,\n        height: firstHeight,\n        sdkVersion,\n        modelBriefs\n    };\n};\nconst generateAnimationScripts = (execution, task, imageWidth, imageHeight)=>{\n    if (!execution || !execution.tasks.length) return null;\n    if (0 === imageWidth || 0 === imageHeight) return null;\n    let tasksIncluded = [];\n    if (-1 === task) tasksIncluded = execution.tasks;\n    else {\n        const startIndex = execution.tasks.findIndex((t)=>t === task);\n        if (-1 === startIndex) {\n            console.error(\"task not found, cannot generate animation scripts\");\n            return null;\n        }\n        if (startIndex === execution.tasks.length - 1) return null;\n        for(let i = startIndex; i < execution.tasks.length; i++){\n            if (i > startIndex && 'Planning' === execution.tasks[i].type) break;\n            tasksIncluded.push(execution.tasks[i]);\n        }\n    }\n    if (0 === tasksIncluded.length) return null;\n    const fullPageCameraState = cameraStateForRect({\n        left: 0,\n        top: 0,\n        width: imageWidth,\n        height: imageHeight\n    }, imageWidth, imageHeight);\n    const pointerScript = (img, title, subTitle)=>({\n            type: 'pointer',\n            img,\n            duration: 0,\n            title,\n            subTitle\n        });\n    const scripts = [];\n    let insightCameraState;\n    let currentCameraState = fullPageCameraState;\n    let insightOnTop = false;\n    const taskCount = tasksIncluded.length;\n    let initSubTitle = '';\n    let errorStateFlag = false;\n    tasksIncluded.forEach((task, index)=>{\n        if (errorStateFlag) return;\n        if (0 === index) initSubTitle = paramStr(task);\n        if ('Planning' === task.type) {\n            const planningTask = task;\n            if (planningTask.recorder && planningTask.recorder.length > 0) {\n                var _planningTask_recorder_, _planningTask_recorder, _task_uiContext_size, _task_uiContext, _task_uiContext_size1, _task_uiContext1;\n                scripts.push({\n                    type: 'img',\n                    img: null == (_planningTask_recorder = planningTask.recorder) ? void 0 : null == (_planningTask_recorder_ = _planningTask_recorder[0]) ? void 0 : _planningTask_recorder_.screenshot,\n                    camera: 0 === index ? fullPageCameraState : void 0,\n                    duration: stillDuration,\n                    title: typeStr(task),\n                    subTitle: paramStr(task),\n                    imageWidth: (null == (_task_uiContext = task.uiContext) ? void 0 : null == (_task_uiContext_size = _task_uiContext.size) ? void 0 : _task_uiContext_size.width) || imageWidth,\n                    imageHeight: (null == (_task_uiContext1 = task.uiContext) ? void 0 : null == (_task_uiContext_size1 = _task_uiContext1.size) ? void 0 : _task_uiContext_size1.height) || imageHeight\n                });\n            }\n        } else if ('Insight' === task.type && 'Locate' === task.subType) {\n            var _insightTask_output;\n            const insightTask = task;\n            const resultElement = null == (_insightTask_output = insightTask.output) ? void 0 : _insightTask_output.element;\n            const title = typeStr(task);\n            const subTitle = paramStr(task);\n            if (null == resultElement ? void 0 : resultElement.rect) insightCameraState = {\n                ...cameraStateForRect(resultElement.rect, imageWidth, imageHeight),\n                pointerLeft: resultElement.center[0],\n                pointerTop: resultElement.center[1]\n            };\n            const context = insightTask.uiContext;\n            if (null == context ? void 0 : context.screenshotBase64) {\n                var _insightTask_output1, _insightDump_taskInfo, _context_size, _context_size1;\n                const insightDump = insightTask.log;\n                const insightContentLength = context.tree ? treeToList(context.tree).length : 0;\n                if (context.screenshotBase64) {\n                    var _context_size2, _context_size3;\n                    scripts.push({\n                        type: 'img',\n                        img: context.screenshotBase64,\n                        duration: stillAfterInsightDuration,\n                        title,\n                        subTitle,\n                        imageWidth: (null == (_context_size2 = context.size) ? void 0 : _context_size2.width) || imageWidth,\n                        imageHeight: (null == (_context_size3 = context.size) ? void 0 : _context_size3.height) || imageHeight\n                    });\n                }\n                let cameraState;\n                cameraState = currentCameraState === fullPageCameraState ? void 0 : insightCameraState ? mergeTwoCameraState(currentCameraState, insightCameraState) : void 0;\n                scripts.push({\n                    type: 'insight',\n                    img: context.screenshotBase64,\n                    context: context,\n                    camera: cameraState,\n                    highlightElement: (null == (_insightTask_output1 = insightTask.output) ? void 0 : _insightTask_output1.element) || void 0,\n                    searchArea: null == insightDump ? void 0 : null == (_insightDump_taskInfo = insightDump.taskInfo) ? void 0 : _insightDump_taskInfo.searchArea,\n                    duration: insightContentLength > 20 ? locateDuration : 0.5 * locateDuration,\n                    insightCameraDuration: locateDuration,\n                    title,\n                    subTitle,\n                    imageWidth: (null == (_context_size = context.size) ? void 0 : _context_size.width) || imageWidth,\n                    imageHeight: (null == (_context_size1 = context.size) ? void 0 : _context_size1.height) || imageHeight\n                });\n                scripts.push({\n                    type: 'sleep',\n                    duration: stillAfterInsightDuration,\n                    title,\n                    subTitle\n                });\n                insightOnTop = true;\n            }\n        } else if ('Action' === task.type && 'FalsyConditionStatement' !== task.subType) {\n            var _task_recorder_, _task_recorder, _task_uiContext_size2, _task_uiContext2, _task_uiContext_size3, _task_uiContext3, _task_recorder_1, _task_recorder1;\n            const title = typeStr(task);\n            const subTitle = paramStr(task);\n            scripts.push(pointerScript(mousePointer, title, subTitle));\n            currentCameraState = null != insightCameraState ? insightCameraState : fullPageCameraState;\n            scripts.push({\n                type: 'img',\n                img: null == (_task_recorder = task.recorder) ? void 0 : null == (_task_recorder_ = _task_recorder[0]) ? void 0 : _task_recorder_.screenshot,\n                duration: actionDuration,\n                camera: 'Sleep' === task.subType ? fullPageCameraState : insightCameraState,\n                title,\n                subTitle,\n                imageWidth: (null == (_task_uiContext2 = task.uiContext) ? void 0 : null == (_task_uiContext_size2 = _task_uiContext2.size) ? void 0 : _task_uiContext_size2.width) || imageWidth,\n                imageHeight: (null == (_task_uiContext3 = task.uiContext) ? void 0 : null == (_task_uiContext_size3 = _task_uiContext3.size) ? void 0 : _task_uiContext_size3.height) || imageHeight\n            });\n            if (insightOnTop) {\n                scripts.push({\n                    type: 'clear-insight',\n                    duration: clearInsightDuration,\n                    title,\n                    subTitle\n                });\n                insightOnTop = false;\n            }\n            const imgStillDuration = index < taskCount - 1 ? stillDuration : 0;\n            if (null == (_task_recorder1 = task.recorder) ? void 0 : null == (_task_recorder_1 = _task_recorder1[1]) ? void 0 : _task_recorder_1.screenshot) {\n                var _task_recorder_2, _task_recorder2, _task_uiContext_size4, _task_uiContext4, _task_uiContext_size5, _task_uiContext5;\n                scripts.push({\n                    type: 'spinning-pointer',\n                    duration: actionSpinningPointerDuration,\n                    title,\n                    subTitle\n                });\n                scripts.push(pointerScript(mousePointer, title, subTitle));\n                scripts.push({\n                    type: 'img',\n                    img: null == (_task_recorder2 = task.recorder) ? void 0 : null == (_task_recorder_2 = _task_recorder2[1]) ? void 0 : _task_recorder_2.screenshot,\n                    duration: imgStillDuration,\n                    title,\n                    subTitle,\n                    imageWidth: (null == (_task_uiContext4 = task.uiContext) ? void 0 : null == (_task_uiContext_size4 = _task_uiContext4.size) ? void 0 : _task_uiContext_size4.width) || imageWidth,\n                    imageHeight: (null == (_task_uiContext5 = task.uiContext) ? void 0 : null == (_task_uiContext_size5 = _task_uiContext5.size) ? void 0 : _task_uiContext_size5.height) || imageHeight\n                });\n            } else scripts.push({\n                type: 'sleep',\n                duration: imgStillDuration,\n                title,\n                subTitle\n            });\n        } else {\n            var _task_recorder_3, _task_recorder3;\n            const title = typeStr(task);\n            const subTitle = paramStr(task);\n            const screenshot = null == (_task_recorder3 = task.recorder) ? void 0 : null == (_task_recorder_3 = _task_recorder3[task.recorder.length - 1]) ? void 0 : _task_recorder_3.screenshot;\n            if (screenshot) {\n                var _task_uiContext_size6, _task_uiContext6, _task_uiContext_size7, _task_uiContext7;\n                scripts.push({\n                    type: 'img',\n                    img: screenshot,\n                    duration: stillDuration,\n                    camera: fullPageCameraState,\n                    title,\n                    subTitle,\n                    imageWidth: (null == (_task_uiContext6 = task.uiContext) ? void 0 : null == (_task_uiContext_size6 = _task_uiContext6.size) ? void 0 : _task_uiContext_size6.width) || imageWidth,\n                    imageHeight: (null == (_task_uiContext7 = task.uiContext) ? void 0 : null == (_task_uiContext_size7 = _task_uiContext7.size) ? void 0 : _task_uiContext_size7.height) || imageHeight\n                });\n            }\n        }\n        if ('finished' !== task.status) {\n            var _task_uiContext_size8, _task_uiContext8, _task_uiContext_size9, _task_uiContext9;\n            errorStateFlag = true;\n            const errorTitle = typeStr(task);\n            const errorMsg = task.errorMessage || 'unknown error';\n            const errorSubTitle = errorMsg.indexOf('NOT_IMPLEMENTED_AS_DESIGNED') > 0 ? 'Further actions cannot be performed in the current environment' : errorMsg;\n            scripts.push({\n                type: 'img',\n                img: task.recorder && task.recorder.length > 0 ? task.recorder[task.recorder.length - 1].screenshot : '',\n                camera: fullPageCameraState,\n                duration: stillDuration,\n                title: errorTitle,\n                subTitle: errorSubTitle,\n                imageWidth: (null == (_task_uiContext8 = task.uiContext) ? void 0 : null == (_task_uiContext_size8 = _task_uiContext8.size) ? void 0 : _task_uiContext_size8.width) || imageWidth,\n                imageHeight: (null == (_task_uiContext9 = task.uiContext) ? void 0 : null == (_task_uiContext_size9 = _task_uiContext9.size) ? void 0 : _task_uiContext_size9.height) || imageHeight\n            });\n            return;\n        }\n    });\n    if (!errorStateFlag) scripts.push({\n        title: 'Done',\n        subTitle: initSubTitle,\n        type: 'img',\n        duration: stillDuration,\n        camera: fullPageCameraState\n    });\n    return scripts;\n};\nexport { allScriptsFromDump, cameraStateForRect, generateAnimationScripts, mergeTwoCameraState };\n","\n      import API from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n","'use client';\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nimport \"pixi.js/unsafe-eval\";\nimport { Checkbox } from \"antd\";\nimport { Application, Container, Graphics, Rectangle, Sprite, Text, Texture } from \"pixi.js\";\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { colorForName, highlightColorForType } from \"../../utils/color.mjs\";\nimport \"./index.css\";\nimport { treeToList } from \"@sqai/shared/extractor\";\nimport { DropShadowFilter } from \"pixi-filters\";\nimport { useBlackboardPreference } from \"../../store/store.mjs\";\nconst itemFillAlpha = 0.4;\nconst highlightAlpha = 0.4;\nconst pointRadius = 10;\nconst pointMarkForItem = (point, type)=>{\n    const [x, y] = point;\n    const themeColor = highlightColorForType('element');\n    const graphics = new Graphics();\n    graphics.beginFill(themeColor, itemFillAlpha);\n    graphics.drawCircle(x, y, pointRadius);\n    graphics.endFill();\n    return graphics;\n};\nconst rectMarkForItem = (rect, name, type)=>{\n    const { left, top, width, height } = rect;\n    let themeColor;\n    themeColor = 'element' === type ? colorForName(name) : 'searchArea' === type ? highlightColorForType('searchArea') : highlightColorForType('element');\n    const alpha = 'highlight' === type ? highlightAlpha : itemFillAlpha;\n    const graphics = new Graphics();\n    graphics.beginFill(themeColor, alpha);\n    graphics.lineStyle(1, themeColor, 1);\n    graphics.drawRect(left, top, width, height);\n    graphics.endFill();\n    const dropShadowFilter = new DropShadowFilter({\n        blur: 2,\n        quality: 3,\n        alpha: 0.4,\n        offset: {\n            x: 4,\n            y: 4\n        },\n        color: 0x333333\n    });\n    graphics.filters = [\n        dropShadowFilter\n    ];\n    const nameFontSize = 18;\n    if (!name) return [\n        graphics\n    ];\n    const texts = new Text(name, {\n        fontSize: nameFontSize,\n        fill: 0x0\n    });\n    texts.x = left;\n    texts.y = Math.max(top - (nameFontSize + 4), 0);\n    return [\n        graphics,\n        texts\n    ];\n};\nconst Blackboard = (props)=>{\n    const highlightElements = props.highlightElements || [];\n    const highlightIds = highlightElements.map((e)=>e.id);\n    const highlightRect = props.highlightRect;\n    const highlightPoints = props.highlightPoints;\n    const context = props.uiContext;\n    const { size, screenshotBase64 } = context;\n    const screenWidth = size.width;\n    const screenHeight = size.height;\n    const domRef = useRef(null);\n    const app = useMemo(()=>new Application(), []);\n    const [appInitialed, setAppInitialed] = useState(false);\n    const highlightContainer = useMemo(()=>new Container(), []);\n    const elementMarkContainer = useMemo(()=>new Container(), []);\n    const [hoverElement, setHoverElement] = useState(null);\n    const pixiBgRef = useRef(void 0);\n    const { backgroundVisible, setBackgroundVisible, elementsVisible, setElementsVisible } = useBlackboardPreference();\n    useEffect(()=>{\n        Promise.resolve((async ()=>{\n            if (!domRef.current || !screenWidth) return;\n            await app.init({\n                width: screenWidth,\n                height: screenHeight,\n                background: 0xffffff\n            });\n            const canvasEl = domRef.current;\n            domRef.current.appendChild(app.canvas);\n            const { clientWidth } = domRef.current.parentElement;\n            const targetHeight = 0.6 * window.innerHeight;\n            const viewportRatio = clientWidth / targetHeight;\n            if (screenWidth / screenHeight <= viewportRatio) {\n                const ratio = targetHeight / screenHeight;\n                canvasEl.style.width = `${Math.floor(screenWidth * ratio)}px`;\n                canvasEl.style.height = `${Math.floor(screenHeight * ratio)}px`;\n            }\n            app.stage.addChild(highlightContainer);\n            app.stage.addChild(elementMarkContainer);\n            setAppInitialed(true);\n        })());\n        return ()=>{\n            console.log('will destroy');\n            try {\n                app.destroy(true, {\n                    children: true,\n                    texture: true\n                });\n            } catch (e) {\n                console.warn('destroy failed', e);\n            }\n        };\n    }, [\n        app,\n        screenWidth,\n        screenHeight\n    ]);\n    useEffect(()=>{\n        if (!appInitialed) return;\n        app.stage.eventMode = 'static';\n        app.stage.hitArea = new Rectangle(0, 0, screenWidth, screenHeight);\n        const clickHandler = (event)=>{\n            var _props_onCanvasClick;\n            console.log('pixi click', event);\n            const { x, y } = event.data.global;\n            null == (_props_onCanvasClick = props.onCanvasClick) || _props_onCanvasClick.call(props, [\n                Math.round(x),\n                Math.round(y)\n            ]);\n        };\n        app.stage.on('click', clickHandler);\n        return ()=>{\n            var _app_stage;\n            null == app || null == (_app_stage = app.stage) || _app_stage.off('click');\n        };\n    }, [\n        appInitialed,\n        props.onCanvasClick,\n        screenWidth,\n        screenHeight\n    ]);\n    useEffect(()=>{\n        if (!appInitialed) return;\n        const img = new Image();\n        img.onload = ()=>{\n            if (!app.stage) return;\n            const screenshotTexture = Texture.from(img);\n            const backgroundSprite = new Sprite(screenshotTexture);\n            backgroundSprite.x = 0;\n            backgroundSprite.y = 0;\n            backgroundSprite.width = screenWidth;\n            backgroundSprite.height = screenHeight;\n            backgroundSprite.eventMode = 'passive';\n            app.stage.addChildAt(backgroundSprite, 0);\n            pixiBgRef.current = backgroundSprite;\n            backgroundSprite.visible = backgroundVisible;\n        };\n        img.onerror = (e)=>{\n            console.error('load screenshot failed', e);\n        };\n        img.src = screenshotBase64;\n    }, [\n        app.stage,\n        appInitialed,\n        screenWidth,\n        screenHeight\n    ]);\n    const { highlightElementRects } = useMemo(()=>{\n        const highlightElementRects = [];\n        highlightContainer.removeChildren();\n        elementMarkContainer.removeChildren();\n        highlightContainer.eventMode = 'passive';\n        elementMarkContainer.eventMode = 'passive';\n        if (highlightRect) {\n            const [graphics] = rectMarkForItem(highlightRect, 'Search Area', 'searchArea');\n            highlightContainer.addChild(graphics);\n        }\n        if (highlightElements.length) highlightElements.forEach((element)=>{\n            const { rect, content, id } = element;\n            const [graphics] = rectMarkForItem(rect, content, 'highlight');\n            highlightContainer.addChild(graphics);\n        });\n        if (null == highlightPoints ? void 0 : highlightPoints.length) highlightPoints.forEach((point)=>{\n            const graphics = pointMarkForItem(point, 'highlightPoint');\n            highlightContainer.addChild(graphics);\n        });\n        const elements = treeToList(context.tree);\n        elements.forEach((element)=>{\n            const { rect, content, id } = element;\n            const ifHighlight = highlightIds.includes(id) || (null == hoverElement ? void 0 : hoverElement.id) === id;\n            if (ifHighlight) return;\n            const [graphics] = rectMarkForItem(rect, content, 'element');\n            elementMarkContainer.addChild(graphics);\n        });\n        elementMarkContainer.visible = elementsVisible;\n        return {\n            highlightElementRects\n        };\n    }, [\n        app,\n        appInitialed,\n        highlightElements,\n        context.tree,\n        hoverElement,\n        highlightRect,\n        highlightPoints\n    ]);\n    const onSetBackgroundVisible = (e)=>{\n        setBackgroundVisible(e.target.checked);\n        if (pixiBgRef.current) pixiBgRef.current.visible = e.target.checked;\n    };\n    const onSetElementsVisible = (e)=>{\n        setElementsVisible(e.target.checked);\n        elementMarkContainer.visible = e.target.checked;\n    };\n    let bottomTipA = null;\n    if (1 === highlightElementRects.length) bottomTipA = /*#__PURE__*/ jsx(\"div\", {\n        className: \"bottom-tip\",\n        children: /*#__PURE__*/ jsxs(\"div\", {\n            className: \"bottom-tip-item\",\n            children: [\n                \"Element: \",\n                JSON.stringify(highlightElementRects[0])\n            ]\n        })\n    });\n    else if (highlightElementRects.length > 1) bottomTipA = /*#__PURE__*/ jsx(\"div\", {\n        className: \"bottom-tip\",\n        children: /*#__PURE__*/ jsxs(\"div\", {\n            className: \"bottom-tip-item\",\n            children: [\n                \"Element: \",\n                JSON.stringify(highlightElementRects)\n            ]\n        })\n    });\n    return /*#__PURE__*/ jsxs(\"div\", {\n        className: \"blackboard\",\n        children: [\n            /*#__PURE__*/ jsx(\"div\", {\n                className: \"blackboard-main-content\",\n                style: {\n                    width: '100%'\n                },\n                ref: domRef\n            }),\n            /*#__PURE__*/ jsx(\"div\", {\n                className: \"blackboard-filter\",\n                style: {\n                    display: props.hideController ? 'none' : 'block'\n                },\n                children: /*#__PURE__*/ jsxs(\"div\", {\n                    className: \"overlay-control\",\n                    children: [\n                        /*#__PURE__*/ jsx(Checkbox, {\n                            checked: backgroundVisible,\n                            onChange: onSetBackgroundVisible,\n                            children: \"Background\"\n                        }),\n                        /*#__PURE__*/ jsx(Checkbox, {\n                            checked: elementsVisible,\n                            onChange: onSetElementsVisible,\n                            children: \"Elements\"\n                        })\n                    ]\n                })\n            }),\n            /*#__PURE__*/ jsx(\"div\", {\n                className: \"bottom-tip\",\n                style: {\n                    display: props.hideController ? 'none' : 'block'\n                },\n                children: bottomTipA\n            })\n        ]\n    });\n};\nconst blackboard = Blackboard;\nexport { Blackboard, blackboard as default, pointMarkForItem, rectMarkForItem };\n","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport { ArrowRightOutlined, CheckOutlined, ClockCircleOutlined, CloseOutlined, LogoutOutlined, MinusOutlined, WarningOutlined } from \"@ant-design/icons\";\nimport { Alert } from \"antd\";\nimport shiny_text from \"../shiny-text/index.mjs\";\nfunction timeCostStrElement(timeCost) {\n    let str;\n    str = 'number' != typeof timeCost ? '-' : `${(timeCost / 1000).toFixed(2)}s`;\n    return /*#__PURE__*/ jsx(\"span\", {\n        style: {\n            fontVariantNumeric: 'tabular-nums',\n            fontFeatureSettings: 'tnum'\n        },\n        children: str\n    });\n}\nconst iconForStatus = (status)=>{\n    switch(status){\n        case 'finished':\n        case 'passed':\n        case 'success':\n        case 'connected':\n            return /*#__PURE__*/ jsx(\"span\", {\n                style: {\n                    color: '#00AD4B'\n                },\n                children: /*#__PURE__*/ jsx(CheckOutlined, {})\n            });\n        case 'finishedWithWarning':\n            return /*#__PURE__*/ jsx(\"span\", {\n                style: {\n                    color: '#f7bb05'\n                },\n                children: /*#__PURE__*/ jsx(WarningOutlined, {})\n            });\n        case 'failed':\n        case 'closed':\n        case 'timedOut':\n        case 'interrupted':\n            return /*#__PURE__*/ jsx(\"span\", {\n                style: {\n                    color: '#FF0A0A'\n                },\n                children: /*#__PURE__*/ jsx(CloseOutlined, {})\n            });\n        case 'pending':\n            return /*#__PURE__*/ jsx(ClockCircleOutlined, {});\n        case 'cancelled':\n        case 'skipped':\n            return /*#__PURE__*/ jsx(LogoutOutlined, {});\n        case 'running':\n            return /*#__PURE__*/ jsx(ArrowRightOutlined, {});\n        default:\n            return /*#__PURE__*/ jsx(MinusOutlined, {});\n    }\n};\nconst errorMessageServerNotReady = /*#__PURE__*/ jsxs(\"span\", {\n    children: [\n        \"Don't worry, just one more step to launch the playground server.\",\n        /*#__PURE__*/ jsx(\"br\", {}),\n        \"Please run one of the commands under the midscene project directory:\",\n        /*#__PURE__*/ jsx(\"br\", {}),\n        \"a. \",\n        /*#__PURE__*/ jsx(\"strong\", {\n            children: \"npx midscene-playground\"\n        }),\n        /*#__PURE__*/ jsx(\"br\", {}),\n        \"b. \",\n        /*#__PURE__*/ jsx(\"strong\", {\n            children: \"npx --yes @sqai/web\"\n        })\n    ]\n});\nconst serverLaunchTip = function() {\n    let notReadyMessage = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : errorMessageServerNotReady;\n    return /*#__PURE__*/ jsx(\"div\", {\n        className: \"server-tip\",\n        children: /*#__PURE__*/ jsx(Alert, {\n            message: \"Playground Server Not Ready\",\n            description: notReadyMessage,\n            type: \"warning\"\n        })\n    });\n};\nconst emptyResultTip = /*#__PURE__*/ jsx(\"div\", {\n    className: \"result-empty-tip\",\n    style: {\n        textAlign: 'center'\n    },\n    children: /*#__PURE__*/ jsx(shiny_text, {\n        disabled: true,\n        text: \"The result will be shown here\"\n    })\n});\nexport { emptyResultTip, errorMessageServerNotReady, iconForStatus, serverLaunchTip, timeCostStrElement };\n","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport { Button } from \"antd\";\nimport blackboard from \"../blackboard/index.mjs\";\nimport { iconForStatus } from \"../misc/index.mjs\";\nimport playground_demo_ui_context from \"../playground/playground-demo-ui-context.json\";\nconst ContextPreview = (param)=>{\n    let { uiContextPreview, setUiContextPreview, showContextPreview } = param;\n    if (!showContextPreview) return null;\n    return /*#__PURE__*/ jsxs(\"div\", {\n        className: \"form-part context-panel\",\n        children: [\n            /*#__PURE__*/ jsx(\"h3\", {\n                children: \"UI Context\"\n            }),\n            uiContextPreview ? /*#__PURE__*/ jsx(blackboard, {\n                uiContext: uiContextPreview,\n                hideController: true\n            }) : /*#__PURE__*/ jsxs(\"div\", {\n                children: [\n                    iconForStatus('failed'),\n                    \" No UI context\",\n                    /*#__PURE__*/ jsx(Button, {\n                        type: \"link\",\n                        onClick: (e)=>{\n                            e.preventDefault();\n                            setUiContextPreview(playground_demo_ui_context);\n                        },\n                        children: \"Load Demo\"\n                    }),\n                    /*#__PURE__*/ jsx(\"div\", {\n                        children: \"To load the UI context, you can either use the demo data above, or click the 'Send to Playground' in the report page.\"\n                    })\n                ]\n            })\n        ]\n    });\n};\nexport { ContextPreview };\n","\n      import API from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { jsx } from \"react/jsx-runtime\";\nimport \"react\";\nconst SvgGlobalPerspective = (props)=>/*#__PURE__*/ jsx(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: 16,\n        height: 16,\n        fill: \"none\",\n        viewBox: \"0 0 16 16\",\n        ...props,\n        children: /*#__PURE__*/ jsx(\"path\", {\n            fill: \"#333\",\n            d: \"M1.333 13v-2.5a.667.667 0 0 1 1.334 0V13c0 .184.149.333.333.333h2.5a.667.667 0 0 1 0 1.334H3c-.92 0-1.667-.746-1.667-1.667m12 0v-2.5a.667.667 0 0 1 1.334 0V13c0 .92-.746 1.667-1.667 1.667h-2.5a.667.667 0 0 1 0-1.334H13a.333.333 0 0 0 .333-.333m-12-7.5V3c0-.92.747-1.667 1.667-1.667h2.5a.667.667 0 0 1 0 1.334H3A.333.333 0 0 0 2.667 3v2.5a.667.667 0 0 1-1.334 0m12 0V3A.333.333 0 0 0 13 2.667h-2.5a.667.667 0 0 1 0-1.334H13c.92 0 1.667.747 1.667 1.667v2.5a.667.667 0 0 1-1.334 0M5.667 10.333h4.666V5.667H5.667zm6 .167c0 .644-.523 1.167-1.167 1.167h-5A1.167 1.167 0 0 1 4.333 10.5v-5c0-.644.523-1.167 1.167-1.167h5c.644 0 1.167.523 1.167 1.167z\"\n        })\n    });\nconst global_perspective = SvgGlobalPerspective;\nexport { global_perspective as default };\n","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport \"react\";\nconst SvgPlayerSetting = (props)=>/*#__PURE__*/ jsxs(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: 16,\n        height: 16,\n        fill: \"none\",\n        viewBox: \"0 0 16 16\",\n        ...props,\n        children: [\n            /*#__PURE__*/ jsx(\"path\", {\n                stroke: \"#333\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 1.333,\n                d: \"M11.333 13.667 14.667 8l-3.334-5.667H4.667L1.333 8l3.334 5.667z\"\n            }),\n            /*#__PURE__*/ jsx(\"path\", {\n                stroke: \"#333\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 1.333,\n                d: \"M8 9.667a1.667 1.667 0 1 0 0-3.334 1.667 1.667 0 0 0 0 3.334Z\"\n            })\n        ]\n    });\nconst player_setting = SvgPlayerSetting;\nexport { player_setting as default };\n","import { jsx } from \"react/jsx-runtime\";\nimport \"react\";\nconst SvgShowMarker = (props)=>/*#__PURE__*/ jsx(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: 16,\n        height: 16,\n        fill: \"none\",\n        viewBox: \"0 0 16 16\",\n        ...props,\n        children: /*#__PURE__*/ jsx(\"path\", {\n            fill: \"#333\",\n            d: \"M13 1.835a2.165 2.165 0 0 1 .665 4.225v3.88a2.166 2.166 0 1 1-2.725 2.725H5.06a2.165 2.165 0 1 1-2.725-2.726V6.06A2.165 2.165 0 1 1 5.06 3.336h5.88c.281-.87 1.097-1.5 2.06-1.5m-10 9.33a.835.835 0 1 0 0 1.67.835.835 0 0 0 0-1.67m10 0a.835.835 0 1 0 0 1.67.835.835 0 0 0 0-1.67m-7.94-6.5A2.17 2.17 0 0 1 3.665 6.06v3.88c.66.213 1.181.734 1.395 1.395h5.88a2.17 2.17 0 0 1 1.395-1.396V6.06a2.17 2.17 0 0 1-1.395-1.394zM3 3.165a.835.835 0 1 0 0 1.67.835.835 0 0 0 0-1.67m10 0a.835.835 0 1 0 0 1.67.835.835 0 0 0 0-1.67\"\n        })\n    });\nconst show_marker = SvgShowMarker;\nexport { show_marker as default };\n","import \"pixi.js/unsafe-eval\";\nimport { Assets } from \"pixi.js\";\nconst globalTextureMap = new Map();\nconst loadTexture = async (img)=>{\n    if (globalTextureMap.has(img)) return;\n    return Assets.load(img).then((texture)=>{\n        globalTextureMap.set(img, texture);\n    });\n};\nconst getTextureFromCache = (name)=>globalTextureMap.get(name);\nconst getTexture = async (name)=>{\n    if (globalTextureMap.has(name)) return globalTextureMap.get(name);\n    await loadTexture(name);\n    return globalTextureMap.get(name);\n};\nexport { getTexture, getTextureFromCache, loadTexture };\n","'use client';\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nimport \"pixi.js/unsafe-eval\";\nimport { Application, Container, Sprite } from \"pixi.js\";\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport \"./index.css\";\nimport { mouseLoading, mousePointer } from \"../../utils/index.mjs\";\nimport { CaretRightOutlined, DownloadOutlined, ExportOutlined, LoadingOutlined } from \"@ant-design/icons\";\nimport { treeToList } from \"@sqai/shared/extractor\";\nimport { Dropdown, Spin, Switch, Tooltip } from \"antd\";\nimport global_perspective from \"../../icons/global-perspective.mjs\";\nimport player_setting from \"../../icons/player-setting.mjs\";\nimport show_marker from \"../../icons/show-marker.mjs\";\nimport { useBlackboardPreference } from \"../../store/store.mjs\";\nimport { getTextureFromCache, loadTexture } from \"../../utils/pixi-loader.mjs\";\nimport { rectMarkForItem } from \"../blackboard/index.mjs\";\nfunction _define_property(obj, key, value) {\n    if (key in obj) Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n    });\n    else obj[key] = value;\n    return obj;\n}\nconst canvasPaddingLeft = 0;\nconst canvasPaddingTop = 0;\nconst cubicBezier = (t, p0, p1, p2, p3)=>{\n    const t2 = 1 - t;\n    return p0 * t2 * t2 * t2 + 3 * p1 * t * t2 * t2 + 3 * p2 * t * t * t2 + p3 * t * t * t;\n};\nconst cubicImage = (t)=>linear(t);\nconst cubicInsightElement = (t)=>cubicBezier(t, 0, 0.5, 0.5, 1);\nconst cubicMouse = (t)=>linear(t);\nconst linear = (t)=>t;\nconst sleep = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));\nconst ERROR_FRAME_CANCEL = 'frame cancel (this is an error on purpose)';\nconst frameKit = ()=>{\n    let cancelFlag = false;\n    return {\n        frame: (callback)=>{\n            if (cancelFlag) throw new Error(ERROR_FRAME_CANCEL);\n            requestAnimationFrame(()=>{\n                if (cancelFlag) throw new Error(ERROR_FRAME_CANCEL);\n                callback(performance.now());\n            });\n        },\n        timeout: (callback, ms)=>{\n            if (cancelFlag) throw new Error(ERROR_FRAME_CANCEL);\n            setTimeout(()=>{\n                if (cancelFlag) throw new Error(ERROR_FRAME_CANCEL);\n                callback();\n            }, ms);\n        },\n        cancel: ()=>{\n            cancelFlag = true;\n        }\n    };\n};\nconst singleElementFadeInDuration = 80;\nconst LAYER_ORDER_IMG = 0;\nconst LAYER_ORDER_INSIGHT = 1;\nconst LAYER_ORDER_POINTER = 2;\nconst LAYER_ORDER_SPINNING_POINTER = 3;\nconst downloadReport = (content)=>{\n    const blob = new Blob([\n        content\n    ], {\n        type: 'text/html'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'midscene_report.html';\n    a.click();\n};\nclass RecordingSession {\n    start() {\n        const stream = this.canvas.captureStream(60);\n        const mediaRecorder = new MediaRecorder(stream, {\n            mimeType: 'video/webm'\n        });\n        mediaRecorder.ondataavailable = (event)=>{\n            if (event.data.size > 0) this.chunks.push(event.data);\n        };\n        this.mediaRecorder = mediaRecorder;\n        this.recording = true;\n        return this.mediaRecorder.start();\n    }\n    stop() {\n        var _this_mediaRecorder;\n        if (!this.recording || !this.mediaRecorder) return void console.warn('not recording');\n        this.mediaRecorder.onstop = ()=>{\n            const blob = new Blob(this.chunks, {\n                type: 'video/webm'\n            });\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = 'midscene_replay.webm';\n            a.click();\n            URL.revokeObjectURL(url);\n        };\n        null == (_this_mediaRecorder = this.mediaRecorder) || _this_mediaRecorder.stop();\n        this.recording = false;\n        this.mediaRecorder = null;\n    }\n    constructor(canvas){\n        _define_property(this, \"canvas\", void 0);\n        _define_property(this, \"mediaRecorder\", null);\n        _define_property(this, \"chunks\", void 0);\n        _define_property(this, \"recording\", false);\n        this.canvas = canvas;\n        this.chunks = [];\n    }\n}\nfunction Player(props) {\n    var _scripts_;\n    const [titleText, setTitleText] = useState('');\n    const [subTitleText, setSubTitleText] = useState('');\n    const { autoZoom, setAutoZoom, elementsVisible, setElementsVisible } = useBlackboardPreference();\n    useEffect(()=>{\n        if ((null == props ? void 0 : props.autoZoom) !== void 0) setAutoZoom(props.autoZoom);\n    }, [\n        null == props ? void 0 : props.autoZoom,\n        setAutoZoom\n    ]);\n    useEffect(()=>{\n        if ((null == props ? void 0 : props.elementsVisible) !== void 0) setElementsVisible(props.elementsVisible);\n    }, [\n        null == props ? void 0 : props.elementsVisible,\n        setElementsVisible\n    ]);\n    const scripts = null == props ? void 0 : props.replayScripts;\n    const imageWidth = (null == props ? void 0 : props.imageWidth) || 1920;\n    const imageHeight = (null == props ? void 0 : props.imageHeight) || 1080;\n    const fitMode = (null == props ? void 0 : props.fitMode) || 'height';\n    const currentImg = useRef((null == scripts ? void 0 : null == (_scripts_ = scripts[0]) ? void 0 : _scripts_.img) || null);\n    const divContainerRef = useRef(null);\n    const app = useMemo(()=>new Application(), []);\n    const pointerSprite = useRef(null);\n    const spinningPointerSprite = useRef(null);\n    const [replayMark, setReplayMark] = useState(0);\n    const triggerReplay = ()=>{\n        setReplayMark(Date.now());\n    };\n    const windowContentContainer = useMemo(()=>{\n        const container = new Container();\n        return container;\n    }, []);\n    const insightMarkContainer = useMemo(()=>{\n        const container = new Container();\n        container.zIndex = LAYER_ORDER_INSIGHT;\n        return container;\n    }, []);\n    useEffect(()=>{\n        insightMarkContainer.visible = elementsVisible;\n    }, [\n        elementsVisible,\n        insightMarkContainer\n    ]);\n    const basicCameraState = {\n        left: 0,\n        top: 0,\n        width: imageWidth,\n        pointerLeft: Math.round(imageWidth / 2),\n        pointerTop: Math.round(imageHeight / 2)\n    };\n    const [animationProgress, setAnimationProgress] = useState(-1);\n    const cancelFlag = useRef(false);\n    useEffect(()=>{\n        cancelFlag.current = false;\n        return ()=>{\n            cancelFlag.current = true;\n        };\n    }, []);\n    const cameraState = useRef({\n        ...basicCameraState\n    });\n    const resizeCanvasIfNeeded = async (newWidth, newHeight)=>{\n        if (app.screen.width !== newWidth || app.screen.height !== newHeight) {\n            app.renderer.resize(newWidth, newHeight);\n            if (divContainerRef.current) {\n                const aspectRatio = newWidth / newHeight;\n                divContainerRef.current.style.setProperty('--canvas-aspect-ratio', aspectRatio.toString());\n            }\n            const newBasicCameraState = {\n                left: 0,\n                top: 0,\n                width: newWidth,\n                pointerLeft: Math.round(newWidth / 2),\n                pointerTop: Math.round(newHeight / 2)\n            };\n            cameraState.current = newBasicCameraState;\n        }\n    };\n    const repaintImage = async (scriptWidth, scriptHeight)=>{\n        const imgToUpdate = currentImg.current;\n        if (!imgToUpdate) return void console.warn('no image to update');\n        const targetWidth = scriptWidth || imageWidth;\n        const targetHeight = scriptHeight || imageHeight;\n        await resizeCanvasIfNeeded(targetWidth, targetHeight);\n        if (!getTextureFromCache(imgToUpdate)) {\n            console.warn('image not loaded', imgToUpdate);\n            await loadTexture(imgToUpdate);\n        }\n        const texture = getTextureFromCache(imgToUpdate);\n        if (!texture) throw new Error('texture not found');\n        const sprite = Sprite.from(texture);\n        if (!sprite) throw new Error('sprite not found');\n        const mainImgLabel = 'main-img';\n        const child = windowContentContainer.getChildByLabel(mainImgLabel);\n        if (child) windowContentContainer.removeChild(child);\n        sprite.label = mainImgLabel;\n        sprite.zIndex = LAYER_ORDER_IMG;\n        sprite.width = targetWidth;\n        sprite.height = targetHeight;\n        windowContentContainer.addChild(sprite);\n    };\n    const spinningPointer = (frame)=>{\n        var _pointerSprite_current, _pointerSprite_current1;\n        if (!spinningPointerSprite.current) {\n            spinningPointerSprite.current = Sprite.from(mouseLoading);\n            spinningPointerSprite.current.zIndex = LAYER_ORDER_SPINNING_POINTER;\n            spinningPointerSprite.current.anchor.set(0.5, 0.5);\n            spinningPointerSprite.current.scale.set(0.5);\n            spinningPointerSprite.current.label = 'spinning-pointer';\n        }\n        spinningPointerSprite.current.x = (null == (_pointerSprite_current = pointerSprite.current) ? void 0 : _pointerSprite_current.x) || 0;\n        spinningPointerSprite.current.y = (null == (_pointerSprite_current1 = pointerSprite.current) ? void 0 : _pointerSprite_current1.y) || 0;\n        windowContentContainer.addChild(spinningPointerSprite.current);\n        let startTime;\n        let isCancelled = false;\n        const animate = (currentTime)=>{\n            if (isCancelled) return;\n            if (!startTime) startTime = currentTime;\n            const elapsedTime = currentTime - startTime;\n            const progress = (Math.sin(elapsedTime / 500 - Math.PI / 2) + 1) / 2;\n            const rotation = progress * Math.PI * 2;\n            if (spinningPointerSprite.current) spinningPointerSprite.current.rotation = rotation;\n            frame(animate);\n        };\n        frame(animate);\n        const stopFn = ()=>{\n            if (spinningPointerSprite.current) windowContentContainer.removeChild(spinningPointerSprite.current);\n            isCancelled = true;\n        };\n        return stopFn;\n    };\n    const updatePointer = async (img, x, y)=>{\n        var _pointerSprite_current, _pointerSprite_current1;\n        if (!getTextureFromCache(img)) {\n            console.warn('image not loaded', img);\n            await loadTexture(img);\n        }\n        const texture = getTextureFromCache(img);\n        if (!texture) throw new Error('texture not found');\n        const sprite = Sprite.from(texture);\n        let targetX = null == (_pointerSprite_current = pointerSprite.current) ? void 0 : _pointerSprite_current.x;\n        let targetY = null == (_pointerSprite_current1 = pointerSprite.current) ? void 0 : _pointerSprite_current1.y;\n        if ('number' == typeof x) targetX = x;\n        if ('number' == typeof y) targetY = y;\n        if (void 0 === targetX || void 0 === targetY) return void console.warn('invalid pointer position', x, y);\n        if (pointerSprite.current) {\n            const pointer = windowContentContainer.getChildByLabel('pointer');\n            if (pointer) windowContentContainer.removeChild(pointer);\n        }\n        pointerSprite.current = sprite;\n        pointerSprite.current.x = targetX;\n        pointerSprite.current.y = targetY;\n        pointerSprite.current.label = 'pointer';\n        pointerSprite.current.zIndex = LAYER_ORDER_POINTER;\n        windowContentContainer.addChild(pointerSprite.current);\n    };\n    const updateCamera = (state, currentWidth)=>{\n        cameraState.current = state;\n        const effectiveWidth = currentWidth || app.screen.width || imageWidth;\n        const newScale = autoZoom ? Math.max(1, effectiveWidth / state.width) : 1;\n        windowContentContainer.scale.set(newScale);\n        windowContentContainer.x = autoZoom ? Math.round(canvasPaddingLeft - state.left * newScale) : canvasPaddingLeft;\n        windowContentContainer.y = autoZoom ? Math.round(canvasPaddingTop - state.top * newScale) : canvasPaddingTop;\n        const pointer = windowContentContainer.getChildByLabel('pointer');\n        if (pointer) {\n            pointer.scale.set(1 / newScale);\n            if ('number' == typeof state.pointerLeft && 'number' == typeof state.pointerTop) {\n                pointer.x = state.pointerLeft;\n                pointer.y = state.pointerTop;\n            }\n        }\n    };\n    const cameraAnimation = async (targetState, duration, frame)=>{\n        const currentCanvasWidth = app.screen.width || imageWidth;\n        const currentCanvasHeight = app.screen.height || imageHeight;\n        if (!autoZoom) {\n            const currentState = {\n                ...cameraState.current\n            };\n            const startPointerLeft = currentState.pointerLeft;\n            const startPointerTop = currentState.pointerTop;\n            const startTime = performance.now();\n            const shouldMovePointer = 'number' == typeof targetState.pointerLeft && 'number' == typeof targetState.pointerTop && (targetState.pointerLeft !== startPointerLeft || targetState.pointerTop !== startPointerTop);\n            if (!shouldMovePointer) return;\n            await new Promise((resolve)=>{\n                const animate = (currentTime)=>{\n                    const elapsedTime = currentTime - startTime;\n                    const rawProgress = Math.min(elapsedTime / duration, 1);\n                    const progress = cubicMouse(rawProgress);\n                    const nextState = {\n                        ...currentState,\n                        pointerLeft: startPointerLeft + (targetState.pointerLeft - startPointerLeft) * progress,\n                        pointerTop: startPointerTop + (targetState.pointerTop - startPointerTop) * progress\n                    };\n                    updateCamera(nextState, currentCanvasWidth);\n                    if (elapsedTime < duration) frame(animate);\n                    else resolve();\n                };\n                frame(animate);\n            });\n            return;\n        }\n        const currentState = {\n            ...cameraState.current\n        };\n        const startLeft = currentState.left;\n        const startTop = currentState.top;\n        const startPointerLeft = currentState.pointerLeft;\n        const startPointerTop = currentState.pointerTop;\n        const startScale = currentState.width / currentCanvasWidth;\n        const startTime = performance.now();\n        const shouldMovePointer = 'number' == typeof targetState.pointerLeft && 'number' == typeof targetState.pointerTop && (targetState.pointerLeft !== startPointerLeft || targetState.pointerTop !== startPointerTop);\n        const pointerMoveDuration = shouldMovePointer ? 0.375 * duration : 0;\n        const cameraMoveStart = pointerMoveDuration;\n        const cameraMoveDuration = duration - pointerMoveDuration;\n        await new Promise((resolve)=>{\n            const animate = (currentTime)=>{\n                const nextState = {\n                    ...cameraState.current\n                };\n                const elapsedTime = currentTime - startTime;\n                if (shouldMovePointer) if (elapsedTime <= pointerMoveDuration) {\n                    const rawMouseProgress = Math.min(elapsedTime / pointerMoveDuration, 1);\n                    const mouseProgress = cubicMouse(rawMouseProgress);\n                    nextState.pointerLeft = startPointerLeft + (targetState.pointerLeft - startPointerLeft) * mouseProgress;\n                    nextState.pointerTop = startPointerTop + (targetState.pointerTop - startPointerTop) * mouseProgress;\n                } else {\n                    nextState.pointerLeft = targetState.pointerLeft;\n                    nextState.pointerTop = targetState.pointerTop;\n                }\n                if (elapsedTime > cameraMoveStart) {\n                    const cameraElapsedTime = elapsedTime - cameraMoveStart;\n                    const rawCameraProgress = Math.min(cameraElapsedTime / cameraMoveDuration, 1);\n                    const cameraProgress = cubicImage(rawCameraProgress);\n                    const targetScale = targetState.width / currentCanvasWidth;\n                    const progressScale = startScale + (targetScale - startScale) * cameraProgress;\n                    const progressWidth = currentCanvasWidth * progressScale;\n                    const progressHeight = currentCanvasHeight * progressScale;\n                    nextState.width = progressWidth;\n                    const progressLeft = startLeft + (targetState.left - startLeft) * cameraProgress;\n                    const progressTop = startTop + (targetState.top - startTop) * cameraProgress;\n                    const horizontalExceed = progressLeft + progressWidth - currentCanvasWidth;\n                    const verticalExceed = progressTop + progressHeight - currentCanvasHeight;\n                    nextState.left = horizontalExceed > 0 ? progressLeft + horizontalExceed : progressLeft;\n                    nextState.top = verticalExceed > 0 ? progressTop + verticalExceed : progressTop;\n                }\n                updateCamera(nextState, currentCanvasWidth);\n                if (elapsedTime < duration) frame(animate);\n                else resolve();\n            };\n            frame(animate);\n        });\n    };\n    const fadeInGraphics = function(graphics, duration, frame) {\n        let targetAlpha = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1;\n        return new Promise((resolve)=>{\n            const startTime = performance.now();\n            const animate = (currentTime)=>{\n                const elapsedTime = currentTime - startTime;\n                const progress = Math.min(elapsedTime / duration, 1);\n                graphics.alpha = 0 === targetAlpha ? 1 - linear(progress) : linear(progress);\n                if (elapsedTime < duration) frame(animate);\n                else resolve();\n            };\n            frame(animate);\n        });\n    };\n    const fadeOutItem = async (graphics, duration, frame)=>fadeInGraphics(graphics, duration, frame, 0);\n    const insightElementsAnimation = async (elements, highlightElements, searchArea, duration, frame)=>{\n        insightMarkContainer.removeChildren();\n        const elementsToAdd = [\n            ...elements\n        ];\n        const totalLength = elementsToAdd.length;\n        let childrenCount = 0;\n        await new Promise((resolve)=>{\n            const startTime = performance.now();\n            const animate = (currentTime)=>{\n                const elapsedTime = currentTime - startTime;\n                const progress = cubicInsightElement(Math.min(elapsedTime / duration, 1));\n                const elementsToAddNow = Math.floor(progress * totalLength);\n                while(childrenCount < elementsToAddNow){\n                    const randomIndex = Math.floor(Math.random() * elementsToAdd.length);\n                    const element = elementsToAdd.splice(randomIndex, 1)[0];\n                    if (element) {\n                        const [insightMarkGraphic] = rectMarkForItem(element.rect, element.content, 'element');\n                        insightMarkGraphic.alpha = 0;\n                        insightMarkContainer.addChild(insightMarkGraphic);\n                        childrenCount++;\n                        fadeInGraphics(insightMarkGraphic, singleElementFadeInDuration, frame);\n                    }\n                }\n                if (elapsedTime < duration) frame(animate);\n                else {\n                    while(elementsToAdd.length > 0){\n                        const randomIndex = Math.floor(Math.random() * elementsToAdd.length);\n                        const element = elementsToAdd.splice(randomIndex, 1)[0];\n                        const [insightMarkGraphic] = rectMarkForItem(element.rect, element.content, 'element');\n                        insightMarkGraphic.alpha = 1;\n                        insightMarkContainer.addChild(insightMarkGraphic);\n                    }\n                    if (searchArea) {\n                        const [searchAreaGraphic] = rectMarkForItem(searchArea, 'Search Area', 'searchArea');\n                        searchAreaGraphic.alpha = 1;\n                        insightMarkContainer.addChild(searchAreaGraphic);\n                    }\n                    highlightElements.map((element)=>{\n                        const [insightMarkGraphic] = rectMarkForItem(element.rect, element.content || '', 'highlight');\n                        insightMarkGraphic.alpha = 1;\n                        insightMarkContainer.addChild(insightMarkGraphic);\n                    });\n                    resolve();\n                }\n            };\n            frame(animate);\n        });\n    };\n    const init = async ()=>{\n        if (!divContainerRef.current || !scripts) return;\n        await app.init({\n            width: imageWidth,\n            height: imageHeight,\n            background: 0xf4f4f4,\n            autoDensity: true,\n            antialias: true\n        });\n        if (!divContainerRef.current) return;\n        divContainerRef.current.appendChild(app.canvas);\n        windowContentContainer.x = 0;\n        windowContentContainer.y = 0;\n        app.stage.addChild(windowContentContainer);\n        insightMarkContainer.x = 0;\n        insightMarkContainer.y = 0;\n        windowContentContainer.addChild(insightMarkContainer);\n    };\n    const [isRecording, setIsRecording] = useState(false);\n    const recorderSessionRef = useRef(null);\n    const handleExport = ()=>{\n        if (recorderSessionRef.current) return void console.warn('recorderSession exists');\n        if (!app.canvas) return void console.warn('canvas is not initialized');\n        recorderSessionRef.current = new RecordingSession(app.canvas);\n        setIsRecording(true);\n        triggerReplay();\n    };\n    const play = ()=>{\n        let cancelFn;\n        Promise.resolve((async ()=>{\n            if (!app) throw new Error('app is not initialized');\n            if (!scripts) throw new Error(\"scripts is required\");\n            const { frame, cancel, timeout } = frameKit();\n            cancelFn = cancel;\n            const allImages = scripts.filter((item)=>!!item.img).map((item)=>item.img);\n            await Promise.all([\n                ...allImages,\n                mouseLoading,\n                mousePointer\n            ].map(loadTexture));\n            insightMarkContainer.removeChildren();\n            await updatePointer(mousePointer, imageWidth / 2, imageHeight / 2);\n            await repaintImage();\n            await updateCamera({\n                ...basicCameraState\n            });\n            const totalDuration = scripts.reduce((acc, item)=>acc + item.duration + (item.camera && item.insightCameraDuration ? item.insightCameraDuration : 0), 0);\n            const progressUpdateInterval = 200;\n            const startTime = performance.now();\n            setAnimationProgress(0);\n            const updateProgress = ()=>{\n                const progress = Math.min((performance.now() - startTime) / totalDuration, 1);\n                setAnimationProgress(progress);\n                if (progress < 1) return timeout(updateProgress, progressUpdateInterval);\n            };\n            frame(updateProgress);\n            if (recorderSessionRef.current) recorderSessionRef.current.start();\n            for(const index in scripts){\n                const item = scripts[index];\n                setTitleText(item.title || '');\n                setSubTitleText(item.subTitle || '');\n                if ('sleep' === item.type) await sleep(item.duration);\n                else if ('insight' === item.type) {\n                    var _item_context;\n                    if (!item.img) throw new Error('img is required');\n                    currentImg.current = item.img;\n                    await repaintImage(item.imageWidth, item.imageHeight);\n                    const elements = (null == (_item_context = item.context) ? void 0 : _item_context.tree) ? treeToList(item.context.tree) : [];\n                    const highlightElements = item.highlightElement ? [\n                        item.highlightElement\n                    ] : [];\n                    await insightElementsAnimation(elements, highlightElements, item.searchArea, item.duration, frame);\n                    if (item.camera) {\n                        if (!item.insightCameraDuration) throw new Error('insightCameraDuration is required');\n                        await cameraAnimation(item.camera, item.insightCameraDuration, frame);\n                    }\n                } else if ('clear-insight' === item.type) {\n                    await fadeOutItem(insightMarkContainer, item.duration, frame);\n                    insightMarkContainer.removeChildren();\n                    insightMarkContainer.alpha = 1;\n                } else if ('img' === item.type) {\n                    if (item.img && item.img !== currentImg.current) {\n                        currentImg.current = item.img;\n                        await repaintImage(item.imageWidth, item.imageHeight);\n                    }\n                    if (item.camera) await cameraAnimation(item.camera, item.duration, frame);\n                    else await sleep(item.duration);\n                } else if ('pointer' === item.type) {\n                    if (!item.img) throw new Error('pointer img is required');\n                    await updatePointer(item.img);\n                } else if ('spinning-pointer' === item.type) {\n                    const stop = spinningPointer(frame);\n                    await sleep(item.duration);\n                    stop();\n                }\n            }\n            if (recorderSessionRef.current) {\n                await sleep(1200);\n                recorderSessionRef.current.stop();\n                recorderSessionRef.current = null;\n                setIsRecording(false);\n            }\n        })().catch((e)=>{\n            console.error('player error', e);\n        }));\n        return ()=>{\n            null == cancelFn || cancelFn();\n        };\n    };\n    useEffect(()=>{\n        Promise.resolve((async ()=>{\n            await init();\n            if (divContainerRef.current && imageWidth && imageHeight) {\n                const aspectRatio = imageWidth / imageHeight;\n                divContainerRef.current.style.setProperty('--canvas-aspect-ratio', aspectRatio.toString());\n                divContainerRef.current.setAttribute('data-fit-mode', fitMode);\n                const playerContainer = divContainerRef.current.closest('.player-container');\n                if (playerContainer) playerContainer.setAttribute('data-fit-mode', fitMode);\n            }\n            triggerReplay();\n        })());\n        return ()=>{\n            try {\n                app.destroy(true, {\n                    children: true,\n                    texture: true\n                });\n            } catch (e) {\n                console.warn('destroy failed', e);\n            }\n        };\n    }, [\n        imageWidth,\n        imageHeight,\n        fitMode\n    ]);\n    useEffect(()=>{\n        if (replayMark) return play();\n    }, [\n        replayMark\n    ]);\n    const [mouseOverStatusIcon, setMouseOverStatusIcon] = useState(false);\n    const [mouseOverSettingsIcon, setMouseOverSettingsIcon] = useState(false);\n    const progressString = Math.round(100 * animationProgress);\n    const transitionStyle = 0 === animationProgress ? 'none' : '0.3s';\n    const canReplayNow = 1 === animationProgress;\n    useEffect(()=>{\n        if (canReplayNow) {\n            const listener = (event)=>{\n                if (' ' === event.key) triggerReplay();\n            };\n            window.addEventListener('keydown', listener);\n            return ()=>{\n                window.removeEventListener('keydown', listener);\n            };\n        }\n    }, [\n        canReplayNow\n    ]);\n    let statusIconElement;\n    let statusOnClick = ()=>{};\n    if (animationProgress < 1) statusIconElement = /*#__PURE__*/ jsx(Spin, {\n        indicator: /*#__PURE__*/ jsx(LoadingOutlined, {\n            spin: true,\n            color: \"#333\"\n        }),\n        size: \"default\"\n    });\n    else if (mouseOverStatusIcon) {\n        statusIconElement = /*#__PURE__*/ jsx(Spin, {\n            indicator: /*#__PURE__*/ jsx(CaretRightOutlined, {\n                color: \"#333\"\n            }),\n            size: \"default\"\n        });\n        statusOnClick = ()=>triggerReplay();\n    } else statusIconElement = /*#__PURE__*/ jsx(Spin, {\n        indicator: /*#__PURE__*/ jsx(CaretRightOutlined, {\n            color: \"#333\"\n        }),\n        size: \"default\"\n    });\n    return /*#__PURE__*/ jsxs(\"div\", {\n        className: \"player-container\",\n        children: [\n            /*#__PURE__*/ jsx(\"div\", {\n                className: \"canvas-container\",\n                ref: divContainerRef\n            }),\n            /*#__PURE__*/ jsx(\"div\", {\n                className: \"player-timeline-wrapper\",\n                children: /*#__PURE__*/ jsx(\"div\", {\n                    className: \"player-timeline\",\n                    children: /*#__PURE__*/ jsx(\"div\", {\n                        className: \"player-timeline-progress\",\n                        style: {\n                            width: `${progressString}%`,\n                            transition: transitionStyle\n                        }\n                    })\n                })\n            }),\n            /*#__PURE__*/ jsx(\"div\", {\n                className: \"player-tools-wrapper\",\n                children: /*#__PURE__*/ jsx(\"div\", {\n                    className: \"player-tools\",\n                    children: /*#__PURE__*/ jsxs(\"div\", {\n                        className: \"player-control\",\n                        children: [\n                            /*#__PURE__*/ jsxs(\"div\", {\n                                className: \"status-text\",\n                                children: [\n                                    /*#__PURE__*/ jsx(\"div\", {\n                                        className: \"title\",\n                                        children: titleText\n                                    }),\n                                    /*#__PURE__*/ jsx(Tooltip, {\n                                        title: subTitleText,\n                                        children: /*#__PURE__*/ jsx(\"div\", {\n                                            className: \"subtitle\",\n                                            children: subTitleText\n                                        })\n                                    })\n                                ]\n                            }),\n                            isRecording ? null : /*#__PURE__*/ jsx(\"div\", {\n                                className: \"status-icon\",\n                                onMouseEnter: ()=>setMouseOverStatusIcon(true),\n                                onMouseLeave: ()=>setMouseOverStatusIcon(false),\n                                onClick: statusOnClick,\n                                children: statusIconElement\n                            }),\n                            (null == props ? void 0 : props.reportFileContent) ? /*#__PURE__*/ jsx(Tooltip, {\n                                title: \"Download Report\",\n                                children: /*#__PURE__*/ jsx(\"div\", {\n                                    className: \"status-icon\",\n                                    onMouseEnter: ()=>setMouseOverStatusIcon(true),\n                                    onMouseLeave: ()=>setMouseOverStatusIcon(false),\n                                    onClick: ()=>downloadReport(props.reportFileContent),\n                                    children: /*#__PURE__*/ jsx(DownloadOutlined, {\n                                        color: \"#333\"\n                                    })\n                                })\n                            }) : null,\n                            /*#__PURE__*/ jsx(Tooltip, {\n                                title: isRecording ? 'Generating...' : 'Export Video',\n                                children: /*#__PURE__*/ jsx(\"div\", {\n                                    className: \"status-icon\",\n                                    onClick: isRecording ? void 0 : handleExport,\n                                    style: {\n                                        opacity: isRecording ? 0.5 : 1,\n                                        cursor: isRecording ? 'not-allowed' : 'pointer'\n                                    },\n                                    children: isRecording ? /*#__PURE__*/ jsx(Spin, {\n                                        size: \"default\",\n                                        percent: progressString\n                                    }) : /*#__PURE__*/ jsx(ExportOutlined, {})\n                                })\n                            }),\n                            /*#__PURE__*/ jsx(Dropdown, {\n                                trigger: [\n                                    'hover',\n                                    'click'\n                                ],\n                                placement: \"bottomRight\",\n                                overlayStyle: {\n                                    minWidth: '148px'\n                                },\n                                dropdownRender: (menu)=>/*#__PURE__*/ jsx(\"div\", {\n                                        style: {\n                                            borderRadius: '8px',\n                                            border: '1px solid rgba(0, 0, 0, 0.08)',\n                                            backgroundColor: '#fff',\n                                            boxShadow: '0 2px 8px rgba(0, 0, 0, 0.08)',\n                                            overflow: 'hidden'\n                                        },\n                                        children: menu\n                                    }),\n                                menu: {\n                                    style: {\n                                        borderRadius: '8px',\n                                        padding: 0\n                                    },\n                                    items: [\n                                        {\n                                            key: 'autoZoom',\n                                            style: {\n                                                height: '39px',\n                                                margin: 0,\n                                                padding: '0 12px'\n                                            },\n                                            label: /*#__PURE__*/ jsxs(\"div\", {\n                                                style: {\n                                                    display: 'flex',\n                                                    alignItems: 'center',\n                                                    justifyContent: 'space-between',\n                                                    width: '100%',\n                                                    height: '39px'\n                                                },\n                                                children: [\n                                                    /*#__PURE__*/ jsxs(\"div\", {\n                                                        style: {\n                                                            display: 'flex',\n                                                            alignItems: 'center',\n                                                            gap: '4px'\n                                                        },\n                                                        children: [\n                                                            /*#__PURE__*/ jsx(global_perspective, {\n                                                                style: {\n                                                                    width: '16px',\n                                                                    height: '16px'\n                                                                }\n                                                            }),\n                                                            /*#__PURE__*/ jsx(\"span\", {\n                                                                style: {\n                                                                    fontSize: '12px',\n                                                                    marginRight: '16px'\n                                                                },\n                                                                children: \"Focus on cursor\"\n                                                            })\n                                                        ]\n                                                    }),\n                                                    /*#__PURE__*/ jsx(Switch, {\n                                                        size: \"small\",\n                                                        checked: autoZoom,\n                                                        onChange: (checked)=>{\n                                                            setAutoZoom(checked);\n                                                            triggerReplay();\n                                                        },\n                                                        onClick: (_, e)=>{\n                                                            var _e_stopPropagation;\n                                                            return null == e ? void 0 : null == (_e_stopPropagation = e.stopPropagation) ? void 0 : _e_stopPropagation.call(e);\n                                                        }\n                                                    })\n                                                ]\n                                            })\n                                        },\n                                        {\n                                            key: 'elementsVisible',\n                                            style: {\n                                                height: '39px',\n                                                margin: 0,\n                                                padding: '0 12px'\n                                            },\n                                            label: /*#__PURE__*/ jsxs(\"div\", {\n                                                style: {\n                                                    display: 'flex',\n                                                    alignItems: 'center',\n                                                    justifyContent: 'space-between',\n                                                    width: '100%',\n                                                    height: '39px'\n                                                },\n                                                children: [\n                                                    /*#__PURE__*/ jsxs(\"div\", {\n                                                        style: {\n                                                            display: 'flex',\n                                                            alignItems: 'center',\n                                                            gap: '4px'\n                                                        },\n                                                        children: [\n                                                            /*#__PURE__*/ jsx(show_marker, {\n                                                                style: {\n                                                                    width: '16px',\n                                                                    height: '16px'\n                                                                }\n                                                            }),\n                                                            /*#__PURE__*/ jsx(\"span\", {\n                                                                style: {\n                                                                    fontSize: '12px',\n                                                                    marginRight: '16px'\n                                                                },\n                                                                children: \"Show element markers\"\n                                                            })\n                                                        ]\n                                                    }),\n                                                    /*#__PURE__*/ jsx(Switch, {\n                                                        size: \"small\",\n                                                        checked: elementsVisible,\n                                                        onChange: (checked)=>{\n                                                            setElementsVisible(checked);\n                                                            triggerReplay();\n                                                        },\n                                                        onClick: (_, e)=>{\n                                                            var _e_stopPropagation;\n                                                            return null == e ? void 0 : null == (_e_stopPropagation = e.stopPropagation) ? void 0 : _e_stopPropagation.call(e);\n                                                        }\n                                                    })\n                                                ]\n                                            })\n                                        }\n                                    ]\n                                },\n                                children: /*#__PURE__*/ jsx(\"div\", {\n                                    className: \"status-icon\",\n                                    onMouseEnter: ()=>setMouseOverSettingsIcon(true),\n                                    onMouseLeave: ()=>setMouseOverSettingsIcon(false),\n                                    style: {\n                                        cursor: 'pointer',\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                        justifyContent: 'center',\n                                        opacity: mouseOverSettingsIcon ? 1 : 0.7,\n                                        transition: 'opacity 0.2s'\n                                    },\n                                    children: /*#__PURE__*/ jsx(player_setting, {\n                                        style: {\n                                            width: '16px',\n                                            height: '16px'\n                                        }\n                                    })\n                                })\n                            })\n                        ]\n                    })\n                })\n            })\n        ]\n    });\n}\nexport { Player };\n","\n      import API from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport { LoadingOutlined } from \"@ant-design/icons\";\nimport { Spin } from \"antd\";\nimport { emptyResultTip, serverLaunchTip } from \"../misc/index.mjs\";\nimport { Player } from \"../player/index.mjs\";\nimport shiny_text from \"../shiny-text/index.mjs\";\nimport \"./index.css\";\nconst PlaygroundResultView = (param)=>{\n    let { result, loading, serverValid, serviceMode, replayScriptsInfo, replayCounter, loadingProgressText, verticalMode = false, notReadyMessage, fitMode, autoZoom } = param;\n    let resultWrapperClassName = 'result-wrapper';\n    if (verticalMode) resultWrapperClassName += ' vertical-mode-result';\n    if (replayScriptsInfo && verticalMode) resultWrapperClassName += ' result-wrapper-compact';\n    let resultDataToShow = emptyResultTip;\n    if (serverValid || 'Server' !== serviceMode) {\n        if (loading) resultDataToShow = /*#__PURE__*/ jsxs(\"div\", {\n            className: \"loading-container\",\n            children: [\n                /*#__PURE__*/ jsx(Spin, {\n                    spinning: loading,\n                    indicator: /*#__PURE__*/ jsx(LoadingOutlined, {\n                        spin: true\n                    })\n                }),\n                /*#__PURE__*/ jsx(\"div\", {\n                    className: \"loading-progress-text loading-progress-text-progress\",\n                    children: /*#__PURE__*/ jsx(shiny_text, {\n                        text: loadingProgressText,\n                        speed: 3\n                    })\n                })\n            ]\n        });\n        else if (replayScriptsInfo) resultDataToShow = /*#__PURE__*/ jsx(Player, {\n            replayScripts: replayScriptsInfo.scripts,\n            imageWidth: replayScriptsInfo.width,\n            imageHeight: replayScriptsInfo.height,\n            reportFileContent: ('In-Browser-Extension' === serviceMode || 'Server' === serviceMode) && (null == result ? void 0 : result.reportHTML) ? null == result ? void 0 : result.reportHTML : null,\n            fitMode: fitMode,\n            autoZoom: autoZoom\n        }, replayCounter);\n        else if (null == result ? void 0 : result.error) resultDataToShow = /*#__PURE__*/ jsx(\"pre\", {\n            children: null == result ? void 0 : result.error\n        });\n        else if ((null == result ? void 0 : result.result) !== void 0) resultDataToShow = 'string' == typeof (null == result ? void 0 : result.result) ? /*#__PURE__*/ jsx(\"pre\", {\n            children: null == result ? void 0 : result.result\n        }) : /*#__PURE__*/ jsx(\"pre\", {\n            children: JSON.stringify(null == result ? void 0 : result.result, null, 2)\n        });\n    } else resultDataToShow = serverLaunchTip(notReadyMessage);\n    return /*#__PURE__*/ jsx(\"div\", {\n        className: resultWrapperClassName,\n        style: {\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column',\n            flex: '1 1 auto',\n            justifyContent: 'center'\n        },\n        children: resultDataToShow\n    });\n};\nexport { PlaygroundResultView };\n","\n      import API from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport \"react\";\nconst SvgAvatar = (props)=>/*#__PURE__*/ jsxs(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: 20,\n        height: 20,\n        fill: \"none\",\n        \"aria-label\": \"Playground\",\n        viewBox: \"0 0 20 20\",\n        ...props,\n        children: [\n            /*#__PURE__*/ jsx(\"rect\", {\n                width: 20,\n                height: 20,\n                fill: \"#2B83FF\",\n                rx: 10\n            }),\n            /*#__PURE__*/ jsx(\"path\", {\n                fill: \"#2B83FF\",\n                stroke: \"#fff\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 1.125,\n                d: \"M6.866 5.882a.56.56 0 0 1 .667-.078l3.248 1.875 3.247 1.875a.563.563 0 0 1 0 .974l-3.247 1.875-3.248 1.875a.563.563 0 0 1-.784-.74l1.749-3.497-1.75-3.498a.56.56 0 0 1 .118-.661Z\"\n            })\n        ]\n    });\nconst avatar = SvgAvatar;\nexport { avatar as default };\n","\n      import API from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { create } from \"zustand\";\nvar __webpack_require__ = {};\n(()=>{\n    __webpack_require__.d = (exports, definition)=>{\n        for(var key in definition)if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) Object.defineProperty(exports, key, {\n            enumerable: true,\n            get: definition[key]\n        });\n    };\n})();\n(()=>{\n    __webpack_require__.o = (obj, prop)=>Object.prototype.hasOwnProperty.call(obj, prop);\n})();\n(()=>{\n    __webpack_require__.r = (exports)=>{\n        if ('undefined' != typeof Symbol && Symbol.toStringTag) Object.defineProperty(exports, Symbol.toStringTag, {\n            value: 'Module'\n        });\n        Object.defineProperty(exports, '__esModule', {\n            value: true\n        });\n    };\n})();\nvar external_zustand_namespaceObject = {};\n__webpack_require__.r(external_zustand_namespaceObject);\n__webpack_require__.d(external_zustand_namespaceObject, {\n    create: ()=>create\n});\nconst { create: history_create } = external_zustand_namespaceObject;\nconst HISTORY_KEY = 'midscene-prompt-history-v2';\nconst LAST_SELECTED_TYPE_KEY = 'midscene-last-selected-type';\nconst getHistoryFromLocalStorage = ()=>{\n    const historyString = localStorage.getItem(HISTORY_KEY);\n    return historyString ? JSON.parse(historyString) : {};\n};\nconst getLastSelectedType = ()=>localStorage.getItem(LAST_SELECTED_TYPE_KEY) || 'aiAction';\nconst setLastSelectedType = (type)=>{\n    localStorage.setItem(LAST_SELECTED_TYPE_KEY, type);\n};\nconst useHistoryStore = history_create((set, get)=>({\n        history: getHistoryFromLocalStorage(),\n        lastSelectedType: getLastSelectedType(),\n        clearHistory: (type)=>{\n            const newHistory = {\n                ...get().history\n            };\n            delete newHistory[type];\n            set({\n                history: newHistory\n            });\n            localStorage.setItem(HISTORY_KEY, JSON.stringify(newHistory));\n        },\n        addHistory: (historyItem)=>{\n            const { type } = historyItem;\n            const currentHistory = get().history;\n            const typeHistory = currentHistory[type] || [];\n            const stringifiedNewItem = JSON.stringify({\n                prompt: historyItem.prompt,\n                params: historyItem.params\n            });\n            const newTypeHistory = [\n                historyItem,\n                ...typeHistory.filter((h)=>{\n                    const stringifiedOldItem = JSON.stringify({\n                        prompt: h.prompt,\n                        params: h.params\n                    });\n                    return stringifiedOldItem !== stringifiedNewItem;\n                })\n            ];\n            if (newTypeHistory.length > 10) newTypeHistory.length = 10;\n            const newHistory = {\n                ...currentHistory,\n                [type]: newTypeHistory\n            };\n            set({\n                history: newHistory\n            });\n            localStorage.setItem(HISTORY_KEY, JSON.stringify(newHistory));\n        },\n        getHistoryForType: (type)=>get().history[type] || [],\n        setLastSelectedType: (type)=>{\n            set({\n                lastSelectedType: type\n            });\n            setLastSelectedType(type);\n        }\n    }));\nexport { useHistoryStore };\n","const VALIDATION_CONSTANTS = {\n    ZOD_TYPES: {\n        OPTIONAL: 'ZodOptional',\n        DEFAULT: 'ZodDefault',\n        NULLABLE: 'ZodNullable',\n        OBJECT: 'ZodObject',\n        ENUM: 'ZodEnum',\n        NUMBER: 'ZodNumber',\n        STRING: 'ZodString',\n        BOOLEAN: 'ZodBoolean'\n    },\n    FIELD_FLAGS: {\n        LOCATION: 'midscene_location_field_flag'\n    },\n    DEFAULT_VALUES: {\n        ACTION_TYPE: 'aiAction',\n        TIMEOUT_MS: 15000,\n        CHECK_INTERVAL_MS: 3000\n    }\n};\nconst isZodObjectSchema = (schema)=>'object' == typeof schema && null !== schema && ('shape' in schema || 'ZodObject' === schema.type);\nconst isLocateField = (field)=>{\n    var _field__def;\n    const fieldWithRuntime = field;\n    if ((null == (_field__def = field._def) ? void 0 : _field__def.typeName) === VALIDATION_CONSTANTS.ZOD_TYPES.OBJECT) {\n        var _field__def1;\n        let shape;\n        if (field._def.shape) shape = 'function' == typeof field._def.shape ? field._def.shape() : field._def.shape;\n        if (!shape && fieldWithRuntime.shape) shape = fieldWithRuntime.shape;\n        if (shape && VALIDATION_CONSTANTS.FIELD_FLAGS.LOCATION in shape) return true;\n        const description = (null == (_field__def1 = field._def) ? void 0 : _field__def1.description) || fieldWithRuntime.description || '';\n        if ('string' == typeof description && description.toLowerCase().includes('input field')) return true;\n    }\n    if ('object' == typeof field && null !== field) {\n        var _fieldWithRuntime__def;\n        const description = fieldWithRuntime.description || (null == (_fieldWithRuntime__def = fieldWithRuntime._def) ? void 0 : _fieldWithRuntime__def.description) || '';\n        if ('string' == typeof description) {\n            const desc = description.toLowerCase();\n            if (desc.includes('input field') || desc.includes('element') || desc.includes('locate')) return true;\n        }\n        if ('ZodObject' === fieldWithRuntime.typeName || 'ZodObject' === fieldWithRuntime.type) return 'string' == typeof description && description.toLowerCase().includes('input field');\n    }\n    return false;\n};\nconst unwrapZodType = (field)=>{\n    var _actualField__def, _actualField__def1, _actualField__def2;\n    let actualField = field;\n    let isOptional = false;\n    let hasDefault = false;\n    while((null == (_actualField__def = actualField._def) ? void 0 : _actualField__def.typeName) === VALIDATION_CONSTANTS.ZOD_TYPES.OPTIONAL || (null == (_actualField__def1 = actualField._def) ? void 0 : _actualField__def1.typeName) === VALIDATION_CONSTANTS.ZOD_TYPES.DEFAULT || (null == (_actualField__def2 = actualField._def) ? void 0 : _actualField__def2.typeName) === VALIDATION_CONSTANTS.ZOD_TYPES.NULLABLE){\n        var _actualField__def3, _actualField__def4;\n        if ((null == (_actualField__def3 = actualField._def) ? void 0 : _actualField__def3.typeName) === VALIDATION_CONSTANTS.ZOD_TYPES.OPTIONAL) isOptional = true;\n        if ((null == (_actualField__def4 = actualField._def) ? void 0 : _actualField__def4.typeName) === VALIDATION_CONSTANTS.ZOD_TYPES.DEFAULT) hasDefault = true;\n        actualField = actualField._def.innerType || actualField;\n    }\n    return {\n        actualField,\n        isOptional,\n        hasDefault\n    };\n};\nconst extractDefaultValue = (field)=>{\n    var _currentField__def;\n    let currentField = field;\n    while(null == (_currentField__def = currentField._def) ? void 0 : _currentField__def.innerType){\n        if (currentField._def.typeName === VALIDATION_CONSTANTS.ZOD_TYPES.DEFAULT && currentField._def.defaultValue) return currentField._def.defaultValue();\n        currentField = currentField._def.innerType;\n    }\n};\nexport { VALIDATION_CONSTANTS, extractDefaultValue, isLocateField, isZodObjectSchema, unwrapZodType };\n","import { Agent } from \"@sqai/core/agent\";\nclass StaticPageAgent extends Agent {\n    constructor(page){\n        super(page, {});\n        this.dryMode = true;\n    }\n}\nexport { StaticPageAgent };\n\n//# sourceMappingURL=static-agent.mjs.map","import { StaticPage, StaticPageAgent } from \"@sqai/web/static\";\nimport { isZodObjectSchema, unwrapZodType } from \"../types.mjs\";\nconst actionNameForType = (type)=>{\n    const typeWithoutAi = type.startsWith('ai') ? type.slice(2) : type;\n    if (typeWithoutAi.startsWith('IOS')) return typeWithoutAi.substring(3).replace(/([A-Z])/g, ' $1').replace(/^/, 'IOS').trim();\n    const fullName = typeWithoutAi.replace(/([A-Z])/g, ' $1').trim();\n    const words = fullName.split(' ');\n    if (words.length > 3) return words.slice(-3).join(' ');\n    return fullName;\n};\nconst staticAgentFromContext = (context)=>{\n    const page = new StaticPage(context);\n    return new StaticPageAgent(page);\n};\nconst getPlaceholderForType = (type)=>{\n    if ('aiQuery' === type) return 'What do you want to query?';\n    if ('aiAssert' === type) return 'What do you want to assert?';\n    if ('aiTap' === type) return 'What element do you want to tap?';\n    if ('aiDoubleClick' === type) return 'What element do you want to double-click?';\n    if ('aiHover' === type) return 'What element do you want to hover over?';\n    if ('aiInput' === type) return 'Format: <value> | <element>\\nExample: hello world | search box';\n    if ('aiRightClick' === type) return 'What element do you want to right-click?';\n    if ('aiKeyboardPress' === type) return 'Format: <key> | <element (optional)>\\nExample: Enter | text field';\n    if ('aiScroll' === type) return 'Format: <direction> <amount> | <element (optional)>\\nExample: down 500 | main content';\n    if ('aiLocate' === type) return 'What element do you want to locate?';\n    if ('aiBoolean' === type) return 'What do you want to check (returns true/false)?';\n    if ('aiNumber' === type) return 'What number do you want to extract?';\n    if ('aiString' === type) return 'What text do you want to extract?';\n    if ('aiAsk' === type) return 'What do you want to ask?';\n    if ('aiWaitFor' === type) return 'What condition do you want to wait for?';\n    return 'What do you want to do?';\n};\nconst isRunButtonEnabled = (runButtonEnabled, needsStructuredParams, params, actionSpace, selectedType, promptValue)=>{\n    if (!runButtonEnabled) return false;\n    const needsAnyInput = (()=>{\n        if (actionSpace) {\n            const action = actionSpace.find((a)=>a.interfaceAlias === selectedType || a.name === selectedType);\n            if (action) {\n                if (!action.paramSchema) return false;\n                if ('object' == typeof action.paramSchema && 'shape' in action.paramSchema) {\n                    const shape = action.paramSchema.shape || {};\n                    const shapeKeys = Object.keys(shape);\n                    return shapeKeys.length > 0;\n                }\n            }\n        }\n        return true;\n    })();\n    if (!needsAnyInput) return true;\n    if (needsStructuredParams) {\n        const currentParams = params || {};\n        const action = null == actionSpace ? void 0 : actionSpace.find((a)=>a.interfaceAlias === selectedType || a.name === selectedType);\n        if ((null == action ? void 0 : action.paramSchema) && isZodObjectSchema(action.paramSchema)) {\n            const schema = action.paramSchema;\n            const shape = schema.shape || {};\n            return Object.keys(shape).every((key)=>{\n                const field = shape[key];\n                const { isOptional } = unwrapZodType(field);\n                const value = currentParams[key];\n                return isOptional || void 0 !== value && '' !== value && null !== value;\n            });\n        }\n        return true;\n    }\n    return promptValue.trim().length > 0;\n};\nexport { actionNameForType, getPlaceholderForType, isRunButtonEnabled, staticAgentFromContext };\n","import { jsx } from \"react/jsx-runtime\";\nimport \"react\";\nconst SvgSetting = (props)=>/*#__PURE__*/ jsx(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: 27,\n        height: 27,\n        fill: \"none\",\n        viewBox: \"0 0 27 27\",\n        ...props,\n        children: /*#__PURE__*/ jsx(\"path\", {\n            stroke: \"#000\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeOpacity: 0.85,\n            strokeWidth: 1.333,\n            d: \"M19.527 8.855h-2M14.86 7.522v2.667M14.86 8.855H7.527M10.194 13.522H7.527M12.86 12.189v2.666M20.193 13.522H12.86M19.527 18.189h-2M14.86 16.855v2.667M14.86 18.189H7.527\"\n        })\n    });\nconst setting = SvgSetting;\nexport { setting as default };\n","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport { Checkbox, Dropdown, Radio } from \"antd\";\nimport setting from \"../../icons/setting.mjs\";\nimport { useEnvConfig } from \"../../store/store.mjs\";\nimport { deepThinkTip, domIncludedTip, screenshotIncludedTip, trackingTip } from \"../../utils/constants.mjs\";\nconst ConfigSelector = (param)=>{\n    let { showDeepThinkOption = false, enableTracking = false, showDataExtractionOptions = false, hideDomAndScreenshotOptions = false } = param;\n    const forceSameTabNavigation = useEnvConfig((state)=>state.forceSameTabNavigation);\n    const setForceSameTabNavigation = useEnvConfig((state)=>state.setForceSameTabNavigation);\n    const deepThink = useEnvConfig((state)=>state.deepThink);\n    const setDeepThink = useEnvConfig((state)=>state.setDeepThink);\n    const screenshotIncluded = useEnvConfig((state)=>state.screenshotIncluded);\n    const setScreenshotIncluded = useEnvConfig((state)=>state.setScreenshotIncluded);\n    const domIncluded = useEnvConfig((state)=>state.domIncluded);\n    const setDomIncluded = useEnvConfig((state)=>state.setDomIncluded);\n    if (!enableTracking && !showDeepThinkOption && !showDataExtractionOptions) return null;\n    const configItems = buildConfigItems();\n    return /*#__PURE__*/ jsx(\"div\", {\n        className: \"selector-trigger\",\n        children: /*#__PURE__*/ jsx(Dropdown, {\n            menu: {\n                items: configItems\n            },\n            trigger: [\n                'click'\n            ],\n            children: /*#__PURE__*/ jsx(setting, {\n                width: 24,\n                height: 24\n            })\n        })\n    });\n    function buildConfigItems() {\n        const items = [];\n        if (enableTracking) items.push({\n            label: /*#__PURE__*/ jsx(Checkbox, {\n                onChange: (e)=>setForceSameTabNavigation(e.target.checked),\n                checked: forceSameTabNavigation,\n                children: trackingTip\n            }),\n            key: 'track-config'\n        });\n        if (showDeepThinkOption) items.push({\n            label: /*#__PURE__*/ jsx(Checkbox, {\n                onChange: (e)=>{\n                    setDeepThink(e.target.checked);\n                },\n                checked: deepThink,\n                children: deepThinkTip\n            }),\n            key: 'deep-think-config'\n        });\n        if (showDataExtractionOptions && !hideDomAndScreenshotOptions) {\n            items.push({\n                label: /*#__PURE__*/ jsx(Checkbox, {\n                    onChange: (e)=>{\n                        setScreenshotIncluded(e.target.checked);\n                    },\n                    checked: screenshotIncluded,\n                    children: screenshotIncludedTip\n                }),\n                key: 'screenshot-included-config'\n            });\n            items.push({\n                label: /*#__PURE__*/ jsxs(\"div\", {\n                    style: {\n                        padding: '4px 0'\n                    },\n                    children: [\n                        /*#__PURE__*/ jsx(\"div\", {\n                            style: {\n                                marginBottom: '4px',\n                                fontSize: '14px'\n                            },\n                            children: domIncludedTip\n                        }),\n                        /*#__PURE__*/ jsxs(Radio.Group, {\n                            size: \"small\",\n                            value: domIncluded,\n                            onChange: (e)=>setDomIncluded(e.target.value),\n                            children: [\n                                /*#__PURE__*/ jsx(Radio, {\n                                    value: false,\n                                    children: \"Off\"\n                                }),\n                                /*#__PURE__*/ jsx(Radio, {\n                                    value: true,\n                                    children: \"All\"\n                                }),\n                                /*#__PURE__*/ jsx(Radio, {\n                                    value: 'visible-only',\n                                    children: \"Visible only\"\n                                })\n                            ]\n                        })\n                    ]\n                }),\n                key: 'dom-included-config'\n            });\n        }\n        return items;\n    }\n};\nexport { ConfigSelector };\n","import { jsx } from \"react/jsx-runtime\";\nimport { Form, Input, InputNumber, Select } from \"antd\";\nconst { TextArea } = Input;\nconst renderLabel = (label, isOptional)=>`${label}${isOptional ? ' (Optional)' : ''}`;\nconst TextField = (param)=>{\n    let { name, label, isRequired, marginBottom, placeholder: customPlaceholder } = param;\n    const placeholder = customPlaceholder || `Enter ${name}`;\n    return /*#__PURE__*/ jsx(Form.Item, {\n        name: [\n            'params',\n            name\n        ],\n        label: renderLabel(label, !isRequired),\n        rules: isRequired ? [\n            {\n                required: true,\n                message: `Please input ${name}`\n            }\n        ] : [],\n        style: {\n            marginBottom\n        },\n        colon: false,\n        children: /*#__PURE__*/ jsx(Input, {\n            placeholder: placeholder\n        })\n    }, name);\n};\nconst LocateField = (param)=>{\n    let { name, label, isRequired, marginBottom, placeholder: customPlaceholder } = param;\n    const placeholder = customPlaceholder || `Describe the ${name}, use natural language`;\n    return /*#__PURE__*/ jsx(Form.Item, {\n        name: [\n            'params',\n            name\n        ],\n        label: renderLabel(label, !isRequired),\n        rules: isRequired ? [\n            {\n                required: true,\n                message: `The ${name} is required`\n            }\n        ] : [],\n        style: {\n            marginBottom\n        },\n        colon: false,\n        children: /*#__PURE__*/ jsx(TextArea, {\n            rows: 2,\n            placeholder: placeholder\n        })\n    }, name);\n};\nconst EnumField = (param)=>{\n    let { name, label, fieldSchema, isRequired, marginBottom, placeholder: customPlaceholder } = param;\n    var _fieldSchema__def;\n    const enumValues = (null == (_fieldSchema__def = fieldSchema._def) ? void 0 : _fieldSchema__def.values) || [];\n    const selectOptions = enumValues.map((value)=>({\n            value,\n            label: value.charAt(0).toUpperCase() + value.slice(1)\n        }));\n    return /*#__PURE__*/ jsx(Form.Item, {\n        name: [\n            'params',\n            name\n        ],\n        label: label,\n        rules: isRequired ? [\n            {\n                required: true,\n                message: `Please select ${name}`\n            }\n        ] : [],\n        style: {\n            marginBottom\n        },\n        colon: false,\n        children: /*#__PURE__*/ jsx(Select, {\n            placeholder: customPlaceholder || `Select ${name}`,\n            options: selectOptions\n        })\n    }, name);\n};\nconst NumberField = (param)=>{\n    let { name, label, isRequired, marginBottom, placeholder: customPlaceholder } = param;\n    const defaultPlaceholder = 'distance' === name ? 500 : 0;\n    const placeholderValue = customPlaceholder ? Number(customPlaceholder) || defaultPlaceholder : defaultPlaceholder;\n    const min = 0;\n    const max = 'distance' === name ? 10000 : void 0;\n    return /*#__PURE__*/ jsx(Form.Item, {\n        name: [\n            'params',\n            name\n        ],\n        label: `${label}${'distance' === name ? ' (px)' : ''}`,\n        rules: isRequired ? [\n            {\n                required: true,\n                message: `Please input ${name}`\n            },\n            {\n                type: 'number',\n                min,\n                message: `${label} must be at least ${min}`\n            }\n        ] : [\n            {\n                type: 'number',\n                min,\n                message: `${label} must be at least ${min}`\n            }\n        ],\n        style: {\n            flex: 'distance' === name ? 1 : void 0,\n            marginBottom\n        },\n        colon: false,\n        children: /*#__PURE__*/ jsx(InputNumber, {\n            placeholder: placeholderValue.toString(),\n            min: min,\n            max: max,\n            step: 'distance' === name ? 10 : 1,\n            style: {\n                width: '100%'\n            }\n        })\n    }, name);\n};\nconst BooleanField = (param)=>{\n    let { name, label, isRequired, marginBottom, placeholder: customPlaceholder } = param;\n    const selectOptions = [\n        {\n            value: true,\n            label: 'True'\n        },\n        {\n            value: false,\n            label: 'False'\n        }\n    ];\n    return /*#__PURE__*/ jsx(Form.Item, {\n        name: [\n            'params',\n            name\n        ],\n        label: renderLabel(label, !isRequired),\n        rules: isRequired ? [\n            {\n                required: true,\n                message: `Please select ${name}`\n            }\n        ] : [],\n        style: {\n            marginBottom\n        },\n        colon: false,\n        children: /*#__PURE__*/ jsx(Select, {\n            placeholder: customPlaceholder || `Select ${name}`,\n            options: selectOptions\n        })\n    }, name);\n};\nexport { BooleanField, EnumField, LocateField, NumberField, TextField };\n","import { jsx } from \"react/jsx-runtime\";\nimport \"react\";\nconst SvgClose = (props)=>/*#__PURE__*/ jsx(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: 18,\n        height: 16,\n        fill: \"none\",\n        viewBox: \"0 0 18 16\",\n        ...props,\n        children: /*#__PURE__*/ jsx(\"path\", {\n            stroke: \"#333\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 1.333,\n            d: \"m3.124 2.667 11.162 10.666M3.124 13.333 14.286 2.667\"\n        })\n    });\nconst icons_close = SvgClose;\nexport { icons_close as default };\n","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport \"react\";\nconst SvgHistory = (props)=>/*#__PURE__*/ jsxs(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: 25,\n        height: 25,\n        fill: \"none\",\n        viewBox: \"0 0 25 25\",\n        ...props,\n        children: [\n            /*#__PURE__*/ jsx(\"path\", {\n                stroke: \"#000\",\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeOpacity: 0.85,\n                strokeWidth: 1.33,\n                d: \"M6.63 9.021c-2.862 6.126 2.197 10.501 6.063 10.501a7 7 0 1 0-6.063-10.5\"\n            }),\n            /*#__PURE__*/ jsx(\"path\", {\n                stroke: \"#000\",\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeOpacity: 0.85,\n                strokeWidth: 1.33,\n                d: \"M12.695 8.322v4.203l2.967 2.968\"\n            })\n        ]\n    });\nconst icons_history = SvgHistory;\nexport { icons_history as default };\n","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport \"react\";\nconst SvgMagnifyingGlass = (props)=>/*#__PURE__*/ jsxs(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: 19,\n        height: 19,\n        fill: \"none\",\n        viewBox: \"0 0 19 19\",\n        ...props,\n        children: [\n            /*#__PURE__*/ jsxs(\"g\", {\n                stroke: \"#000\",\n                strokeLinejoin: \"round\",\n                strokeOpacity: 0.65,\n                strokeWidth: 1.5,\n                clipPath: \"url(#magnifying-glass_svg__a)\",\n                children: [\n                    /*#__PURE__*/ jsx(\"path\", {\n                        d: \"M8.397 14.29a6.375 6.375 0 1 0 0-12.75 6.375 6.375 0 0 0 0 12.75Z\"\n                    }),\n                    /*#__PURE__*/ jsx(\"path\", {\n                        strokeLinecap: \"round\",\n                        d: \"M10.519 5.42a3 3 0 0 0-2.122-.88 3 3 0 0 0-2.121.88M12.98 12.499l3.182 3.182\"\n                    })\n                ]\n            }),\n            /*#__PURE__*/ jsx(\"defs\", {\n                children: /*#__PURE__*/ jsx(\"clipPath\", {\n                    id: \"magnifying-glass_svg__a\",\n                    children: /*#__PURE__*/ jsx(\"path\", {\n                        fill: \"#fff\",\n                        d: \"M.522.04h18v18h-18z\"\n                    })\n                })\n            })\n        ]\n    });\nconst magnifying_glass = SvgMagnifyingGlass;\nexport { magnifying_glass as default };\n","\n      import API from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.22/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\nimport { Button, Input, Typography } from \"antd\";\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport icons_close from \"../../icons/close.mjs\";\nimport icons_history from \"../../icons/history.mjs\";\nimport magnifying_glass from \"../../icons/magnifying-glass.mjs\";\nimport { useHistoryStore } from \"../../store/history.mjs\";\nimport \"./index.css\";\nconst { Text } = Typography;\nconst HistorySelector = (param)=>{\n    let { onSelect, history, currentType } = param;\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [searchText, setSearchText] = useState('');\n    const clearHistory = useHistoryStore((state)=>state.clearHistory);\n    const modalRef = useRef(null);\n    const groupedHistory = useMemo(()=>{\n        const now = Date.now();\n        const sevenDaysAgo = now - 604800000;\n        const oneYearAgo = now - 31536000000;\n        const filteredHistory = history.filter((item)=>item.prompt.toLowerCase().includes(searchText.toLowerCase()));\n        const groups = {\n            recent7Days: filteredHistory.filter((item)=>item.timestamp >= sevenDaysAgo),\n            recent1Year: filteredHistory.filter((item)=>item.timestamp < sevenDaysAgo && item.timestamp >= oneYearAgo),\n            older: filteredHistory.filter((item)=>item.timestamp < oneYearAgo)\n        };\n        return groups;\n    }, [\n        history,\n        searchText\n    ]);\n    const handleHistoryClick = (item)=>{\n        onSelect(item);\n        setIsModalOpen(false);\n    };\n    const handleClearHistory = ()=>{\n        clearHistory(currentType);\n        setSearchText('');\n        setIsModalOpen(false);\n    };\n    useEffect(()=>{\n        if (!isModalOpen) return;\n        const handleClickOutside = (event)=>{\n            if (modalRef.current && !modalRef.current.contains(event.target)) setIsModalOpen(false);\n        };\n        const timer = setTimeout(()=>{\n            document.addEventListener('click', handleClickOutside);\n        }, 100);\n        return ()=>{\n            clearTimeout(timer);\n            document.removeEventListener('click', handleClickOutside);\n        };\n    }, [\n        isModalOpen\n    ]);\n    const renderHistoryGroup = (title, items)=>{\n        if (0 === items.length) return null;\n        return /*#__PURE__*/ jsxs(\"div\", {\n            className: \"history-group\",\n            children: [\n                /*#__PURE__*/ jsx(\"div\", {\n                    className: \"history-group-title\",\n                    children: title\n                }),\n                items.map((item, index)=>/*#__PURE__*/ jsx(\"div\", {\n                        className: \"history-item\",\n                        onClick: ()=>handleHistoryClick(item),\n                        children: item.prompt\n                    }, `${item.timestamp}-${index}`))\n            ]\n        }, title);\n    };\n    return /*#__PURE__*/ jsxs(\"div\", {\n        className: \"history-selector-wrapper\",\n        children: [\n            /*#__PURE__*/ jsx(\"div\", {\n                className: \"selector-trigger\",\n                onClick: ()=>setIsModalOpen(true),\n                children: /*#__PURE__*/ jsx(icons_history, {\n                    width: 24,\n                    height: 24\n                })\n            }),\n            isModalOpen && /*#__PURE__*/ jsx(\"div\", {\n                className: \"history-modal-overlay\",\n                ref: modalRef,\n                children: /*#__PURE__*/ jsxs(\"div\", {\n                    className: \"history-modal-container\",\n                    children: [\n                        /*#__PURE__*/ jsxs(\"div\", {\n                            className: \"history-modal-header\",\n                            children: [\n                                /*#__PURE__*/ jsxs(Text, {\n                                    strong: true,\n                                    style: {\n                                        fontSize: '16px'\n                                    },\n                                    children: [\n                                        \"History (\",\n                                        history.length,\n                                        \")\"\n                                    ]\n                                }),\n                                /*#__PURE__*/ jsx(Button, {\n                                    size: \"small\",\n                                    type: \"text\",\n                                    icon: /*#__PURE__*/ jsx(icons_close, {\n                                        width: 16,\n                                        height: 16\n                                    }),\n                                    onClick: ()=>setIsModalOpen(false),\n                                    className: \"close-button\"\n                                })\n                            ]\n                        }),\n                        /*#__PURE__*/ jsx(\"div\", {\n                            className: \"history-search-section\",\n                            children: /*#__PURE__*/ jsxs(\"div\", {\n                                className: \"search-input-wrapper\",\n                                children: [\n                                    /*#__PURE__*/ jsx(Input, {\n                                        placeholder: \"Search\",\n                                        value: searchText,\n                                        onChange: (e)=>setSearchText(e.target.value),\n                                        prefix: /*#__PURE__*/ jsx(magnifying_glass, {\n                                            width: 18,\n                                            height: 18\n                                        }),\n                                        className: \"search-input\",\n                                        allowClear: true\n                                    }),\n                                    /*#__PURE__*/ jsx(Button, {\n                                        type: \"link\",\n                                        onClick: handleClearHistory,\n                                        className: \"clear-button\",\n                                        disabled: 0 === history.length,\n                                        children: \"Clear\"\n                                    })\n                                ]\n                            })\n                        }),\n                        /*#__PURE__*/ jsx(\"div\", {\n                            className: \"history-content\",\n                            children: 0 === history.length ? /*#__PURE__*/ jsx(\"div\", {\n                                className: \"no-results\",\n                                children: /*#__PURE__*/ jsx(Text, {\n                                    type: \"secondary\",\n                                    children: \"No history record\"\n                                })\n                            }) : /*#__PURE__*/ jsxs(Fragment, {\n                                children: [\n                                    renderHistoryGroup('Last 7 days', groupedHistory.recent7Days),\n                                    renderHistoryGroup('Last 1 year', groupedHistory.recent1Year),\n                                    renderHistoryGroup('Earlier', groupedHistory.older),\n                                    searchText && 0 === groupedHistory.recent7Days.length && 0 === groupedHistory.recent1Year.length && 0 === groupedHistory.older.length && /*#__PURE__*/ jsx(\"div\", {\n                                        className: \"no-results\",\n                                        children: /*#__PURE__*/ jsx(Text, {\n                                            type: \"secondary\",\n                                            children: \"No matching history record\"\n                                        })\n                                    })\n                                ]\n                            })\n                        })\n                    ]\n                })\n            })\n        ]\n    });\n};\nexport { HistorySelector };\n","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport { BorderOutlined, DownOutlined, SendOutlined } from \"@ant-design/icons\";\nimport \"./index.css\";\nimport { Button, Dropdown, Form, Input, Radio, Tooltip } from \"antd\";\nimport react, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { useHistoryStore } from \"../../store/history.mjs\";\nimport { extractDefaultValue, isLocateField, isZodObjectSchema, unwrapZodType } from \"../../types.mjs\";\nimport { apiMetadata, defaultMainButtons } from \"../../utils/constants.mjs\";\nimport { actionNameForType, getPlaceholderForType, isRunButtonEnabled as playground_utils_mjs_isRunButtonEnabled } from \"../../utils/playground-utils.mjs\";\nimport { ConfigSelector } from \"../config-selector/index.mjs\";\nimport { BooleanField, EnumField, LocateField, NumberField, TextField } from \"../form-field/index.mjs\";\nimport { HistorySelector } from \"../history-selector/index.mjs\";\nconst { TextArea } = Input;\nconst PromptInput = (param)=>{\n    let { runButtonEnabled, form, serviceMode, selectedType, dryMode, stoppable, loading, onRun, onStop, clearPromptAfterRun = true, actionSpace, hideDomAndScreenshotOptions = false } = param;\n    const [hoveringSettings, setHoveringSettings] = useState(false);\n    const [promptValue, setPromptValue] = useState('');\n    const placeholder = getPlaceholderForType(selectedType);\n    const textAreaRef = useRef(null);\n    const modeRadioGroupRef = useRef(null);\n    const params = Form.useWatch('params', form);\n    const lastHistoryRef = useRef(null);\n    const history = useHistoryStore((state)=>state.history);\n    const lastSelectedType = useHistoryStore((state)=>state.lastSelectedType);\n    const addHistory = useHistoryStore((state)=>state.addHistory);\n    const setLastSelectedType = useHistoryStore((state)=>state.setLastSelectedType);\n    const historyForSelectedType = useMemo(()=>history[selectedType] || [], [\n        history,\n        selectedType\n    ]);\n    const needsStructuredParams = useMemo(()=>{\n        if (actionSpace) {\n            const action = actionSpace.find((a)=>a.interfaceAlias === selectedType || a.name === selectedType);\n            if (!(null == action ? void 0 : action.paramSchema)) return false;\n            if (isZodObjectSchema(action.paramSchema)) {\n                const schema = action.paramSchema;\n                const shape = schema.shape || {};\n                const shapeKeys = Object.keys(shape);\n                return shapeKeys.length > 0;\n            }\n            return true;\n        }\n        return false;\n    }, [\n        selectedType,\n        actionSpace\n    ]);\n    const needsAnyInput = useMemo(()=>{\n        if (actionSpace && actionSpace.length > 0) {\n            const action = actionSpace.find((a)=>a.interfaceAlias === selectedType || a.name === selectedType);\n            if (action) {\n                if (action.paramSchema && isZodObjectSchema(action.paramSchema)) {\n                    const schema = action.paramSchema;\n                    const shape = schema.shape || {};\n                    const hasRequiredFields = Object.keys(shape).some((key)=>{\n                        const field = shape[key];\n                        const { isOptional } = unwrapZodType(field);\n                        return !isOptional;\n                    });\n                    return hasRequiredFields;\n                }\n                return !!action.paramSchema;\n            }\n        }\n        return true;\n    }, [\n        selectedType,\n        actionSpace\n    ]);\n    const showDataExtractionOptions = useMemo(()=>{\n        const dataExtractionMethods = [\n            'aiQuery',\n            'aiBoolean',\n            'aiNumber',\n            'aiString',\n            'aiAsk',\n            'aiAssert'\n        ];\n        return dataExtractionMethods.includes(selectedType);\n    }, [\n        selectedType\n    ]);\n    const showDeepThinkOption = useMemo(()=>{\n        if ('aiLocate' === selectedType) return true;\n        if (actionSpace) {\n            const action = actionSpace.find((a)=>a.interfaceAlias === selectedType || a.name === selectedType);\n            if ((null == action ? void 0 : action.paramSchema) && isZodObjectSchema(action.paramSchema)) {\n                const schema = action.paramSchema;\n                const shape = schema.shape || {};\n                const hasLocateField = Object.keys(shape).some((key)=>{\n                    const field = shape[key];\n                    const { actualField } = unwrapZodType(field);\n                    return isLocateField(actualField);\n                });\n                return hasLocateField;\n            }\n        }\n        return false;\n    }, [\n        selectedType,\n        actionSpace\n    ]);\n    const hasConfigOptions = useMemo(()=>{\n        const hasTracking = 'In-Browser-Extension' === serviceMode;\n        const hasDeepThink = showDeepThinkOption;\n        const hasDataExtraction = showDataExtractionOptions && !hideDomAndScreenshotOptions;\n        return hasTracking || hasDeepThink || hasDataExtraction;\n    }, [\n        serviceMode,\n        showDeepThinkOption,\n        showDataExtractionOptions,\n        hideDomAndScreenshotOptions\n    ]);\n    const availableDropdownMethods = useMemo(()=>{\n        const metadataMethods = Object.keys(apiMetadata);\n        if (!actionSpace || 0 === actionSpace.length) return metadataMethods;\n        const availableMethods = actionSpace.map((action)=>action.interfaceAlias || action.name);\n        const finalMethods = new Set();\n        metadataMethods.forEach((method)=>{\n            const methodInfo = apiMetadata[method];\n            if ((null == methodInfo ? void 0 : methodInfo.group) === 'extraction' || (null == methodInfo ? void 0 : methodInfo.group) === 'validation') finalMethods.add(method);\n            else if (availableMethods.includes(method)) finalMethods.add(method);\n        });\n        availableMethods.forEach((method)=>{\n            finalMethods.add(method);\n        });\n        return Array.from(finalMethods);\n    }, [\n        actionSpace\n    ]);\n    const getDefaultParams = useCallback(()=>{\n        if (!needsStructuredParams || !actionSpace) return {};\n        const action = actionSpace.find((a)=>a.interfaceAlias === selectedType || a.name === selectedType);\n        if ((null == action ? void 0 : action.paramSchema) && isZodObjectSchema(action.paramSchema)) {\n            const defaultParams = {};\n            const schema = action.paramSchema;\n            const shape = schema.shape || {};\n            Object.keys(shape).forEach((key)=>{\n                const field = shape[key];\n                const defaultValue = extractDefaultValue(field);\n                if (void 0 !== defaultValue) defaultParams[key] = defaultValue;\n            });\n            return defaultParams;\n        }\n        return {};\n    }, [\n        selectedType,\n        needsStructuredParams,\n        actionSpace\n    ]);\n    useEffect(()=>{\n        if (!form.getFieldValue('type') && lastSelectedType) form.setFieldValue('type', lastSelectedType);\n    }, [\n        form,\n        lastSelectedType\n    ]);\n    useEffect(()=>{\n        if (selectedType && selectedType !== lastSelectedType) setLastSelectedType(selectedType);\n    }, [\n        selectedType,\n        lastSelectedType,\n        setLastSelectedType\n    ]);\n    const scrollToSelectedItem = useCallback(()=>{\n        const container = modeRadioGroupRef.current;\n        if (!container) return;\n        let targetElement = null;\n        const selectedRadioButton = container.querySelector('.ant-radio-button-wrapper-checked');\n        const dropdownButton = container.querySelector('.more-apis-button.selected-from-dropdown');\n        if (selectedRadioButton) targetElement = selectedRadioButton;\n        else if (dropdownButton) targetElement = dropdownButton;\n        if (targetElement) {\n            const containerRect = container.getBoundingClientRect();\n            const targetRect = targetElement.getBoundingClientRect();\n            const targetLeft = targetRect.left - containerRect.left + container.scrollLeft;\n            const targetWidth = targetRect.width;\n            const containerWidth = containerRect.width;\n            const optimalScrollLeft = targetLeft - (containerWidth - targetWidth) / 2;\n            container.scrollTo({\n                left: Math.max(0, optimalScrollLeft),\n                behavior: 'smooth'\n            });\n        }\n    }, []);\n    useEffect(()=>{\n        const lastHistory = historyForSelectedType[0];\n        if (lastHistory && lastHistoryRef.current && lastHistory.timestamp === lastHistoryRef.current.timestamp) return;\n        if (lastHistory) {\n            form.setFieldsValue({\n                type: lastHistory.type,\n                prompt: lastHistory.prompt || '',\n                params: lastHistory.params\n            });\n            setPromptValue(lastHistory.prompt || '');\n            lastHistoryRef.current = lastHistory;\n        } else {\n            const defaultParams = getDefaultParams();\n            form.setFieldsValue({\n                prompt: '',\n                params: defaultParams\n            });\n            setPromptValue('');\n            lastHistoryRef.current = null;\n        }\n    }, [\n        selectedType,\n        historyForSelectedType,\n        form,\n        getDefaultParams\n    ]);\n    useEffect(()=>{\n        const timeoutId = setTimeout(()=>{\n            scrollToSelectedItem();\n        }, 100);\n        return ()=>clearTimeout(timeoutId);\n    }, [\n        selectedType,\n        scrollToSelectedItem\n    ]);\n    const formPromptValue = Form.useWatch('prompt', form);\n    useEffect(()=>{\n        if (formPromptValue !== promptValue) setPromptValue(formPromptValue || '');\n    }, [\n        formPromptValue,\n        promptValue\n    ]);\n    const handleSelectHistory = useCallback((historyItem)=>{\n        form.setFieldsValue({\n            prompt: historyItem.prompt,\n            type: historyItem.type,\n            params: historyItem.params\n        });\n        setPromptValue(historyItem.prompt);\n    }, [\n        form\n    ]);\n    const handlePromptChange = useCallback((e)=>{\n        const value = e.target.value;\n        setPromptValue(value);\n    }, []);\n    const hasSingleStructuredParam = useMemo(()=>{\n        if (!needsStructuredParams || !actionSpace) return false;\n        const action = actionSpace.find((a)=>a.interfaceAlias === selectedType || a.name === selectedType);\n        if ((null == action ? void 0 : action.paramSchema) && isZodObjectSchema(action.paramSchema)) {\n            const schema = action.paramSchema;\n            const shape = schema.shape || {};\n            return 1 === Object.keys(shape).length;\n        }\n        return false;\n    }, [\n        selectedType,\n        needsStructuredParams,\n        actionSpace\n    ]);\n    const isRunButtonEnabled = useMemo(()=>playground_utils_mjs_isRunButtonEnabled(runButtonEnabled, !!needsStructuredParams, params, actionSpace, selectedType, promptValue), [\n        runButtonEnabled,\n        needsStructuredParams,\n        selectedType,\n        actionSpace,\n        promptValue,\n        params\n    ]);\n    const handleRunWithHistory = useCallback(()=>{\n        const values = form.getFieldsValue();\n        let historyPrompt = '';\n        if (needsStructuredParams && values.params && actionSpace) {\n            const action = actionSpace.find((a)=>a.interfaceAlias === selectedType || a.name === selectedType);\n            if ((null == action ? void 0 : action.paramSchema) && isZodObjectSchema(action.paramSchema)) {\n                let locateValue = '';\n                const otherValues = [];\n                const schema = action.paramSchema;\n                const shape = schema.shape || {};\n                Object.keys(shape).forEach((key)=>{\n                    var _values_params;\n                    const paramValue = null == (_values_params = values.params) ? void 0 : _values_params[key];\n                    if (null != paramValue && '' !== paramValue) {\n                        const field = shape[key];\n                        const { actualField } = unwrapZodType(field);\n                        if (isLocateField(actualField)) locateValue = String(paramValue);\n                        else if ('distance' === key) otherValues.push(`${paramValue}`);\n                        else otherValues.push(String(paramValue));\n                    }\n                });\n                const mainPart = otherValues.join(' ');\n                historyPrompt = locateValue ? `${locateValue} - ${mainPart}` : mainPart;\n            } else historyPrompt = values.prompt || '';\n        } else historyPrompt = values.prompt || '';\n        const newHistoryItem = {\n            type: values.type,\n            prompt: historyPrompt,\n            params: values.params,\n            timestamp: Date.now()\n        };\n        addHistory(newHistoryItem);\n        onRun();\n        if (clearPromptAfterRun) {\n            lastHistoryRef.current = newHistoryItem;\n            setPromptValue('');\n            if (needsStructuredParams) {\n                const defaultParams = getDefaultParams();\n                form.setFieldValue('params', defaultParams);\n            } else form.setFieldValue('prompt', '');\n        }\n    }, [\n        form,\n        addHistory,\n        onRun,\n        needsStructuredParams,\n        selectedType,\n        clearPromptAfterRun,\n        actionSpace,\n        getDefaultParams\n    ]);\n    const handleKeyDown = useCallback((e)=>{\n        if ('Enter' === e.key && e.metaKey && isRunButtonEnabled) {\n            handleRunWithHistory();\n            e.preventDefault();\n            e.stopPropagation();\n        } else if ('Enter' === e.key) setTimeout(()=>{\n            if (textAreaRef.current) {\n                var _textAreaRef_current_resizableTextArea;\n                const textarea = null == (_textAreaRef_current_resizableTextArea = textAreaRef.current.resizableTextArea) ? void 0 : _textAreaRef_current_resizableTextArea.textArea;\n                if (textarea) {\n                    const selectionStart = textarea.selectionStart;\n                    const value = textarea.value;\n                    const lastNewlineIndex = value.lastIndexOf('\\n');\n                    const isAtLastLine = -1 === lastNewlineIndex || selectionStart > lastNewlineIndex;\n                    if (isAtLastLine) textarea.scrollTop = textarea.scrollHeight;\n                }\n            }\n        }, 0);\n    }, [\n        handleRunWithHistory,\n        isRunButtonEnabled\n    ]);\n    const handleStructuredKeyDown = useCallback((e)=>{\n        if ('Enter' === e.key && e.metaKey && isRunButtonEnabled) {\n            handleRunWithHistory();\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    }, [\n        handleRunWithHistory,\n        isRunButtonEnabled\n    ]);\n    const renderStructuredParams = useCallback(()=>{\n        if (!needsStructuredParams) return null;\n        if (actionSpace) {\n            const action = actionSpace.find((a)=>a.interfaceAlias === selectedType || a.name === selectedType);\n            if ((null == action ? void 0 : action.paramSchema) && isZodObjectSchema(action.paramSchema)) {\n                const schema = action.paramSchema;\n                const shape = schema.shape || {};\n                const schemaKeys = Object.keys(shape);\n                if (1 === schemaKeys.length) {\n                    const key = schemaKeys[0];\n                    const field = shape[key];\n                    const { actualField } = unwrapZodType(field);\n                    const isLocateFieldFlag = isLocateField(actualField);\n                    const placeholderText = (()=>{\n                        var _fieldWithRuntime__def;\n                        const fieldWithRuntime = actualField;\n                        if (null == (_fieldWithRuntime__def = fieldWithRuntime._def) ? void 0 : _fieldWithRuntime__def.description) return fieldWithRuntime._def.description;\n                        if (fieldWithRuntime.description) return fieldWithRuntime.description;\n                        if (actionSpace) {\n                            const action = actionSpace.find((a)=>a.interfaceAlias === selectedType || a.name === selectedType);\n                            if ((null == action ? void 0 : action.paramSchema) && 'object' == typeof action.paramSchema && 'shape' in action.paramSchema) {\n                                var _fieldDef__def;\n                                const shape = action.paramSchema.shape || {};\n                                const fieldDef = shape[key];\n                                if (null == fieldDef ? void 0 : null == (_fieldDef__def = fieldDef._def) ? void 0 : _fieldDef__def.description) return fieldDef._def.description;\n                                if (null == fieldDef ? void 0 : fieldDef.description) return fieldDef.description;\n                            }\n                        }\n                        if (isLocateFieldFlag) return 'Describe the element you want to interact with';\n                        if ('keyName' === key) return 'Enter key name or text to type';\n                        if ('value' === key) return 'Enter text to input';\n                        return `Enter ${key}`;\n                    })();\n                    return /*#__PURE__*/ jsx(Form.Item, {\n                        name: [\n                            'params',\n                            key\n                        ],\n                        style: {\n                            margin: 0\n                        },\n                        children: /*#__PURE__*/ jsx(Input.TextArea, {\n                            className: \"main-side-console-input-textarea\",\n                            rows: 4,\n                            placeholder: placeholderText,\n                            autoFocus: true,\n                            onKeyDown: handleStructuredKeyDown\n                        })\n                    });\n                }\n                const fields = [];\n                const sortedKeys = schemaKeys.sort((keyA, keyB)=>{\n                    const fieldSchemaA = shape[keyA];\n                    const fieldSchemaB = shape[keyB];\n                    const { isOptional: isOptionalA } = unwrapZodType(fieldSchemaA);\n                    const { isOptional: isOptionalB } = unwrapZodType(fieldSchemaB);\n                    if (!isOptionalA && isOptionalB) return -1;\n                    if (isOptionalA && !isOptionalB) return 1;\n                    return 0;\n                });\n                sortedKeys.forEach((key, index)=>{\n                    var _actualField__def, _actualField__def1, _actualField__def2;\n                    const fieldSchema = shape[key];\n                    const { actualField, isOptional } = unwrapZodType(fieldSchema);\n                    const isLocateFieldFlag = isLocateField(actualField);\n                    const label = key.charAt(0).toUpperCase() + key.slice(1);\n                    const isRequired = !isOptional;\n                    const marginBottom = index === sortedKeys.length - 1 ? 0 : 12;\n                    const placeholder = (()=>{\n                        var _fieldWithRuntime__def;\n                        const fieldWithRuntime = actualField;\n                        if (null == (_fieldWithRuntime__def = fieldWithRuntime._def) ? void 0 : _fieldWithRuntime__def.description) return fieldWithRuntime._def.description;\n                        if (fieldWithRuntime.description) return fieldWithRuntime.description;\n                        if (actionSpace) {\n                            const action = actionSpace.find((a)=>a.interfaceAlias === selectedType || a.name === selectedType);\n                            if ((null == action ? void 0 : action.paramSchema) && 'object' == typeof action.paramSchema && 'shape' in action.paramSchema) {\n                                var _fieldDef__def;\n                                const shape = action.paramSchema.shape || {};\n                                const fieldDef = shape[key];\n                                if (null == fieldDef ? void 0 : null == (_fieldDef__def = fieldDef._def) ? void 0 : _fieldDef__def.description) return fieldDef._def.description;\n                                if (null == fieldDef ? void 0 : fieldDef.description) return fieldDef.description;\n                            }\n                        }\n                        if (isLocateFieldFlag) return 'Describe the element you want to interact with';\n                    })();\n                    const fieldProps = {\n                        name: key,\n                        label,\n                        fieldSchema: actualField,\n                        isRequired,\n                        marginBottom,\n                        placeholder\n                    };\n                    if (isLocateFieldFlag) fields.push(/*#__PURE__*/ jsx(LocateField, {\n                        ...fieldProps\n                    }, key));\n                    else if ((null == (_actualField__def = actualField._def) ? void 0 : _actualField__def.typeName) === 'ZodEnum') fields.push(/*#__PURE__*/ jsx(EnumField, {\n                        ...fieldProps\n                    }, key));\n                    else if ((null == (_actualField__def1 = actualField._def) ? void 0 : _actualField__def1.typeName) === 'ZodNumber') fields.push(/*#__PURE__*/ jsx(NumberField, {\n                        ...fieldProps\n                    }, key));\n                    else if ((null == (_actualField__def2 = actualField._def) ? void 0 : _actualField__def2.typeName) === 'ZodBoolean') fields.push(/*#__PURE__*/ jsx(BooleanField, {\n                        ...fieldProps\n                    }, key));\n                    else fields.push(/*#__PURE__*/ jsx(TextField, {\n                        ...fieldProps\n                    }, key));\n                });\n                if ('aiScroll' === selectedType) {\n                    const directionField = fields.find((field)=>/*#__PURE__*/ react.isValidElement(field) && 'direction' === field.props.name);\n                    const distanceField = fields.find((field)=>/*#__PURE__*/ react.isValidElement(field) && 'distance' === field.props.name);\n                    const otherFields = fields.filter((field)=>/*#__PURE__*/ react.isValidElement(field) && 'direction' !== field.props.name && 'distance' !== field.props.name);\n                    if (directionField && distanceField) return /*#__PURE__*/ jsxs(\"div\", {\n                        className: \"structured-params\",\n                        children: [\n                            /*#__PURE__*/ jsxs(\"div\", {\n                                style: {\n                                    display: 'flex',\n                                    gap: 12,\n                                    marginBottom: 12\n                                },\n                                children: [\n                                    directionField,\n                                    distanceField\n                                ]\n                            }),\n                            otherFields\n                        ]\n                    });\n                }\n                return /*#__PURE__*/ jsx(\"div\", {\n                    className: \"structured-params\",\n                    children: fields\n                });\n            }\n        }\n        return null;\n    }, [\n        selectedType,\n        needsStructuredParams,\n        actionSpace,\n        handleStructuredKeyDown\n    ]);\n    const handleMouseEnter = useCallback(()=>{\n        setHoveringSettings(true);\n    }, []);\n    const handleMouseLeave = useCallback(()=>{\n        setHoveringSettings(false);\n    }, []);\n    const renderActionButton = useCallback(()=>{\n        const runButton = (text)=>/*#__PURE__*/ jsx(Button, {\n                type: \"primary\",\n                icon: /*#__PURE__*/ jsx(SendOutlined, {}),\n                style: {\n                    borderRadius: 20,\n                    zIndex: 999\n                },\n                onClick: handleRunWithHistory,\n                disabled: !isRunButtonEnabled,\n                loading: loading,\n                children: text\n            });\n        if (dryMode) return 'aiAction' === selectedType ? /*#__PURE__*/ jsx(Tooltip, {\n            title: \"Start executing until some interaction actions need to be performed. You can see the process of planning and locating.\",\n            children: runButton('Dry Run')\n        }) : runButton('Run');\n        if (stoppable) return /*#__PURE__*/ jsx(Button, {\n            icon: /*#__PURE__*/ jsx(BorderOutlined, {}),\n            onClick: onStop,\n            style: {\n                borderRadius: 20,\n                zIndex: 999\n            },\n            children: \"Stop\"\n        });\n        return runButton('Run');\n    }, [\n        dryMode,\n        loading,\n        handleRunWithHistory,\n        onStop,\n        isRunButtonEnabled,\n        selectedType,\n        stoppable\n    ]);\n    return /*#__PURE__*/ jsxs(\"div\", {\n        className: \"prompt-input-wrapper\",\n        children: [\n            /*#__PURE__*/ jsxs(\"div\", {\n                className: \"mode-radio-group-wrapper\",\n                children: [\n                    /*#__PURE__*/ jsxs(\"div\", {\n                        className: \"mode-radio-group\",\n                        ref: modeRadioGroupRef,\n                        children: [\n                            /*#__PURE__*/ jsx(Form.Item, {\n                                name: \"type\",\n                                style: {\n                                    margin: 0\n                                },\n                                children: /*#__PURE__*/ jsx(Radio.Group, {\n                                    buttonStyle: \"solid\",\n                                    disabled: !runButtonEnabled,\n                                    children: defaultMainButtons.map((apiType)=>{\n                                        var _apiMetadata_apiType;\n                                        return /*#__PURE__*/ jsx(Tooltip, {\n                                            title: (null == (_apiMetadata_apiType = apiMetadata[apiType]) ? void 0 : _apiMetadata_apiType.title) || '',\n                                            children: /*#__PURE__*/ jsx(Radio.Button, {\n                                                value: apiType,\n                                                children: actionNameForType(apiType)\n                                            })\n                                        }, apiType);\n                                    })\n                                })\n                            }),\n                            /*#__PURE__*/ jsx(Dropdown, {\n                                menu: (()=>{\n                                    const hiddenAPIs = availableDropdownMethods.filter((api)=>!defaultMainButtons.includes(api));\n                                    const groupedItems = [];\n                                    const interactionAPIs = hiddenAPIs.filter((api)=>{\n                                        var _apiMetadata_api;\n                                        return (null == (_apiMetadata_api = apiMetadata[api]) ? void 0 : _apiMetadata_api.group) === 'interaction';\n                                    });\n                                    if (interactionAPIs.length > 0) groupedItems.push({\n                                        key: 'interaction-group',\n                                        type: 'group',\n                                        label: 'Interaction APIs',\n                                        children: interactionAPIs.map((api)=>{\n                                            var _apiMetadata_api;\n                                            return {\n                                                key: api,\n                                                label: actionNameForType(api),\n                                                title: (null == (_apiMetadata_api = apiMetadata[api]) ? void 0 : _apiMetadata_api.title) || '',\n                                                onClick: ()=>{\n                                                    form.setFieldValue('type', api);\n                                                }\n                                            };\n                                        })\n                                    });\n                                    const extractionAPIs = hiddenAPIs.filter((api)=>{\n                                        var _apiMetadata_api;\n                                        return (null == (_apiMetadata_api = apiMetadata[api]) ? void 0 : _apiMetadata_api.group) === 'extraction';\n                                    });\n                                    if (extractionAPIs.length > 0) groupedItems.push({\n                                        key: 'extraction-group',\n                                        type: 'group',\n                                        label: 'Data Extraction APIs',\n                                        children: extractionAPIs.map((api)=>{\n                                            var _apiMetadata_api;\n                                            return {\n                                                key: api,\n                                                label: actionNameForType(api),\n                                                title: (null == (_apiMetadata_api = apiMetadata[api]) ? void 0 : _apiMetadata_api.title) || '',\n                                                onClick: ()=>{\n                                                    form.setFieldValue('type', api);\n                                                }\n                                            };\n                                        })\n                                    });\n                                    const validationAPIs = hiddenAPIs.filter((api)=>{\n                                        var _apiMetadata_api;\n                                        return (null == (_apiMetadata_api = apiMetadata[api]) ? void 0 : _apiMetadata_api.group) === 'validation';\n                                    });\n                                    if (validationAPIs.length > 0) groupedItems.push({\n                                        key: 'validation-group',\n                                        type: 'group',\n                                        label: 'Validation APIs',\n                                        children: validationAPIs.map((api)=>{\n                                            var _apiMetadata_api;\n                                            return {\n                                                key: api,\n                                                label: actionNameForType(api),\n                                                title: (null == (_apiMetadata_api = apiMetadata[api]) ? void 0 : _apiMetadata_api.title) || '',\n                                                onClick: ()=>{\n                                                    form.setFieldValue('type', api);\n                                                }\n                                            };\n                                        })\n                                    });\n                                    const deviceSpecificAPIs = hiddenAPIs.filter((api)=>!apiMetadata[api]);\n                                    if (deviceSpecificAPIs.length > 0) groupedItems.push({\n                                        key: 'device-specific-group',\n                                        type: 'group',\n                                        label: 'Device-Specific APIs',\n                                        children: deviceSpecificAPIs.map((api)=>({\n                                                key: api,\n                                                label: actionNameForType(api),\n                                                title: '',\n                                                onClick: ()=>{\n                                                    form.setFieldValue('type', api);\n                                                }\n                                            }))\n                                    });\n                                    return {\n                                        items: groupedItems\n                                    };\n                                })(),\n                                placement: \"bottomLeft\",\n                                trigger: [\n                                    'click'\n                                ],\n                                disabled: !runButtonEnabled,\n                                children: /*#__PURE__*/ jsxs(Button, {\n                                    className: `more-apis-button ${!defaultMainButtons.includes(selectedType) ? 'selected-from-dropdown' : ''}`,\n                                    children: [\n                                        selectedType && !defaultMainButtons.includes(selectedType) ? actionNameForType(selectedType) : 'more',\n                                        /*#__PURE__*/ jsx(DownOutlined, {\n                                            style: {\n                                                fontSize: '10px',\n                                                marginLeft: '2px'\n                                            }\n                                        })\n                                    ]\n                                })\n                            })\n                        ]\n                    }),\n                    /*#__PURE__*/ jsxs(\"div\", {\n                        className: \"action-icons\",\n                        children: [\n                            hasConfigOptions && /*#__PURE__*/ jsx(\"div\", {\n                                className: hoveringSettings ? 'settings-wrapper settings-wrapper-hover' : 'settings-wrapper',\n                                onMouseEnter: handleMouseEnter,\n                                onMouseLeave: handleMouseLeave,\n                                children: /*#__PURE__*/ jsx(ConfigSelector, {\n                                    enableTracking: 'In-Browser-Extension' === serviceMode,\n                                    showDeepThinkOption: showDeepThinkOption,\n                                    showDataExtractionOptions: showDataExtractionOptions,\n                                    hideDomAndScreenshotOptions: hideDomAndScreenshotOptions\n                                })\n                            }),\n                            /*#__PURE__*/ jsx(HistorySelector, {\n                                onSelect: handleSelectHistory,\n                                history: historyForSelectedType,\n                                currentType: selectedType\n                            })\n                        ]\n                    })\n                ]\n            }),\n            /*#__PURE__*/ jsxs(\"div\", {\n                className: `main-side-console-input ${!runButtonEnabled ? 'disabled' : ''} ${loading ? 'loading' : ''}`,\n                children: [\n                    needsAnyInput ? needsStructuredParams ? hasSingleStructuredParam ? renderStructuredParams() : /*#__PURE__*/ jsx(\"div\", {\n                        className: \"structured-params-container\",\n                        children: renderStructuredParams()\n                    }) : /*#__PURE__*/ jsx(Form.Item, {\n                        name: \"prompt\",\n                        style: {\n                            margin: 0\n                        },\n                        children: /*#__PURE__*/ jsx(TextArea, {\n                            className: \"main-side-console-input-textarea\",\n                            disabled: !runButtonEnabled,\n                            rows: 4,\n                            placeholder: placeholder,\n                            autoFocus: true,\n                            onKeyDown: handleKeyDown,\n                            onChange: handlePromptChange,\n                            ref: textAreaRef\n                        })\n                    }) : /*#__PURE__*/ jsxs(\"div\", {\n                        className: \"no-input-method\",\n                        style: {\n                            padding: '20px',\n                            textAlign: 'center',\n                            color: '#666',\n                            fontSize: '14px'\n                        },\n                        children: [\n                            'Click \"Run\" to execute ',\n                            actionNameForType(selectedType)\n                        ]\n                    }),\n                    /*#__PURE__*/ jsx(\"div\", {\n                        className: \"form-controller-wrapper\",\n                        children: renderActionButton()\n                    })\n                ]\n            })\n        ]\n    });\n};\nexport { PromptInput };\n","import { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\nimport icons, { ArrowDownOutlined, ClearOutlined, LoadingOutlined } from \"@ant-design/icons\";\nimport { Button, Form, List, Tooltip, Typography, message } from \"antd\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { usePlaygroundExecution } from \"../../hooks/usePlaygroundExecution.mjs\";\nimport { usePlaygroundState } from \"../../hooks/usePlaygroundState.mjs\";\nimport { useEnvConfig } from \"../../store/store.mjs\";\nimport { ContextPreview } from \"../context-preview/index.mjs\";\nimport { EnvConfigReminder } from \"../env-config-reminder/index.mjs\";\nimport { PlaygroundResultView } from \"../playground-result/index.mjs\";\nimport \"./index.css\";\nimport avatar from \"../../icons/avatar.mjs\";\nimport { PromptInput } from \"../prompt-input/index.mjs\";\nimport { createStorageProvider, detectBestStorageType } from \"./providers/storage-provider.mjs\";\nconst { Text } = Typography;\nfunction getSDKId(sdk) {\n    if (sdk.id && 'string' == typeof sdk.id) return `agent-${sdk.id}`;\n    return 'playground-default';\n}\nfunction ErrorMessage(param) {\n    let { error } = param;\n    if (!error) return null;\n    return /*#__PURE__*/ jsxs(Tooltip, {\n        title: /*#__PURE__*/ jsx(\"span\", {\n            style: {\n                whiteSpace: 'pre-wrap',\n                wordBreak: 'break-all'\n            },\n            children: error\n        }),\n        overlayStyle: {\n            maxWidth: '100vw'\n        },\n        children: [\n            \"Error: \",\n            error.split('\\n')[0]\n        ]\n    });\n}\nfunction UniversalPlayground(param) {\n    let { playgroundSDK, storage, contextProvider, config: componentConfig = {}, branding = {}, className = '', dryMode = false, showContextPreview = true } = param;\n    const [form] = Form.useForm();\n    const { config } = useEnvConfig();\n    const [sdkReady, setSdkReady] = useState(false);\n    useEffect(()=>{\n        const initializeSDK = async ()=>{\n            if (playgroundSDK && 'function' == typeof playgroundSDK.checkStatus) try {\n                await playgroundSDK.checkStatus();\n                setSdkReady(true);\n            } catch (error) {\n                console.warn('Failed to initialize SDK, using default namespace:', error);\n                setSdkReady(true);\n            }\n            else setSdkReady(true);\n        };\n        initializeSDK();\n    }, [\n        playgroundSDK\n    ]);\n    const effectiveStorage = useMemo(()=>{\n        if (storage) return storage;\n        if (!sdkReady) return null;\n        const namespace = componentConfig.storageNamespace || getSDKId(playgroundSDK);\n        const bestStorageType = detectBestStorageType();\n        console.log(`Using ${bestStorageType} storage for namespace: ${namespace}`);\n        return createStorageProvider(bestStorageType, namespace);\n    }, [\n        storage,\n        sdkReady,\n        componentConfig.storageNamespace,\n        playgroundSDK\n    ]);\n    const { loading, setLoading, infoList, setInfoList, actionSpace, actionSpaceLoading, uiContextPreview, setUiContextPreview, showScrollToBottomButton, verticalMode, replayCounter, setReplayCounter, infoListRef, currentRunningIdRef, interruptedFlagRef, clearInfoList, handleScrollToBottom } = usePlaygroundState(playgroundSDK, effectiveStorage, contextProvider);\n    const { handleRun: executeAction, handleStop, canStop } = usePlaygroundExecution(playgroundSDK, effectiveStorage, actionSpace, loading, setLoading, infoList, setInfoList, replayCounter, setReplayCounter, verticalMode, currentRunningIdRef, interruptedFlagRef);\n    useEffect(()=>{\n        if ((null == playgroundSDK ? void 0 : playgroundSDK.overrideConfig) && config) playgroundSDK.overrideConfig(config).catch((error)=>{\n            console.error('Failed to override SDK config:', error);\n        });\n    }, [\n        playgroundSDK,\n        config\n    ]);\n    const handleFormRun = useCallback(async ()=>{\n        try {\n            const value = form.getFieldsValue();\n            await executeAction(value);\n        } catch (error) {\n            message.error((null == error ? void 0 : error.message) || 'Execution failed');\n        }\n    }, [\n        form,\n        executeAction\n    ]);\n    const configAlreadySet = Object.keys(config || {}).length >= 1;\n    const runButtonEnabled = componentConfig.serverMode || !dryMode && !actionSpaceLoading && configAlreadySet;\n    const selectedType = Form.useWatch('type', form);\n    const finalShowContextPreview = showContextPreview && false !== componentConfig.showContextPreview;\n    const layout = componentConfig.layout || 'vertical';\n    const showVersionInfo = false !== componentConfig.showVersionInfo;\n    return /*#__PURE__*/ jsx(\"div\", {\n        className: `playground-container ${layout}-mode ${className}`.trim(),\n        children: /*#__PURE__*/ jsxs(Form, {\n            form: form,\n            onFinish: handleFormRun,\n            className: \"command-form\",\n            children: [\n                finalShowContextPreview && /*#__PURE__*/ jsx(\"div\", {\n                    className: \"context-preview-section\",\n                    children: /*#__PURE__*/ jsx(ContextPreview, {\n                        uiContextPreview: uiContextPreview,\n                        setUiContextPreview: setUiContextPreview,\n                        showContextPreview: finalShowContextPreview\n                    })\n                }),\n                /*#__PURE__*/ jsxs(\"div\", {\n                    className: \"middle-dialog-area\",\n                    children: [\n                        infoList.length > 1 && /*#__PURE__*/ jsx(\"div\", {\n                            className: \"clear-button-container\",\n                            children: /*#__PURE__*/ jsx(Button, {\n                                size: \"small\",\n                                icon: /*#__PURE__*/ jsx(ClearOutlined, {}),\n                                onClick: clearInfoList,\n                                type: \"text\",\n                                className: \"clear-button\"\n                            })\n                        }),\n                        /*#__PURE__*/ jsx(\"div\", {\n                            ref: infoListRef,\n                            className: \"info-list-container\",\n                            children: /*#__PURE__*/ jsx(List, {\n                                itemLayout: \"vertical\",\n                                dataSource: infoList,\n                                renderItem: (item)=>{\n                                    var _item_result;\n                                    return /*#__PURE__*/ jsx(List.Item, {\n                                        className: \"list-item\",\n                                        children: 'user' === item.type ? /*#__PURE__*/ jsx(\"div\", {\n                                            className: \"user-message-container\",\n                                            children: /*#__PURE__*/ jsx(\"div\", {\n                                                className: \"user-message-bubble\",\n                                                children: item.content\n                                            })\n                                        }) : 'progress' === item.type ? /*#__PURE__*/ jsx(\"div\", {\n                                            children: (()=>{\n                                                var _parts_, _item_result, _item_result1, _item_result2;\n                                                const parts = item.content.split(' - ');\n                                                const action = null == (_parts_ = parts[0]) ? void 0 : _parts_.trim();\n                                                const description = parts.slice(1).join(' - ').trim();\n                                                const currentIndex = infoList.findIndex((listItem)=>listItem.id === item.id);\n                                                const laterProgressExists = infoList.slice(currentIndex + 1).some((listItem)=>'progress' === listItem.type);\n                                                const isLatestProgress = !laterProgressExists;\n                                                const shouldShowLoading = loading && isLatestProgress;\n                                                return /*#__PURE__*/ jsxs(Fragment, {\n                                                    children: [\n                                                        action && /*#__PURE__*/ jsxs(\"span\", {\n                                                            className: \"progress-action-item\",\n                                                            children: [\n                                                                action,\n                                                                /*#__PURE__*/ jsx(\"span\", {\n                                                                    className: `progress-status-icon ${shouldShowLoading ? 'loading' : (null == (_item_result = item.result) ? void 0 : _item_result.error) ? 'error' : 'completed'}`,\n                                                                    children: shouldShowLoading ? /*#__PURE__*/ jsx(LoadingOutlined, {\n                                                                        spin: true\n                                                                    }) : (null == (_item_result1 = item.result) ? void 0 : _item_result1.error) ? \"\\u2717\" : \"\\u2713\"\n                                                                })\n                                                            ]\n                                                        }),\n                                                        description && /*#__PURE__*/ jsx(\"div\", {\n                                                            children: /*#__PURE__*/ jsx(\"span\", {\n                                                                className: \"progress-description\",\n                                                                children: description\n                                                            })\n                                                        }),\n                                                        (null == (_item_result2 = item.result) ? void 0 : _item_result2.error) && /*#__PURE__*/ jsx(ErrorMessage, {\n                                                            error: item.result.error\n                                                        })\n                                                    ]\n                                                });\n                                            })()\n                                        }) : 'separator' === item.type ? /*#__PURE__*/ jsxs(\"div\", {\n                                            className: \"new-conversation-separator\",\n                                            children: [\n                                                /*#__PURE__*/ jsx(\"div\", {\n                                                    className: \"separator-line\"\n                                                }),\n                                                /*#__PURE__*/ jsx(\"div\", {\n                                                    className: \"separator-text-container\",\n                                                    children: /*#__PURE__*/ jsx(Text, {\n                                                        type: \"secondary\",\n                                                        className: \"separator-text\",\n                                                        children: item.content\n                                                    })\n                                                })\n                                            ]\n                                        }) : /*#__PURE__*/ jsxs(\"div\", {\n                                            className: \"system-message-container\",\n                                            children: [\n                                                /*#__PURE__*/ jsxs(\"div\", {\n                                                    className: \"system-message-header\",\n                                                    children: [\n                                                        /*#__PURE__*/ jsx(icons, {\n                                                            component: branding.icon || avatar,\n                                                            style: {\n                                                                fontSize: 20\n                                                            }\n                                                        }),\n                                                        /*#__PURE__*/ jsx(\"span\", {\n                                                            className: \"system-message-title\",\n                                                            children: branding.title || 'Playground'\n                                                        })\n                                                    ]\n                                                }),\n                                                (item.content || item.result) && /*#__PURE__*/ jsxs(\"div\", {\n                                                    className: \"system-message-content\",\n                                                    children: [\n                                                        'result' === item.type && (null == (_item_result = item.result) ? void 0 : _item_result.error) && /*#__PURE__*/ jsxs(\"div\", {\n                                                            className: \"error-message\",\n                                                            children: [\n                                                                /*#__PURE__*/ jsx(\"div\", {\n                                                                    className: \"divider\"\n                                                                }),\n                                                                /*#__PURE__*/ jsx(ErrorMessage, {\n                                                                    error: item.result.error\n                                                                })\n                                                            ]\n                                                        }),\n                                                        'result' === item.type ? /*#__PURE__*/ jsx(PlaygroundResultView, {\n                                                            result: item.result || null,\n                                                            loading: item.loading || false,\n                                                            serverValid: true,\n                                                            serviceMode: 'Server',\n                                                            replayScriptsInfo: item.replayScriptsInfo || null,\n                                                            replayCounter: item.replayCounter || 0,\n                                                            loadingProgressText: item.loadingProgressText || '',\n                                                            verticalMode: item.verticalMode || false,\n                                                            fitMode: \"width\"\n                                                        }) : /*#__PURE__*/ jsxs(Fragment, {\n                                                            children: [\n                                                                /*#__PURE__*/ jsx(\"div\", {\n                                                                    className: \"system-message-text\",\n                                                                    children: item.content\n                                                                }),\n                                                                item.loading && item.loadingProgressText && /*#__PURE__*/ jsx(\"div\", {\n                                                                    className: \"loading-progress-text\",\n                                                                    children: /*#__PURE__*/ jsx(\"span\", {\n                                                                        children: item.loadingProgressText\n                                                                    })\n                                                                })\n                                                            ]\n                                                        })\n                                                    ]\n                                                })\n                                            ]\n                                        })\n                                    }, item.id);\n                                }\n                            })\n                        }),\n                        showScrollToBottomButton && false !== componentConfig.enableScrollToBottom && /*#__PURE__*/ jsx(Button, {\n                            className: \"scroll-to-bottom-button\",\n                            type: \"primary\",\n                            shape: \"circle\",\n                            icon: /*#__PURE__*/ jsx(ArrowDownOutlined, {}),\n                            onClick: handleScrollToBottom,\n                            size: \"large\"\n                        })\n                    ]\n                }),\n                /*#__PURE__*/ jsxs(\"div\", {\n                    className: \"bottom-input-section\",\n                    children: [\n                        componentConfig.showEnvConfigReminder ? /*#__PURE__*/ jsx(EnvConfigReminder, {}) : null,\n                        /*#__PURE__*/ jsx(PromptInput, {\n                            runButtonEnabled: runButtonEnabled,\n                            form: form,\n                            serviceMode: 'Server',\n                            selectedType: selectedType,\n                            dryMode: dryMode,\n                            stoppable: canStop,\n                            loading: loading,\n                            onRun: handleFormRun,\n                            onStop: handleStop,\n                            actionSpace: actionSpace\n                        })\n                    ]\n                }),\n                showVersionInfo && branding.version && /*#__PURE__*/ jsx(\"div\", {\n                    className: \"version-info-section\",\n                    children: /*#__PURE__*/ jsxs(\"span\", {\n                        className: \"version-text\",\n                        children: [\n                            \"Midscene.js version: \",\n                            branding.version\n                        ]\n                    })\n                })\n            ]\n        })\n    });\n}\nconst universal_playground = UniversalPlayground;\nexport { UniversalPlayground, universal_playground as default };\n","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport { createStorageProvider, detectBestStorageType } from \"../component/universal-playground/providers/storage-provider.mjs\";\nimport { WELCOME_MESSAGE_TEMPLATE } from \"../utils/constants.mjs\";\nfunction usePlaygroundState(playgroundSDK, storage, contextProvider) {\n    const [loading, setLoading] = useState(false);\n    const [infoList, setInfoList] = useState([]);\n    const [actionSpace, setActionSpace] = useState([]);\n    const [actionSpaceLoading, setActionSpaceLoading] = useState(true);\n    const [uiContextPreview, setUiContextPreview] = useState();\n    const [showScrollToBottomButton, setShowScrollToBottomButton] = useState(false);\n    const [verticalMode, setVerticalMode] = useState(false);\n    const [replayCounter, setReplayCounter] = useState(0);\n    const infoListRef = useRef(null);\n    const currentRunningIdRef = useRef(null);\n    const interruptedFlagRef = useRef({});\n    const initializedRef = useRef(false);\n    useEffect(()=>{\n        const migrateFromOldNamespace = async ()=>{\n            const oldStorage = createStorageProvider(detectBestStorageType(), 'playground-default');\n            try {\n                if (null == oldStorage ? void 0 : oldStorage.loadMessages) {\n                    const oldMessages = await oldStorage.loadMessages();\n                    if (oldMessages.length > 1) {\n                        console.log('Found data in old namespace, migrating...');\n                        if (null == storage ? void 0 : storage.saveMessages) await storage.saveMessages(oldMessages);\n                        if (oldStorage.clearMessages) await oldStorage.clearMessages();\n                        return oldMessages;\n                    }\n                }\n            } catch (error) {\n                console.debug('No data found in old namespace:', error);\n            }\n            return [];\n        };\n        const initializeMessages = async ()=>{\n            const welcomeMessage = {\n                ...WELCOME_MESSAGE_TEMPLATE,\n                id: 'welcome',\n                timestamp: new Date()\n            };\n            if (null == storage ? void 0 : storage.loadMessages) try {\n                let storedMessages = await storage.loadMessages();\n                if (0 === storedMessages.length) storedMessages = await migrateFromOldNamespace();\n                const hasWelcomeMessage = storedMessages.some((msg)=>'welcome' === msg.id);\n                hasWelcomeMessage ? setInfoList(storedMessages) : setInfoList([\n                    welcomeMessage,\n                    ...storedMessages\n                ]);\n            } catch (error) {\n                console.error('Failed to load messages:', error);\n                setInfoList([\n                    welcomeMessage\n                ]);\n            }\n            else setInfoList([\n                welcomeMessage\n            ]);\n        };\n        if (storage && !initializedRef.current) {\n            initializedRef.current = true;\n            initializeMessages();\n        } else if (!storage && 0 === infoList.length) initializeMessages();\n    }, [\n        storage\n    ]);\n    useEffect(()=>{\n        if ((null == storage ? void 0 : storage.saveMessages) && infoList.length > 1) storage.saveMessages(infoList).catch((error)=>{\n            if (error instanceof DOMException && 'QuotaExceededError' === error.name) console.warn('Storage quota exceeded - some messages may not be saved persistently');\n            else console.error('Failed to save messages:', error);\n        });\n    }, [\n        infoList,\n        storage\n    ]);\n    useEffect(()=>{\n        if (!(null == contextProvider ? void 0 : contextProvider.getUIContext) || uiContextPreview) return;\n        contextProvider.getUIContext().then((context)=>setUiContextPreview(context)).catch((error)=>{\n            console.error('Failed to get UI context:', error);\n        });\n    }, [\n        contextProvider,\n        uiContextPreview\n    ]);\n    useEffect(()=>{\n        const loadActionSpace = async ()=>{\n            setActionSpaceLoading(true);\n            try {\n                var _contextProvider_getUIContext;\n                if (!playgroundSDK) return void setActionSpace([]);\n                const context = uiContextPreview || await (null == contextProvider ? void 0 : null == (_contextProvider_getUIContext = contextProvider.getUIContext) ? void 0 : _contextProvider_getUIContext.call(contextProvider));\n                const space = await playgroundSDK.getActionSpace(context);\n                setActionSpace(space || []);\n            } catch (error) {\n                console.error('Failed to load action space:', error);\n                setActionSpace([]);\n            } finally{\n                setActionSpaceLoading(false);\n            }\n        };\n        loadActionSpace();\n    }, [\n        playgroundSDK,\n        uiContextPreview,\n        contextProvider\n    ]);\n    useEffect(()=>{\n        const sizeThreshold = 750;\n        setVerticalMode(window.innerWidth < sizeThreshold);\n        const handleResize = ()=>{\n            setVerticalMode(window.innerWidth < sizeThreshold);\n        };\n        window.addEventListener('resize', handleResize);\n        return ()=>window.removeEventListener('resize', handleResize);\n    }, []);\n    const scrollToBottom = useCallback(()=>{\n        setTimeout(()=>{\n            if (infoListRef.current) infoListRef.current.scrollTop = infoListRef.current.scrollHeight;\n        }, 100);\n    }, []);\n    const checkIfScrolledToBottom = useCallback(()=>{\n        if (infoListRef.current) {\n            const { scrollTop, scrollHeight, clientHeight } = infoListRef.current;\n            const isAtBottom = scrollTop + clientHeight >= scrollHeight - 10;\n            setShowScrollToBottomButton(!isAtBottom);\n        }\n    }, []);\n    const handleScrollToBottom = useCallback(()=>{\n        if (infoListRef.current) {\n            infoListRef.current.scrollTo({\n                top: infoListRef.current.scrollHeight,\n                behavior: 'smooth'\n            });\n            setShowScrollToBottomButton(false);\n        }\n    }, []);\n    useEffect(()=>{\n        if (infoList.length > 0) scrollToBottom();\n    }, [\n        infoList,\n        scrollToBottom\n    ]);\n    useEffect(()=>{\n        const container = infoListRef.current;\n        if (container) {\n            container.addEventListener('scroll', checkIfScrolledToBottom);\n            checkIfScrolledToBottom();\n            return ()=>{\n                container.removeEventListener('scroll', checkIfScrolledToBottom);\n            };\n        }\n    }, [\n        checkIfScrolledToBottom\n    ]);\n    const clearInfoList = useCallback(async ()=>{\n        const welcomeMessage = {\n            ...WELCOME_MESSAGE_TEMPLATE,\n            id: 'welcome',\n            timestamp: new Date()\n        };\n        setInfoList([\n            welcomeMessage\n        ]);\n        if (null == storage ? void 0 : storage.clearMessages) try {\n            await storage.clearMessages();\n        } catch (error) {\n            console.error('Failed to clear stored messages:', error);\n        }\n    }, [\n        storage\n    ]);\n    const refreshContext = useCallback(async ()=>{\n        if (null == contextProvider ? void 0 : contextProvider.refreshContext) try {\n            const newContext = await contextProvider.refreshContext();\n            setUiContextPreview(newContext);\n        } catch (error) {\n            console.error('Failed to refresh context:', error);\n        }\n    }, [\n        contextProvider\n    ]);\n    return {\n        loading,\n        setLoading,\n        infoList,\n        setInfoList,\n        actionSpace,\n        actionSpaceLoading,\n        uiContextPreview,\n        setUiContextPreview,\n        showScrollToBottomButton,\n        verticalMode,\n        replayCounter,\n        setReplayCounter,\n        infoListRef,\n        currentRunningIdRef,\n        interruptedFlagRef,\n        clearInfoList,\n        refreshContext,\n        handleScrollToBottom,\n        scrollToBottom\n    };\n}\nexport { usePlaygroundState };\n","import { useCallback } from \"react\";\nimport { useEnvConfig } from \"../store/store.mjs\";\nimport { noReplayAPIs } from \"@sqai/playground\";\nimport { BLANK_RESULT } from \"../utils/constants.mjs\";\nimport { allScriptsFromDump } from \"../utils/replay-scripts.mjs\";\nfunction usePlaygroundExecution(playgroundSDK, storage, actionSpace, loading, setLoading, infoList, setInfoList, replayCounter, setReplayCounter, verticalMode, currentRunningIdRef, interruptedFlagRef) {\n    const { deepThink, screenshotIncluded, domIncluded } = useEnvConfig();\n    const handleRun = useCallback(async (value)=>{\n        if (!playgroundSDK) return void console.warn('PlaygroundSDK is not available');\n        const thisRunningId = Date.now();\n        const actionType = value.type;\n        const displayContent = `${value.type}: ${value.prompt || JSON.stringify(value.params)}`;\n        const userItem = {\n            id: `user-${Date.now()}`,\n            type: 'user',\n            content: displayContent,\n            timestamp: new Date()\n        };\n        setInfoList((prev)=>[\n                ...prev,\n                userItem\n            ]);\n        setLoading(true);\n        const result = {\n            ...BLANK_RESULT\n        };\n        const systemItem = {\n            id: `system-${thisRunningId}`,\n            type: 'system',\n            content: '',\n            timestamp: new Date(),\n            loading: true,\n            loadingProgressText: ''\n        };\n        setInfoList((prev)=>[\n                ...prev,\n                systemItem\n            ]);\n        try {\n            currentRunningIdRef.current = thisRunningId;\n            interruptedFlagRef.current[thisRunningId] = false;\n            if (playgroundSDK.onProgressUpdate) playgroundSDK.onProgressUpdate(()=>{});\n            if (playgroundSDK.onProgressUpdate) playgroundSDK.onProgressUpdate((tip)=>{\n                if (interruptedFlagRef.current[thisRunningId]) return;\n                setInfoList((prev)=>{\n                    const lastItem = prev[prev.length - 1];\n                    if (lastItem && 'progress' === lastItem.type && lastItem.content === tip) return prev;\n                    const progressItem = {\n                        id: `progress-${thisRunningId}-${Date.now()}`,\n                        type: 'progress',\n                        content: tip,\n                        timestamp: new Date()\n                    };\n                    return [\n                        ...prev,\n                        progressItem\n                    ];\n                });\n            });\n            result.result = await playgroundSDK.executeAction(actionType, value, {\n                requestId: thisRunningId.toString(),\n                deepThink,\n                screenshotIncluded,\n                domIncluded\n            });\n            if ('object' == typeof result.result && null !== result.result) {\n                const resultObj = result.result;\n                if (resultObj.dump) result.dump = resultObj.dump;\n                if (resultObj.reportHTML) result.reportHTML = resultObj.reportHTML;\n                if (resultObj.error) result.error = resultObj.error;\n                if (void 0 !== resultObj.result) result.result = resultObj.result;\n            }\n        } catch (e) {\n            result.error = (null == e ? void 0 : e.message) || String(e);\n            console.error('Playground execution error:', e);\n        }\n        if (interruptedFlagRef.current[thisRunningId]) return;\n        setLoading(false);\n        currentRunningIdRef.current = null;\n        let replayInfo = null;\n        let counter = replayCounter;\n        if ((null == result ? void 0 : result.dump) && !noReplayAPIs.includes(actionType)) {\n            const info = allScriptsFromDump(result.dump);\n            setReplayCounter((c)=>c + 1);\n            replayInfo = info;\n            counter = replayCounter + 1;\n        }\n        setInfoList((prev)=>prev.map((item)=>item.id === `system-${thisRunningId}` ? {\n                    ...item,\n                    content: '',\n                    loading: false,\n                    loadingProgressText: ''\n                } : item));\n        const resultItem = {\n            id: `result-${thisRunningId}`,\n            type: 'result',\n            content: 'Execution result',\n            timestamp: new Date(),\n            result: result,\n            loading: false,\n            replayScriptsInfo: replayInfo,\n            replayCounter: counter,\n            loadingProgressText: '',\n            verticalMode: verticalMode\n        };\n        setInfoList((prev)=>[\n                ...prev,\n                resultItem\n            ]);\n        if (null == storage ? void 0 : storage.saveResult) try {\n            await storage.saveResult(resultItem.id, resultItem);\n        } catch (error) {\n            console.error('Failed to save result:', error);\n        }\n        const separatorItem = {\n            id: `separator-${thisRunningId}`,\n            type: 'separator',\n            content: 'New Session',\n            timestamp: new Date()\n        };\n        setInfoList((prev)=>[\n                ...prev,\n                separatorItem\n            ]);\n    }, [\n        playgroundSDK,\n        storage,\n        actionSpace,\n        setLoading,\n        setInfoList,\n        replayCounter,\n        setReplayCounter,\n        verticalMode,\n        currentRunningIdRef,\n        interruptedFlagRef,\n        deepThink,\n        screenshotIncluded,\n        domIncluded\n    ]);\n    const handleStop = useCallback(async ()=>{\n        const thisRunningId = currentRunningIdRef.current;\n        if (thisRunningId && playgroundSDK && playgroundSDK.cancelExecution) try {\n            await playgroundSDK.cancelExecution(thisRunningId.toString());\n            interruptedFlagRef.current[thisRunningId] = true;\n            setLoading(false);\n            if (playgroundSDK.onProgressUpdate) playgroundSDK.onProgressUpdate(()=>{});\n            setInfoList((prev)=>prev.map((item)=>item.id === `system-${thisRunningId}` && item.loading ? {\n                        ...item,\n                        content: 'Operation stopped',\n                        loading: false,\n                        loadingProgressText: ''\n                    } : item));\n            const separatorItem = {\n                id: `separator-${thisRunningId}`,\n                type: 'separator',\n                content: 'New Session',\n                timestamp: new Date()\n            };\n            setInfoList((prev)=>[\n                    ...prev,\n                    separatorItem\n                ]);\n        } catch (error) {\n            console.error('Failed to stop execution:', error);\n        }\n    }, [\n        playgroundSDK,\n        currentRunningIdRef,\n        interruptedFlagRef,\n        setLoading,\n        setInfoList\n    ]);\n    const canStop = loading && !!currentRunningIdRef.current && !!playgroundSDK && !!playgroundSDK.cancelExecution;\n    return {\n        handleRun,\n        handleStop,\n        canStop\n    };\n}\nexport { usePlaygroundExecution };\n","import { IndexedDBStorageProvider, MemoryStorageProvider, NoOpStorageProvider } from \"./indexeddb-storage-provider.mjs\";\nfunction _define_property(obj, key, value) {\n    if (key in obj) Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n    });\n    else obj[key] = value;\n    return obj;\n}\nclass LocalStorageProvider {\n    checkStorageSpace() {\n        try {\n            const testKey = 'storage-test';\n            const testData = 'x'.repeat(102400);\n            localStorage.setItem(testKey, testData);\n            localStorage.removeItem(testKey);\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n    async saveMessages(messages) {\n        try {\n            if (!this.checkStorageSpace()) {\n                console.warn('Low storage space detected, clearing old data...');\n                await this.handleQuotaExceeded();\n            }\n            const messagesToSave = messages.slice(-this.maxStorageItems);\n            const lightMessages = messagesToSave.map((msg)=>({\n                    ...msg,\n                    result: void 0\n                }));\n            const messageData = JSON.stringify(lightMessages);\n            localStorage.setItem(this.messagesKey, messageData);\n        } catch (error) {\n            if (error instanceof DOMException && 'QuotaExceededError' === error.name) {\n                console.warn('LocalStorage quota exceeded, attempting to clear old data and retry...');\n                await this.handleQuotaExceeded();\n                try {\n                    const recentMessages = messages.slice(-10);\n                    const lightRecentMessages = recentMessages.map((msg)=>({\n                            ...msg,\n                            result: void 0\n                        }));\n                    const messageData = JSON.stringify(lightRecentMessages);\n                    localStorage.setItem(this.messagesKey, messageData);\n                    console.info('Successfully saved recent messages after clearing storage');\n                } catch (retryError) {\n                    console.error('Failed to save even after clearing storage:', retryError);\n                    await this.clearMessages();\n                }\n            } else console.error('Failed to save messages to localStorage:', error);\n        }\n    }\n    async loadMessages() {\n        try {\n            const stored = localStorage.getItem(this.messagesKey);\n            if (!stored) return [];\n            const messages = JSON.parse(stored);\n            const restoredMessages = await Promise.all(messages.map(async (msg)=>{\n                if ('result' === msg.type && msg.id) {\n                    const resultKey = `${this.resultsKey}-${msg.id}`;\n                    const storedResult = localStorage.getItem(resultKey);\n                    if (storedResult) try {\n                        const resultItem = JSON.parse(storedResult);\n                        return {\n                            ...msg,\n                            ...resultItem\n                        };\n                    } catch (e) {\n                        console.warn('Failed to parse stored result:', e);\n                    }\n                }\n                return msg;\n            }));\n            return restoredMessages;\n        } catch (error) {\n            console.error('Failed to load messages from localStorage:', error);\n            return [];\n        }\n    }\n    async clearMessages() {\n        try {\n            localStorage.removeItem(this.messagesKey);\n            const keys = Object.keys(localStorage);\n            keys.forEach((key)=>{\n                if (key.startsWith(this.resultsKey)) localStorage.removeItem(key);\n            });\n        } catch (error) {\n            console.error('Failed to clear messages from localStorage:', error);\n        }\n    }\n    async saveResult(id, result) {\n        try {\n            const resultKey = `${this.resultsKey}-${id}`;\n            localStorage.setItem(resultKey, JSON.stringify(result));\n        } catch (error) {\n            if (error instanceof DOMException && 'QuotaExceededError' === error.name) {\n                console.warn('LocalStorage quota exceeded when saving result, clearing old results...');\n                await this.handleQuotaExceeded();\n                try {\n                    const resultKey = `${this.resultsKey}-${id}`;\n                    localStorage.setItem(resultKey, JSON.stringify(result));\n                } catch (retryError) {\n                    console.error('Failed to save result even after clearing storage:', retryError);\n                }\n            } else console.error('Failed to save result to localStorage:', error);\n        }\n    }\n    async handleQuotaExceeded() {\n        try {\n            const keys = Object.keys(localStorage);\n            const resultKeys = keys.filter((key)=>key.startsWith(this.resultsKey));\n            const keysToRemove = resultKeys.slice(0, Math.max(1, Math.floor(resultKeys.length / 2)));\n            keysToRemove.forEach((key)=>{\n                localStorage.removeItem(key);\n            });\n            console.info(`Cleared ${keysToRemove.length} old result entries to free up storage space`);\n            const playgroundKeys = keys.filter((key)=>key.includes('playground') || key.includes('agent') || key.startsWith('midscene'));\n            if (playgroundKeys.length > 10) {\n                const additionalKeysToRemove = playgroundKeys.slice(0, Math.floor(playgroundKeys.length / 3));\n                additionalKeysToRemove.forEach((key)=>{\n                    if (key !== this.messagesKey) localStorage.removeItem(key);\n                });\n                console.info(`Cleared ${additionalKeysToRemove.length} additional playground-related entries`);\n            }\n        } catch (error) {\n            console.error('Failed to handle quota exceeded:', error);\n        }\n    }\n    constructor(namespace = 'playground'){\n        _define_property(this, \"messagesKey\", void 0);\n        _define_property(this, \"resultsKey\", void 0);\n        _define_property(this, \"maxStorageItems\", 50);\n        this.messagesKey = `${namespace}-messages`;\n        this.resultsKey = `${namespace}-results`;\n    }\n}\nclass storage_provider_MemoryStorageProvider {\n    async saveMessages(messages) {\n        this.messages = [\n            ...messages\n        ];\n    }\n    async loadMessages() {\n        return [\n            ...this.messages\n        ];\n    }\n    async clearMessages() {\n        this.messages = [];\n        this.results.clear();\n    }\n    async saveResult(id, result) {\n        this.results.set(id, result);\n    }\n    constructor(){\n        _define_property(this, \"messages\", []);\n        _define_property(this, \"results\", new Map());\n    }\n}\nclass storage_provider_NoOpStorageProvider {\n    async saveMessages(_messages) {}\n    async loadMessages() {\n        return [];\n    }\n    async clearMessages() {}\n    async saveResult(_id, _result) {}\n}\nvar storage_provider_StorageType = /*#__PURE__*/ function(StorageType) {\n    StorageType[\"INDEXEDDB\"] = \"indexeddb\";\n    StorageType[\"LOCALSTORAGE\"] = \"localStorage\";\n    StorageType[\"MEMORY\"] = \"memory\";\n    StorageType[\"NONE\"] = \"none\";\n    return StorageType;\n}({});\nfunction createStorageProvider() {\n    let type = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : \"indexeddb\", namespace = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 'playground';\n    switch(type){\n        case \"indexeddb\":\n            if ('undefined' != typeof indexedDB) return new IndexedDBStorageProvider(namespace);\n            console.warn('IndexedDB not available, falling back to localStorage');\n            return createStorageProvider(\"localStorage\", namespace);\n        case \"localStorage\":\n            if ('undefined' != typeof localStorage) return new LocalStorageProvider(namespace);\n            console.warn('localStorage not available, falling back to memory storage');\n            return createStorageProvider(\"memory\", namespace);\n        case \"memory\":\n            return new storage_provider_MemoryStorageProvider();\n        case \"none\":\n            return new storage_provider_NoOpStorageProvider();\n        default:\n            throw new Error(`Unknown storage type: ${type}`);\n    }\n}\nfunction detectBestStorageType() {\n    if ('undefined' != typeof indexedDB) try {\n        indexedDB.open('test', 1).onerror = ()=>{};\n        return \"indexeddb\";\n    } catch (e) {}\n    if ('undefined' != typeof localStorage) try {\n        localStorage.setItem('test', 'test');\n        localStorage.removeItem('test');\n        return \"localStorage\";\n    } catch (e) {}\n    return \"memory\";\n}\nexport { MemoryStorageProvider as IndexedDBMemoryStorageProvider, NoOpStorageProvider as IndexedDBNoOpStorageProvider, IndexedDBStorageProvider, LocalStorageProvider, storage_provider_MemoryStorageProvider as MemoryStorageProvider, storage_provider_NoOpStorageProvider as NoOpStorageProvider, storage_provider_StorageType as StorageType, createStorageProvider, detectBestStorageType };\n","import { IndexedDBManager, createCleanupFunction, withErrorHandling } from \"@sqai/shared/baseDB\";\nfunction _define_property(obj, key, value) {\n    if (key in obj) Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n    });\n    else obj[key] = value;\n    return obj;\n}\nconst DB_NAME = 'midscene_playground';\nconst DB_VERSION = 1;\nconst MESSAGES_STORE = 'playground_messages';\nconst RESULTS_STORE = 'playground_results';\nconst MAX_STORED_MESSAGES = 100;\nconst MAX_STORED_RESULTS = 50;\nclass IndexedDBStorageProvider {\n    async saveMessages(messages) {\n        await withErrorHandling(async ()=>{\n            await this.dbManager.clear(MESSAGES_STORE);\n            const messagesToSave = messages.slice(-MAX_STORED_MESSAGES);\n            await Promise.all(messagesToSave.map((msg, index)=>{\n                const lightMessage = {\n                    ...msg,\n                    result: void 0\n                };\n                const data = {\n                    id: msg.id || `msg-${index}`,\n                    data: lightMessage,\n                    timestamp: msg.timestamp ? msg.timestamp.getTime() : Date.now() + index\n                };\n                return this.dbManager.put(MESSAGES_STORE, data);\n            }));\n        }, 'Failed to save messages to IndexedDB', void 0, this.messagesCleanup);\n    }\n    async loadMessages() {\n        const result = await withErrorHandling(async ()=>{\n            const messages = await this.dbManager.getAll(MESSAGES_STORE, true);\n            if (0 === messages.length) return [];\n            return Promise.all(messages.map(async (msg)=>{\n                const item = msg.data;\n                const restoredItem = {\n                    ...item,\n                    timestamp: new Date(item.timestamp)\n                };\n                if ('result' === item.type && item.id) {\n                    const fullResult = await this.loadResult(item.id);\n                    if (fullResult) {\n                        restoredItem.result = fullResult.result;\n                        restoredItem.replayScriptsInfo = fullResult.replayScriptsInfo;\n                        restoredItem.replayCounter = fullResult.replayCounter;\n                        restoredItem.verticalMode = fullResult.verticalMode;\n                    }\n                }\n                return restoredItem;\n            }));\n        }, 'Failed to load messages from IndexedDB', [], this.messagesCleanup);\n        return result || [];\n    }\n    async clearMessages() {\n        await withErrorHandling(async ()=>{\n            await Promise.all([\n                this.dbManager.clear(MESSAGES_STORE),\n                this.dbManager.clear(RESULTS_STORE)\n            ]);\n        }, 'Failed to clear messages from IndexedDB');\n    }\n    async saveResult(id, result) {\n        await withErrorHandling(async ()=>{\n            const compressedResult = this.compressResultForStorage(result);\n            const data = {\n                id,\n                data: compressedResult,\n                timestamp: Date.now(),\n                size: JSON.stringify(compressedResult).length\n            };\n            await this.dbManager.put(RESULTS_STORE, data);\n        }, 'Failed to save result to IndexedDB', void 0, this.resultsCleanup);\n    }\n    async loadResult(id) {\n        const result = await withErrorHandling(async ()=>{\n            const data = await this.dbManager.get(RESULTS_STORE, id);\n            return (null == data ? void 0 : data.data) || null;\n        }, 'Failed to load result from IndexedDB', null);\n        return result || null;\n    }\n    compressResultForStorage(result) {\n        var _result_result_dump, _result_result;\n        if (!(null == (_result_result = result.result) ? void 0 : null == (_result_result_dump = _result_result.dump) ? void 0 : _result_result_dump.executions)) return result;\n        const compressedExecutions = result.result.dump.executions.map((execution)=>{\n            var _execution_tasks;\n            return {\n                ...execution,\n                tasks: (null == (_execution_tasks = execution.tasks) ? void 0 : _execution_tasks.map((task)=>{\n                    var _task_recorder;\n                    var _this_compressScreenshotIfNeeded;\n                    return {\n                        ...task,\n                        uiContext: task.uiContext ? {\n                            ...task.uiContext,\n                            screenshotBase64: null != (_this_compressScreenshotIfNeeded = this.compressScreenshotIfNeeded(task.uiContext.screenshotBase64)) ? _this_compressScreenshotIfNeeded : task.uiContext.screenshotBase64\n                        } : task.uiContext,\n                        recorder: null == (_task_recorder = task.recorder) ? void 0 : _task_recorder.map((record)=>({\n                                ...record,\n                                screenshot: this.compressScreenshotIfNeeded(record.screenshot)\n                            }))\n                    };\n                })) || []\n            };\n        });\n        return {\n            ...result,\n            result: {\n                ...result.result,\n                dump: {\n                    ...result.result.dump,\n                    executions: compressedExecutions\n                }\n            }\n        };\n    }\n    compressScreenshotIfNeeded(screenshot) {\n        if (!screenshot) return screenshot;\n        if (screenshot.length > 1048576) {\n            const sizeKB = Math.round(screenshot.length / 1024);\n            return `[COMPRESSED: ${sizeKB}KB screenshot removed for storage]`;\n        }\n        return screenshot;\n    }\n    async getStorageStats() {\n        const result = await withErrorHandling(async ()=>{\n            const [messageCount, resultCount] = await Promise.all([\n                this.dbManager.count(MESSAGES_STORE),\n                this.dbManager.count(RESULTS_STORE)\n            ]);\n            return {\n                messageCount,\n                resultCount\n            };\n        }, 'Failed to get storage statistics', {\n            messageCount: 0,\n            resultCount: 0\n        });\n        return result || {\n            messageCount: 0,\n            resultCount: 0\n        };\n    }\n    async cleanup() {\n        await Promise.all([\n            this.messagesCleanup(),\n            this.resultsCleanup()\n        ]);\n    }\n    constructor(namespace = 'playground'){\n        _define_property(this, \"dbManager\", void 0);\n        _define_property(this, \"namespace\", void 0);\n        _define_property(this, \"messagesCleanup\", void 0);\n        _define_property(this, \"resultsCleanup\", void 0);\n        this.namespace = namespace;\n        this.dbManager = new IndexedDBManager(`${DB_NAME}_${namespace}`, DB_VERSION, [\n            {\n                name: MESSAGES_STORE,\n                keyPath: 'id'\n            },\n            {\n                name: RESULTS_STORE,\n                keyPath: 'id'\n            }\n        ]);\n        this.messagesCleanup = createCleanupFunction(this.dbManager, MESSAGES_STORE, MAX_STORED_MESSAGES);\n        this.resultsCleanup = createCleanupFunction(this.dbManager, RESULTS_STORE, MAX_STORED_RESULTS);\n    }\n}\nclass MemoryStorageProvider {\n    async saveMessages(messages) {\n        this.messages = [\n            ...messages\n        ];\n    }\n    async loadMessages() {\n        return [\n            ...this.messages\n        ];\n    }\n    async clearMessages() {\n        this.messages = [];\n        this.results.clear();\n    }\n    async saveResult(id, result) {\n        this.results.set(id, result);\n    }\n    constructor(){\n        _define_property(this, \"messages\", []);\n        _define_property(this, \"results\", new Map());\n    }\n}\nclass NoOpStorageProvider {\n    async saveMessages(_messages) {}\n    async loadMessages() {\n        return [];\n    }\n    async clearMessages() {}\n    async saveResult(_id, _result) {}\n}\nexport { IndexedDBStorageProvider, MemoryStorageProvider, NoOpStorageProvider };\n","import { overrideAIConfig } from \"@sqai/shared/env\";\nimport { message } from \"antd\";\nfunction safeOverrideAIConfig(newConfig) {\n    let extendMode = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : false, showErrorMessage = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : true;\n    try {\n        overrideAIConfig(newConfig, extendMode);\n        return true;\n    } catch (error) {\n        const err = error instanceof Error ? error : new Error(String(error));\n        console.error('Failed to override AI config:', err);\n        if (showErrorMessage) message.error(`Failed to apply AI configuration: ${err.message}`);\n        return false;\n    }\n}\nfunction useSafeOverrideAIConfig() {\n    const applyConfig = function(newConfig) {\n        let extendMode = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : false, showErrorMessage = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : true;\n        return safeOverrideAIConfig(newConfig, extendMode, showErrorMessage);\n    };\n    return {\n        applyConfig\n    };\n}\nexport { safeOverrideAIConfig, useSafeOverrideAIConfig };\n","import { create } from \"zustand\";\nvar __webpack_require__ = {};\n(()=>{\n    __webpack_require__.d = (exports, definition)=>{\n        for(var key in definition)if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) Object.defineProperty(exports, key, {\n            enumerable: true,\n            get: definition[key]\n        });\n    };\n})();\n(()=>{\n    __webpack_require__.o = (obj, prop)=>Object.prototype.hasOwnProperty.call(obj, prop);\n})();\n(()=>{\n    __webpack_require__.r = (exports)=>{\n        if ('undefined' != typeof Symbol && Symbol.toStringTag) Object.defineProperty(exports, Symbol.toStringTag, {\n            value: 'Module'\n        });\n        Object.defineProperty(exports, '__esModule', {\n            value: true\n        });\n    };\n})();\nvar external_zustand_namespaceObject = {};\n__webpack_require__.r(external_zustand_namespaceObject);\n__webpack_require__.d(external_zustand_namespaceObject, {\n    create: ()=>create\n});\nconst { create: store_create } = external_zustand_namespaceObject;\nconst AUTO_ZOOM_KEY = 'midscene-auto-zoom';\nconst BACKGROUND_VISIBLE_KEY = 'midscene-background-visible';\nconst ELEMENTS_VISIBLE_KEY = 'midscene-elements-visible';\nconst parseBooleanParam = (value)=>{\n    if (null === value) return;\n    const normalized = value.trim().toLowerCase();\n    if ([\n        '1',\n        'true',\n        'yes',\n        'on'\n    ].includes(normalized)) return true;\n    if ([\n        '0',\n        'false',\n        'no',\n        'off'\n    ].includes(normalized)) return false;\n};\nconst getQueryPreference = (paramName)=>{\n    if ('undefined' == typeof window) return;\n    const searchParams = new URLSearchParams(window.location.search);\n    return parseBooleanParam(searchParams.get(paramName));\n};\nconst useBlackboardPreference = store_create((set)=>{\n    const savedAutoZoom = 'false' !== localStorage.getItem(AUTO_ZOOM_KEY);\n    const savedBackgroundVisible = 'false' !== localStorage.getItem(BACKGROUND_VISIBLE_KEY);\n    const savedElementsVisible = 'false' !== localStorage.getItem(ELEMENTS_VISIBLE_KEY);\n    const autoZoomFromQuery = getQueryPreference('focusOnCursor');\n    const elementsVisibleFromQuery = getQueryPreference('showElementMarkers');\n    return {\n        backgroundVisible: savedBackgroundVisible,\n        elementsVisible: void 0 === elementsVisibleFromQuery ? savedElementsVisible : elementsVisibleFromQuery,\n        autoZoom: void 0 === autoZoomFromQuery ? savedAutoZoom : autoZoomFromQuery,\n        setBackgroundVisible: (visible)=>{\n            set({\n                backgroundVisible: visible\n            });\n            localStorage.setItem(BACKGROUND_VISIBLE_KEY, visible.toString());\n        },\n        setElementsVisible: (visible)=>{\n            set({\n                elementsVisible: visible\n            });\n            localStorage.setItem(ELEMENTS_VISIBLE_KEY, visible.toString());\n        },\n        setAutoZoom: (enabled)=>{\n            set({\n                autoZoom: enabled\n            });\n            localStorage.setItem(AUTO_ZOOM_KEY, enabled.toString());\n        }\n    };\n});\nconst CONFIG_KEY = 'midscene-env-config';\nconst SERVICE_MODE_KEY = 'midscene-service-mode';\nconst TRACKING_ACTIVE_TAB_KEY = 'midscene-tracking-active-tab';\nconst DEEP_THINK_KEY = 'midscene-deep-think';\nconst SCREENSHOT_INCLUDED_KEY = 'midscene-screenshot-included';\nconst DOM_INCLUDED_KEY = 'midscene-dom-included';\nconst getConfigStringFromLocalStorage = ()=>{\n    const configString = localStorage.getItem(CONFIG_KEY);\n    return configString || '';\n};\nconst parseConfig = (configString)=>{\n    const lines = configString.split('\\n');\n    const config = {};\n    lines.forEach((line)=>{\n        const trimmed = line.trim();\n        if (trimmed.startsWith('#')) return;\n        const cleanLine = trimmed.replace(/^export\\s+/i, '').replace(/;$/, '').trim();\n        const match = cleanLine.match(/^(\\w+)=(.*)$/);\n        if (match) {\n            const [, key, value] = match;\n            let parsedValue = value.trim();\n            if (parsedValue.startsWith(\"'\") && parsedValue.endsWith(\"'\") || parsedValue.startsWith('\"') && parsedValue.endsWith('\"')) parsedValue = parsedValue.slice(1, -1);\n            config[key] = parsedValue;\n        }\n    });\n    return config;\n};\nconst useEnvConfig = store_create((set, get)=>{\n    const configString = getConfigStringFromLocalStorage();\n    const config = parseConfig(configString);\n    const ifInExtension = window.location.href.startsWith('chrome-extension');\n    const savedServiceMode = localStorage.getItem(SERVICE_MODE_KEY);\n    const savedForceSameTabNavigation = 'false' !== localStorage.getItem(TRACKING_ACTIVE_TAB_KEY);\n    const savedDeepThink = 'true' === localStorage.getItem(DEEP_THINK_KEY);\n    const savedScreenshotIncluded = 'false' !== localStorage.getItem(SCREENSHOT_INCLUDED_KEY);\n    const savedDomIncluded = localStorage.getItem(DOM_INCLUDED_KEY) || 'false';\n    return {\n        serviceMode: ifInExtension ? 'In-Browser-Extension' : savedServiceMode || 'Server',\n        setServiceMode: (serviceMode)=>{\n            if (ifInExtension) throw new Error('serviceMode cannot be set in extension');\n            set({\n                serviceMode\n            });\n            localStorage.setItem(SERVICE_MODE_KEY, serviceMode);\n        },\n        config,\n        configString,\n        setConfig: (config)=>set({\n                config\n            }),\n        loadConfig: (configString)=>{\n            const config = parseConfig(configString);\n            set({\n                config,\n                configString\n            });\n            localStorage.setItem(CONFIG_KEY, configString);\n        },\n        syncFromStorage: ()=>{\n            const latestConfigString = getConfigStringFromLocalStorage();\n            const latestConfig = parseConfig(latestConfigString);\n            set({\n                config: latestConfig,\n                configString: latestConfigString\n            });\n        },\n        forceSameTabNavigation: savedForceSameTabNavigation,\n        setForceSameTabNavigation: (forceSameTabNavigation)=>{\n            set({\n                forceSameTabNavigation\n            });\n            localStorage.setItem(TRACKING_ACTIVE_TAB_KEY, forceSameTabNavigation.toString());\n        },\n        deepThink: savedDeepThink,\n        setDeepThink: (deepThink)=>{\n            set({\n                deepThink\n            });\n            localStorage.setItem(DEEP_THINK_KEY, deepThink.toString());\n        },\n        screenshotIncluded: savedScreenshotIncluded,\n        setScreenshotIncluded: (screenshotIncluded)=>{\n            set({\n                screenshotIncluded\n            });\n            localStorage.setItem(SCREENSHOT_INCLUDED_KEY, screenshotIncluded.toString());\n        },\n        domIncluded: 'visible-only' === savedDomIncluded ? 'visible-only' : 'true' === savedDomIncluded,\n        setDomIncluded: (domIncluded)=>{\n            set({\n                domIncluded\n            });\n            localStorage.setItem(DOM_INCLUDED_KEY, domIncluded.toString());\n        },\n        popupTab: 'playground',\n        setPopupTab: (tab)=>{\n            set({\n                popupTab: tab\n            });\n        }\n    };\n});\nexport { useBlackboardPreference, useEnvConfig };\n","const elementColor = [\n    '#01204E'\n];\nconst highlightColorForSearchArea = '#028391';\nconst highlightColorForElement = '#fd5907';\nfunction djb2Hash(str) {\n    if (!str) str = 'unnamed';\n    let hash = 5381;\n    for(let i = 0; i < str.length; i++)hash = (hash << 5) + hash + str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction colorForName(name) {\n    const hashNumber = djb2Hash(name);\n    return elementColor[hashNumber % elementColor.length];\n}\nfunction highlightColorForType(type) {\n    if ('searchArea' === type) return highlightColorForSearchArea;\n    return highlightColorForElement;\n}\nfunction globalThemeConfig() {\n    return {\n        token: {\n            colorPrimary: '#2B83FF'\n        },\n        components: {\n            Layout: {\n                headerHeight: 60,\n                headerPadding: '0 30px',\n                headerBg: '#FFF',\n                bodyBg: '#FFF'\n            }\n        }\n    };\n}\nexport { colorForName, globalThemeConfig, highlightColorForType };\n","// getDefaultExport function for compatibility with non-ESM modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};\n","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n  __webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => { def[key] = () => (value[key]) });\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n            Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n        }\n    }\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(\n\t\tObject.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t\t__webpack_require__.f[key](chunkId, promises);\n\t\t\treturn promises;\n\t\t}, [])\n\t);\n};","// This function allow to reference chunks\n__webpack_require__.u = (chunkId) => {\n  // return url for filenames not based on template\n  \n  // return url for filenames based on template\n  return \"static/js/async/\" + chunkId + \".\" + {\"173\": \"d4ba6f65\",\"212\": \"2acfa4d3\",\"329\": \"b7387e1f\",\"364\": \"2e5e7467\",\"544\": \"8ab2d1b7\",\"582\": \"a449dccd\",\"624\": \"341d6f9f\",\"644\": \"2be92586\",\"659\": \"82465281\",\"702\": \"01f33078\",\"920\": \"115aa48e\",\"983\": \"b2530165\",}[chunkId] + \".js\"\n}","__webpack_require__.g = (() => {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\n\nvar dataWebpackPrefix = \"chrome-extension:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function (url, done, key, chunkId) {\n\tif (inProgress[url]) {\n\t\tinProgress[url].push(done);\n\t\treturn;\n\t}\n\tvar script, needAttach;\n\tif (key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor (var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif (s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) {\n\t\t\t\tscript = s;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tif (!script) {\n\t\tneedAttach = true;\n\t\t\n    script = document.createElement('script');\n    \n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\t\n\t\tscript.src = url;\n\t\t\n    \n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function (prev, event) {\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns &&\n\t\t\tdoneFns.forEach(function (fn) {\n\t\t\t\treturn fn(event);\n\t\t\t});\n\t\tif (prev) return prev(event);\n\t};\n\tvar timeout = setTimeout(\n\t\tonScriptComplete.bind(null, undefined, {\n\t\t\ttype: 'timeout',\n\t\t\ttarget: script\n\t\t}),\n\t\t120000\n\t);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n  module.paths = [];\n  if (!module.children) module.children = [];\n  return module;\n};","__webpack_require__.nc = undefined;","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif (chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor (var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--)\n\t\t\tdeferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif (\n\t\t\t\t(priority & (1 === 0) || notFulfilled >= priority) &&\n\t\t\t\tObject.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))\n\t\t\t) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif (priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif (fulfilled) {\n\t\t\tdeferred.splice(i--, 1);\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};\n","__webpack_require__.p = \"/\";","__webpack_require__.rv = () => (\"1.3.12\")","__webpack_require__.b = document.baseURI || self.location.href;\n\n      // object to store loaded and loading chunks\n      // undefined = chunk not loaded, null = chunk preloaded/prefetched\n      // [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\n      var installedChunks = {\"980\": 0,};\n      \n        __webpack_require__.f.j = function (chunkId, promises) {\n          // JSONP chunk loading for javascript\nvar installedChunkData = __webpack_require__.o(installedChunks, chunkId)\n\t? installedChunks[chunkId]\n\t: undefined;\nif (installedChunkData !== 0) {\n\t// 0 means \"already installed\".\n\n\t// a Promise means \"currently loading\".\n\tif (installedChunkData) {\n\t\tpromises.push(installedChunkData[2]);\n\t} else {\n\t\tif (true) {\n\t\t\t// setup Promise in chunk cache\n\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\tpromises.push((installedChunkData[2] = promise));\n\n\t\t\t// start chunk loading\n\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\tvar error = new Error();\n\t\t\tvar loadingEnded = function (event) {\n\t\t\t\tif (__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\tif (installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\tif (installedChunkData) {\n\t\t\t\t\t\tvar errorType =\n\t\t\t\t\t\t\tevent && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\terror.message =\n\t\t\t\t\t\t\t'Loading chunk ' +\n\t\t\t\t\t\t\tchunkId +\n\t\t\t\t\t\t\t' failed.\\n(' +\n\t\t\t\t\t\t\terrorType +\n\t\t\t\t\t\t\t': ' +\n\t\t\t\t\t\t\trealSrc +\n\t\t\t\t\t\t\t')';\n\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t} \n\t}\n}\n\n        }\n        __webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif (chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor (moduleId in moreModules) {\n\t\t\tif (__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif (runtime) var result = runtime(__webpack_require__);\n\t}\n\tif (parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor (; i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif (\n\t\t\t__webpack_require__.o(installedChunks, chunkId) &&\n\t\t\tinstalledChunks[chunkId]\n\t\t) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkchrome_extension\"] = self[\"webpackChunkchrome_extension\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));\n","__webpack_require__.ruid = \"bundler=rspack@1.3.12\";\n"],"names":["BrowserExtensionPlayground","param","getAgent","showContextPreview","dryMode","extensionVersion","getExtensionVersion","forceSameTabNavigation","useEnvConfig","state","config","runEnabled","Object","storage","useMemo","bestStorageType","detectBestStorageType","console","createStorageProvider","agentInfoRef","useRef","detachAllDebuggers","target","chrome","e","cleanupAgent","useCallback","agent","_agent_page","error","playgroundSDK","Error","newSdk","PlaygroundSDK","contextProvider","useEffect","UniversalPlayground","props","i","Math","Array","n","JSON","TypeError","_","WeakMap","WeakSet","Promise","setTimeout","Set","fetch","window","document","Date","t","BridgeConnector","status","connectLoop","resolve","activeBridgePage","ExtensionBridgePageBrowserSide","_this_activeBridgePage","onMessage","onStatusChange","BRIDGE_MESSAGES_STORE","bridgeDbManager","IndexedDBManager","getBridgeMsgsFromStorage","withErrorHandling","messages","msg","storeBridgeMsgsToStorage","messageList","msgs","item","index","data","clearStoredBridgeMessages","iconForStatus","CheckOutlined","WarningOutlined","CloseOutlined","ClockCircleOutlined","LogoutOutlined","ArrowRightOutlined","MinusOutlined","AUTO_CONNECT_STORAGE_KEY","Bridge","statusIcon","statusTip","statusBtn","bridgeStatus","setBridgeStatus","useState","setMessageList","showScrollToBottomButton","setShowScrollToBottomButton","autoConnect","setAutoConnect","saved","localStorage","messageListRef","connectionStatusMessageId","loadMessages","lastStatusMessage","lastContent","appendBridgeMessage","content","prev","dayjs","newMessage","bridgeConnectorRef","message","type","startConnection","_bridgeConnectorRef_current","stopConnection","checkIfScrolledToBottom","scrollTop","scrollHeight","clientHeight","container","Button","Spin","LoadingOutlined","ClearOutlined","ApiOutlined","List","ArrowDownOutlined","AutoConnectIcon","Switch","checked","String","PlayIcon","SESSIONS_STORE","CONFIG_STORE","dbManager","reject","request","indexedDB","event","db","sessionsStore","operation","fallback","promiseExecutor","timeoutMs","timeoutId","value","clearTimeout","reason","transaction","store","sessions","a","b","id","session","sessionId","MAX_SESSIONS","s","updates","existingSession","result","undefined","newConfig","isRecording","events","isGloballyInitialized","globalInitPromise","initializeDB","create","Z","set","visible","loadSessionsFromStorage","loadCurrentSessionIdFromStorage","saveCurrentSessionIdToStorage","loadRecordingStateFromStorage","saveRecordingStateToStorage","useRecordingSessionStore","get","currentState","currentSessionId","recordLogger","sessionInMemory","updatedSession","loadEventsFromStorage","mergeEvents","oldEvents","newEvents","mergedEventsMap","Map","mergedArray","saveEventsToStorage","existingEvents","combinedEvents","clearEventsFromStorage","useRecordStore","recording","eventsToSave","u","navigator","descriptionCache","boxedScreenshotCache","cacheKeyOrder","ongoingDescriptionRequests","pendingCallbacks","debounceTimeouts","addToCache","cache","key","existingIndex","oldestKey","clearDescriptionCache","timeout","generateFallbackDescription","hasValidRect","_event_elementRect","_event_elementRect1","_event_elementRect2","_event_elementRect3","_event_elementRect4","_event_elementRect5","Boolean","generateAIDescription","hashId","describeWithRetry","insight","rect","lastError","maxRetries","attempt","modelConfig","globalModelConfigManager","err","res","descriptionPromise","mockContext","Insight","description","fallbackDescription","generateBoxedImage","elementsPositionInfo","boxedImageBase64","compositeElementInfoImg","optimizeEvent","updateCallback","eventWithDescription","handleTestGenerationError","context","eventsCount","extractNavigationAndViewportInfo","navigationEvents","allViewportSizes","generatePlaywrightTestStream","options","navigationInfo","enhancedOptions","coreGeneratePlaywrightTestStream","generateYamlTestStream","generateYamlTestStreamCore","getLatestEvents","currentLiveEvents","sessionEvents","stopRecordingIfActive","onStopRecording","resolveSessionName","defaultName","generateDefaultSessionName","now","dateStr","ms","checkContentScriptInjected","tabId","isChromeExtension","response","safeChromeAPI","isInjected","errorMsg","ensureScriptInjected","currentTab","injectScript","exportEventsToFile","sessionName","dataBlob","Blob","url","URL","link","generateSessionName","getScreenshotsForLLM","maxScreenshots","sortedEvents","screenshots","screenshot","generateRecordTitle","clickEvents","inputEvents","pageTitles","urls","clickDescriptions","inputDescriptions","summary","messageContent","prompt","callAIWithObjectResponse","AIActionType","llmError","cleanupPreviousRecordings","cleanupPromises","tabs","tab","generateDetailedSequentialMindmap","mermaid","sessionIndex","sessionNodeName","currentPage","indentLevel","eventIndex","eventNumber","pageName","cleanPageName","pageIndentation","detailedEventDescription","inputValue","cleanDescription","eventIndentation","generateEventsMarkdownTable","markdown","_session_generatedCode","_session_generatedCode1","_session_generatedCode2","_session_generatedCode3","page","screenshotBefore","screenshotAfter","action","base64ToBlob","base64","mimeType","byteCharacters","atob","byteNumbers","Uint8Array","exportAllEventsToZip","zip","JSZip","sessionsWithEvents","imagesFolder","fileName","blob","markdownContent","aiMindmap","combinedContent","zipBlob","timestamp","saveAs","Text","Typography","ThinkingProcessSection","accumulatedThinking","isStreaming","actualCode","themeColor","showThinking","setShowThinking","hasThinking","contentRef","DownOutlined","triggerConfetti","defaults","fire","particleRatio","opts","confetti","count","CodeBlockContainer","language","code","Highlight","CodeBlock","streamingContent","stepDisplay","displayContent","hasContent","wasStreamingRef","StepList","steps","completedSteps","slidingOutSteps","getStepIcon","getStepColor","step","filteredSteps","ShinyText","ProgressModal","isFromStopRecording","selectedType","setSelectedType","defaultType","setDefaultType","stored","setCompletedSteps","setSlidingOutSteps","isGenerating","setIsGenerating","generatedTest","setGeneratedTest","generatedYaml","setGeneratedYaml","setSteps","showGeneratedCode","setShowGeneratedCode","setIsStreaming","setStreamingContent","thinkingProcess","setThinkingProcess","setActualCode","setAccumulatedThinking","updateSession","updateDefaultType","newType","getCurrentSession","getCurrentEvents","handleGenerateCode","updateProgressStep","stepIndex","prevSteps","defaultModelConfig","generateSessionTitleAndDescription","finalEvents","currentSessionName","title","generateElementDescriptions","eventsNeedingDescriptions","completedCount","optimizePromises","progress","createStreamingChunkHandler","targetType","chunk","thinking","finalCode","_getCurrentSession","handleCodeGeneration","currentEvents","progressSteps","generatedCode","streamingResult","currentStep","handleRegenerateTest","handleRegenerateYaml","newSet","handleSelectChange","codeTypeOptions","CodeOutlined","FileTextOutlined","thirdStepStarted","Select","option","Tooltip","PushpinFilled","PushpinOutlined","CopyOutlined","ReloadOutlined","DownloadOutlined","downloadSessionName","CheckCircleOutlined","RecordDetail","onBack","onStartRecording","onClearEvents","onClose","setTab","setIsFromStopRecording","Alert","ArrowLeftOutlined","handleStopRecording","handleTabChange","newTab","ControlOutlined","RightOutlined","Empty","RecordTimeline","PlayCircleOutlined","RecordList","onEditSession","onDeleteSession","onExportSession","onExportAllEvents","onViewDetail","isExtensionMode","handleCreateNewSession","runButtonEnabled","hasEventsToExport","EnvConfigReminder","EditOutlined","Popconfirm","DeleteOutlined","PlusOutlined","SessionModals","isEditModalVisible","setIsEditModalVisible","onUpdateSession","editForm","setEditingSession","Modal","Form","Input","Space","useLifecycleCleanup","stopRecording","setIsRecording","emergencySaveEvents","handleVisibilityChange","handleBeforeUnload","useRecordingControl","createNewSession","addEvent","updateEvent","clearEvents","setEvents","recordContainerRef","persistEventToSession","updatedEvents","_error_message","duration","updateData","hideLoadingMessage","handleTabUpdate","changeInfo","startRecording","sessionToUse","specificSession","exportEvents","currentSession","smoothScrollToBottom","targetScrollTop","requestAnimationFrame","port","reconnectTimer","eventBuffer","isConnected","connectToServiceWorker","_port_onDisconnect","processEventData","eventData","element","cleanEventData","handleMessage","eventsData","mergedEvents","optimizedEvent","useRecordingSession","addSession","deleteSession","setCurrentSession","name","newSession","handleCreateSession","values","handleUpdateSession","_updates_events","handleDeleteSession","isCurrentSession","handleSelectSession","handleExportSession","handleExportAllEvents","hideLoading","useTabMonitoring","setCurrentTab","navigationState","setNavigationState","saveRecordingStateBeforeNavigation","checkRecordingRecovery","timeSinceNavigation","updateCurrentTab","handleTabActivated","activeInfo","handleTabUpdated","recoveryInfo","handleWindowFocusChanged","windowId","Recorder","isStoreInitialized","setIsStoreInitialized","sessionStore","recordStore","isMounted","initializeStores","viewMode","setViewMode","editingSession","sessionHooks","handleUpdateSessionWrapper","handleViewDetail","handleBackToList","extensionAgentForTab","ChromeExtensionProxyPageAgent","ChromeExtensionProxyPage","STORAGE_KEY","PlaygroundPopup","setPopupTab","currentMode","setCurrentMode","savedMode","OPENAI_API_KEY","safeOverrideAIConfig","menuItems","SendOutlined","VideoCameraOutlined","ConfigProvider","globalThemeConfig","Dropdown","MenuOutlined","NavActions","renderContent","configReady","queryInfo","callback","connectInfo","injection","rootEl","root","ReactDOM","App","_chrome_runtime_getManifest","p","g","h","A","m","Number","r","encodeURIComponent","setInterval","clearInterval","d","T","Image","arguments","performance","MediaRecorder","c","l","Symbol","f","DOMException","URLSearchParams","globalThis","Function","self"],"mappings":"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"}