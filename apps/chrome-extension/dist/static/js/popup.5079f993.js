/*! For license information please see popup.5079f993.js.LICENSE.txt */
(()=>{"use strict";var e={36970:function(e,t,r){r(31549),r(44194),r(209),r(23627),r(28977),r(46320),r(43371);var n=r(93923),o=r(40032);(0,n.v4)("web:parse-context"),r(54843),r(75044),r(67833),r(61008),r(28681),(0,n.v4)("web:page"),r(62209),r(90717),r(52089),new(r(66354)).bq("midscene_bridge",1,[{name:"bridge_messages",keyPath:"id"}]),r(8763);var i=r(62858),s=r(10976),a=r(72513);let l="recording-sessions",c="config",d=new class{async init(){if(!this.isInitialized||!this.isHealthy){if(this.initPromise)return this.initPromise;this.initPromise=this._doInit();try{await this.initPromise,this.isInitialized=!0,this.isHealthy=!0}catch(e){throw this.initPromise=null,this.isHealthy=!1,e}}}async healthCheck(){if(!this.db||!this.isInitialized)return!1;try{return await this.getConfig(),this.isHealthy=!0,!0}catch(e){return console.warn("IndexedDB health check failed:",e),this.isHealthy=!1,!1}}async _doInit(){return new Promise((e,t)=>{let r=indexedDB.open("midscene-recorder",2);r.onerror=()=>{console.error("IndexedDB open error:",r.error),t(r.error)},r.onsuccess=()=>{this.db=r.result,this.db.onerror=e=>{console.error("IndexedDB error:",e)},e()},r.onupgradeneeded=e=>{let t=e.target.result;if(!t.objectStoreNames.contains(l)){let e=t.createObjectStore(l,{keyPath:"id"});e.createIndex("createdAt","createdAt",{unique:!1}),e.createIndex("updatedAt","updatedAt",{unique:!1})}t.objectStoreNames.contains(c)||t.createObjectStore(c,{keyPath:"key"})}})}async ensureDB(){if(await this.init(),!this.db||!this.isInitialized||!this.isHealthy)throw Error("Database not initialized or unhealthy. Call init() first.");return this.db}async safeDBOperation(e,t){try{if(!this.isHealthy&&!await this.healthCheck())throw Error("Database is unhealthy");return await e()}catch(e){return console.error("Database operation failed:",e),this.isHealthy=!1,t}}createTimeoutPromise(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;return new Promise((r,n)=>{let o=setTimeout(()=>{n(Error(`IndexedDB operation timeout after ${t}ms`))},t);try{e(e=>{clearTimeout(o),r(e)},e=>{clearTimeout(o),n(e)})}catch(e){clearTimeout(o),n(e)}})}async getAllSessions(){return this.safeDBOperation(async()=>{let e=await this.ensureDB();return this.createTimeoutPromise((t,r)=>{let n=e.transaction([l],"readonly");n.onerror=()=>{console.error("Transaction error in getAllSessions:",n.error),r(n.error)},n.onabort=()=>{console.error("Transaction aborted in getAllSessions"),r(Error("Transaction aborted"))};let o=n.objectStore(l).index("updatedAt").getAll();o.onsuccess=()=>{try{let e=o.result.sort((e,t)=>t.updatedAt-e.updatedAt);t(e)}catch(e){r(e)}},o.onerror=()=>{console.error("Request error in getAllSessions:",o.error),r(o.error)}})},[])}async getSession(e){return this.safeDBOperation(async()=>{let t=await this.ensureDB();return this.createTimeoutPromise((r,n)=>{let o=t.transaction([l],"readonly");o.onerror=()=>{console.error("Transaction error in getSession:",o.error),n(o.error)},o.onabort=()=>{console.error("Transaction aborted in getSession"),n(Error("Transaction aborted"))};let i=o.objectStore(l).get(e);i.onsuccess=()=>r(i.result||null),i.onerror=()=>{console.error("Request error in getSession:",i.error),n(i.error)}})},null)}async addSession(e){let t=await this.ensureDB(),r=await this.getAllSessions();if(r.length>=5)for(let e of r.slice(4).map(e=>e.id))await this.deleteSession(e);return new Promise((r,n)=>{let o=t.transaction([l],"readwrite").objectStore(l).add(e);o.onsuccess=()=>r(),o.onerror=()=>n(o.error)})}async updateSession(e,t){let r=await this.ensureDB(),n=await this.getSession(e);return n?n={...n,...t,updatedAt:Date.now()}:(console.warn(`Session ${e} not found, creating new session with updates`),n={id:e,name:`Session ${new Date().toLocaleString()}`,createdAt:Date.now(),updatedAt:Date.now(),events:[],status:"idle",...t}),new Promise((e,t)=>{let o=r.transaction([l],"readwrite").objectStore(l).put(n);o.onsuccess=()=>e(),o.onerror=()=>t(o.error)})}async deleteSession(e){try{let t=await this.ensureDB();return new Promise((r,n)=>{setTimeout(()=>{let o=t.transaction([l],"readwrite").objectStore(l).delete(e);o.onsuccess=()=>{r()},o.onerror=()=>{n(o.error)}},300)})}catch(e){console.error("Failed to delete session:",e)}}async getConfig(){try{let e=await this.ensureDB();return new Promise((t,r)=>{let n=e.transaction([c],"readonly").objectStore(c).get("config");n.onsuccess=()=>{let e=n.result;t((null==e?void 0:e.value)||{currentSessionId:null,isRecording:!1,wasRecordingBeforeNavigation:!1,lastRecordingTabId:void 0,lastRecordingUrl:void 0,lastRecordingSessionId:void 0,lastNavigationTime:void 0})},n.onerror=()=>r(n.error)})}catch(e){return console.error("Failed to get config:",e),{currentSessionId:null,isRecording:!1,wasRecordingBeforeNavigation:!1,lastRecordingTabId:void 0,lastRecordingUrl:void 0,lastRecordingSessionId:void 0,lastNavigationTime:void 0}}}async setConfig(e){try{let t=await this.ensureDB(),r={...await this.getConfig(),...e};return new Promise((e,n)=>{let o=t.transaction([c],"readwrite").objectStore(c).put({key:"config",value:r});o.onsuccess=()=>e(),o.onerror=()=>n(o.error)})}catch(e){console.error("Failed to set config:",e)}}async getCurrentSessionId(){return(await this.getConfig()).currentSessionId}async setCurrentSessionId(e){await this.setConfig({currentSessionId:e})}async getRecordingState(){return(await this.getConfig()).isRecording}async setRecordingState(e){await this.setConfig({isRecording:e})}async clearNavigationRecoveryState(){await this.setConfig({wasRecordingBeforeNavigation:!1,lastRecordingTabId:void 0,lastRecordingUrl:void 0,lastRecordingSessionId:void 0,lastNavigationTime:void 0})}async getRecordingEvents(){return this.safeDBOperation(async()=>{let e=await this.ensureDB();return this.createTimeoutPromise((t,r)=>{let n=e.transaction([c],"readonly");n.onerror=()=>{console.error("Transaction error in getRecordingEvents:",n.error),r(n.error)};let o=n.objectStore(c).get("recording-events");o.onsuccess=()=>{let e=o.result;t((null==e?void 0:e.value)||[])},o.onerror=()=>{console.error("Request error in getRecordingEvents:",o.error),r(o.error)}})},[])}async setRecordingEvents(e){try{let t=await this.ensureDB();return this.createTimeoutPromise((r,n)=>{let o=t.transaction([c],"readwrite");o.onerror=()=>{console.error("Transaction error in setRecordingEvents:",o.error),n(o.error)},o.onabort=()=>{console.error("Transaction aborted in setRecordingEvents"),n(Error("Transaction aborted"))};let i=o.objectStore(c).put({key:"recording-events",value:e});i.onsuccess=()=>r(),i.onerror=()=>{console.error("Request error in setRecordingEvents:",i.error),n(i.error)}},5e3)}catch(e){console.error("Failed to set recording events:",e)}}async emergencySetRecordingEvents(e){try{let t=await this.ensureDB();return this.createTimeoutPromise((r,n)=>{let o=t.transaction([c],"readwrite");o.oncomplete=()=>r(),o.onerror=()=>n(o.error),o.onabort=()=>n(Error("Transaction aborted"));let i=o.objectStore(c).put({key:"recording-events",value:e});i.onerror=()=>n(i.error)},2e3)}catch(e){console.error("Failed to emergency save recording events:",e)}}async clearRecordingEvents(){try{let e=await this.ensureDB();return new Promise((t,r)=>{let n=e.transaction([c],"readwrite").objectStore(c).delete("recording-events");n.onsuccess=()=>t(),n.onerror=()=>r(n.error)})}catch(e){console.error("Failed to clear recording events:",e)}}constructor(){(0,a._)(this,"db",null),(0,a._)(this,"initPromise",null),(0,a._)(this,"isInitialized",!1),(0,a._)(this,"isHealthy",!0)}},u=!1,h=null,g=async()=>{if(!u)return h||(h=(async()=>{try{await d.init(),u||(u=!0)}catch(e){throw h=null,console.error("Failed to initialize IndexedDB:",e),e}})())},{Ue:m}=i;m(e=>({markerVisible:!0,elementsVisible:!0,setMarkerVisible:t=>{e({markerVisible:t})},setTextsVisible:t=>{e({elementsVisible:t})}}));let p=async()=>{try{return await d.getAllSessions()}catch(e){return console.error("Failed to load sessions from IndexedDB:",e),[]}},f=async()=>{try{return await d.getCurrentSessionId()}catch(e){return console.error("Failed to load current session ID from IndexedDB:",e),null}},y=async e=>{try{await d.setCurrentSessionId(e)}catch(e){console.error("Failed to save current session ID to IndexedDB:",e)}},v=async()=>{try{return await d.getRecordingState()}catch(e){return console.error("Failed to load recording state from IndexedDB:",e),!1}},w=async e=>{try{await d.setRecordingState(e)}catch(e){console.error("Failed to save recording state to IndexedDB:",e)}},b=m((e,t)=>({sessions:[],currentSessionId:null,isInitialized:!1,initializeStore:async()=>{if(!t().isInitialized)try{await g();let[t,r]=await Promise.all([p(),f()]);e({sessions:t,currentSessionId:r,isInitialized:!0})}catch(t){console.error("Failed to initialize recording session store:",t),e({isInitialized:!0})}},addSession:async t=>{try{await d.addSession(t);let r=await d.getAllSessions();e({sessions:r})}catch(e){console.error("Failed to add session:",e)}},updateSession:async(r,n)=>{try{s.B.info("Updating session",{sessionId:r,updates:n}),await d.updateSession(r,n);let t=await d.getAllSessions();e({sessions:t})}catch(s){console.error("Failed to update session:",s);let{sessions:o}=t(),i=o.find(e=>e.id===r);if(i){let t={...i,...n,updatedAt:Date.now()};e({sessions:o.map(e=>e.id===r?t:e)})}}},deleteSession:async t=>{try{await d.deleteSession(t);let r=await d.getAllSessions();e({sessions:r})}catch(e){console.error("Failed to delete session:",e)}},setCurrentSession:async t=>{try{await y(t),e({currentSessionId:t})}catch(e){console.error("Failed to set current session:",e)}},getCurrentSession:()=>{let e=t();return e.sessions.find(t=>t.id===e.currentSessionId)||null}})),S=async()=>{try{return await d.getRecordingEvents()}catch(e){return console.error("Failed to load events from IndexedDB:",e),[]}};function _(e,t){let r=new Map;for(let t of e)t.hashId&&r.set(t.hashId,t);for(let e of t)e.hashId&&r.set(e.hashId,e);let n=Array.from(r.values());return n.sort((e,t)=>(e.timestamp||0)-(t.timestamp||0)),n}let I=async e=>{try{let t=await d.getRecordingEvents(),r=_(t,e);await d.setRecordingEvents(r)}catch(e){console.error("Failed to save events to IndexedDB:",e)}},k=async()=>{try{await d.clearRecordingEvents()}catch(e){console.error("Failed to clear events from IndexedDB:",e)}};m((e,t)=>({isRecording:!1,events:[],isInitialized:!1,initialize:async()=>{if(!t().isInitialized)try{await g();let t=await v(),r=t?await S():[];e({isRecording:t,events:r,isInitialized:!0})}catch(t){console.error("Failed to initialize record store:",t),e({isInitialized:!0})}},setIsRecording:async t=>{try{await w(t),e({isRecording:t}),t||await k()}catch(e){console.error("Failed to set recording state:",e)}},addEvent:async r=>{let n=t(),o=[...n.events,r];if(e({events:o}),n.isRecording){let e=b.getState().currentSessionId;e&&await d.updateSession(e,{events:o,updatedAt:Date.now()}),await I(o)}},updateEvent:async r=>{let n=t(),o=_(n.events,[r]);if(e({events:o}),n.isRecording){let e=b.getState().currentSessionId;e&&await d.updateSession(e,{events:o,updatedAt:Date.now()})}},setEvents:async r=>{let n=t(),o=_(n.events,r);if(e({events:o}),s.B.info("Setting events",{events:o,newEvents:o,eventsCount:o.length}),n.isRecording){let e=b.getState().currentSessionId;e&&await d.updateSession(e,{events:o,updatedAt:Date.now()})}},clearEvents:async()=>{await k();let t=b.getState().currentSessionId;t&&(b.getState().sessions.find(e=>e.id===t),await d.updateSession(t,{events:[],updatedAt:Date.now(),generatedCode:void 0})),e({events:[]})},emergencySaveEvents:async e=>{let r=t(),n=e||r.events;if(n.length>0)try{await d.emergencySetRecordingEvents(n)}catch(e){console.error("Emergency save failed:",e)}}})),r(28721),r(81615);var T=r(84756);r(9962),r(49397);let{Text:E}=T.Z;r(745),r(15684),r(12887),r(43412);let{Text:A}=T.Z;r(24560),r(27094),r(62816),r(47552);let{Text:D}=T.Z,{Text:R}=T.Z;r(75898),r(10973),r(8681),o.Py},66460:function(e){if("undefined"==typeof sharp){var t=Error("Cannot find module 'sharp'");throw t.code="MODULE_NOT_FOUND",t}e.exports=sharp},62209:function(){},40032:function(e,t,r){r.d(t,{Py:()=>n.P,bs:()=>o.bs});var n=r(70445),o=r(64039);r(4903),r(36835)},15684:function(e,t,r){r.d(t,{xq:()=>o.xq,lK:()=>i.lK,v4:()=>n.v4,gD:()=>a.gD,Az:()=>l.A,Rg:()=>a.Rg,Oq:()=>a.Oq,k8:()=>c.k,Bg:()=>i.Bg,p$:()=>s.p});var n=r(94156);r(80686);var o=r(14626),i=r(62003),s=r(18196),a=r(39365),l=r(9373),c=r(65174)},94156:function(e,t,r){r.d(t,{V2:()=>k,v4:()=>I});var n=r(29317),o=r(21437),i=r(93096),s=r(11260),a=r(67693),l=r(32661),c=r(54843),d=r(93923),u=r(46320),h=r(25626),g=r(27736),m=r(17374),p=r(27641),f=r(39365),y=r(30725),v=r(80686),w=r(9019);async function b({AIActionTypeValue:e,modelConfig:t}){let n,c,{socksProxy:g,httpProxy:f,modelName:y,openaiBaseURL:v,openaiApiKey:w,openaiExtraConfig:b,openaiUseAzureDeprecated:S,useAzureOpenai:_,azureOpenaiScope:I,azureOpenaiKey:k,azureOpenaiEndpoint:T,azureOpenaiApiVersion:E,azureOpenaiDeployment:A,azureExtraConfig:D,useAnthropicSdk:R,anthropicApiKey:O,modelDescription:P,uiTarsModelVersion:B,vlMode:j}=t,x=(0,d.v4)("ai:call:proxy");if(f?(x("using http proxy",f),c=new h.HttpsProxyAgent(f)):g&&(x("using socks proxy",g),c=new p.SocksProxyAgent(g)),S)n=new m.r3({baseURL:v,apiKey:w,httpAgent:c,...b,dangerouslyAllowBrowser:!0});else if(_){let e;if(I){(0,u.hu)(!u.gn,"Azure OpenAI is not supported in browser with Midscene.");let t=new i.y;e=(0,s.r)(t,I),n=new m.r3({azureADTokenProvider:e,endpoint:T,apiVersion:E,deployment:A,...b,...D})}else n=new m.r3({apiKey:k,endpoint:T,apiVersion:E,deployment:A,dangerouslyAllowBrowser:!0,...b,...D})}else R||(n=new m.ZP({baseURL:v,apiKey:w,httpAgent:c,...b,defaultHeaders:{...(null==b?void 0:b.defaultHeaders)||{},[a.mH]:e.toString()},dangerouslyAllowBrowser:!0}));if(n&&l.e4.getEnvConfigInBoolean(a.Uj)){if(u.gn)throw Error("langsmith is not supported in browser");console.log("DEBUGGING MODE: langsmith wrapper enabled");let{wrapOpenAI:e}=await Promise.all([r.e("659"),r.e("920")]).then(r.bind(r,97733));n=e(n)}if(void 0!==n)return{completion:n.chat.completions,style:"openai",modelName:y,modelDescription:P,uiTarsVersion:B,vlMode:j};if(R&&(n=new o.YU({apiKey:O,httpAgent:c,dangerouslyAllowBrowser:!0})),void 0!==n&&n.messages)return{completion:n.messages,style:"anthropic",modelName:y,modelDescription:P,uiTarsVersion:B,vlMode:j};throw Error("Openai SDK or Anthropic SDK is not initialized")}async function S(e,t,r,n){let o,i,s,{completion:h,style:g,modelName:m,modelDescription:p,uiTarsVersion:f,vlMode:y}=await b({AIActionTypeValue:t,modelConfig:r}),v=_(m,t),w=l.e4.getEnvConfigValue(a.QA),S=(0,d.v4)("ai:call"),I=(0,d.v4)("ai:profile:stats"),k=(0,d.v4)("ai:profile:detail"),T=Date.now(),E=(null==n?void 0:n.stream)&&(null==n?void 0:n.onChunk),A="",D={temperature:.1*("vlm-ui-tars"!==y),stream:!!E,max_tokens:"number"==typeof w?w:Number.parseInt(w||"2048",10),..."qwen-vl"===y||"qwen3-vl"===y?{vl_high_resolution_images:!0}:{}};try{var R,O,P,B,j,x,N,C,q,F,$,M;if("openai"===g){if(S(`sending ${E?"streaming ":""}request to ${m}`),E){for await(let t of(await h.create({model:m,messages:e,response_format:v,...D},{stream:!0}))){let e=(null==(P=t.choices)||null==(O=P[0])||null==(R=O.delta)?void 0:R.content)||"",o=(null==(x=t.choices)||null==(j=x[0])||null==(B=j.delta)?void 0:B.reasoning_content)||"";if(t.usage&&(i=t.usage),e||o){A+=e;let t={content:e,reasoning_content:o,accumulated:A,isComplete:!1,usage:void 0};n.onChunk(t)}if(null==(C=t.choices)||null==(N=C[0])?void 0:N.finish_reason){if(s=Date.now()-T,!i){let e=Math.max(1,Math.floor(A.length/4));i={prompt_tokens:e,completion_tokens:e,total_tokens:2*e}}let e={content:"",accumulated:A,reasoning_content:"",isComplete:!0,usage:{prompt_tokens:i.prompt_tokens??0,completion_tokens:i.completion_tokens??0,total_tokens:i.total_tokens??0,time_cost:s??0,model_name:m,model_description:p,intent:r.intent}};n.onChunk(e);break}}o=A,I(`streaming model, ${m}, mode, ${y||"default"}, cost-ms, ${s}`)}else{let t=await h.create({model:m,messages:e,response_format:v,...D});s=Date.now()-T,I(`model, ${m}, mode, ${y||"default"}, ui-tars-version, ${f}, prompt-tokens, ${(null==(q=t.usage)?void 0:q.prompt_tokens)||""}, completion-tokens, ${(null==(F=t.usage)?void 0:F.completion_tokens)||""}, total-tokens, ${(null==($=t.usage)?void 0:$.total_tokens)||""}, cost-ms, ${s}, requestId, ${t._request_id||""}`),k(`model usage detail: ${JSON.stringify(t.usage)}`),(0,u.hu)(t.choices,`invalid response from LLM service: ${JSON.stringify(t)}`),o=t.choices[0].message.content,i=t.usage}S(`response: ${o}`),(0,u.hu)(o,"empty content")}else if("anthropic"===g){let t=e=>{if("image_url"===e.type){let t=e.image_url.url;(0,u.hu)(t,"image_url is required");let{mimeType:r,body:n}=(0,c.Oq)(e.image_url.url);return{source:{type:"base64",media_type:r,data:n},type:"image"}}return e};if(E){for await(let o of(await h.create({model:m,system:"You are a versatile professional in software UI automation",messages:e.map(e=>({role:"user",content:Array.isArray(e.content)?e.content.map(t):e.content})),response_format:v,...D}))){let e=(null==(M=o.delta)?void 0:M.text)||"";if(e){A+=e;let t={content:e,accumulated:A,reasoning_content:"",isComplete:!1,usage:void 0};n.onChunk(t)}if("message_stop"===o.type){s=Date.now()-T;let e=o.usage,t={content:"",accumulated:A,reasoning_content:"",isComplete:!0,usage:e?{prompt_tokens:e.input_tokens??0,completion_tokens:e.output_tokens??0,total_tokens:(e.input_tokens??0)+(e.output_tokens??0),time_cost:s??0,model_name:m,model_description:p,intent:r.intent}:void 0};n.onChunk(t);break}}o=A}else{let r=await h.create({model:m,system:"You are a versatile professional in software UI automation",messages:e.map(e=>({role:"user",content:Array.isArray(e.content)?e.content.map(t):e.content})),response_format:v,...D});s=Date.now()-T,o=r.content[0].text,i=r.usage}(0,u.hu)(o,"empty content")}if(E&&!i){let e=Math.max(1,Math.floor((o||"").length/4));i={prompt_tokens:e,completion_tokens:e,total_tokens:2*e}}return{content:o||"",usage:i?{prompt_tokens:i.prompt_tokens??0,completion_tokens:i.completion_tokens??0,total_tokens:i.total_tokens??0,time_cost:s??0,model_name:m,model_description:p,intent:r.intent}:void 0,isStreamed:!!E}}catch(e){throw console.error(" call AI error",e),Error(`failed to call ${E?"streaming ":""}AI model service: ${e.message}. Trouble shooting: https://sqai.tech/model-provider.html`,{cause:e})}}let _=(e,t)=>{let r;if(e.includes("gpt-4"))switch(t){case f.jU.ASSERT:r=y.E;break;case f.jU.INSPECT_ELEMENT:r=v.jl;break;case f.jU.PLAN:r=w.xI;break;case f.jU.EXTRACT_DATA:case f.jU.DESCRIBE_ELEMENT:r={type:n.t.JSON};break;case f.jU.TEXT:r=void 0}return"gpt-4o-2024-05-13"===e&&t!==f.jU.TEXT&&(r={type:n.t.JSON}),r};async function I(e,t,r){let n=await S(e,t,r);(0,u.hu)(n,"empty response");let o=r.vlMode;return{content:function(e,t){let r=function(e){try{let t=e.match(/^\s*(\{[\s\S]*\})\s*$/);if(t)return t[1];let r=e.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(r)return r[1];let n=e.match(/\{[\s\S]*\}/);if(n)return n[0]}catch{}return e}(e);if(null==r?void 0:r.match(/\((\d+),(\d+)\)/)){var n;return null==(n=r.match(/\((\d+),(\d+)\)/))?void 0:n.slice(1).map(Number)}try{return JSON.parse(r)}catch{}try{return JSON.parse((0,g.K)(r))}catch(e){}if("doubao-vision"===t||"vlm-ui-tars"===t){let e=function(e){if(e.includes("bbox"))for(;/\d+\s+\d+/.test(e);)e=e.replace(/(\d+)\s+(\d+)/g,"$1,$2");return e}(r);return JSON.parse((0,g.K)(e))}throw Error(`failed to parse json response: ${e}`)}(n.content,o),usage:n.usage}}async function k(e,t,r){let{content:n,usage:o}=await S(e,t,r);return{content:n,usage:o}}},745:function(e,t,r){r.d(t,{LL:()=>n.Z});var n=r(74438);r(61008),r(15684),r(40032)},209:function(e,t,r){var n=r(15684),o=r(70885);async function i(e,t,r={}){if(!(null==e?void 0:e.paramSchema)||!("shape"in e.paramSchema))return[t.prompt||"",r];let s=e.paramSchema,a=s&&"shape"in s?Object.keys(s.shape):[],l={...r};return a.forEach(e=>{void 0!==t[e]&&null!==t[e]&&""!==t[e]&&(l[e]=t[e])}),s&&(0,n.gD)(s).forEach(e=>{let n=t[e];if(n&&"string"==typeof n){let t=(0,o.r7)(n,{deepThink:r.deepThink,cacheable:!0});t&&(l[e]=t)}}),[l]}r(32661),r(46320);var s=r(95882);s.r,s.r},66354:function(e,t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{bq:()=>o});class o{initDB(){return new Promise((e,t)=>{let r=indexedDB.open(this.dbName,this.version);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=e=>{let t=e.target.result;this.storeConfigs.forEach(({name:e,keyPath:r})=>{t.objectStoreNames.contains(e)||t.createObjectStore(e,{keyPath:r}).createIndex("timestamp","timestamp",{unique:!1})})}})}async withTransaction(e,t,r){let n=(await this.dbPromise).transaction(e,t);return r(Array.isArray(e)?e.map(e=>n.objectStore(e)):n.objectStore(e))}promisifyRequest(e){return new Promise((t,r)=>{e.onsuccess=()=>t(e.result),e.onerror=()=>r(e.error)})}async put(e,t){await this.withTransaction(e,"readwrite",async e=>{await this.promisifyRequest(e.put(t))})}async get(e,t){return this.withTransaction(e,"readonly",async e=>this.promisifyRequest(e.get(t)))}async getAll(e,t=!0){return this.withTransaction(e,"readonly",async e=>{let r=t?await this.promisifyRequest(e.index("timestamp").getAll()):await this.promisifyRequest(e.getAll());return t?r.sort((e,t)=>e.timestamp-t.timestamp):r})}async clear(e){await this.withTransaction(e,"readwrite",async e=>{await this.promisifyRequest(e.clear())})}async delete(e,t){await this.withTransaction(e,"readwrite",async e=>{await this.promisifyRequest(e.delete(t))})}async count(e){return this.withTransaction(e,"readonly",async e=>this.promisifyRequest(e.count()))}getDBPromise(){return this.dbPromise}constructor(e,t,r){n(this,"dbPromise",void 0),n(this,"dbName",void 0),n(this,"version",void 0),n(this,"storeConfigs",void 0),this.dbName=e,this.version=t,this.storeConfigs=r,this.dbPromise=this.initDB()}}},31381:function(e,t,r){r.d(t,{Jq:()=>o});var n,o=((n={}).CONTAINER="CONTAINER Node",n.FORM_ITEM="FORM_ITEM Node",n.BUTTON="BUTTON Node",n.A="Anchor Node",n.IMG="IMG Node",n.TEXT="TEXT Node",n.POSITION="POSITION Node",n)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,o){if(1&o&&(n=this(n)),8&o||"object"==typeof n&&n&&(4&o&&n.__esModule||16&o&&"function"==typeof n.then))return n;var i=Object.create(null);r.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&o&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>{s[e]=()=>n[e]});return s.default=()=>n,r.d(i,s),i}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,n)=>(r.f[n](e,t),t),[])),r.u=e=>"static/js/async/"+e+"."+({173:"d4ba6f65",624:"341d6f9f",644:"2be92586",659:"82465281",920:"115aa48e"})[e]+".js",r.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="chrome-extension:";r.l=function(n,o,i,s){if(e[n])return void e[n].push(o);if(void 0!==i)for(var a,l,c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+i){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",t+i),a.src=n),e[n]=[o];var h=function(t,r){a.onerror=a.onload=null,clearTimeout(g);var o=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach(function(e){return e(r)}),t)return t(r)},g=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}})(),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.nc=void 0,(()=>{var e=[];r.O=(t,n,o,i)=>{if(n){i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[n,o,i];return}for(var a=1/0,s=0;s<e.length;s++){for(var[n,o,i]=e[s],l=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(r.O).every(e=>r.O[e](n[c]))?n.splice(c--,1):(l=!1,i<a&&(a=i));if(l){e.splice(s--,1);var d=o();void 0!==d&&(t=d)}}return t}})(),r.p="/",r.rv=()=>"1.3.12",(()=>{r.b=document.baseURI||self.location.href;var e={533:0};r.f.j=function(t,n){var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var i=new Promise((r,n)=>o=e[t]=[r,n]);n.push(o[2]=i);var s=r.p+r.u(t),a=Error();r.l(s,function(n){if(r.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",a.name="ChunkLoadError",a.type=i,a.request=s,o[1](a)}},"chunk-"+t,t)}},r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[s,a,l]=n,c=0;if(s.some(t=>0!==e[t])){for(o in a)r.o(a,o)&&(r.m[o]=a[o]);if(l)var d=l(r)}for(t&&t(n);c<s.length;c++)i=s[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(d)},n=self.webpackChunkchrome_extension=self.webpackChunkchrome_extension||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.ruid="bundler=rspack@1.3.12",r.O(void 0,["126","361","500","229","615"],function(){return r(76762)});var n=r.O(void 0,["126","361","500","229","615"],function(){return r(36970)});n=r.O(n)})();
//# sourceMappingURL=popup.5079f993.js.map